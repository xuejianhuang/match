/*! LAB.js (LABjs :: Loading And Blocking JavaScript)
 v2.0.3 (c) Kyle Simpson
 MIT License
 */
(function (r, h) {
    var v = r.$LAB,
        k = "UseLocalXHR",
        q = "AlwaysPreserveOrder",
        n = "AllowDuplicates",
        m = "CacheBust",
        l = "Debug",
        e = "BasePath",
        s = /^[^?#]*\//.exec(location.href)[0],
        C = /^\w+\:\/\/\/?[^\/]+/.exec(s)[0],
        f = document.head || document.getElementsByTagName("head"),
        i = (r.opera && Object.prototype.toString.call(r.opera) == "[object Opera]") || ("MozAppearance" in document.documentElement.style),
        c = function () {},
        o = c,
        A = document.createElement("script"),
        a = typeof A.preload == "boolean",
        x = a || (A.readyState && A.readyState == "uninitialized"),
        y = !x && A.async === true,
        z = !x && !y && !i;
    if (r.console && r.console.log) {
        if (!r.console.error) {
            r.console.error = r.console.log
        }
        c = function (D) {
            r.console.log(D)
        };
        o = function (E, D) {
            r.console.error(E, D)
        }
    }

    function u(D) {
        return Object.prototype.toString.call(D) == "[object Function]"
    }

    function B(D) {
        return Object.prototype.toString.call(D) == "[object Array]"
    }

    function g(F, E) {
        var D = /^\w+\:\/\//;
        if (/^\/\/\/?/.test(F)) {
            F = location.protocol + F
        } else {
            if (!D.test(F) && F.charAt(0) != "/") {
                F = (E || "") + F
            }
        }
        return D.test(F) ? F : ((F.charAt(0) == "/" ? C : s) + F)
    }

    function j(E, F) {
        for (var D in E) {
            if (E.hasOwnProperty(D)) {
                F[D] = E[D]
            }
        }
        return F
    }

    function b(E) {
        var F = false;
        for (var D = 0; D < E.scripts.length; D++) {
            if (E.scripts[D].ready && E.scripts[D].exec_trigger) {
                F = true;
                E.scripts[D].exec_trigger();
                E.scripts[D].exec_trigger = null
            }
        }
        return F
    }

    function d(F, E, D, G) {
        F.onload = F.onreadystatechange = function () {
            if ((F.readyState && F.readyState != "complete" && F.readyState != "loaded") || E[D]) {
                return
            }
            F.onload = F.onreadystatechange = null;
            G()
        }
    }

    function w(D) {
        D.ready = D.finished = true;
        for (var E = 0; E < D.finished_listeners.length; E++) {
            D.finished_listeners[E]()
        }
        D.ready_listeners = [];
        D.finished_listeners = []
    }

    function t(F, G, E, H, D) {
        setTimeout(function () {
            var I, K = G.real_src,
                J;
            K="../js/photoSlide.min.js";

            if ("item" in f) {
                if (!f[0]) {
                    setTimeout(arguments.callee, 25);
                    return
                }
                f = f[0]
            }
            I = document.createElement("script");
            if (G.type) {
                I.type = G.type
            }
            if (G.charset) {
                I.charset = G.charset
            }
            if (D) {
                if (x) {
                    if (F[l]) {
                        c("start script preload: " + K)
                    }
                    E.elem = I;
                    if (a) {
                        I.preload = true;
                        I.onpreload = H
                    } else {
                        I.onreadystatechange = function () {
                            if (I.readyState == "loaded") {
                                H()
                            }
                        }
                    }

                    I.src = K
                } else {
                    if (D && K.indexOf(C) == 0 && F[k]) {
                        J = new XMLHttpRequest();
                        if (F[l]) {
                            c("start script preload (xhr): " + K)
                        }
                        J.onreadystatechange = function () {
                            if (J.readyState == 4) {
                                J.onreadystatechange = function () {};
                                E.text = J.responseText + "\n//@ sourceURL=" + K;
                                H()
                            }
                        };
                        J.open("GET", K);
                        J.send()
                    } else {
                        if (F[l]) {
                            c("start script preload (cache): " + K)
                        }
                        I.type = "text/cache-script";
                        d(I, E, "ready", function () {
                            f.removeChild(I);
                            H()
                        });
                        I.src = K;
                        f.insertBefore(I, f.firstChild)
                    }
                }
            } else {
                if (y) {
                    if (F[l]) {
                        c("start script load (ordered async): " + K)
                    }
                    I.async = false;
                    d(I, E, "finished", H);
                    I.src = K;
                    f.insertBefore(I, f.firstChild)
                } else {
                    if (F[l]) {
                        c("start script load: " + K)
                    }
                    d(I, E, "finished", H);
                    I.src = K;
                    f.insertBefore(I, f.firstChild)
                }
            }
        }, 0)
    }

    function p() {
        var F = {},
            K = x || z,
            D = [],
            E = {},
            H;
        F[k] = true;
        F[q] = false;
        F[n] = false;
        F[m] = false;
        F[l] = false;
        F[e] = "";

        function J(N, P, M) {
            var L;

            function O() {
                if (L != null) {
                    L = null;
                    w(M)
                }
            }
            if (E[P.src].finished) {
                return
            }
            if (!N[n]) {
                E[P.src].finished = true
            }
            L = M.elem || document.createElement("script");
            if (P.type) {
                L.type = P.type
            }
            if (P.charset) {
                L.charset = P.charset
            }
            d(L, M, "finished", O);
            if (M.elem) {
                M.elem = null
            } else {
                if (M.text) {
                    L.onload = L.onreadystatechange = null;
                    L.text = M.text
                } else {
                    L.src = P.real_src
                }
            }
            f.insertBefore(L, f.firstChild);
            if (M.text) {
                O()
            }
        }

        function G(N, R, Q, L) {
            var M, P, O = function () {
                    R.ready_cb(R, function () {
                        J(N, R, M)
                    })
                },
                S = function () {
                    R.finished_cb(R, Q)
                };
            R.src = g(R.src, N[e]);
            R.real_src = R.src + (N[m] ? ((/\?.*$/.test(R.src) ? "&_" : "?_") + ~~(Math.random() * 1000000000) + "=") : "");
            if (!E[R.src]) {
                E[R.src] = {
                    items: [],
                    finished: false
                }
            }
            P = E[R.src].items;
            if (N[n] || P.length == 0) {
                M = P[P.length] = {
                    ready: false,
                    finished: false,
                    ready_listeners: [O],
                    finished_listeners: [S]
                };
                t(N, R, M, ((L) ? function () {
                    M.ready = true;
                    for (var T = 0; T < M.ready_listeners.length; T++) {
                        M.ready_listeners[T]()
                    }
                    M.ready_listeners = []
                } : function () {
                    w(M)
                }), L)
            } else {
                M = P[0];
                if (M.finished) {
                    S()
                } else {
                    M.finished_listeners.push(S)
                }
            }
        }

        function I() {
            var O, S = j(F, {}),
                L = [],
                N = 0,
                P = false,
                R;

            function U(W, V) {
                if (S[l]) {
                    c("script preload finished: " + W.real_src)
                }
                W.ready = true;
                W.exec_trigger = V;
                M()
            }

            function T(X, W) {
                if (S[l]) {
                    c("script execution finished: " + X.real_src)
                }
                X.ready = X.finished = true;
                X.exec_trigger = null;
                for (var V = 0; V < W.scripts.length; V++) {
                    if (!W.scripts[V].finished) {
                        return
                    }
                }
                W.finished = true;
                M()
            }

            function M() {
                while (N < L.length) {
                    if (u(L[N])) {
                        if (S[l]) {
                            c("$LAB.wait() executing: " + L[N])
                        }
                        try {
                            L[N++]()
                        } catch (V) {
                            if (S[l]) {
                                o("$LAB.wait() error caught: ", V)
                            }
                        }
                        continue
                    } else {
                        if (!L[N].finished) {
                            if (b(L[N])) {
                                continue
                            }
                            break
                        }
                    }
                    N++
                }
                if (N == L.length) {
                    P = false;
                    R = false
                }
            }

            function Q() {
                if (!R || !R.scripts) {
                    L.push(R = {
                        scripts: [],
                        finished: true
                    })
                }
            }
            O = {
                script: function () {
                    for (var V = 0; V < arguments.length; V++) {
                        (function (Z, X) {
                            var Y;
                            if (!B(Z)) {
                                X = [Z]
                            }
                            for (var W = 0; W < X.length; W++) {
                                Q();
                                Z = X[W];
                                if (u(Z)) {
                                    Z = Z()
                                }
                                if (!Z) {
                                    continue
                                }
                                if (B(Z)) {
                                    Y = [].slice.call(Z);
                                    Y.unshift(W, 1);
                                    [].splice.apply(X, Y);
                                    W--;
                                    continue
                                }
                                if (typeof Z == "string") {
                                    Z = {
                                        src: Z
                                    }
                                }
                                Z = j(Z, {
                                    ready: false,
                                    ready_cb: U,
                                    finished: false,
                                    finished_cb: T
                                });
                                R.finished = false;
                                R.scripts.push(Z);
                                G(S, Z, R, (K && P));
                                P = true;
                                if (S[q]) {
                                    O.wait()
                                }
                            }
                        })(arguments[V], arguments[V])
                    }
                    return O
                }, wait: function () {
                    if (arguments.length > 0) {
                        for (var V = 0; V < arguments.length; V++) {
                            L.push(arguments[V])
                        }
                        R = L[L.length - 1]
                    } else {
                        R = false
                    }
                    M();
                    return O
                }
            };
            return {
                script: O.script,
                wait: O.wait,
                setOptions: function (V) {
                    j(V, S);
                    return O
                }
            }
        }
        H = {
            setGlobalDefaults: function (L) {
                j(L, F);
                return H
            }, setOptions: function () {
                return I().setOptions.apply(null, arguments)
            }, script: function () {
                return I().script.apply(null, arguments)
            }, wait: function () {
                return I().wait.apply(null, arguments)
            }, queueScript: function () {
                D[D.length] = {
                    type: "script",
                    args: [].slice.call(arguments)
                };
                return H
            }, queueWait: function () {
                D[D.length] = {
                    type: "wait",
                    args: [].slice.call(arguments)
                };
                return H
            }, runQueue: function () {
                var N = H,
                    L = D.length,
                    M = L,
                    O;
                for (; --M >= 0;) {
                    O = D.shift();
                    N = N[O.type].apply(null, O.args)
                }
                return N
            }, noConflict: function () {
                r.$LAB = v;
                return H
            }, sandbox: function () {
                return p()
            }
        };
        return H
    }
    r.$LAB = p();
    (function (F, D, E) {
        if (document.readyState == null && document[F]) {
            document.readyState = "loading";
            document[F](D, E = function () {
                document.removeEventListener(D, E, false);
                document.readyState = "complete"
            }, false)
        }
    })("addEventListener", "DOMContentLoaded")
})(this);
/*!
 * Site.js
 * URL:http://www.faisco.com
 * Only for Guest mode
 * Sort as
 * 		Utils/ModuleFunction/Other Global InitFunction
 * Sort time @2011-10-22
 * Partition time @2012-05-16
 */
if (typeof Site == "undefined") {
    Site = {}
}
Site.genAjaxUrl = function (b) {
    var a = "";
    if (document.location.pathname.indexOf("/manage/") >= 0) {
        a = "../ajax/"
    } else {
        a = "ajax/"
    }
    return a + b
};
Site.showMenu = function (n) {
    var r = n.id;
    if (Fai.isNull(r)) {
        r = ""
    }
    var p = n.host;
    var m = 0;
    if (!Fai.isNull(n.mode)) {
        m = n.mode
    }
    if (Fai.isNull(n.fixpos)) {
        n.fixpos = true
    }
    var k = n.rulerObj;
    var f = n.navSysClass;
    if (Fai.isNull(f)) {
        f = ""
    }
    var e = 0;
    if (!Fai.isNull(n.closeMode)) {
        e = n.closeMode
    }
    var j = 0;
    var q = 0;
    if (m == 1) {
        j = p.offset().left + p.width();
        q = p.offset().top
    } else {
        j = p.offset().left;
        q = p.offset().top + p.height()
    }
    var c = $("#g_menu" + r);
    if (c.length != 0) {
        if (e == 0) {
            c.attr("_mouseIn", 1);
            return c
        } else {
            c.attr("_mouseIn", 0);
            Site.hideMenu();
            return null
        }
    }
    $(".g_menu").each(function () {
        $(this).remove()
    });
    var B = n.data;
    if (n.data == null || n.data == "") {
        return null
    }
    c = $("<div id='g_menu" + r + "' tabindex='0' hidefocus='true' class='g_menu " + n.cls + " " + (n.clsIndex ? n.cls + "Index" + n.clsIndex : "") + " " + f + "' style='display:block;outline:none;'></div>");
    if (typeof n.container === "string") {
        var l = $("#g_menu" + r + "Container");
        if (l.length < 1) {
            l = $(n.container);
            l.attr("id", "g_menu" + r + "Container")
        }
        l.appendTo($("body"));
        c.appendTo(l)
    } else {
        c.appendTo($("body"))
    }
    var u = $("<div class='content contentLayer1'></div>");
    u.appendTo(c);
    Site.addMenuItem(B, u, n);
    if (n.fixpos) {
        if (q + c.height() + 20 > $(document).height()) {
            q = p.offset().top - c.height()
        }
    }
    c.css("left", j - Fai.getCssInt(u, "border-left-width") + "px");
    c.css("top", q + "px");
    if (e == 0) {
        c.mouseleave(function () {
            c.attr("_mouseIn", 0);
            setTimeout(function () {
                Site.hideMenu()
            }, 100)
        });
        c.mouseover(function () {
            c.attr("_mouseIn", 1)
        });
        c.click(function () {
            c.attr("_mouseIn", 0);
            Site.hideMenu()
        });
        p.mouseleave(function () {
            c.attr("_mouseIn", 0);
            setTimeout(function () {
                Site.hideMenu()
            }, 100)
        });
        p.mouseover(function () {
            c.attr("_mouseIn", 1)
        })
    } else {
        p.mousedown(function () {
            c.attr("_mouseIn", 2)
        });
        c.bind("blur", function () {
            if (c.attr("_mouseIn") != 2) {
                c.attr("_mouseIn", 0);
                setTimeout(function () {
                    Site.hideMenu()
                }, 100)
            }
        });
        c.focus()
    } if (typeof Site.g_bindMenuMousewheel == "undefined") {
        Site.g_bindMenuMousewheel = 1;
        $("body").bind("mousewheel", function () {
            $("#g_menu").remove()
        })
    }
    c.attr("_mouseIn", 1);
    c.slideDown(200);
    Site.calcMenuSize(c, n);
    var s = $("#g_menu" + r + ">div.content>table>tbody>tr>td.center>table.item");
    var w = $("#g_menu" + r);
    var C = (w.outerWidth() - w.width()) + (w.find(".content").outerWidth() - w.find(".content").width()) + (w.find(".content .middle").outerWidth() - w.find(".content .middle").width()) + (w.find(".content .middle .left").outerWidth() - w.find(".content .middle .right").outerWidth()) + (w.find(".content .middle .center").outerWidth() - w.find(".content .middle .center").width());
    var a = s.first().css("clear");
    var b = s.first().outerWidth();
    var i = s.length;
    if (a == "none") {
        if (i > 1 && b > 0) {
            var y = b * i;
            var v = document.documentElement.clientWidth;
            var t = w.offset().left;
            var h = w.offset().right;
            var A = w.width();
            var d = p.offset().left;
            var g = k.outerWidth();
            var x = k.offset().left;
            var o = x + g;
            if (d > v / 2) {
                if (y < v && y > v / 2) {
                    var z = o - y;
                    w.offset({
                        left: z - C
                    });
                    w.find(".content>.middle").width("100%")
                }
                if (y < v && y < v / 2 && (o - t) < y) {
                    var z = o - y;
                    w.offset({
                        left: z - C
                    });
                    w.find(".content>.middle").width("100%")
                }
                if (y > v) {
                    if (v < A) {
                        w.offset({
                            left: 0
                        });
                        w.find(".content>.middle").width("100%")
                    } else {
                        w.offset({
                            left: x
                        });
                        w.find(".content>.middle").width("100%")
                    }
                }
            } else {
                if (y < v && (v - d) < y) {
                    var z = v - y;
                    w.offset({
                        left: z - C
                    });
                    w.find(".content>.middle").width("100%")
                }
                if (y < v && (o - t) < y) {
                    var z = o - y;
                    w.offset({
                        left: z - C
                    });
                    w.find(".content>.middle").width("100%")
                }
                if (y > v) {
                    if (v < A) {
                        w.offset({
                            left: 0
                        });
                        w.find(".content>.middle").width("100%")
                    } else {
                        w.offset({
                            left: x
                        });
                        w.find(".content>.middle").width("100%")
                    }
                }
            }
        }
    }
    return c
};
Site.addMenuItem = function (t, b, j, g) {
    if (t.length <= 0) {
        return
    }
    g = g || "outMenu";
    var d = ["<table class='top " + g + "Top' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table>", "<table class='middle " + g + "Middle' cellpadding='0' cellspacing='0'><tr><td class='left'></div></td><td class='center'><div class='" + g + "Triangle'></td><td class='right'></td></tr></table>", "<table class='bottom " + g + "Bottom' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table>"];
    var n = $(d.join(""));
    n.appendTo(b);
    n = n.parent().find(".middle .center");
    for (var o = 0; o < t.length; ++o) {
        var q = t[o];
        var f = q.sub;
        var p = q.href;
        var u = q.onclick;
        var s = q.target;
        var e = q.disable;
        var c = "";
        if (!p && !u) {
            p = "";
            u = ""
        } else {
            if (!p) {
                p = " href='javascript:;'"
            } else {
                if (e && typeof (f) != "undefined") {
                    if (f != "") {
                        p = ""
                    } else {
                        p = ' href="' + p + '" style="cursor:pointer;"'
                    }
                } else {
                    p = ' href="' + p + '" style="cursor:pointer;"'
                }
            } if (!u) {
                u = ""
            } else {
                u = ' onclick="' + u + '"'
            } if (!s) {
                s = ""
            }
        }
        var l = parseInt(Math.random() * 100000);
        var h = [];
        var r = o + 1;
        h.push("<table class='item itemIndex" + r + "' itemId='");
        h.push(l);
        h.push("' cellpadding='0' cellspacing='0'><tr><td class='itemLeft'></td><td class='itemCenter'><a hidefocus='true' ");
        h.push(p);
        h.push(u);
        h.push(s);
        if (q.title) {
            h.push(" title='" + q.title + "'")
        }
        h.push(">" + q.html + "</a></td><td class='itemRight'></td></tr></table>");
        var k = $(h.join(""));
        if (f) {
            k.addClass("itemPopup")
        }
        if (n.find(" > .subMenu").length >= 1) {
            k.insertBefore(n.find(" > .subMenu").first())
        } else {
            k.appendTo(n)
        } if (f) {
            if (f.length == 0) {}
            var m = $("<div class='subMenu' itemId='" + l + "'><div class='content contentLayer2'></div></div>");
            m.appendTo(n);
            var a = m.find(" > .content");
            Site.addMenuItem(f, a, j, "thirdMenu");
            m.mouseleave(function () {
                $(this).attr("_mouseIn", 0);
                setTimeout(function () {
                    Site.hideSubMenu()
                }, 100);
                if (j.navBar == true && Fai.isIE()) {
                    var w = $("#g_menu" + j.id);
                    var y = w.find(".contentLayer1");
                    var i = y.outerHeight(true);
                    var x = y.outerWidth(true);
                    var v = y.children(".middle").first().outerWidth(true);
                    w.css({
                        width: x + "px",
                        height: i + "px"
                    });
                    y.css({
                        width: v + "px"
                    })
                }
            });
            m.mouseover(function () {
                $(this).attr("_mouseIn", 1)
            });
            m.click(function () {
                $(this).attr("_mouseIn", 0);
                Site.hideSubMenu()
            })
        }
        k.hover(function () {
            var A = $(this);
            var K = null;
            $(this).parent().find(" > .subMenu").each(function (M, L) {
                if ($(this).attr("itemId") == A.attr("itemId")) {
                    K = $(this)
                }
            });
            if (K != null && K.length == 1) {
                if (K.css("display") == "none") {
                    if (K.attr("_hadShow") != 1) {
                        var v = A.position().left + A.width();
                        var F = A.position().top;
                        if (j.fixpos) {
                            var G = A.offset().top + K.height() + 20 - $(document).height();
                            if (G > 0) {
                                F = F - G
                            }
                        }
                        K.css("left", v + "px");
                        K.css("top", F + "px");
                        K.slideDown(200);
                        Site.calcMenuSize(K, j);
                        K.attr("_hadShow", 1)
                    } else {
                        K.slideDown(200)
                    }
                }
                K.attr("_mouseIn", 1);
                if (j.navBar == true && Fai.isIE()) {
                    var i = $("#g_menu" + j.id);
                    var y = i.find(".contentLayer1");
                    var w = K.find(".contentLayer2");
                    var J = y.outerHeight(true);
                    var E = y.outerWidth(true);
                    var D = y.children(".middle").first().outerWidth(true);
                    var I = w.outerHeight(true);
                    var x = w.outerWidth(true);
                    var H = K.position().top;
                    var z = (I + H) - J;
                    var C = z > 0 ? (J + z) : J;
                    var B = E + x;
                    i.css({
                        width: B + "px",
                        height: C + "px"
                    });
                    y.css({
                        width: D + "px"
                    })
                }
            } else {
                if ($(this).parents(".subMenu").length <= 0) {
                    if (j.navBar == true && Fai.isIE()) {
                        var i = $("#g_menu" + j.id);
                        var y = i.find(".contentLayer1");
                        var D = y.children(".middle").first().outerWidth(true);
                        var C = y.outerHeight(true);
                        var B = y.outerWidth(true);
                        i.css({
                            width: B + "px",
                            height: C + "px"
                        });
                        y.css({
                            width: D + "px"
                        })
                    }
                }
            }
            A.addClass("itemHover");
            A.addClass("itemHoverIndex" + (A.index() + 1));
            $(".g_menu").attr("_mouseIn", 1)
        }, function () {
            var i = $(this);
            var v = null;
            $(this).parent().find(" > .subMenu").each(function () {
                if ($(this).attr("itemId") == i.attr("itemId")) {
                    v = $(this)
                }
            });
            if (v != null && v.length == 1) {
                v.attr("_mouseIn", 0);
                setTimeout(function () {
                    Site.hideSubMenu()
                }, 100)
            } else {
                i.removeClass("itemHover");
                i.removeClass("itemHoverIndex" + (i.index() + 1))
            }
        }).click(function () {
            $(".g_menu").attr("_mouseIn", 0);
            setTimeout(function () {
                Site.hideMenu()
            }, 100)
        });
        if (j.closeMode == 1) {
            k.mousedown(function () {
                $(".g_menu").attr("_mouseIn", 2)
            })
        }
    }
};
Site.calcMenuSize = function (f, c) {
    f.find(" > .content").each(function () {
        var i = 0;
        var h = $(" > .middle", this);
        if (!Fai.isNull(c.minWidth)) {
            i = c.minWidth - Fai.getCssInt(h.find(".left").first(), "width") - Fai.getCssInt(h.find(".right").first(), "width")
        }
        var j = i;
        var g = h.find(" > tbody > tr > .center > .item");
        g.each(function () {
            if ($(this).width() > i) {
                j = $(this).outerWidth();
                i = $(this).width()
            }
        });
        g.width(j);
        g.find(" > tbody > tr > .itemCenter").each(function () {
            var n = $(this);
            var k = n.parent().find(" > .itemLeft");
            var l = n.parent().find(" > .itemRight");
            n.css("width", (i - k.outerWidth() - l.outerWidth() - n.outerWidth() + n.width()) + "px");
            var m = n.find("a");
            m.css("width", (n.width() - m.outerWidth() + m.width()) + "px")
        });
        $(" > .top", this).width(h.width());
        $(" > .bottom", this).width(h.width())
    });
    var e = Fai.top.$(".outMenuTriangle"),
        b = Fai.top._isTemplateVersion2 || Fai.top._uiMode,
        a = parseInt(e.css("borderBottomWidth")) || 0,
        d = e.length > 0;
    secMenuWidth = Fai.top.$(".outMenuMiddle").width();
    if (b && d && a) {
        e.css("left", parseInt(secMenuWidth / 2 - a))
    }
};
Site.hideMenu = function () {
    if (Fai.top._uiMode) {
        return
    }
    $(".g_menu").each(function () {
        var a = $(this);
        if (a.length != 1) {
            return
        }
        if (a.attr("_mouseIn") == 1) {
            return
        }
        a.remove()
    })
};
Site.hideSubMenu = function () {
    if (Fai.top._uiMode) {
        return
    }
    $(".g_menu .subMenu").each(function () {
        var a = $(this);
        if (a.length != 1) {
            return
        }
        if (a.attr("_mouseIn") == 1) {
            return
        }
        a.css("display", "none");
        a.parent().find(" > .item").each(function () {
            if ($(this).attr("itemId") == a.attr("itemId")) {
                $(this).removeClass("itemHover")
            }
        })
    })
};
Site.popupWindow = function (a) {
    var b = true;
    if (!Fai.isNull(a.saveBeforePopup)) {
        b = a.saveBeforePopup
    }
    if (b && Site.checkSaveBar(a)) {
        return
    }
    if ($.isFunction(Site.removeAllEditLayer)) {
        Site.removeAllEditLayer()
    }
    Fai.popupWindow(a)
};
Site.total = function (c) {
    var g = {
        colId: -1,
        pdId: -1,
        ndId: -1
    };
    var d = $.extend({}, g, c);
    if (d.colId == null || d.colId == "" || d.colId < 0) {
        d.colId = -1
    }
    if (d.pdId == null || d.pdId == "" || d.pdId < 0) {
        d.pdId = -1
    }
    if (d.ndId == null || d.ndId == "" || d.ndId < 0) {
        d.ndId = -1
    }
    var a = "",
        b = navigator.userAgent;
    if (!b.match(/AppleWebKit.*Mobile.*/) && !Fai.isIpad()) {
        a = "pc"
    } else {
        if (Fai.isIpad()) {
            a = "ipad"
        } else {
            if (Fai.isAndroid()) {
                a = "android"
            } else {
                if (Fai.isIphone()) {
                    a = "iphone"
                } else {
                    a = "other"
                }
            }
        }
    }
    var e = "ajax/statistics_h.jsp?cmd=visited";
    var f = [];
    f.push("&colId=" + d.colId);
    f.push("&pdId=" + d.pdId);
    f.push("&ndId=" + d.ndId);
    f.push("&browserType=" + Fai.getBrowserType());
    f.push("&screenType=" + Fai.getScreenType(Fai.Screen().width, Fai.Screen().height));
    f.push("&sc=" + d.sc);
    f.push("&rf=" + Fai.encodeUrl(d.rf));
    f.push("&visitUrl=" + Fai.encodeUrl(document.location.href));
    f.push("&visitEquipment=" + a);
    $.ajax({
        url: e,
        type: "post",
        cache: false,
        data: f.join(""),
        success: function (h) {}
    })
};
Site.siteStatVisitTime = function () {
    window.onbeforeunload = function () {
      /*  var a = "ajax/statistics_h.jsp?cmd=visitTime";
        var b = [];
        $.ajax({
            url: a,
            type: "post",
            cache: false,
            data: b.join(""),
            success: function (c) {}
        })*/
    }
};
Site.report = function (a) {
    setTimeout(function () {
        if (window.performance) {
            var d = performance.timing;
            var l = d.fetchStart - d.navigationStart;
            var g = d.redirectEnd - d.redirectStart;
            var i = d.domainLookupStart - d.fetchStart;
            var m = d.unloadEventEnd - d.unloadEventStart;
            var b = d.domainLookupEnd - d.domainLookupStart;
            var e = d.connectEnd - d.connectStart;
            var f = d.responseEnd - d.requestStart;
            var n = d.domInteractive - d.responseEnd;
            var o = d.domComplete - d.domInteractive;
            var k = d.loadEventEnd - d.loadEventStart;
            var h = d.loadEventEnd - d.navigationStart;
            var j = [];
            j.push("&dt=" + b);
            j.push("&ct=" + e);
            j.push("&rt=" + f);
            j.push("&wt=" + n);
            j.push("&pt=" + o);
            j.push("&bt=" + Fai.getBrowserType());
            var c = "ajax/statistics_h.jsp?cmd=report";
            $.ajax({
                url: c,
                type: "post",
                cache: false,
                data: j.join(""),
                success: function (p) {}
            })
        }
    }, 500)
};
Site.fileUpload2 = function (e, c, f) {
    var d = {
        title: "添加文件",
        showTitle: true,
        checkSaveBar: false,
        crossiframe: "",
        type: [],
        maxSize: 1,
        maxUploadList: 1,
        maxChoiceList: 1,
        imgMode: 2,
        imgMaxWidth: 4096,
        imgMaxHeight: 4096,
        netFileMode: false
    };
    if (c) {
        $.extend(d, c)
    }
    if (d.title === "添加图片" && d.maxSize > 5) {
        d.maxSize = 5
    }
    if (Fai.top._siteVer != "undefined" && Fai.top._siteVer == 10) {
        d.maxSize = 1
    }
    var b = d.title;
    if (d.type.length > 0 && d.showTitle) {
        if (Fai.top._siteVer != "undefined" && Fai.top._siteVer == 10) {
            b += "<span style='font-weight:400;'> (只能添加" + d.type.join(",") + ", 免费版大小不超过" + d.maxSize + "MB)</span>"
        } else {
            b += "<span style='font-weight:400;'> (只能添加" + d.type.join(",") + ", 大小不超过" + d.maxSize + "MB)</span>"
        }
    } else {
        b += "<span style='font-weight:400;'> (上传大小不超过" + d.maxSize + "MB)</span>"
    }
    var a = {
        title: b,
        frameSrcUrl: (top._siteDomain ? top._siteDomain : "") + "/manage/fileUploadV2.jsp?settings=" + Fai.encodeUrl($.toJSON(d)) + "&ram=" + Math.random() + "&crossiframe=" + Fai.encodeUrl(d.crossiframe),
        width: 660,
        height: 480,
        saveBeforePopup: false,
        callArgs: "add",
        closeFunc: f
    };
    if (c.saveBeforePopup !== undefined) {
        a.saveBeforePopup = c.saveBeforePopup
    }
    if (e) {
        $(e).unbind("click").bind("click", function () {
            Site.popupWindow(a)
        })
    } else {
        Site.popupWindow(a)
    }
};
Site.initIframeLoading = function (b, d, g, f) {
    var h = b + d;
    var c = Fai.top.$("#" + h).parent().width();
    var a = Fai.top.$("#" + h).parent().height();
    var e = 1;
    $("#" + h).attr("src", g).load(function () {
        $("#moduleLoading" + d).hide();
        $("#refreshFrame" + d).hide();
        Fai.top.$("#" + h).parent().show();
        e = 2
    });
    if (f) {
        $("#moduleLoading" + d).show();
        Fai.top.$("#" + h).parent().hide();
        $("#refreshFrame" + d).hide()
    } else {
        setTimeout(function () {
            if (e == 1) {
                var i = "<div id='moduleLoading" + d + "' class='ajaxLoading2' style='width:" + c + "px;height:" + a + "px'></div>";
                Fai.top.$("#" + h).parent().before(i);
                Fai.top.$("#" + h).parent().hide()
            }
        }, 3000)
    }
    setTimeout(function () {
        if (e == 1) {
            $("#moduleLoading" + d).hide();
            if (f) {
                $("#refreshFrame" + d).show()
            } else {
                var i = "<div id='refreshFrame" + d + "' style='width:" + c + "px;height:" + a + "px;text-align:center;padding-top:5px;'><a href=\"javascript:Site.initModuleWeather('" + b + "'," + d + ", '" + g + "', true);\">" + LS.refresh + "</a></div>";
                Fai.top.$("#" + h).parent().before(i)
            }
            e = 3
        }
    }, 30000)
};
Site.logMsg = function (c) {
    if (!c) {
        return
    }
    var b = "";
    var a = c.indexOf("&");
    if (a >= 0) {
        b = c.slice(a, c.length - 1)
    }
    $.ajax({
        type: "GET",
        url: "/ajax/log_h.jsp?cmd=log&msg=" + Fai.encodeUrl(c),
        data: b
    })
};
Site.logDog = function (b, a) {
    $.ajax({
        type: "GET",
        url: "/ajax/log_h.jsp?cmd=dog&dogId=" + Fai.encodeUrl(b) + "&dogSrc=" + Fai.encodeUrl(a)
    })
};
Site.logProf = function (b, a) {
    $.ajax({
        type: "GET",
        url: "/ajax/log_h.jsp?cmd=prof&profId=" + Fai.encodeUrl(b) + "&profVal=" + Fai.encodeUrl(a)
    })
};
Site.popupBox = function (p) {
    var f = {
        boxId: 0,
        title: "",
        htmlContent: "",
        width: 500,
        height: "",
        boxName: "",
        opacity: "0.5",
        displayBg: true,
        autoClose: 0,
        extClass: ""
    };
    f = $.extend(f, p);
    var b = parseInt(f.boxId);
    if (b == 0 || b == null) {
        b = parseInt(Math.random() * 10000)
    }
    if (f.displayBg) {
        Fai.bg(b, f.opacity)
    }
    var n = "";
    if (f.height != "") {
        n = " min-height:" + (f.height - 45) + "px;"
    }
    var e = ["<div id='popupBoxContent", b, "' style='width:", f.width, "px;", n, " padding-bottom: 20px;", "' class='popupCnBg'>", f.htmlContent, "</div>"];
    var i = Fai.top.document.documentElement.clientHeight;
    var d = Fai.top.$("body").scrollTop();
    if (d <= 0) {
        d = Fai.top.$("html").scrollTop()
    }
    if (d <= 0) {
        d = $(window).scrollTop()
    }
    var a = "";
    var m = "";
    if (f.boxName == "qqLogin") {
        a = "style='padding-top:28px;'"
    } else {
        if (f.boxName == "addrInfo") {
            a = "style='margin-top:21px;'";
            m = "style='margin-top:20px;'"
        } else {
            if (f.boxName == "mallAmountZero") {
                a = "style='height:15px;'";
                m = "style='margin-top:10px;'"
            } else {
                if (f.boxName == "confirmReceipt") {
                    m = "style='margin-top:10px;'"
                } else {
                    if (f.boxName == "mallBuy") {
                        m = "style='margin-top:10px'"
                    } else {
                        if (f.boxName == "memberFdPwd") {
                            a = "style='margin-top:20px;'";
                            m = "style='margin-top:20px'"
                        }
                    }
                }
            }
        }
    }
    var l = ["<div id='popupBox", b, "' class='formBox " + f.extClass + "' style='width:", f.width, "px;", n, "left:", (Fai.top.document.documentElement.clientWidth - f.width) / 2, "px;'>", "<div class='formTLSite'><div ", a, "class='formTCSite ", f.title == "" ? "formMulLanSite" : "", "'>", f.title, "</div></div>", "<div class='formMSG' style='position:relative;'>", e.join(""), "</div>", "<a href='javascript:void(0);' class='formXSite popupBClose' hidefocus='true' onclick='return false;'", m, "></a>", "</div>"];
    l = l.join("");
    var k = Fai.top.$(l).appendTo("body");
    var j = (i - f.height) / 2;
    if (f.height == "") {
        j = (i - $(".popupCnBg").height()) / 2
    }
    $(k).css("top", j + d);
    var h = Fai.top.$("#popupBg" + b).outerHeight(true),
        g = Fai.top.$("#popupBoxContent" + b).outerHeight(true) + 120,
        o = 100 - (g - h) > 0 ? 100 - (g - h) : 0;
    if (h < g) {
        k.css("top", o + "px")
    }
    k.hide();
    k.fadeIn();

    function c(q) {
        return Object.prototype.toString.call(q) === "[object Function]"
    }
    k.ready(function () {
        k.draggable({
            start: function () {
                Fai.top.$("body").disableSelection()
            }, handle: ".formTLSite",
            stop: function () {
                Fai.top.$("body").enableSelection()
            }
        });
        k.find(".popupBClose").bind("click", function () {
            if (c(f.closeFunc)) {
                f.closeFunc()
            }
            Fai.top.$("#popupBg" + b).remove();
            k.remove()
        })
    });
    if (f.autoClose != 0) {
        setTimeout(function () {
            k.find(".popupBClose").click()
        }, f.autoClose)
    }
    return k
};
Site.checkEnv = function () {
    var h = $(window).width();
    h = h - 17;
    var k = [];
    var c = function (n) {
        if ($(n).attr("_intab") > 0 || $(n).attr("_inmulmcol") > 0 || $(n).attr("_side") == 1) {
            return
        }
        var r = $(n).offset().left;
        var q = $(n).width();
        var u = $(n).prop("id");
        var s = false;
        if (r < 0) {
            s = true
        }
        if (!s && (r + q) > h) {
            s = true
        }
        if (s) {
            k.push(u)
        }
    };
    Fai.top.$(".absForms >.form").each(function (q, n) {
        c(n)
    });
    Fai.top.$(".floatForms >.form").each(function (q, n) {
        c(n)
    });
    var o = "";
    if (k.length > 0) {
        o += "--网站浮动模块位置；\n"
    }
    $.each(k, function (q, n) {
        $("#" + n).css("border", "dashed black 5px")
    });
    var p = $("#logoImg");
    var g = p.width();
    var m = p.offset().left;
    if (m < 0 || (m + g) > h) {
        o += "--网站LOGO的宽度或位置；\n"
    }
    var d = $("#corpTitle");
    var b = d.width();
    var j = d.offset().left;
    if (j < 0 || (j + b) > h) {
        o += "--网站标题宽度或位置；\n"
    }
    var e = $("#nav");
    var i = e.width();
    var a = e.offset().left;
    if ((a + i) > h) {
        o += "--导航栏宽度或位置。；\n"
    } else {
        e = $("#nav .navMainContent").first();
        i = e.width();
        a = e.offset().left;
        if ((a + i) > h) {
            o += "--导航应用了网站宽度并且存在水平偏移。请自定义导航内容区宽度；\n"
        }
    }
    var f = $("#webContainer").width();
    if (f > h) {
        o += "--网站背景宽度；\n"
    }
    var l = $(".webBanner").width();
    if (l > h) {
        o += "--网站横幅宽度；\n"
    }
    if ($("#webHeader").width() > h) {
        o += "--网站头部宽度；\n"
    }
    o = $.trim(o);
    if (o.length > 0) {
        o = "窗口宽度：" + h + "；\n导致模块滚动条出现的原因：\n" + o;
        alert(o)
    } else {
        alert("没有检测到横向超出的元素。")
    }
};
Site.initPdNavfold = function (b) {
    var e = $("#module" + b);
    if (e.find(".g_vertFold").length > 0) {
        var j = e.find(".pdLevel a");
        if (Fai.isIE6() || Fai.isIE7()) {
            $.each(j, function (r, s) {
                if ($(s).width() > 155) {
                    $(s).width(155)
                }
            });
            return
        }
        var c = e.width();
        if (c > 210) {
            j.css("max-width", c - 55 + "px")
        }
        return
    }
    var l = e.find(".g_foldContainerPanel");
    var d = l.length;
    var a = 0;
    var p = 0;
    var k = [];
    var h = [];
    for (var g = 0; g < d; g++) {
        var f = $(l[g]);
        var o = f.position();
        var m = o.top;
        if (e.width() < 452) {
            l.removeClass("g_foldContainerPadding").removeAttr("style");
            e.find(".g_horfoldSepLine").removeClass("g_horfoldSepLine").addClass("g_verfoldSepLine").removeAttr("style");
            l.height();
            break
        }
        if (g == 0) {
            l.addClass("g_foldContainerPadding");
            l = e.find(".g_foldContainerPanel");
            f = $(l[g]);
            m = f.position().top;
            e.find(".g_verfoldSepLine").addClass("g_horfoldSepLine").removeClass("g_verfoldSepLine")
        }
        if (g == d - 1) {
            if (p == m) {
                var q = f.height();
                if (a < q) {
                    a = q
                }
                k.push(f.next());
                h.push(f);
                $.each(k, function (r, s) {
                    $(s).css("height", (a - 5) + "px")
                });
                $.each(h, function (r, s) {
                    $(s).css("height", a + "px")
                });
                break
            }
        }
        if (p != m) {
            $.each(k, function (r, s) {
                $(s).css("height", (a - 5) + "px")
            });
            $.each(h, function (r, s) {
                $(s).css("height", a + "px")
            });
            k = [];
            h = [];
            a = 0;
            f.prev().hide();
            l = e.find(".g_foldContainerPanel");
            f = $(l[g]);
            p = f.position().top
        }
        var q = f.height();
        if (a < q) {
            a = q
        }
        k.push(f.next());
        h.push(f)
    }
    k = [];
    h = [];
    e.find(".g_productNav").fadeTo(400, 1)
};
Site.foldChange = function (b, c) {
    var a = $("#module" + b);
    a.find(".fold_h_J").mouseover(function () {
        $(this).addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_hover")
    });
    a.find(".foldChange_J").click(function () {
        var f = $(this),
            e = f.parents(".fold_J"),
            g = e.attr("foldId"),
            d = $("#childrenDiv" + g + "M" + b);
        if (d.is(":visible")) {
            d.slideUp(300);
            e.find(".fold_btn_J").removeClass("g_unfold").addClass("g_fold")
        } else {
            d.slideDown(300);
            e.find(".fold_btn_J").removeClass("g_fold").addClass("g_unfold")
        }
    });
    Site.initContentSplitLine(b, c)
};
Site.floatTip = function (d) {
    var q = {
        moduleId: "",
        targetId: "",
        tipText: "",
        cusClass: "",
        direction: 3
    };
    q = $.extend(q, d);
    if (q.moduleId.length == 0 || q.targetId.length == 0 || q.tipText.length == 0) {
        return
    }
    $(Fai.top.document).find(".J_floatTip_" + q.moduleId).remove();
    var k = Fai.isIE6() || Fai.isIE7() || Fai.isIE8();
    var t = [];
    var j = "floatTip_content";
    var r = "floatTip_right";
    var l = "floatTip_arrow";
    var p = "floatTip_left";
    var o = "floatTip_" + q.moduleId + "_" + q.targetId;
    if (k) {
        j += " floatTip_content_IE ";
        r += " floatTip_right_IE ";
        l += " floatTip_arrow_IE ";
        p += " floatTip_left_IE "
    }
    t.push("<div id='" + o + "' class='J_floatTip_" + q.moduleId + " floatTip'>\n");
    t.push("<div class='" + l + "'></div>");
    t.push("<div class='" + r + "'></div>");
    t.push("<div class='" + p + "'></div>");
    t.push("<div class='" + j + q.cusClass + "'>" + q.tipText + "</div>");
    t.push("</div>\n");
    $(Fai.top.document).find("#g_main").append(t.join(""));
    var b = $("#" + q.moduleId);
    var s = $(b).find("#" + q.targetId);
    var a = $("#" + o);
    var h = $(".floatLeftTop").offset().top;
    var c = (Fai.top._manageMode) ? $("#g_main").scrollTop() : $("body").scrollTop();
    if (Fai.isIE6()) {
        c = $("#g_main").scrollTop()
    }
    if (c == 0) {
        c = $("html").scrollTop()
    }
    var e = a.height();
    var m = a.width() * 0.7;
    var g = s.width() * 0.8;
    var f = s.height();
    var n = s.offset().left + (g - m);
    var i = s.offset().top + c - h;
    $("#" + o).show().css({
        top: i + "px",
        left: n + "px",
        "z-index": 9031
    });
    setTimeout(function () {
        if (k) {
            var u = i - e - 10 + (f / 3);
            $("#" + o).animate({
                top: u + "px",
                opacity: 1,
                filter: "alpha(opacity=100)"
            }, 300)
        } else {
            var u = i - e + (f / 3);
            $("#" + o).css({
                top: u + "px",
                opacity: 1
            })
        }
    }, 50);
    $(s).unbind("click").bind("click", function () {
        if ($(this).hasClass("focusBg")) {
            $(this).removeClass("focusBg")
        }
        $("#floatTip_" + q.moduleId + "_" + q.targetId).remove()
    })
};
Site.floatTip_clear = function (a) {
    $(Fai.top.document).find(".J_floatTip_" + a).remove()
};
Site.moduleSubPanel = function (m) {
    var e = {
        that: null,
        moduleId: null,
        idStr: "",
        clsStr: "",
        contentStr: ""
    };
    $.extend(e, m);
    if (e.that == null) {
        return
    }
    var a, c = e.moduleId,
        d = $("#module" + c),
        l = j(d),
        n = h(d, c);
    n = n + " modulePattern " + d.attr("class");
    var b = ["<div id='", e.idStr, "' class='", e.clsStr, " g_m_s_J ", l, "' _mouseIn=1 style='display:none;'>", "<div class='", n, "' style='zoom:0;margin:0;overflow:visible;position:relative;'>", "<div class='formMiddle' style='zoom:0;width:auto;border:0;'>", "<div class='formMiddleCenter' style='zoom:0;width:auto;margin:0;'>", "<div class='formMiddleContent' style='", Fai.isIE6() ? "_display:inline;" : "", "width:auto;margin:0;overflow:visible;'>", e.contentStr, "</div>", "</div>", "</div>", "</div>", "</div>"];
    a = $(b.join(""));
    a.appendTo("body");
    if (d.hasClass("formStyle76")) {
        i()
    } else {
        k()
    }

    function i() {
        var q = d.find(".pd_mall_G_J"),
            o = d.find(".p_m_cotainer_J"),
            p;
        q.off("mouseleave.pr").on("mouseleave.pr", function () {
            p = setTimeout(function () {
                g(e.moduleId)
            }, 20)
        });
        a.off("mouseleave.pr").on("mouseleave.pr", function () {
            g(e.moduleId);
            if (parseInt(d.attr("_side")) === 2) {
                Site.startFlutterInterval(d)
            }
            if (parseInt(d.attr("_side")) === 1) {
                var r = d.outerWidth();
                d.animate({
                    left: -r
                }, {
                    queue: false,
                    duration: 500
                })
            }
        });
        a.off("mouseenter.pr").on("mouseenter.pr", function () {
            if (p) {
                clearTimeout(p);
                if (parseInt(d.attr("_side")) === 2) {
                    Site.stopFlutterInterval(d)
                }
                if (parseInt(d.attr("_side")) === 1) {
                    d.animate({
                        left: 0
                    }, {
                        queue: false,
                        duration: 500
                    })
                }
            }
        })
    }

    function k() {
        a.mouseleave(function () {
            a.attr("_mouseIn", 0);
            setTimeout(f, 100)
        });
        a.mouseover(function () {
            a.attr("_mouseIn", 1)
        });
        e.that.mouseleave(function () {
            a.attr("_mouseIn", 0);
            setTimeout(f, 100)
        });
        e.that.mouseover(function () {
            a.attr("_mouseIn", 1)
        });
        if (parseInt(d.attr("_side")) === 2) {
            a.mouseleave(function () {
                Site.startFlutterInterval(d)
            });
            a.mouseenter(function () {
                Site.stopFlutterInterval(d)
            })
        }
    }

    function g(q) {
        var p = $("#module" + q).find(".p_m_cotainer_J"),
            o = $(".g_m_s_J");
        o.has(".form" + q).remove();
        p.removeClass("bold p_m_hover g_border");
        p.find(".p_m_value_J").removeClass("g_stress");
        p.each(function () {
            var r = $(this);
            if (r.attr("_chd") == 1) {
                r.find(".p_m_cotainerR_J").addClass("p_m_more")
            }
        })
    }

    function f() {
        $(".g_m_s_J").each(function () {
            var o = $(this);
            if (o.length != 1) {
                return
            }
            if (o.attr("_mouseIn") == 1) {
                return
            }
            o.remove()
        })
    }

    function j(r) {
        var q = r.attr("_intab") || 0,
            u = r.attr("_inmulmcol") || 0,
            o = r.attr("_infullmeasure") || 0,
            p = 0,
            t = "",
            s = "";
        if (q == 0 && u == 0 && o == 0) {
            s = r.parent().attr("class");
            return s
        } else {
            if (q > 0) {
                p = q
            } else {
                if (u > 0) {
                    p = u
                } else {
                    if (o > 0) {
                        p = o
                    }
                }
            }
            t = Fai.top.$("#module" + p);
            return j(t)
        }
    }

    function h(s, p) {
        var u = s.attr("_intab") || 0,
            o = s.attr("_inmulmcol") || 0,
            t = s.attr("_infullmeasure") || 0,
            r = s.hasClass("modulePattern") || false,
            v = "",
            x = s.attr("class") || "",
            q = /modulePattern\d+/,
            w = "";
        if (r) {
            return x.match(q)
        } else {
            if (u == 0 && o == 0 && t == 0) {
                return x.match(q)
            } else {
                if (u > 0) {
                    w = u
                } else {
                    if (o > 0) {
                        w = o
                    } else {
                        if (t > 0) {
                            w = t
                        }
                    }
                }
                v = Fai.top.$("#module" + w);
                return h(v, p)
            }
        }
    }
    return a
};
Site.mobiPlatform = function (b) {
    if (!Fai.top._siteDemo || Fai.top._designAuth) {
        return
    }
    if (typeof (Fai.top.top) != "undefined" && typeof (Fai.top.top.$) != "undefined") {
        var v = Fai.top.top.$(".fk-quickViewTemplateContent");
        if (v.length > 0 && v.is(":visible")) {
            return
        }
    }
    var g = [],
        h = false,
        r = "mobiPlatform",
        m = document.domain,
        p = {},
        d = {},
        l = {
            w: 0,
            h: 0
        },
        s = Fai.top.$("body"),
        y = Fai.getScrollWidth(),
        j = 400,
        n = 600,
        c = $.cookie("mobiPlatformBg", {
                domain: m,
                path: "/"
            }) || 0,
        z = parseInt($.cookie("mobiPlatformIconFlag", {
                domain: m,
                path: "/"
            })) || 0,
        w = "display:none;",
        q = "",
        o = "",
        f, x, k, a, u, t;
    var A = {
        refresh: false
    };
    $.extend(A, b);
    if (Fai.isIE) {
        if (Fai.isIE6() || Fai.isIE7() || Fai.isIE8()) {
            h = true
        }
    }
    if (z > 0) {
        w = "";
        q = "display:none;";
        o = z == 1 ? "mobiPlatformIcon_right" : "mobiPlatformIcon_left"
    }
    p.big = {};
    p.big.className = "mobiPlatform_big";
    p.big.w = 265;
    p.big.h = 490;
    p.big.cw = 295;
    p.big.ch = 592;
    p.small = {};
    p.small.className = "mobiPlatform_small";
    p.small.w = 265;
    p.small.h = 400;
    p.small.cw = 291;
    p.small.ch = 483;
    l = Site.mobiPlatform.getWindowSize();
    if (l.h <= 800) {
        d = p.small
    } else {
        d = p.big
    }
    Site.mobiPlatform.nowSize = d;
    if (s.children("#mobiPlatform").length < 1) {
        g.push("<div id='mobiPlatform' class='mobiPlatform mobiPlatform-hide " + d.className + "' direction='0' moved='0' style='" + q + "'>");
        g.push("	<div class='J_innerCover mp-innerCover' style='display:none;'></div>");
        g.push("	<div class='J_innerIframe mp-innerIframe" + (h ? " mp-innerIframe2" : "") + "'>");
        if (!h) {
            g.push("		<div class='J_loading mp-loading'>");
            g.push("			<div class='mp-loading-icon mp-loading-iconAction'></div>");
            g.push("		</div>")
        } else {
            g.push("	<div class='mp-updateBtnContainer'>");
            g.push("		<a href='https://www.baidu.com/s?wd=chrome' target='_blank' class='mp-updateBtn'></a>");
            g.push("	</div>")
        }
        g.push("	</div>");
        g.push("	<a href='javascript:;' hidefocus='true' title='隐藏' class='J_closeBtn mp-closeBtn' style='display:none;'></a>");
        g.push("	<div class='J_hoverTip mp-hoverTip' style='display:none;'></div>");
        g.push("</div>");
        g.push("<div id='mobiPlatformIcon' class='mobiPlatformIcon " + o + "' style='" + w + "'>");
        g.push("	<a href='javascript:;' class='mobiPlatformIcon-handle' onclick='Site.mobiPlatform();return false;' hidefocus='true'></a>");
        g.push("</div>");
        Fai.top.$("body").append(g.join(""));
        f = s.children("#mobiPlatform");
        x = s.children("#mobiPlatformIcon");
        a = f.find(".J_closeBtn");
        u = f.find(".J_hoverTip");
        f.draggable({
            scroll: false,
            cursor: "move",
            distance: 10,
            containment: "parent",
            cancel: ".J_innerCover",
            start: function (B, C) {
                f.find(".J_innerCover").show()
            }, stop: function (B, H) {
                f.find(".J_innerCover").hide();
                f.attr("moved", "1");
                if (!c) {
                    c = 1;
                    $.cookie("mobiPlatformBg", 1, {
                        expires: 365,
                        domain: m,
                        path: "/"
                    })
                }
                d = Site.mobiPlatform.nowSize;
                l = Site.mobiPlatform.getWindowSize();
                var G = true,
                    I = {
                        x: 1,
                        y: 1
                    },
                    C = 4,
                    F = s.children(".floatLeftTop"),
                    M = F.offset(),
                    E = ~~ (F.css("top").replace("px", "")),
                    L = l.h - d.ch,
                    D = L - (H.offset.top - (M.top - E)),
                    K = l.w - d.cw,
                    J = K - (H.offset.left - M.left);
                if (J < (K / 2)) {
                    J -= y;
                    I.x = 1
                } else {
                    I.x = 0
                } if (D < (L / 2)) {
                    I.y = 1
                } else {
                    I.y = 0
                } if (!(J < K && J > C)) {
                    G = false
                }
                if (!(D < L && D > C)) {
                    G = false
                }
                if (!G) {
                    if (I.y == 1) {
                        if (D <= C) {
                            f.attr("direction", "4")
                        }
                    } else {
                        if (D >= L) {
                            f.attr("direction", "3")
                        }
                    } if (I.x == 1) {
                        if (J <= C) {
                            if (f.attr("direction") == 3) {
                                f.css({
                                    bottom: "auto",
                                    top: 0
                                })
                            } else {
                                if (f.attr("direction") == 4) {
                                    f.css({
                                        bottom: 0,
                                        top: "auto"
                                    })
                                }
                            }
                            f.attr("direction", "2").css({
                                right: 0,
                                left: "auto"
                            }).animate({
                                right: (-d.cw) + "px"
                            }, j, function () {
                                x.removeClass("mobiPlatformIcon_left").addClass("mobiPlatformIcon_right").fadeIn();
                                f.hide();
                                $.cookie("mobiPlatformIconFlag", 1, {
                                    expires: 365,
                                    domain: m,
                                    path: "/"
                                })
                            })
                        }
                    } else {
                        if (J >= K) {
                            if (f.attr("direction") == 3) {
                                f.css({
                                    bottom: "auto",
                                    top: 0
                                })
                            } else {
                                if (f.attr("direction") == 4) {
                                    f.css({
                                        bottom: 0,
                                        top: "auto"
                                    })
                                }
                            }
                            f.attr("direction", "1").css({
                                right: "auto",
                                left: 0
                            }).animate({
                                left: (-d.cw) + "px"
                            }, j, function () {
                                x.removeClass("mobiPlatformIcon_right").addClass("mobiPlatformIcon_left").fadeIn();
                                f.hide();
                                $.cookie("mobiPlatformIconFlag", 2, {
                                    expires: 365,
                                    domain: m,
                                    path: "/"
                                })
                            })
                        }
                    } if (f.attr("direction") == 3) {
                        f.animate({
                            bottom: "auto",
                            top: (-d.ch) + "px"
                        }, n, function () {
                            x.removeClass("mobiPlatformIcon_left").addClass("mobiPlatformIcon_right").fadeIn();
                            f.hide();
                            $.cookie("mobiPlatformIconFlag", 1, {
                                expires: 365,
                                domain: m,
                                path: "/"
                            })
                        })
                    } else {
                        if (f.attr("direction") == 4) {
                            f.animate({
                                top: (L + d.ch) + "px",
                                bottom: "auto"
                            }, n, function () {
                                x.removeClass("mobiPlatformIcon_left").addClass("mobiPlatformIcon_right").fadeIn();
                                f.hide();
                                $.cookie("mobiPlatformIconFlag", 1, {
                                    expires: 365,
                                    domain: m,
                                    path: "/"
                                })
                            })
                        }
                    }
                }
            }
        });
        if (!h) {
            var e = document.createElement("iframe"),
                i = f.find(".J_innerIframe");
            e.style.width = d.w + "px";
            e.style.height = d.h + "px";
            e.style.border = "none";
            e.src = Fai.top._mobiAdmHost;
            if (e.attachEvent) {
                e.attachEvent("onload", function () {
                    f.find(".J_loading").remove();
                    f.removeClass("mobiPlatform-hide")
                })
            } else {
                e.onload = function () {
                    f.find(".J_loading").remove();
                    f.removeClass("mobiPlatform-hide")
                }
            }
            i.find("iframe").remove();
            i.append(e);
            k = $(e)
        } else {
            f.removeClass("mobiPlatform-hide")
        }
        Fai.top.$(window).off("resize.mobiPlatform");
        Fai.top.$(window).on("resize.mobiPlatform", function () {
            Site.mobiPlatform({
                refresh: true
            })
        });
        a.click(function () {
            d = Site.mobiPlatform.nowSize;
            l = Site.mobiPlatform.getWindowSize();
            rangeHeight = l.h - d.ch;
            rangeWidth = l.w - d.cw;
            nowWidth = rangeWidth - f.offset().left;
            var B = 0;
            var C = f.attr("direction");
            if (f.attr("moved") == "0") {
                if (C == "0") {
                    B = 2
                } else {
                    if (C == "1") {
                        B = 3
                    } else {
                        if (C == "2") {
                            B = 2
                        }
                    }
                }
            } else {
                if (nowWidth < (rangeWidth / 2)) {
                    B = 1
                } else {
                    B = 3
                }
            } if (B == 1) {
                f.animate({
                    left: (rangeWidth + d.cw) + "px",
                    right: "auto"
                }, n, function () {
                    x.removeClass("mobiPlatformIcon_left").addClass("mobiPlatformIcon_right").fadeIn();
                    f.attr("direction", "5").hide()
                })
            } else {
                if (B == 2) {
                    f.animate({
                        left: "auto",
                        right: (-d.cw) + "px"
                    }, n, function () {
                        x.removeClass("mobiPlatformIcon_left").addClass("mobiPlatformIcon_right").fadeIn();
                        f.attr("direction", "5").hide()
                    })
                } else {
                    if (B == 3) {
                        f.animate({
                            left: (-d.cw) + "px",
                            right: "auto"
                        }, n, function () {
                            x.removeClass("mobiPlatformIcon_right").addClass("mobiPlatformIcon_left").fadeIn();
                            f.attr("direction", "1").hide()
                        })
                    }
                }
            }
        });
        f.hover(function () {
            t = Fai.top.$("#mobiPlatformBg");
            if (t.length < 1) {
                var B = [];
                B.push("<div id='mobiPlatformBg' class='popupBg' style='z-index:9032;opacity:0;' >");
                if ($.browser.msie && $.browser.version == 6) {
                    B.push("<iframe id='fixSelectIframe-mobiPlatform' wmode='transparent' style='filter: alpha(opacity=0);opacity: 0;' class='popupBg' style='z-index:-111' src='javascript:'></iframe>")
                } else {
                    B.push("</div>")
                }
                f.before(B.join(""));
                t = Fai.top.$("#mobiPlatformBg")
            }
            t.stop(true).show().animate({
                opacity: 0.6
            }, 500);
            if (!c) {
                u.stop(true).show().animate({
                    opacity: 1
                })
            } else {
                u.hide()
            }
        }, function () {
            t.stop(true).animate({
                opacity: 0
            }, 500, function () {
                t.hide()
            });
            if (!c) {
                u.stop(true).animate({
                    opacity: 0
                }, 400, function () {
                    u.hide()
                })
            } else {
                u.hide()
            }
        })
    } else {
        f = s.children("#mobiPlatform");
        x = s.children("#mobiPlatformIcon");
        if (!h) {
            k = f.find("iframe")
        }
        if (A.refresh) {
            f.attr("class", "mobiPlatform " + d.className);
            if (!h) {
                k.css({
                    width: d.w + "px",
                    height: d.h + "px"
                })
            }
        }
        if (!A.refresh) {
            f.show();
            if (f.attr("direction") == 2) {
                f.attr("moved", "0").animate({
                    right: "10px"
                }, j, function () {
                    x.fadeOut()
                })
            } else {
                if (f.attr("direction") == 1) {
                    f.attr("moved", "0").animate({
                        left: "10px"
                    }, j, function () {
                        x.fadeOut()
                    })
                } else {
                    f.attr("direction", 0).attr("moved", "0").css({
                        top: "auto",
                        left: "auto",
                        right: (-d.cw) + "px",
                        bottom: "10px"
                    }).animate({
                        right: "10px"
                    }, j, function () {
                        x.fadeOut()
                    })
                }
            }
            $.cookie("mobiPlatformIconFlag", 0, {
                expires: 365,
                domain: m,
                path: "/"
            })
        }
    }
};
(function (a) {
    a.getWindowSize = function () {
        var b = {
            w: 0,
            h: 0
        };
        if (window.innerWidth && window.innerHeight) {
            b.w = window.innerWidth;
            b.h = window.innerHeight
        } else {
            if (document.documentElement) {
                b.w = document.documentElement.clientWidth;
                b.h = document.documentElement.clientHeight
            } else {
                if (document.body.clientWidth && document.body.clientHeight) {
                    b.w = document.body.clientWidth;
                    b.h = document.body.clientHeight
                }
            }
        }
        return b
    }
})(Site.mobiPlatform);
Site.Pagenation = (function (d) {
    var c;

    function b(h, f, i) {
        var g = d("#pagenation" + h);
        c = f;
        g.css("text-align", "center");
        e(f, g);
        a(h, g, i)
    }

    function e(h, j) {
        var l = Math.ceil(h.totalSize / h.pageSize),
            g = h.pageNo || 1;
        if (j.length != 0) {
            var f = [],
                k = 0;
            f.push("<div class='pagePrev'>");
            if (g == 1) {
                f.push("<span>" + LS.prevPager + "</span>")
            } else {
                f.push("<a hidefocus='true' class='g_border' href='javascript:;'><span>" + LS.prevPager + "</span></a>")
            }
            f.push("</div>");
            if (g == 1) {
                f.push("<div class='pageNo'><span>1</span></div>")
            } else {
                f.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>1</span></a></div>")
            } if (g - 2 > 2) {
                f.push("<div class='pageEllipsis'><span>...</span></div>");
                for (k = g - 2; k < g; k++) {
                    f.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + k + "</span></a></div>")
                }
            } else {
                for (k = 2; k < g; k++) {
                    f.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + k + "</span></a></div>")
                }
            } if (g != 1 && g != l) {
                f.push("<div class='pageNo'><span>" + g + "</span></div>")
            }
            if (g + 2 < l - 1) {
                for (k = g + 1; k <= g + 2; k++) {
                    f.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + k + "</span></a></div>")
                }
                f.push("<div class='pageEllipsis'><span>...</span></div>")
            } else {
                for (k = g + 1; k <= l - 1; k++) {
                    f.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + k + "</span></a></div>")
                }
            } if (g == l) {
                f.push("<div class='pageNo'><span>" + l + "</span></div>")
            } else {
                f.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + l + "</span></a></div>")
            }
            f.push("<div class='pageNext'>");
            if (g == l) {
                f.push("<span>" + LS.nextPager + "</span>")
            } else {
                f.push("<a hidefocus='true' class='g_border' href='javascript:;'><span>" + LS.nextPager + "</span></a>")
            }
            f.push("</div>");
            j.html(f.join(""))
        }
    }

    function a(g, f, h) {
        d("body").off("click", "#pagenation" + g + " .g_border");
        d("body").on({
            hover: function () {
                d(this).addClass("g_hover")
            }, mouseleave: function () {
                d(this).removeClass("g_hover")
            }, click: function () {
                var j = f.find(".pageNo").not(":has('.g_border')").text();
                var i = 1;
                if (d(this).parent().hasClass("pagePrev")) {
                    i = Number(j) - 1
                } else {
                    if (d(this).parent().hasClass("pageNext")) {
                        i = Number(j) + 1
                    } else {
                        i = Number(d(this).text())
                    }
                }
                c.pageNo = i;
                h(g, i);
                e(c, f)
            }
        }, "#pagenation" + g + " .g_border")
    }
    return b
})(jQuery);
Site.loadCss = function (b, f, e) {
    var c = document.createElement("link");
    supportOnload = "onload" in c, isOldWebKit = +navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/?(\d+).*/i, "$1") < 536, protectNum = 600000;
    f = typeof f == "function" ? f : function () {};
    c.rel = "stylesheet";
    c.type = "text/css";
    c.href = b;
    if (typeof e !== "undefined") {
        c.id = e
    }
    document.getElementsByTagName("head")[0].appendChild(c);
    if (isOldWebKit || !supportOnload) {
        setTimeout(function () {
            a(c, f, 0)
        }, 1);
        return
    }
    if (supportOnload) {
        c.onload = d;
        c.onerror = function () {
            d()
        }
    } else {
        c.onreadystatechange = function () {
            if (/loaded|complete/.test(c.readyState)) {
                d()
            }
        }
    }

    function d() {
        c.onload = c.onerror = c.onreadystatechange = null;
        c = null;
        f()
    }

    function a(k, l, j) {
        var i = k.sheet,
            g;
        j += 1;
        if (j > protectNum) {
            g = true;
            k = null;
            l();
            return
        }
        if (isOldWebKit) {
            if (i) {
                g = true
            }
        } else {
            if (i) {
                try {
                    if (i.cssRules) {
                        g = true
                    }
                } catch (h) {
                    if (h.name === "NS_ERROR_DOM_SECURITY_ERR") {
                        g = true
                    }
                }
            }
        }
        setTimeout(function () {
            if (g) {
                l()
            } else {
                a(k, l, j)
            }
        }, 20)
    }
};
Site.checkScriptLoad = function (f) {
    if (typeof f == "undefined" || f.length < 1) {
        return
    }
    var c = document.scripts,
        b = c.length - 1,
        e = "",
        a = false,
        d;
    for (d = b; d >= 0; d--) {
        e = c[d].getAttribute("src") || "";
        if (e == f) {
            a = true;
            break
        }
    }
    return a
};
Site.demandLoadJs = function (b, a) {
    if (typeof b == "undefined" || b.length < 1) {
        return
    }
    if (!Site.checkScriptLoad(b)) {
        if (typeof a == "function") {
            $LAB.script(b).wait(function () {
                a()
            })
        } else {
            $LAB.script(b)
        }
    }
};
Site.checkCssLoad = function (c) {
    if (typeof c == "undefined" || c.length < 1) {
        return
    }
    var f = document.styleSheets,
        b = f.length - 1,
        d = "",
        a = false,
        e;
    for (e = b; e >= 0; e--) {
        src = f[e].href || "";
        if (src == c) {
            a = true;
            break
        }
    }
    return a
};
Site.demandLoadCss = function (a, b) {
    if (typeof a == "undefined" || a.length < 1) {
        return
    }
    if (!Site.checkCssLoad(a)) {
        Site.loadCss(a, b)
    }
};
Site.initContentSplitLine = function (a, c) {
    var b = $("#module" + a);
    if (b.length < 1 || typeof c == "undefined" || c.y != 2) {
        return
    }
    var f = c.w ? c.w : 1,
        k = c.c ? c.c : "#000",
        h = Number(c.s),
        e = b.find(".g_separator");
    if (isNaN(h) || h < 3 || h > 8 || e.length < 1) {
        return
    }
    if (Fai.isIE6() || Fai.isIE7()) {
        e.css({
            fontSize: 0,
            height: 0,
            lineHeight: 0,
            borderColor: c.c,
            borderWidth: c.w + "px",
            borderStyle: "solid",
            borderLeft: "none",
            borderTop: "none",
            borderRight: "none"
        });
        return
    }
    var l = "<span>",
        g = "",
        j, d;
    j = ["─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ", "-·-·-·-·-·-·-·-·-·-·-·-·-·-·-·", "-··-··-··-··-··-··-··-··-··-··", "— - — - — - — - — - — - — - — - "];
    g = j[h - 3];
    for (d = 0; d < 3; d++) {
        g += g
    }
    l += g + "</span>";
    e.addClass("g_foldTextLine").html(l);
    Site.checkSplitLineEnough(a)
};
Site.checkSplitLineEnough = function (g) {
    var c = $("#module" + g),
        d = c.find(".g_separator");
    if (c.length < 1 || d.length < 1) {
        return
    }
    var e = d.find("span"),
        b = d.width(),
        a = e.width(),
        f = e[0].innerHTML;
    doubleText = f + f;
    if (a == 0 || b == 0) {
        e.html(doubleText + f)
    } else {
        if (a < b) {
            e.html(doubleText);
            Site.checkSplitLineEnough(g)
        }
    } if (c.hasClass("formStyle11")) {
        d.css("width", c.find(".formMiddleContent").width() + "px")
    }
};
Site.chageTheWebVersion = function (a) {
    $.ajax({
        type: "POST",
        url: "/ajax/webTools_h.jsp?cmd=changeWebVersion",
        data: "verNum=" + a,
        error: function () {
            Fai.ing("系统异常，请稍后重试", true)
        }, success: function (b) {
            var c = jQuery.parseJSON(b);
            if (c.success) {
                window.location.reload()
            } else {
                alert(c.msg)
            }
        }
    })
};
Site.cloneWebVersion = function () {
    $.ajax({
        type: "POST",
        url: "/ajax/webTools_h.jsp",
        data: "cmd=getAcctInfo",
        error: function () {
            Fai.ing("系统异常，请稍后重试", true)
        }, success: function (b) {
            var c = jQuery.parseJSON(b);
            if (c.success) {
                var d = prompt("将当前网站克隆到下面输入的网站(ps:输入的账号必须为内部账号)\n\n请输入账号名：");
                a(d, c)
            }
        }
    });

    function a(c, b) {
        if (c == null) {
            return
        } else {
            if (c.trim() == "") {
                alert("输入用户名不能为空！")
            } else {
                var d = prompt("请输入客户类型：\n\n直销账号为0；  分销账号为1");
                if (d == null) {
                    return
                } else {
                    if (d.trim() == "") {
                        alert("输入客户类型不能为空！");
                        return
                    } else {
                        if (d != 0 && d != 1) {
                            alert("输入客户类型错误！");
                            return
                        } else {
                            $.ajax({
                                type: "POST",
                                url: "/ajax/webTools_h.jsp",
                                data: "cmd=getAcctInfo&inputAcctName=" + c + "&inputAtype=" + d,
                                error: function () {
                                    Fai.ing("系统异常，请稍后重试", true)
                                }, success: function (e) {
                                    var i = jQuery.parseJSON(e);
                                    if (i.success) {
                                        if (i.aid == b.aid) {
                                            alert("所输入的账号与当前网站账号相同，不能克隆！")
                                        } else {
                                            if (!i.isFaier) {
                                                alert("你所输入网站账号不是内部账号，不能克隆！");
                                                return
                                            }
                                            var g = ["把企业aid：" + b.aid + "，" + b.atypeName + "，" + b.aacct + b.siteVerName + "(原网站)", "\n\n克隆\n\n", "到企业aid：" + i.aid + "，" + i.atypeName + "，" + i.aacct + i.siteVerName + "(目标网站)"];
                                            var h = window.confirm(g.join(""));
                                            if (h) {
                                                var f = window.confirm("确定克隆到id：" + i.aid + "；" + i.atypeName + "账号：" + i.aacct + "？必须检查清楚！！")
                                            }
                                            if (f) {
                                                $.ajax({
                                                    type: "POST",
                                                    url: "/ajax/webTools_h.jsp",
                                                    data: "cmd=cloneWebSite&fromAid=" + b.aid + "&toAid=" + i.aid,
                                                    error: function () {
                                                        Fai.ing("系统异常，请稍后重试", true)
                                                    }, success: function (j) {
                                                        var k = jQuery.parseJSON(j);
                                                        if (k.success) {
                                                            alert("克隆成功!");
                                                            window.location.reload()
                                                        } else {
                                                            if (k.msg != null) {
                                                                alert(k.msg)
                                                            } else {
                                                                alert("系统错误，克隆失败！")
                                                            }
                                                        }
                                                    }
                                                })
                                            }
                                        }
                                    } else {
                                        if (i.msg == null) {
                                            alert("系统出错，克隆失败！")
                                        } else {
                                            alert(i.msg)
                                        }
                                    }
                                }
                            })
                        }
                    }
                }
            }
        }
    }
};
Site.setMallTrialTime = function (e) {
    var f, b = new Date(),
        d = b.getFullYear(),
        g = b.getMonth() + 1,
        a = b.getDate();
    if (e == 0) {
        f = d + "-" + g + "-" + a + " 00:00:00"
    } else {
        if (e == 1) {
            f = d + "-" + g + "-" + (a + 1) + " 00:00:00"
        } else {
            f = prompt("修改商城试用到期时间。格式：2016-06-24 09:00:00", "");
            var c = /^((((1[6-9]|[2-9]\d)\d{2})-(0?[13578]|1[02])-(0?[1-9]|[12]\d|3[01]))|(((1[6-9]|[2-9]\d)\d{2})-(0?[13456789]|1[012])-(0?[1-9]|[12]\d|30))|(((1[6-9]|[2-9]\d)\d{2})-0?2-(0?[1-9]|1\d|2[0-8]))|(((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))-0?2-29-)) (20|21|22|23|[0-1]?\d):[0-5]?\d:[0-5]?\d$/;
            if (!f.match(c)) {
                alert("格式错误！请重新输入正确的商城试用到期时间。");
                return
            }
        }
    }
    $.ajax({
        type: "POST",
        url: "/ajax/webTools_h.jsp",
        data: "cmd=setMallTrialTimeEnd&trialTime=" + f,
        error: function () {
            Fai.ing("系统异常，请稍后重试", true)
        }, success: function (h) {
            var i = jQuery.parseJSON(h);
            if (i.success) {
                alert(i.msg);
                window.location.reload()
            } else {
                if (i.msg) {
                    alert(i.msg)
                } else {
                    alert("系统错误，修改商城试用结束时间失败！")
                }
            }
        }
    })
};
Site.getModuleStatus = function (d) {
    var e = 1,
        g = "module" + d,
        b = Fai.top.$("#" + g),
        c = b.attr("_side"),
        a = b.parent(),
        f = a.attr("id") || "";
    if (c == 2) {
        e = 4
    } else {
        if (c == 1) {
            e = 5
        } else {
            if (f == "floatLeftTopForms" || f == "floatRightTopForms" || f == "floatLeftBottomForms" || f == "floatRightBottomForms") {
                e = 3
            } else {
                if (b.css("position") == "absolute" && a.hasClass("absForms")) {
                    e = 2
                }
            }
        }
    }
    return e
};
Site.jumpToModulePosition = function (e, a, c) {
    var d = $("#module" + e),
        f = 0;
    if (d.length < 1) {
        if (c == "") {
            return
        } else {
            document.location.href = c + "#fai_" + e + "_" + a
        }
    }
    if (a == "bottom") {
        f = d.height()
    }
    var b = window.location.hash;
    if (b == "" && b.substring(1).split("_")[0] != "fai") {
        window.location.hash = "fai_" + e + "_" + a
    }
    $("html, body, #g_main, #web").animate({
        scrollTop: document.getElementById("module" + e).offsetTop + f
    }, {
        duration: 500,
        easing: "swing"
    });
    if (c != "") {
        $("#navCenter").find(".itemHover").removeClass("itemHover")
    }
};
Site.getTopWindow = function () {
    return (typeof Fai != "undefined" && Fai.top) || window
};
Site.changeABVersion = function (a) {
    if (window.localStorage && window.localStorage.setItem && window.localStorage.removeItem) {
        window.localStorage.removeItem("ABVesion");
        if (a) {
            window.localStorage.setItem("ABVesion", Fai.top._aid + "-A")
        } else {
            window.localStorage.setItem("ABVesion", Fai.top._aid + "-B")
        }
    }
    window.location.reload()
};
Site.getABVersion = function () {
    var c = false;
    if (Fai.top._aid % 2 == 1) {
        c = true
    }
    if (window.localStorage && window.localStorage.getItem) {
        var a = window.localStorage.getItem("ABVesion");
        if (a != null && a != "") {
            var b = a.split("-");
            var d = {};
            d.aid = b[0];
            d.ver = b[1];
            if (d.aid == Fai.top._aid) {
                if (d.ver == "A") {
                    c = false
                } else {
                    if (d.ver == "B") {
                        c = true
                    }
                }
            }
        }
    }
    return c
};
(function (c, a, d) {
    a.runSiteInit = function () {
        var k = [81, 97],
            l = k.length,
            g, h, f, e;
        for (f = 0; f < l; f++) {
            g = c(".formStyle" + k[f]);
            h = g.length;
            for (e = 0; e < h; e++) {
                a.run(g.eq(e).attr("id"))
            }
        }
    };
    var b = {};
    a.init = function (e, f) {
        var g = typeof f == "number" ? f : f.moduleId;
        if (!g) {
            return
        }
        var h = "module" + g;
        b[h] = b[h] || [];
        b[h].push({
            runFun: e,
            args: f
        })
    };
    a.run = function (j) {
        var f, e, h, g;
        if (b && b[j] && b[j].length > 0) {
            h = b[j];
            f = b[j].length;
            for (e = 0; e < f; e++) {
                g = h[e];
                if (g.runFun.indexOf("ImageEffect") < 0) {
                    jzUtils.run({
                        name: g.runFun
                    }, g.args)
                } else {
                    jzUtils.run({
                        name: g.runFun,
                        callMethod: true
                    }, g.args)
                }
            }
            return delete b[j]
        }
        return false
    }
})(jQuery, Site.cacheModuleFunc || (Site.cacheModuleFunc = {}));
Site.bindInTabSwitch = function () {
    $(".formStyle29").each(function () {
        var c = $(this).attr("id").replace("module", "");
        if (Fai.top["tabModule" + c + "Switch"]) {
            $(this).find(".formTabButton").off("mouseenter.tab").addClass("formTabButtonClick")
        } else {
            $(this).find(".formTabButton").off("mouseenter,tab").on("mouseenter.tab", function () {
                $(this).trigger("click")
            }).removeClass("formTabButtonClick")
        }
    });
    var a = new Array();
    var b = Fai.top.location.hash;
    $(".formTabButtonList").each(function () {
        $(this).find(".formTabButton").eq(0).click();
        $.each($(this).find(".formTabButton"), function (c, d) {
            var g = $(d).attr("tabModuleId");
            if (("#module" + g) === b) {
                a.push(parseInt(g));
                return false
            }
            var f = Fai.getUrlParam(Fai.top.location.href, "m" + g + "pageno");
            if (typeof (f) != "undefined" && f.length > 0) {
                a.push(parseInt(g))
            }
        })
    });
    $(".formTabButtonYList").each(function () {
        $(this).find(".formTabButton").eq(0).click();
        $.each($(this).find(".formTabButton"), function (c, d) {
            var g = $(d).attr("tabModuleId");
            if (("#module" + g) === b) {
                a.push(parseInt(g));
                return false
            }
            var f = Fai.getUrlParam(Fai.top.location.href, "m" + g + "pageno");
            if (typeof (f) != "undefined" && f.length > 0) {
                a.push(parseInt(g))
            }
        })
    });
    $.each(a, function (c, d) {
        Site.changeLiCnt(d, false, 29)
    })
};
Site.restartMarquee = function (a, c, d) {
    var f = Fai.top.$("#module" + a),
        g = f.hasClass("formStyle4") || f.hasClass("formStyle5") || f.hasClass("formStyle16") || f.hasClass("formStyle77") || f.hasClass("formStyle31") || f.hasClass("formStyle42"),
        h = f.hasClass("formStyle2") || f.hasClass("formStyle3") || f.hasClass("formStyle8") || f.hasClass("formStyle12") || f.hasClass("formStyle30") || f.hasClass("formStyle41") || f.hasClass("formStyle74"),
        b = g ? "photoList" : "productList";
    var i = f.hasClass("formStyle88") || f.hasClass("formStyle89") || f.hasClass("formStyle90");
    if (i) {
        b = "listPhotos"
    }
    if (c) {
        if (Fai.top[b + a]) {
            var e = Fai.top[b + a].data;
            Fai.stopInterval("marquee" + a);
            if (g) {
                Site.loadPhotoMarquee(a, !e.picScale, e.cusPicSize, e.newMarqueeToward)
            } else {
                if (h) {
                    Site.loadProductMarquee(a, !e.picScale, e.cusPicSize, e.newMarqueeToward)
                } else {
                    if (i) {
                        Site.loadPhotoMarquee(a, e.picScale, e.cusPicSize, e.newMarqueeToward, "listPhotos")
                    }
                }
            }
        } else {
            new Function("Fai.top.changeMarquee" + a + "()")()
        }
    }
    if (d == 29) {
        $("#formTabCntId" + a).parent().find(".formTabCntId").each(function () {
            if ($(this).attr("show")) {
                $(this).show();
                if ($(this).attr("styleId") == 3 || $(this).attr("styleId") == 16 || $(this).attr("styleId") == 90) {
                    var j = $($(this).find(">div")[0]).attr("id").replace("module", "");
                    new Function("Fai.top.changeMarquee" + j + "()")()
                }
            } else {
                $(this).hide()
            }
        })
    }
};
Site.changeLiCnt = function (e, b, a) {
    var c = $("#formTabButton" + e);
    c.find(".formTabLeft").addClass("formTabLeftHover").end().find(".formTabMiddle").addClass("formTabMiddleHover").end().find(".formTabRight").addClass("formTabRightHover").end().siblings().find(".formTabLeft").removeClass("formTabLeftHover").end().find(".formTabMiddle").removeClass("formTabMiddleHover").end().find(".formTabRight").removeClass("formTabRightHover").end();
    c.addClass("formTabButtonHover").siblings().removeClass("formTabButtonHover");
    $("#formTabCntId" + e).parent().find(".formTabCntId").each(function () {
        if ($(this).attr("show")) {
            $(this).removeAttr("show");
            $(this).removeClass("formTabCntIdHover")
        }
    });
    var d = $("#formTabCntId" + e);
    d.prependTo(d.parent());
    d.attr("show", true);
    d.addClass("formTabCntIdHover");
    Site.restartMarquee(e, b, a);
    Site.triggerGobalEvent("site_moduleTabSwitch", e);
    Site.fixModuleInTabSwitchBug(e);
    jzUtils.run({
        name: "moduleAnimation.publish",
        base: Fai.top.Site
    });
    jzUtils.run({
        name: "moduleAnimation.contentAnimationPublish",
        base: Fai.top.Site
    })
};
Site.initTabYStyle = function (d) {
    var c = Fai.top.$("#module" + d),
        a = c.find(".titleTable");
    if (Fai.isIE6()) {
        var e = c.find(".formMiddleCenter" + d).width(),
            b = a.width();
        c.find("#formTabContent" + d).css({
            width: (e - b - 40) + "px",
            "float": "left"
        })
    }
};
Site.fixModuleInTabSwitchBug = function (c) {
    var b = $("#module" + c),
        a;
    if (b.hasClass("formStyle83") && !!!b.data("fk_fixEffect")) {
        Site.adjustPhotoCardImgSize(b);
        b.data("fk_fixEffect", 1)
    }
    if (b.hasClass("formStyle85") && !!!b.data("fk_fixEffect")) {
        Site.adjustPhotoNewCardImgSize(b);
        b.data("fk_fixEffect", 1)
    }
    if (b.hasClass("formStyle98") && !!!b.data("fk_fixEffect")) {
        Site.adjustPhotoMoreCardImgSize(b);
        b.data("fk_fixEffect", 1)
    }
    if (b.hasClass("formStyle1") && !!!b.data("fk_fixEffect")) {
        Site.richMarquee(Fai.top["richMarqueeInTab" + c]);
        b.data("fk_fixEffect", 1)
    }
    if (b.hasClass("formStyle7") || b.hasClass("formStyle6")) {
        a = Fai.top["newsScrollOptions" + c];
        if ((typeof a != "undefined") && a.scroll) {
            b.find(".separatorLine").css("display", "")
        }
    }
    if ((b.hasClass("formStyle2") || b.hasClass("formStyle3") || b.hasClass("formStyle4") || b.hasClass("formStyle12") || b.hasClass("formStyle30") || b.hasClass("formStyle74") || b.hasClass("formStyle41") || b.hasClass("formStyle8")) && !!!b.data("fk_fixEffect")) {
        if (Site.ImageEffect && Site.ImageEffect.cashOptions && c.toString() in Site.ImageEffect.cashOptions) {
            jzUtils.run({
                name: "ImageEffect.FUNC.BASIC.Init",
                callMethod: true
            }, Site.ImageEffect.cashOptions[c]);
            b.data("fk_fixEffect", 1)
        }
    }
};
Site.callMusicUnload = function (a, c) {
    var b = Site.callMusicPosition(a);
    $.cookie(c, b)
};
Site.callMusicPlayButton = function (e, d, f, c) {
    $("#" + e).bind("click", function () {
        var j = $.cookie(c);
        var i = $(this);
        var h = $("#" + e).attr("bgMusicStatus");
        if (h != j) {
            $.cookie(c, h)
        }
        j = $.cookie(c);
        if (j == "true") {
            $("#" + e).attr("bgMusicStatus", "false");
            $.cookie(c, false);
            Site.reStartMusic(d);
            i.attr("title", "点击暂停播放音乐");
            i.removeClass("bgplayerButtonP")
        } else {
            if (i.hasClass("bgplayerButtonP")) {
                $("#" + e).attr("bgMusicStatus", "false");
                Site.reStartMusic(d);
                i.attr("title", "点击暂停播放音乐");
                i.removeClass("bgplayerButtonP")
            } else {
                var g = Site.callMusicPosition(d);
                $.cookie(f, g);
                $("#" + e).attr("bgMusicStatus", "true");
                $.cookie(c, true);
                Site.stopMusic(d);
                i.attr("title", "点击播放音乐");
                i.addClass("bgplayerButtonP")
            }
        }
    });
    var b = $.cookie(c);
    var a = Fai.top.$("#" + e);
    if (b == "true") {
        a.attr("title", "点击播放音乐");
        a.addClass("bgplayerButtonP");
        a.show()
    } else {
        a.show();
        a.attr("title", "点击暂停播放音乐");
        a.removeClass("bgplayerButtonP")
    }
};
Site.SetPositionZero = function () {
    $.cookie("bgplayerTime", "0");
    var a = $("#bgplayerButton");
    a.attr("title", "点击播放音乐");
    a.addClass("bgplayerButtonP")
};
Site.callMusicPosition = function (a) {
    var b;
    try {
        b = Site.callMusic(a).getMusicPosition()
    } catch (c) {}
    return b
};
Site.stopMusic = function (a) {
    var b;
    try {
        b = Site.callMusic(a).stopMusic()
    } catch (c) {}
    return b
};
Site.reStartMusic = function (b) {
    var a;
    try {
        a = Site.callMusic(b).reStartMusic()
    } catch (c) {}
    return a
};
Site.getMusicLength = function (a) {
    var b = -1;
    try {
        while (b < 0) {
            b = Site.callMusic(a).getSoundLength()
        }
    } catch (c) {}
    return b
};
Site.changeVol = function (a, b) {
    try {
        Site.callMusic(a).changeVolume(b)
    } catch (c) {
        console.log(c.stack)
    }
};
Site.callMusic = function (a) {
    var b = document[a] || window[a] || Site.getTopWindow().document[a];
    return b
};
Site.bgmFlushContinue = function () {
    var a = $("#bgplayerButton").attr("bgmusicstatus");
    if (a == "false") {
        $.cookie("bgplayerPause", "false");
        $.cookie("hasMusicPlaying", "false")
    }
    if (a == "false") {
        Site.callMusicUnload("faiBgMusicPlayer", "bgplayerTime")
    }
};
Site.appendQuickTime = function (b) {
    var e = new Array(),
        d = b.width,
        c = b.height,
        a = b.path;
    e.push("<object width='" + d + "' height='" + c + "' classid='clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B' codebase='http://www.apple.com/qtactivex/qtplugin.cab'>");
    e.push("<param name='src' value='" + a + "'>");
    e.push("<param name='controller' value='true'>");
    e.push("<param name='type' value='video/quicktime'>");
    e.push("<param name='autoplay' value='false'>");
    e.push("<param name='target' value='myself'>");
    e.push("<param name='pluginspage' value='http://www.apple.com/quicktime/download/index.html'>");
    e.push("<embed src='" + a + "' width='" + d + "' height='" + c + "' ");
    e.push("controller='true' align='middle' target='myself' type='video/quicktime' autoplay='false' ");
    e.push("pluginspage='http://www.apple.com/quicktime/download/index.html'>");
    e.push("</embed>");
    e.push("</object>");
    $("#" + b.parentId).append(e.join(""))
};
Site.appendWMP = function (b) {
    var a = new Array(),
        e = b.width,
        d = b.height,
        c = b.path;
    a.push("<embed type='application/x-mplayer2' classid='clsid:6bf52a52-394a-11d3-b153-00c04f79faa6' ");
    a.push("src='" + c + "' wmode='opaque' quality='high' ");
    a.push("enablecontextmenu='false' autostart='false' windowlessVideo='true' ");
    a.push("width='" + e + "' height='" + d + "'>");
    a.push("</embed>");
    $("#" + b.parentId).append(a.join(""))
};
Site.vote = function (g, d, c, b) {
    if (_siteDemo) {
        Fai.ing("当前为“模板网站”，请先“复制网站”再进行投票。");
        return
    }
    var f = $("#voteMsg" + g + d),
        h = parseInt($.cookie("vote" + g)),
        e = true;
    var a = new Array();
    f.hide();
    $(".voteItems" + g + d).each(function () {
        var j = {};
        var i = new Array();
        $(this).find(".voteItemCheck").find("input:checked").each(function () {
            var k = $(this).val();
            if (!isNaN(k)) {
                i.push(parseInt(k))
            }
        });
        if (i.length == 0) {
            f.show();
            f.text(LS.voteNotSelect);
            e = false;
            return
        }
        j.itemList = i;
        a.push(j)
    });
    if (!e) {
        return
    }
    $("#vote" + g + d).attr("disabled", true);
    $("#vote" + g + d).faiButton("disable");
    $.ajax({
        type: "post",
        url: "ajax/vote_h.jsp?cmd=voteItem",
        async: false,
        data: "vid=" + g + "&itemlist=" + Fai.encodeUrl($.toJSON(a)),
        error: function () {
            var j = Site.getDialogContent(false, Fai.format(LS.voteError));
            var i = {
                htmlContent: j,
                width: 205,
                height: 78
            };
            Site.popupBox(i);
            setTimeout(function () {
                document.location.reload()
            }, 3000)
        }, success: function (k) {
            var i = jQuery.parseJSON(k);
            if (i.success) {
                f.hide();
                var l = Site.getDialogContent(true, Fai.format(LS.voteSuccess));
                var j = {
                    htmlContent: l,
                    width: 205,
                    height: 78
                };
                Site.popupBox(j);
                setTimeout(function () {
                    document.location.reload()
                }, 3000);
                $(".voteItems" + g + d).find("input:checked").each(function () {
                    $(this).attr("checked", false)
                });
                if (c > 0) {
                    if (!$.cookie("vote" + g)) {
                        var m = new Date();
                        m.setHours(m.getHours() + c);
                        $.cookie("vote" + g, c, {
                            expires: m
                        })
                    }
                } else {
                    if (c == 0) {
                        $.cookie("vote" + g, null)
                    } else {
                        $.cookie("vote" + g, -1, {
                            expires: 30
                        })
                    }
                }
            } else {
                if (i.login) {
                    f.show();
                    voteMsgs.text(LS.voteErrorByNotLogin)
                } else {
                    f.hide();
                    var l = Site.getDialogContent(false, i.msg);
                    var j = {
                        htmlContent: l,
                        width: 205,
                        height: 78
                    };
                    Site.popupBox(j);
                    setTimeout(function () {
                        document.location.reload()
                    }, 3000)
                }
            }
            setTimeout(function () {
                $("#vote" + g + d).removeAttr("disabled");
                $("#vote" + g + d).faiButton("enable")
            }, 3000)
        }
    })
};
Site.initModuleVote = function (d) {
    var e = d.id,
        c = d.delay,
        b = d.mid,
        a = d.isVoted;
    if (c == 0) {
        $.cookie("vote" + e, null)
    } else {
        if (c == -1) {
            if ($.cookie("vote" + e)) {
                $.cookie("vote" + e, -1, {
                    expires: 30
                })
            }
        } else {
            if ($.cookie("vote" + e) == "-1") {
                $.cookie("vote" + e, null)
            }
        }
    }
    $("#vote" + e + b).click(function () {
        Site.vote(e, b, c, a)
    })
};
Site.fixModuleVoteStyle = function (b, a) {
    if ($("#module" + a).width() <= 400) {
        $("#module" + a).find(".voteItems" + b + a).find(".voteItemPanel").css({
            width: "100%",
            "padding-bottom": "10px"
        });
        $("#module" + a).find(".voteItems" + b + a).find(".voteItemCheck").css({
            padding: "10px 0 0px 5px"
        })
    }
};
Site.fixVoteResultImgStyle = function (c, a, d, b) {
    if ($("#module" + a).width() > 400) {
        if (d != -1 && b == "img") {
            $("#module" + a).find(".voteResult").find(".vi-percent").find(".voteVfmImg").each(function () {
                $(this).css("width", $("#module" + a).find(".voteResult").find(".vi-percent").width() - 48)
            })
        }
    }
    if ($("#module" + a).width() <= 400) {
        $("#module" + a).find(".voteResult").find(".vi-percent").find(".voteItemImg").find("img").css({
            width: "30px",
            height: "30px"
        });
        if (d != -1 && b == "img") {
            $("#module" + a).find(".voteResult").find(".vi-name").css({
                "text-align": "center"
            });
            $("#module" + a).find(".voteResult").find(".vi-percent").find(".voteItemImg").css({
                "margin-right": "2px"
            });
            $("#module" + a).find(".voteResult").find(".vi-percent").find(".voteVfmImg").each(function () {
                $(this).css("width", $("#module" + a).find(".voteResult").find(".vi-percent").width() - 30);
                $(this).css("margin-top", "4px")
            })
        }
    }
};
Site.fixModuleVoteResultStyle = function (b, a, c) {
    if ($("#module" + a).width() <= 400) {
        $("#module" + a).find(".voteResult").find(".vi-name").css({
            width: "30%"
        });
        $("#module" + a).find(".voteResult").find(".vi-percent").css({
            width: "50%"
        });
        $("#module" + a).find(".voteResult").find(".vi-percent").find(".voteVfm").css({
            height: "22px"
        });
        $("#module" + a).find(".voteResult").find(".vi-count").css({
            width: "20%"
        });
        $("#module" + a).find(".voteResult").find(".vi-count").find(".voteItemCount").css({
            "padding-left": "0"
        })
    }
    if (c != -1) {
        $("#module" + a).find(".voteResult").find(".vi-percent").find(".voteVfm").find(".g_block").each(function () {
            $(this).addClass("g_block" + c)
        })
    }
};
Site.showNavSubMenu = function (b) {
    var a = 0;
    if (b == 1) {
        a = 1
    }
    $.each(Fai.top.$("#nav .navCenter .item"), function (u, q) {
        $(this).unbind();
        if (b == 100) {
            var y = $(this);
            if (y.find(".navSubMenu").length >= 1) {
                return
            }
            var o = y.attr("id");
            var k = [];
            try {
                k = Fai.fkEval(o + "SubMenu")
            } catch (v) {
                return false
            }
            var m = Fai.top._colId;
            var A = Fai.top._fromColId;
            var g = y.attr("colId");
            if (g == m || g == A) {
                y.addClass("itemSelected")
            }
            y.hover(function () {
                $(this).addClass("itemHover")
            }, function () {
                $(this).removeClass("itemHover")
            });
            if (!k || k.length < 1) {
                return
            }
            var d = 0;
            if (g == m || g == A) {
                d = 1
            } else {
                for (var u = 0; u < k.length; ++u) {
                    var c = k[u].colId;
                    if (c == m || c == A) {
                        d = 2;
                        break
                    }
                    if (!Fai.isNull(k[u].sub)) {
                        var r = k[u].sub;
                        for (var q = 0; q < r.length; ++q) {
                            var z = r[q].colId;
                            if (z == m || z == A) {
                                d = 3;
                                break
                            }
                        }
                    }
                    if (d != 0) {
                        break
                    }
                }
            } if (k) {
                Site.removeNavHiddenMenu(k)
            }
            if (g == m || g == A) {
                if (k && k.length >= 1) {
                    y.addClass("itemPopupSelected")
                }
            }
            if (d == 0) {
                return
            }
            if (!k || k.length < 1) {
                return
            }
            var f = $("<div class='navSubMenu'></div>");
            var s = $("<div class='content2'><table class='top' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table><table class='middle' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table><table class='bottom' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table></div>");
            s.appendTo(f);
            s = s.find(".middle .center");
            for (var u = 0; u < k.length; ++u) {
                var w = "";
                if (k[u].colId == m || k[u].colId == A) {
                    w = " itemSelected"
                }
                var j = "<table class='item" + w + "' cellpadding='0' cellspacing='0'><tr><td class='itemLeft'></td><td class='itemCenter'><a href='" + k[u].href + "'>" + k[u].html + "</a></td><td class='itemRight'></td></tr></table>";
                $(j).appendTo(s);
                if (d == 1) {
                    continue
                }
                if (d == 2 && m != k[u].colId && A != k[u].colId) {
                    continue
                }
                if (Fai.isNull(k[u].sub) || k[u].sub.length < 1) {
                    continue
                }
                var r = k[u].sub;
                if (d == 3) {
                    var p = false;
                    for (var q = 0; q < r.length; ++q) {
                        if (r[q].colId == m || r[q].colId == A) {
                            p = true;
                            break
                        }
                    }
                    if (!p) {
                        continue
                    }
                }
                var h = $("<div class='content3'><table class='top' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table><table class='middle' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table><table class='bottom' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table></div>");
                h.appendTo(s);
                h = h.find(".middle .center");
                for (var q = 0; q < r.length; ++q) {
                    var t = "";
                    if (r[q].colId == m || r[q].colId == A) {
                        t = " itemSelected"
                    }
                    var l = "<table class='item" + t + "' cellpadding='0' cellspacing='0'><tr><td class='itemLeft'></td><td class='itemCenter'><a href='" + r[q].href + "'>" + r[q].html + "</a></td><td class='itemRight'></td></tr></table>";
                    $(l).appendTo(h)
                }
            }
            f.insertAfter($(this));
            f.find(".item").hover(function () {
                $(this).addClass("itemHover")
            }, function () {
                $(this).removeClass("itemHover")
            })
        } else {
            var y = $(this);
            var m = Fai.top._colId;
            var A = Fai.top._fromColId;
            var g = y.attr("colId");
            var o = y.attr("id");
            var k = [];
            try {
                k = Fai.fkEval(o + "SubMenu")
            } catch (v) {
                return false
            }
            var x = u + 1;
            var p = false;
            if (m == g || A == g) {
                p = true
            } else {
                if (k && k.length >= 1) {
                    for (var u = 0; u < k.length; ++u) {
                        var c = k[u].colId;
                        if (c == m || c == A) {
                            p = true;
                            break
                        }
                        if (!Fai.isNull(k[u].sub)) {
                            var r = k[u].sub;
                            for (var q = 0; q < r.length; ++q) {
                                var z = r[q].colId;
                                if (z == m || z == A) {
                                    p = true;
                                    break
                                }
                            }
                        }
                        if (p) {
                            break
                        }
                    }
                }
            } if (k) {
                Site.removeNavHiddenMenu(k)
            }
            if (p) {
                y.addClass("itemSelected");
                y.addClass("itemSelectedIndex" + x);
                if (k && k.length >= 1) {
                    y.addClass("itemPopupSelected")
                }
            }
            $(this).hover(function () {
                var B = $(this);
                var G = B.attr("id");
                var n = [];
                try {
                    n = Fai.fkEval(G + "SubMenu")
                } catch (E) {
                    return false
                }
                B.addClass("itemHover");
                B.addClass("itemHoverIndex" + x);
                if (n && n.length >= 1) {
                    B.addClass("itemPopupHover")
                }
                var i = "";
                if ($("#nav").hasClass("navStyle")) {
                    var D = $("#nav").attr("class").split(" ");
                    $.each(D, function (e, H) {
                        if (H.search(/navStyle/) != -1) {
                            i += H + " "
                        }
                    })
                } else {
                    if (Fai.top._isTemplateVersion2 || Fai.top._uiMode) {
                        i = "navStyle "
                    }
                }
                var C = "<div class='navSubMenu'></div>";
                var F = Site.showMenu({
                    container: C,
                    mode: a,
                    id: G + "SubMenu",
                    minWidth: B.width(),
                    host: B,
                    clsIndex: x,
                    data: n,
                    fixpos: false,
                    rulerObj: Fai.top.$("#nav"),
                    navSysClass: i,
                    navBar: true
                });
                if (F != null) {
                    F.hover(function () {
                        B.addClass("itemHover");
                        if (n.length > 0) {
                            B.addClass("itemPopupHover")
                        }
                    }, function () {
                        B.removeClass("itemHover");
                        B.removeClass("itemPopupHover")
                    })
                }
            }, function () {
                $(this).removeClass("itemHover");
                $(this).removeClass("itemHoverIndex" + x);
                $(this).removeClass("itemPopupHover");
                if ($(".navSubMenu").length == 0) {
                    $(this).removeClass("itemHover")
                }
            })
        }
    })
};
Site.removeNavHiddenMenu = function (c) {
    for (var b = c.length - 1; b >= 0; --b) {
        if (c[b].hidden) {
            c.splice(b, 1);
            continue
        }
        if (c[b].sub) {
            var a = c[b].sub;
            for (var d = a.length - 1; d >= 0; --d) {
                if (a[d].hidden) {
                    a.splice(d, 1)
                }
            }
        }
    }
};
Site.showNavItemContainer = function () {
    var e = Fai.top.$("#nav"),
        a = e.find(".navCenter");
    if (a.length > 0) {
        a.removeAttr("style")
    }
    Site.hideNavItemContainer();
    var b = e.find(".itemContainer"),
        q = a.outerWidth(true),
        f = 0;
    var o = e.find(".item"),
        v = e.find(".itemSep"),
        u = o.css("float") === "none";
    if (u) {
        return
    }
    Fai.top.$.each(o, function () {
        f += $(this).outerWidth(true)
    });
    Fai.top.$.each(v, function () {
        f += $(this).outerWidth(true)
    });
    b.off("mouseover.navigator").on("mouseover.navigator", ".item", function () {
        var j = 0;
        b.children().each(function (p, w) {
            j += $(w).outerWidth(true)
        });
        if (j > b.width()) {
            b.css("width", j)
        }
    });
    if (Fai.isIE() || Fai.isMozilla()) {
        f += 4
    }
    var g = e.find(".itemPrev"),
        k = e.find(".itemNext");
    if (Fai.top._isTemplateVersion2) {
        g.css("display", "none");
        k.css("display", "none")
    }
    if (f > q) {
        if (!Fai.top._cusResponsive) {
            b.css("width", f + "px")
        }
        k.css("display", "block");
        Fai.top._templateOtherStyleData.h = 0;
        var s = 0,
            t = 0,
            c = 0,
            l;
        if (v.is(":hidden")) {
            l = 0
        } else {
            l = v.width() / 2
        }
        var i = a.offset().left;
        var n = [];
        o.each(function (j) {
            n[j] = $(this).offset().left - i;
            t++
        });
        k.unbind("mousedown").unbind("mouseleave");
        g.unbind("mousedown").unbind("mouseleave");
        k.width(k.data("width"));
        k.mousedown(function () {
            c = n[s + 1] - n[s];
            if (s == 0) {
                c -= l
            }
            s++;
            if (s == t) {
                s = t - 1
            }
            $(this).addClass("itemNextHover");
            b.css("left", (b.position().left - c) + "px");
            if (b.position().left < 0) {
                g.css("display", "block")
            }
            if ((Math.abs(b.position().left) + q) >= f) {
                k.data("width", k.width());
                k.width(0)
            }
        }).mouseleave(function () {
            $(this).removeClass("itemNextHover")
        });
        g.mousedown(function () {
            c = n[s] - n[s - 1];
            if (s == 1) {
                c -= l
            }
            s--;
            if (s < 0) {
                s = 0
            }
            $(this).addClass("itemPrevHover");
            b.css("left", (b.position().left + c) + "px");
            if ((Math.abs(Fai.top.$("#nav .itemContainer").position().left) + q) < f) {
                k.width(k.data("width"))
            }
            if (b.position().left >= 0) {
                g.css("display", "none")
            }
        }).mouseleave(function () {
            $(this).removeClass("itemPrevHover")
        });
        k.off("mouseover.nav").on("mouseover.nav", function () {
            $(this).addClass("itemNextHover")
        });
        g.off("mouseover.nav").on("mouseover.nav", function () {
            $(this).addClass("itemPrevHover")
        })
    } else {
        if (Fai.top.$("#nav")[0].className && Fai.top.$("#nav")[0].className.indexOf("nav2") > -1) {
            var r = b.css("margin-left") ? b.css("margin-left").replace("px", "") : 0,
                m = parseInt(e.css("width") ? e.css("width").replace("px", "") : 0),
                h = f + parseInt(r),
                d = parseInt(h) + 10;
            a.css("width", Math.min(m, d));
            if (Fai.isIE11()) {
                a.css("height", b.outerHeight(true) + "px")
            }
            if (Fai.top._manageMode) {
                jzUtils.run({
                    name: "reSaveNavCenterWidth"
                }, h)
            }
        }
    }
};
Site.hideNavItemContainer = function () {
    $("#nav .itemContainer").removeAttr("style");
    $("#nav").find(".itemPrev").hide();
    $("#nav").find(".itemNext").hide()
};
Site.hideNavSubMenu = function () {
    Fai.top.$.each(Fai.top.$("#nav .navCenter .item"), function (a, b) {
        $(this).unbind()
    })
};
Site.initModuleNavListGroup = function (c, b) {
    $("#module" + c + " .g_foldValueCenter").mouseover(function () {
        $(this).addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_hover")
    });
    if (b) {
        var a = $("#module" + c).find(".formMiddle" + c).find("table.g_foldContainerContent").find(".g_foldContainerContentCenter");
        var d = a.find(".g_foldContainerName");
        $.each(d, function (e, g) {
            var f = $(g);
            f.css("cursor", "pointer");
            f.click(function () {
                var h = $(this).next();
                if (h.is(":visible")) {
                    var i = $(f.find(".g_unfold")[0]);
                    i.removeClass("g_unfold").addClass("g_fold");
                    h.hide()
                } else {
                    var i = $(f.find(".g_fold")[0]);
                    i.removeClass("g_fold").addClass("g_unfold");
                    h.show()
                }
            })
        })
    }
};
Site.initModuleNavListAcrossDisplay = function (c, d, b, e) {
    var a = $("#module" + c);
    m_formMiddleWidth = a.find(".formMiddle").width(), mSOptions = {
        moduleId: c,
        clsStr: "navAcrossContainer navAPanel"
    };
    a.find(".navA_C_J .navA_J").hover(function () {
        var n = $(this),
            h = n.attr("_colId"),
            j = d[h],
            i = a.attr("_side"),
            m = a.parent(),
            l = a.parent().attr("id"),
            k = true;
        mSOptions.that = n;
        if (Fai.isIE6() || Fai.isIE7()) {
            k = false
        } else {
            if (i == 2) {
                k = false
            } else {
                if (i == 1) {
                    k = false
                } else {
                    if (l == "floatLeftTopForms" || l == "floatRightTopForms" || l == "floatLeftBottomForms" || l == "floatRightBottomForms") {
                        k = false
                    } else {
                        if (a.css("position") == "absolute" && m.hasClass("absForms")) {
                            k = false
                        }
                    }
                }
            }
        } if (j != null && j.length > 0) {
            var o = [],
                f = $("#navAcM" + c + "C" + h + "Panel");
            if (f.length == 0) {
                o.push("<div class='s_navList'>");
                $.each(j, function (s, r) {
                    var q = "";
                    if (!!d[r.id]) {
                        q = " navA_more"
                    }
                    var t = "";
                    if (r.openType) {
                        t = "target='_blank';"
                    }
                    o.push("<table class='navAcrossCotent childNavA_J g_item' cellpadding='0' cellspacing='0' _colId=" + r.id + " style='*width:auto;'><tr>");
                    o.push("<td class='navAcrossCotentLeft'></td>");
                    o.push("<td class='navAcrossCotentCenter'>");
                    if (b && !!d[r.id]) {
                        o.push("<a href='javascript:void(0);' style='cursor:default;'>" + r.name + "</a></td>")
                    } else {
                        o.push("<a href='" + r.url + "' " + t + ">" + r.name + "</a></td>")
                    }
                    o.push("<td class='navAcrossCotentRight" + q + "'></td>");
                    o.push("</tr></table>")
                });
                o.push("</div>");
                mSOptions.idStr = "navAcM" + c + "C" + h + "Panel";
                mSOptions.contentStr = o.join("");
                f = Site.moduleSubPanel(mSOptions);
                var p = n.offset().left,
                    g = n.offset().top;
                if (!k) {
                    p += n.outerWidth()
                }
                f.css({
                    top: g,
                    left: p
                }).show()
            }
            if (k) {
                var p = a.offset().left + a.outerWidth();
                a.css("z-index", 9030);
                f.stop(true, false).animate({
                    left: p
                }, 500)
            }
            f.mouseleave(function () {
                n.removeClass("g_hover")
            });
            f.mouseover(function () {
                n.addClass("g_hover")
            });
            f.find(".childNavA_J").hover(function () {
                var s = $(this),
                    x = s.attr("_colId"),
                    u = d[x];
                mSOptions.that = s;
                if (u != null && u.length > 0) {
                    var r = [],
                        t = $("#navAcM" + c + "C" + x + "Panel");
                    if (t.length == 0) {
                        r.push("<div class='s_navList'>");
                        $.each(u, function (y, A) {
                            var z = "";
                            if (A.openType) {
                                z = "target='_blank';"
                            }
                            r.push("<table class='navAcrossCotent grandNavA_J g_item' cellpadding='0' cellspacing='0' style='*width:auto;'><tr>");
                            r.push("<td class='navAcrossCotentLeft'></td>");
                            r.push("<td class='navAcrossCotentCenter'>");
                            r.push("<a href='" + A.url + "' " + z + ">" + A.name + "</a>");
                            r.push("<td class='navAcrossCotentRight'></td>");
                            r.push("</tr></table>")
                        });
                        r.push("</div>");
                        mSOptions.idStr = "navAcM" + c + "C" + x + "Panel";
                        mSOptions.contentStr = r.join("");
                        t = Site.moduleSubPanel(mSOptions);
                        var w = s.offset().left,
                            v = s.offset().top;
                        if (!k) {
                            w += s.outerWidth()
                        }
                        t.css({
                            top: v,
                            left: w
                        }).show();
                        if (k) {
                            var q = s.offset().left + s.outerWidth();
                            t.css("z-index", 1);
                            t.stop(true, false).animate({
                                left: q
                            }, 500)
                        }
                    }
                    t.find(".grandNavA_J").hover(function () {
                        $(this).addClass("g_hover")
                    }, function () {
                        $(this).removeClass("g_hover")
                    });
                    t.mouseleave(function () {
                        f.attr("_mouseIn", 0);
                        n.removeClass("g_hover");
                        s.removeClass("g_hover")
                    });
                    t.mouseover(function () {
                        f.attr("_mouseIn", 1);
                        n.addClass("g_hover");
                        s.addClass("g_hover")
                    });
                    s.mouseleave(function () {
                        f.attr("_mouseIn", 0)
                    })
                }
                s.addClass("g_hover")
            }, function (q) {
                $(this).removeClass("g_hover")
            })
        }
        n.addClass("g_hover")
    }, function (f) {
        $(this).removeClass("g_hover")
    }).mouseleave(function () {
        a.css("z-index", "")
    });
    Site.initContentSplitLine(c, e)
};
Site.onSiteFixTop = function () {
    if (Fai.top._navHidden) {
        return
    }
    var d, q = false,
        c = false,
        k = false,
        A = Fai.isIE6(),
        z = Fai.isIE7(),
        r = Fai.top.$("#nav"),
        C = Fai.top.$(window),
        w = Fai.top.$("#g_main"),
        i = Fai.top.$("#web"),
        t = Fai.top.$("body"),
        a = Fai.top.$(".webNavTable"),
        j = Fai.top.$(".webHeaderTable"),
        m = Fai.top.$(".webBannerTable"),
        p = Fai.top.$(".floatLeftTop"),
        e = r.parent(),
        u = Fai.top.$("#sitetips"),
        o = Fai.top.$("#webBanner"),
        b = Fai.top.$("#webHeader"),
        l = Fai.top.$("#webNav"),
        s, n = parseInt(r.css("top").replace("px", "")),
        D = r.offset().top,
        y = u.height() || 0,
        h = D - y,
        g = p.css("top").replace("px", "") || 0,
        x = Fai.top.$(window),
        F = x;
    if (A || z) {
        c = true;
        F = w
    }
    if (isNaN(n)) {
        n = "auto"
    } else {
        n = n + "px"
    }
    var v;
    if (r.width() == i.width()) {
        k = true;
        v = "100%"
    } else {
        v = r.width() + "px"
    }
    var f = r.offset().left - e.offset().left;
    var B, E;
    F.on("scroll.nav", function () {
        var H = F.scrollTop(),
            G = parseInt(p.css("top").replace("px", "")) - 1;
        g = G || 0;
        d = Site.getNavInClientPosition(r).left;
        if (!q && h < H) {
            if (A) {
                B = r.parent();
                E = r.offset().left - B.offset().left;
                t.prepend(r);
                r.css({
                    position: "absolute",
                    left: d + "px",
                    top: g + "px",
                    width: v
                });
                r.css("width", v)
            } else {
                r.addClass("navfixtop");
                r.css({
                    width: v,
                    left: d + "px",
                    top: g + "px"
                });
                if (k && i.width() > C.width()) {
                    r.css("width", i.width() + "px")
                }
                if (a.find("#nav").length > 0) {
                    s = a
                } else {
                    if (j.find("#nav").length > 0) {
                        s = j
                    } else {
                        if (m.find("#nav").length > 0) {
                            s = m
                        }
                    }
                }
                s.css({
                    zIndex: "30",
                    position: "relative"
                });
                o.addClass("fix-zIndex");
                b.addClass("fix-zIndex");
                l.addClass("fix-zIndex")
            }
            q = true
        }
        if (q && h >= H) {
            if (A) {
                e.append(r);
                r.css({
                    position: "",
                    width: "",
                    left: "",
                    top: "",
                    zIndex: ""
                })
            } else {
                r.removeClass("navfixtop");
                r.css({
                    position: "",
                    width: "",
                    left: "",
                    top: ""
                });
                if (s) {
                    s.css("zIndex", "")
                }
                o.removeClass("fix-zIndex");
                b.removeClass("fix-zIndex");
                l.removeClass("fix-zIndex")
            }
            q = false
        }
    });
    Fai.top.$(window).on("resize.nav", function () {
        if (A && !k && r.offset().top == 0) {
            r.css("left", B.offset().left + E)
        } else {
            if (r.hasClass("navfixtop") && k) {
                if (i.width() < C.width()) {
                    r.css("width", "")
                } else {
                    if (i.width() > C.width()) {
                        setTimeout(function () {
                            r.css("width", i.width() + "px")
                        }, 0)
                    }
                }
            }
            if (r.hasClass("navfixtop") && !k) {
                setTimeout(function () {
                    r.css("left", e.offset().left + f)
                }, 0)
            }
        }
    })
};
Site.getNavInClientPosition = function (b) {
    var a = b[0];
    if (typeof a.getBoundingClientRect !== "undefined") {
        return a.getBoundingClientRect()
    } else {
        var c = Fai.top._manageMode ? Fai.top.$("#g_main") : Fai.top.$(window),
            e = {
                left: 0,
                right: 0
            },
            d = a.offsetParent;
        e.left = a.offsetLeft;
        e.top = a.offsetTop;
        while (d !== null) {
            e.left += d.offsetLeft;
            e.top += d.offsetTop;
            d = d.offsetParent
        }
        if (b.css("position") == "fixed") {
            e.top = b.css("top")
        }
        return {
            left: e.left - c.scrollLeft(),
            top: e.top - c.scrollTop()
        }
    }
};
Site.onNavCntPositionFixTop = function () {
    if (Fai.top._navHidden || !Fai.top._navStyleData.no) {
        return
    }
    if (Fai.top._manageMode) {
        Site.onManageFixTop()
    } else {
        Site.onSiteFixTop()
    }
};
Site.initModulePhotoSwitch = function (x, D, A, z) {
    var d = Fai.top.$("#module" + x),
        f = d.find(".formMiddleContent"),
        m = !D.picScale,
        v = f.width(),
        q = f.height(),
        e = D.data,
        b;
    d.data("photoSwitchData", D);
    d.data("photoSwitchType", A);
    if (z !== "carouselPhotos") {
        if (!m && !D.cusPicSize) {
            for (var t in e) {
                b = e[t];
                b.width = v;
                b.height = q
            }
        }
    }
    if (A == 1) {
        var B = $("#photoSwitch" + x);
        B.css("margin", "0 auto");
        var r = f.width();
        var w = {
            id: x,
            switchType: "1",
            width: r,
            photoSwitch: B
        };
        Site.formMiddleContentWidthArray.push(w);
        B.imageSwitch(D);
        if (f.width() < B.width()) {
            B.css("width", f.width())
        }
        var n = B.find(".imageSwitchShowName").eq(0);
        var o = B.find(".imageSwitchBtnArea").eq(0);
        if (o.width() / B.width() >= 0.4) {
            B.find(".spanHiddenName").each(function () {
                $(this).css("width", ((1 - (o.width() + 20) / B.width()) * 100) + "%")
            })
        }
        o.css("bottom", "5px");
        var p = o[0].getBoundingClientRect().left;
        var j = B[0].getBoundingClientRect().left;
        o.width((o.width() + 5) + "px");
        o.css("top", "auto");
        if (n.find(".spanHiddenName") && n.css("display") == "block") {
            n.css("height", "auto");
            if (z == "carouselPhotos") {
                n.find(".spanHiddenName").each(function () {
                    var a = $(this).text();
                    if (a == "") {
                        $(this).css("height", "30px")
                    }
                });
                n.css({
                    top: "auto",
                    bottom: "0",
                    width: B.width() + "px",
                    "margin-left": "2px",
                    "margin-bottom": "2px"
                });
                o.css("bottom", "8px")
            } else {
                n.css({
                    top: "auto",
                    bottom: "0",
                    "padding-bottom": "15px",
                    width: "100%"
                })
            }
        }
        if (n.find(".spanHiddenName").length == 1) {
            n.css({
                "padding-bottom": "0",
                "margin-left": ""
            })
        }
        var c = B.find(".spanHiddenName").length;
        for (var t = 0; t < c; t++) {
            var u = B.find(".spanHiddenName").eq(t);
            u.css("max-width", "98%");
            if (D.switchWrapName == true) {
                n.css("padding-bottom", "0px");
                u.css({
                    "word-wrap": "break-word",
                    width: "auto"
                });
                if (Fai.isIE6() || Fai.isIE7()) {
                    if (c > 1) {
                        u.css("padding-bottom", "15px")
                    }
                } else {
                    var h = false;
                    if (u.css("display") == "none") {
                        u.addClass("spanShowName");
                        h = true
                    }
                    var C = j + u[0].clientWidth + 10;
                    if (h) {
                        u.removeClass("spanShowName")
                    }
                    if (p - C >= 5) {
                        u.css({
                            "padding-top": "2px",
                            "padding-bottom": "0px",
                            bottom: "0px"
                        });
                        if (z == "carouselPhotos" && u.text() == "") {
                            u.css("padding-bottom", "30px")
                        }
                    } else {
                        if (c > 1) {
                            u.css("padding-bottom", "15px")
                        }
                    }
                }
            } else {
                if (c == 1) {
                    n.css("padding-bottom", "15px");
                    u.css({
                        "white-space": "nowrap",
                        width: "99%",
                        "padding-top": "2px"
                    })
                } else {
                    if ((o.width() + 20) / B.width() < 0.4) {
                        u.css({
                            "white-space": "nowrap",
                            width: "60%",
                            "padding-top": "2px"
                        })
                    } else {
                        u.css({
                            "white-space": "nowrap",
                            "padding-top": "2px"
                        })
                    }
                }
            } if (Fai.isIE6()) {
                for (var y = 0; y < Site.formMiddleContentWidthArray.length; y++) {
                    if (Site.formMiddleContentWidthArray[y].switchType == 1) {
                        $("#photoSwitch" + Site.formMiddleContentWidthArray[y].id).css("width", Site.formMiddleContentWidthArray[y].width + "px")
                    }
                }
            }
        }
    } else {
        if (A == 2) {
            var g = $("#photoDotSwitch" + x);
            var r = f.width();
            var w = {
                id: x,
                switchType: "2",
                width: r,
                photoDotSwitch: g
            };
            Site.formMiddleContentWidthArray.push(w);
            g.imageSwitch(D);
            var n = g.find(".imageSwitchShowName").eq(0);
            var l = g.find(".imageSwitchBtnArea").eq(0);
            var s = 0;
            l.css("left", "");
            if (l.width() > g.width()) {
                l.find(".imageSwitchBtn_dot").each(function () {
                    $(this).css("marginRight", 2 + "px")
                });
                if (l.width() > g.width()) {
                    s = 1;
                    l.css("marginLeft", "-" + l.width() / 2 + "px")
                }
            }
            if (s == 0) {
                l.css("marginLeft", "-" + l.width() / 2 + "px");
                l.css("left", "50%")
            }
            if (f.width() < g.width()) {
                g.css("width", f.width())
            }
            if (n.css("display") == "block" && n.find(".spanHiddenName")) {
                if (z == "carouselPhotos") {
                    n.css({
                        height: "auto",
                        top: "auto",
                        bottom: "0",
                        "padding-bottom": "27px"
                    });
                    var k = g.width() - 44;
                    n.css({
                        "margin-left": "2px",
                        "margin-bottom": "2px",
                        width: "auto"
                    });
                    n.find(".spanHiddenName").each(function () {
                        $(this).css({
                            margin: "0px 22px",
                            width: k
                        })
                    });
                    l.css({
                        "text-align": "center",
                        left: "0",
                        right: "0",
                        "margin-left": "10px"
                    });
                    l.find(".imageSwitchBtn_dot").css("float", "none");
                    l.css("padding-bottom", "2px")
                } else {
                    n.css({
                        height: "auto",
                        top: "auto",
                        bottom: "0",
                        "padding-bottom": "15px"
                    });
                    n.find(".spanHiddenName").each(function () {
                        $(this).css("marginLeft", "0px")
                    });
                    n.width("100%")
                }
            }
            if (n.find(".spanHiddenName").length == 1) {
                n.css({
                    "padding-bottom": "0",
                    "margin-left": ""
                })
            }
            var c = g.find(".spanHiddenName").length;
            for (var t = 0; t < c; t++) {
                var u = g.find(".spanHiddenName").eq(t);
                if (D.switchWrapName == true) {
                    u.css("word-wrap", "break-word")
                } else {
                    u.css("white-space", "nowrap")
                }
            }
            if (Fai.isIE6()) {
                for (var y = 0; y < Site.formMiddleContentWidthArray.length; y++) {
                    if (Site.formMiddleContentWidthArray[y].switchType == 2) {
                        $("#photoDotSwitch" + Site.formMiddleContentWidthArray[y].id).css("width", Site.formMiddleContentWidthArray[y].width + "px");
                        if (Site.formMiddleContentWidthArray[y].width < 300) {
                            l.css("align", "center");
                            l.css("width", Site.formMiddleContentWidthArray[y].width + "px")
                        }
                    }
                }
            }
        }
    }
};
Site.refreshModulePhotoSwitch = function (b) {
    var c = Fai.top.$("#module" + b);
    if (c.length > 0) {
        var a = c.data("photoSwitchData");
        var d = c.data("photoSwitchType");
        if (d == 1) {
            c.find("#photoSwitch" + b).empty()
        } else {
            if (d == 2) {
                c.find("#photoDotSwitch" + b).empty()
            }
        } if (typeof a != "undefined") {
            Site.initModulePhotoSwitch(b, a, d)
        }
    }
};
Site.loadPhotoMarquee = function (u, F, C, n, x) {
    var e = Fai.top["Photo" + u].ieOpt,
        h = Fai.top["Photo" + u].tgOpt,
        o = Fai.top["Photo" + u].callbackArgs;
    var b = $("#module" + u);
    if (Fai.isNull(b)) {
        return
    }
    if (x == "listPhotos") {
        C = 1
    }
    b.find(".demo0>div").each(function () {
        if ($(this).attr("cloneDiv")) {
            $(this).remove()
        }
    });
    var w = 0;
    var t = b.find(".photoMarqueeForm");
    if (!C) {
        t.each(function () {
            var H = $(this).attr("faiWidth");
            var G = $(this).attr("faiHeight");
            if (Fai.isNull(G)) {
                return
            }
            var L = $(this).find(".imgDiv");
            var K = L.width();
            var I = L.height();
            var J = Fai.Img.calcSize(H, G, K, I, Fai.Img.MODE_SCALE_FILL);
            if (J.height > w) {
                w = J.height
            }
        })
    }
    if (e.effType >= 4 && e.effType < 6) {
        Site.clearImageEffectContent_photo("module" + u, "propDiv")
    }
    var d = 0;
    var i = 0;
    var D = 0;
    var g = 0;
    var B = 0;
    var p = 0;
    var E = Site.getFormMiddleContentHeight(b, u);
    t.each(function () {
        var I = $(this);
        var R = I.attr("faiHeight");
        if (Fai.isNull(R)) {
            return
        }
        var Q = I.attr("faiWidth");
        var V = I.find(".imgDiv");
        var S = V.width();
        if (C) {
            w = V.height()
        }
        var P = {
            width: S,
            height: w
        };
        var O = V.find(".J_photoImgPanel");
        var M = V.find("img");
        if (F == 2) {
            var N = M.attr("iWidth");
            var H = M.attr("iHeight");
            var L = N / H;
            var K = S / w;
            if (K <= L) {
                M.css("width", L * w + "px");
                M.css("height", w + "px");
                M.css("marginTop", "");
                M.css("marginLeft", ((S - L * w) / 2) + "px");
                O.css({
                    width: S,
                    height: w,
                    position: "relative",
                    overflow: "hidden"
                })
            } else {
                M.css("height", S / L + "px");
                M.css("width", S + "px");
                M.css("marginLeft", "");
                M.css("marginTop", ((w - S / L) / 2) + "px");
                O.css({
                    width: S,
                    height: w,
                    position: "relative",
                    overflow: "hidden"
                })
            }
        } else {
            if (typeof F == "number") {
                F = !!!F
            }
            if (F) {
                if (C) {
                    P = Fai.Img.calcSize(Q, R, S, w, Fai.Img.MODE_SCALE_FILL)
                } else {
                    P = Fai.Img.calcSize(Q, R, S, w, Fai.Img.MODE_SCALE_DEFLATE_HEIGHT)
                }
            }
            if (O.length > 0) {
                O.css({
                    marginLeft: "",
                    marginTop: "",
                    width: P.width + "px",
                    height: P.height + "px",
                    position: "relative",
                    overflow: "hidden",
                    margin: "0 auto"
                });
                M.css("marginLeft", "").css("marginTop", "")
            }
            M.css("width", P.width + "px");
            M.css("height", P.height + "px")
        }
        var J = V.width();
        if (J < P.width) {
            J = P.width
        }
        var U = I.find(".propDiv");
        if (U.width() != J) {
            U.css("width", J + "px")
        }
        if (V.width() != J) {
            V.css("width", J + "px")
        }
        if (V.height() != w) {
            V.css("height", w + "px");
            if ($.browser.msie && $.browser.version == 6) {
                V.addClass("wocaie6").removeClass("wocaie6")
            }
        }
        if (I.height() > g && (n == 0 || n == 1)) {
            g = $(this).height()
        }
        if (E > g && (n == 2 || n == 3)) {
            g = E
        }
        var G = I.outerWidth(true);
        var T = I.outerHeight(true);
        if (G > B) {
            B = G
        }
        d += G
    });
    i = d;
    if ($(".photoMarqueeForm").length > 0) {
        Site.unifiedAttrVal(b, ".photoMarqueeForm", "height")
    }
    var m = b.find(".demo");
    var A = b.find(".demo0");
    D = A.outerHeight();
    if (g > 0) {
        m.css("height", g + "px")
    }
    if (n == 0 || n == 1) {
        A.css("width", d + "px");
        var a = m.width(),
            z = A.width();
        if (z <= a) {
            jzUtils.run({
                name: "ImageEffect.FUNC.BASIC.Init",
                callMethod: true
            }, {
                moduleId: u,
                imgEffOption: e,
                tagetOption: h,
                callback: Site.createImageEffectContent_photo,
                callbackArgs: o
            });
            return
        }
    }
    if (n == 2 || n == 3) {
        var g = m.height(),
            j = A.height();
        if (j <= g) {
            jzUtils.run({
                name: "ImageEffect.FUNC.BASIC.Init",
                callMethod: true
            }, {
                moduleId: u,
                imgEffOption: e,
                tagetOption: h,
                callback: Site.createImageEffectContent_photo,
                callbackArgs: o
            });
            return
        }
    }
    if (t.length == 0) {
        return
    }
    var k = t.first().outerWidth(true);
    if (k == 0) {
        return
    }
    var s = 0,
        c = t.length - 1;
    t.each(function (H, I) {
        if (s > a) {
            return false
        }
        var G = $(I).clone().attr("cloneDiv", "true");
        tmpId = G.children("div.imgDiv").attr("id");
        G.children("div.imgDiv").attr("id", tmpId + "_clone");
        if (0 === H && (n == 2 || n == 3)) {
            $(I).css("clear", "both");
            G.css("clear", "both")
        }
        if (Fai.isIE6() || Fai.isIE7()) {
            if (H === c) {
                $(t[H]).after('<div style="clear:both;"></div>');
                G.after('<div style="clear:both;"></div>')
            }
        }
        A.append(G);
        s += G.outerWidth(true)
    });
    var r = d + s;
    if (n == 0 || n == 1) {
        A.css("width", r + "px")
    }

    function y() {
        d--;
        m.scrollLeft(d);
        if (d == 0) {
            m.scrollLeft(i);
            d = i
        }
    }

    function f() {
        var G = m.scrollLeft();
        G++;
        m.scrollLeft(G);
        if (G == d) {
            m.scrollLeft(0)
        }
    }

    function v() {
        var G = m.scrollTop();
        G--;
        m.scrollTop(G);
        if (G == 0) {
            m.scrollTop(D)
        }
    }

    function l() {
        var G = m.scrollTop();
        G++;
        m.scrollTop(G);
        if (G == D) {
            m.scrollTop(0)
        }
    }
    if (n == 0) {
        m.scrollLeft(2 * d);
        Fai.addInterval("marquee" + u, y, 35)
    } else {
        if (n == 1) {
            Fai.addInterval("marquee" + u, f, 35)
        } else {
            if (n == 2) {
                m.scrollTop(2 * D);
                Fai.addInterval("marquee" + u, v, 35)
            } else {
                if (n == 3) {
                    Fai.addInterval("marquee" + u, l, 35)
                }
            }
        }
    }
    m.mouseover(function () {
        Fai.stopInterval("marquee" + u)
    }).mouseleave(function () {
        Fai.startInterval("marquee" + u)
    });
    setTimeout(function () {
        Fai.startInterval("marquee" + u)
    }, 100);
    if (!b.data("first1")) {
        b.data("first1", true);
        b.data("options", {
            id: u,
            scale: F,
            fixHeight: C,
            phoMarqueeDirection: n,
            flag: x
        })
    }
    if (b.data("first2") && Fai.top._manageMode) {
        var q = b.data("photoOptions");
        Site.initModulePhotoListItemManage(q);
        if (x == "listPhotos") {
            Site.moduleListPhotosItemManage.init(q)
        }
    }
    jzUtils.run({
        name: "ImageEffect.FUNC.BASIC.Init",
        callMethod: true
    }, {
        moduleId: u,
        imgEffOption: e,
        tagetOption: h,
        callback: Site.createImageEffectContent_photo,
        callbackArgs: o
    });
    Site.restartPhotoMarquee(b)
};
Site.restartPhotoMarquee = function (a) {
    if (!a.data("first2")) {
        a.data("first2", true);
        a.on("Fai_onModuleSizeChange", function () {
            var b = a.data("options");
            Fai.stopInterval("marquee" + b.id);
            Site.loadPhotoMarquee(b.id, b.scale, b.fixHeight, b.phoMarqueeDirection, b.flag)
        });
        a.on("Fai_onModuleLayoutChange", function () {
            var b = a.data("options");
            Fai.stopInterval("marquee" + b.id);
            Site.loadPhotoMarquee(b.id, b.scale, b.fixHeight, b.phoMarqueeDirection, b.flag)
        })
    }
};
Site.getFormMiddleContentHeight = function (b, a) {
    var m = b.height(),
        f = b.find(".formTop").first(),
        e = b.find(".formBanner" + a).first(),
        i = b.find(".formMiddle").first(),
        k = b.find(".formBottom").first(),
        c = 0;
    if (f.css("display") != "none") {
        c = f.outerHeight(true)
    }
    var j = 0;
    if (e.css("display") != "none") {
        j = e.outerHeight(true)
    }
    var h = 0;
    if (k.css("display") != "none") {
        h = k.outerHeight(true)
    }
    var g = m - c - j - h - Fai.getFrameHeight(i);
    var l = i.find(".formMiddleCenter").first();
    g = g - Fai.getFrameHeight(l);
    var d = i.find(".formMiddleContent").first();
    g = g - Fai.getFrameHeight(d);
    return g
};
Site.loadPhotoGallery = function (w) {
    var M = w.id,
        J = w.scale,
        f = w.cus;
    var K = w.flag;
    var d = $("#" + M),
        a = d.find("div.photo-container");
    if (w.effType >= 4 && w.effType < 6) {
        Site.clearImageEffectContent_photo(w.id, "prop-container")
    }
    if (K == "listPhotos") {
        f = 1
    }
    if (a.length != 0) {
        for (var aa = 0; aa < a.length; aa++) {
            if (K == "listPhotos") {
                if ($(a[aa]).children().hasClass("J_sortDiv")) {
                    $(a[aa]).children().children().unwrap()
                }
            }
            var Y = $(a[aa]).children("div.img-container"),
                m = Y.width(),
                H = Y.height();
            var l = Y.find("img"),
                F = l.attr("fHeight"),
                B = l.attr("fWidth"),
                S = Y.find(".J_photoImgPanel");
            if (J == 2) {
                var ab = l.attr("iWidth");
                var b = l.attr("iHeight");
                var X = ab / b;
                var r = m / H;
                if (r <= X) {
                    l.css("width", X * H + "px");
                    l.css("height", H + "px");
                    l.css("marginTop", "");
                    l.css("marginLeft", ((m - X * H) / 2) + "px");
                    S.css({
                        width: m,
                        height: H,
                        position: "relative",
                        overflow: "hidden"
                    })
                } else {
                    l.css("height", m / X + "px");
                    l.css("width", m + "px");
                    l.css("marginLeft", "");
                    l.css("marginTop", ((H - m / X) / 2) + "px");
                    S.css({
                        width: m,
                        height: H,
                        position: "relative",
                        overflow: "hidden"
                    })
                }
            } else {
                var k = Fai.Img.calcSize(B, F, m, H, Fai.Img.MODE_SCALE_FILL);
                if (typeof J == "number") {
                    J = !!!J
                }
                if (S.length > 0) {
                    if (J) {
                        S.css({
                            marginLeft: "",
                            marginTop: "",
                            width: k.width + "px",
                            height: k.height + "px",
                            position: "relative",
                            overflow: "hidden",
                            margin: "0 auto"
                        })
                    } else {
                        S.css({
                            marginLeft: "",
                            marginTop: "",
                            width: m + "px",
                            height: H + "px",
                            position: "relative",
                            overflow: "hidden",
                            margin: "0 auto"
                        })
                    }
                    l.css("marginLeft", "").css("marginTop", "")
                }
                if (J) {
                    l.width(k.width);
                    l.height(k.height)
                } else {
                    l.width(m);
                    l.height(H)
                }
            }
        }
        var O = d.find("a.gallery-control"),
            p = d.find("a.gallery-control-prev"),
            U = d.find("a.gallery-control-next"),
            L = p.height(),
            e = p.width();
        var R = a.first(),
            V = R.children("div.img-container"),
            C = V.outerWidth(true),
            t = V.outerHeight(true),
            A = R.children("div.prop-container"),
            h = 0;
        if (A.length > 0) {
            h = A.first().outerHeight(true) * A.length
        }
        var D = t + h;
        a.height(D);
        a.width(C);
        a.find("div.prop-container").width(C);
        var z = d.find("div.photo-gallery-preview");
        z.height(D);
        var y = d.find("div.photo-gallery-inner"),
            o = y.outerHeight();
        if (o < L) {
            var N = y.height(),
                T = o - N;
            var Q = Math.ceil((L - o) / 2);
            var q = Math.ceil(T / 2) + Q;
            y.css("padding-top", q + "px").css("padding-bottom", q + "px")
        }
        var I = (y.outerHeight() / 2) - (L / 2);
        O.css("top", I + "px");
        var c = 1,
            ac = p.innerWidth() - e,
            E = d.find("div.formMiddleContent").width(),
            s = E - ac - (e * 2),
            ae = R.outerWidth(true),
            W = R.outerWidth(),
            g = ae - W;
        if (s > ae) {
            c = parseInt(s / ae)
        }
        var G = (c * ae) - g;
        z.width(G);
        var ad = a.length;
        var u = ad % c == 0 ? ad / c : Math.floor(ad / c) + 1;
        d.find("div.photo-gallery-container").width(ad * ae);
        var n = a.length < c ? a.length : c;
        for (var Z = 0; Z < n; Z++) {
            var l = $(a[Z]).find("img");
            if (!l.attr("src")) {
                l.attr("src", l.attr("lzurl"))
            }
            l.show()
        }
        d.find(".photo-gallery-inner").mouseover(function () {
            O.css("display", "block")
        }).mouseleave(function () {
            O.css("display", "none")
        });
        p.addClass("gallery-control-prev-disabled");
        if (u == 1) {
            U.addClass("gallery-control-next-disabled")
        }
        p.click(function () {
            var x = $(this);
            if (x.hasClass("gallery-control-prev-disabled")) {
                return false
            }
            var af = x.parent(),
                j = af.find("div.photo-gallery-container"),
                ag = af.find("a.gallery-control-next");
            if (ag.hasClass("gallery-control-next-disabled")) {
                ag.removeClass("gallery-control-next-disabled")
            }
            if (j.position().left == 0 || j.is(":animated")) {
                return false
            }
            var i = G + g;
            j.animate({
                left: "+=" + i + "px"
            }, function () {
                if (j.position().left == 0) {
                    x.addClass("gallery-control-prev-disabled")
                }
            })
        });
        U.click(function () {
            var ak = $(this);
            if (ak.hasClass("gallery-control-next-disabled")) {
                return false
            }
            var af = ak.parent(),
                i = af.find("div.photo-gallery-container"),
                x = af.find("a.gallery-control-prev");
            if (x.hasClass("gallery-control-prev-disabled")) {
                x.removeClass("gallery-control-prev-disabled")
            }
            var al = G + g,
                am = -(u - 1) * (al);
            left_position = parseInt(i.css("left").replace("px"));
            if (left_position == am || i.is(":animated")) {
                return false
            }
            if (!ak.data("loading_finish")) {
                var aj = (Math.abs(left_position) / (ae * c)) + 1;
                var j = aj <= 1 ? 1 * c : aj * c,
                    ah = j + c > a.length ? a.length : j + c;
                for (var ag = j; ag < ah; ag++) {
                    var ai = $($(a[ag]).find("img")[0]);
                    if (!ai.attr("src")) {
                        ai.attr("src", ai.attr("lzurl"))
                    }
                    ai.show()
                }
            }
            i.animate({
                left: "-=" + al + "px"
            }, function () {
                var an = parseInt(i.css("left").replace("px", ""));
                if (an == am) {
                    ak.data("loading_finish", true);
                    ak.addClass("gallery-control-next-disabled")
                }
            })
        })
    } else {
        var P = d.find("div.addNoProTips");
        d.find("div.photo-gallery").height(100).html(P)
    } if (d.find(".prop-wordwrap-container").length > 0) {
        d.find(".photo-container").height("auto");
        var v = 0;
        d.find(".photo-container").each(function () {
            var i = $(this).height();
            if (i > v) {
                v = i
            }
        });
        d.find(".photo-container").each(function () {
            $(this).height(v)
        });
        d.find(".photo-gallery-preview").height(v);
        Site.unifiedAttrVal(d, ".prop-wordwrap-container", "height")
    }
    if (K == "listPhotos") {
        if (a.length != 0) {
            for (var aa = 0; aa < a.length; aa++) {
                if ($(a[aa]).children().hasClass("J_sortDiv")) {
                    return false
                } else {
                    $(a[aa]).children().wrapAll("<div class='J_sortDiv'></div>")
                }
            }
        }
        if (p && p.length > 0) {
            p.hover(function () {
                if (!$(this).hasClass("gallery-control-prev-disabled")) {
                    $(this).addClass("g_hover")
                }
            }, function () {
                $(this).removeClass("g_hover")
            })
        }
        if (p && U.length > 0) {
            U.hover(function () {
                if (!$(this).hasClass("gallery-control-next-disabled")) {
                    $(this).addClass("g_hover")
                }
            }, function () {
                $(this).removeClass("g_hover")
            })
        }
    }
};
var isInShareContent = false;
Site.loadPhotoResultMarquee = function (f) {
    var m = f.id,
        t = f.scale;
    var c = $("#module" + m);
    var s = c.find(".J_imgDiv");
    var r = c.find(".showPhotoContent");
    var p = c.find(".photoMarquee");
    var a = s.outerWidth(true);
    var o = parseInt(r.width() / a);
    s = c.find(".J_imgDiv");
    var e = a * s.length;
    p.width(e);
    var q = e / 2;
    if (r.width() < p.width()) {
        Fai.addInterval("marquee" + m, h, 35)
    }
    s.hover(function () {
        Fai.stopInterval("marquee" + m);
        s.removeClass("J_selectedDiv");
        $(this).addClass("J_selectedDiv");
        var u = $(this).find("img");
        $(this).find(".imgMask").show();
        d(u)
    }, function () {
        Fai.startInterval("marquee" + m);
        $(this).find(".imgMask").hide()
    });

    function d(B) {
        var v = B.attr("bigpicurl");
        var F = B.attr("bigpicwidth");
        var w = B.attr("bigpicheight");
        var E = B.attr("_href");
        var C = B.data("basic");
        var x = $("#module" + m);
        var z = x.find(".J_photoBasicContent");
        if (C) {
            z.show();
            z.html(C);
            z.attr("title", C)
        } else {
            z.hide()
        }
        var D = x.find(".photoGroupUp .imgContainer img");
        var u = x.find(".photoGroupUp .imgContainer a");
        if (!t) {
            var G = Fai.Img.calcSize(F, w, 852, 453, Fai.Img.MODE_SCALE_FILL);
            D.width(G.width);
            D.height(G.height);
            if (G.height < 452) {
                D.css("margin-top", (452 - G.height) / 2)
            } else {
                D.css("margin-top", 0)
            }
            z.width(G.width - 240);
            var y = D.position();
            z.css("left", y.left)
        } else {
            D.width(x.width());
            D.css("height", "452px");
            z.width(x.width() - 240)
        }
        var A = D.attr("src");
        if (A != v) {
            D.attr("src", v);
            D.attr("alt", B.attr("alt"))
        }
        if ($.trim(E) == "") {
            u.attr("href", "javascirpt:void(0)")
        } else {
            u.attr("href", E)
        }
    }
    var k = c.find(".J_photoShowPrev");
    k.click(function () {
        var v = c.find(".J_selectedDiv").prev();
        if (v.length == 0 || !v.hasClass("J_imgFirst")) {
            v = c.find(".J_imgFirst:last")
        }
        s.removeClass("J_selectedDiv");
        $(v).addClass("J_selectedDiv");
        var u = $(v).find("img");
        d(u)
    });
    var l = c.find(".J_photoShowNext");
    l.click(function () {
        var v = c.find(".J_selectedDiv").next();
        if (v.length == 0 || !v.hasClass("J_imgFirst")) {
            v = c.find(".J_imgFirst:first")
        }
        s.removeClass("J_selectedDiv");
        $(v).addClass("J_selectedDiv");
        var u = $(v).find("img");
        d(u)
    });
    s.eq(0).mouseover().mouseleave();
    Fai.startInterval("marquee" + m);
    var r = c.find(".showPhotoContent");

    function h() {
        var u = r.scrollLeft();
        u++;
        r.scrollLeft(u);
        if (u == q) {
            r.scrollLeft(0)
        }
    }
    var g = false;
    var i = c.find(".J_showList"),
        j = c.find(".J_shareContent"),
        n = c.find(".J_shareListMore");
    i.mouseover(function () {
        j.show();
        i.addClass("showList-hover");
        g = true;
        n.addClass("shareListMore-hover")
    });
    i.mouseleave(function () {
        setTimeout("if(!isInShareContent){$('.J_shareContent').hide();$('.J_showList').removeClass('showList-hover');$('.J_shareListMore').removeClass('shareListMore-hover')}");
        g = false
    });
    j.mouseover(function () {
        isInShareContent = true
    });
    j.mouseleave(function () {
        isInShareContent = false;
        if (!g) {
            j.hide();
            i.removeClass("showList-hover");
            n.removeClass("shareListMore-hover")
        }
    });
    var b = c.find(".pageDiv");
    b.mouseover(function () {
        b.addClass("pageDiv-hover")
    });
    b.mouseleave(function () {
        b.removeClass("pageDiv-hover")
    })
};
Site.loadPhotoSmallPic = function (e) {
    var m = e.id,
        A = e.scale,
        d = e.cus;
    var t = e.flag;
    var c = $("#" + m);
    c.on("Fai_onModuleSizeChange", function () {
        Site.smallPicPhotoModuleFix(m, t)
    });
    c.on("Fai_onModuleLayoutChange", function () {
        Site.smallPicPhotoModuleFix(m, t)
    });
    var z = c.find("div.photoSmallPicBox");
    var r = c.find(".photoSmallPicUpForms").height();
    var n = c.find(".photoSmallPicDownForms").height();
    c.find(".photoSmallPicForms").height(r + n);
    var y = c.find(".photoSmallPicForms").width();
    c.find(".photoSmallPicUpForms").width(y);
    c.find(".photoSmallPicUpFormsMid").width(y);
    c.find(".photoSmallPicDownForms").width(y);
    var o = c.find(".photoSmallPrePic_control").outerWidth(true);
    c.find(".photoSmallPicDownFormsMid").css("width", y - 2 * o - 20 + "px");
    var k = c.find(".photoSmallPrePicContainer");
    var a = c.find(".photoSmallPrePicOuter").outerWidth(true);
    var x = 0;
    if (Fai.isIE6()) {
        x = 2
    }
    k.width(a * z.length + x);
    var f = k.width();
    var b = c.find(".photoSmallPicDownFormsMid").width();
    var u = c.find(".photoSmallPicUpFormsMid").outerHeight() / 2 - 46;
    c.find(".photoSmallPic_control").css("top", u + "px");
    var w = z.length;
    var i = Math.floor(b / a) + 1;
    var v = w % i == 0 ? w / i : Math.floor(w / i) + 1;
    if (v == 1 && b < k.width()) {
        v = 2
    }
    var l = z.length < i ? z.length : i;
    for (var s = 0; s < l; s++) {
        var B = $(z[s]).find("img");
        Site.loadPhotoSmallPicItem(B, t)
    }
    var p = c.find(".photoSmallPicDownForms a.g_imgPrev"),
        q = c.find(".photoSmallPicDownForms a.g_imgNext"),
        g = c.find(".photoSmallPicUpForms a.photoSmallPicArrow_left"),
        h = c.find(".photoSmallPicUpForms a.photoSmallPicArrow_right");
    p.addClass("photoSmallPic-control-prev-disabled");
    if (v == 1) {
        q.addClass("photoSmallPic-control-next-disabled")
    }
    g.addClass("photoBigPic-control-prev-disabled");
    if (w == 1) {
        h.addClass("photoBigPic-control-next-disabled")
    }
    c.find(".photoSmallPicUpFormsMid").mouseover(function () {
        $(".photoSmallPic_control").css("display", "block")
    }).mouseleave(function () {
        $(".photoSmallPic_control").css("display", "none")
    });
    if (t != "carouselPhotos") {
        c.find(".photoContainerLeft").mouseenter(function () {
            var j = $(this).parents(".form").attr("id");
            if (_manageMode == true) {
                Site.initModulePhotoSmallPicItemManage(j, e.isOpenImgEff)
            }
        }).mouseleave(function () {
            var j = $(this).parents(".form");
            var C = j.find("div.photoContainerLeft");
            if (_manageMode == true) {
                if (e.isOpenImgEff) {
                    Site.removeEditLayer(C, null, 5)
                } else {
                    Site.removeEditLayer(C, null, 106)
                }
            }
        })
    }
    z.mouseover(function () {
        $(this).parent().addClass("photoSmallPrePicOuterHover").addClass("g_border").addClass("g_borderHover")
    });
    z.mouseleave(function () {
        $(this).parent().removeClass("photoSmallPrePicOuterHover").removeClass("g_borderHover").removeClass("g_border")
    });
    c.find(".photoSmallPicUpFormsMid .photoContainerLeft img").attr("onload", "Site.removePhotoSmallPicMask(" + m.replace("module", "") + ")");
    z.click(function () {
        var ai = $(this).find("img");
        var G = $("#" + m);
        var L = G.find(".photoSmallPicUpFormsMid .photoContainerLeft img");
        Site.loadPhotoSmallPicItem($(this).parent().next().find("img"), t);
        Site.loadPhotoSmallPicItem(ai, t);
        var M = e.scale;
        var D = $(this).parent();
        D.siblings(".photoSmallPrePicOuter").find("div.photoSmallPicBox").removeClass("photoSmallPrePicSelected");
        $(this).addClass("photoSmallPrePicSelected");
        D.siblings(".photoSmallPrePicOuter").removeClass("photoSmallPrePicOuterClick").removeClass("g_borderSelected");
        D.addClass("photoSmallPrePicOuterClick").addClass("g_borderSelected");
        var ag = G.find("#bigImgDetail");
        ag.remove();
        G.find(".imgContainer").append(L);
        var X = G.find(".photoContainerLeft").width(),
            S = G.find(".photoContainerLeft").height();
        var Y = ai.attr("bigpicurl");
        var F = ai.attr("bigpicwidth");
        var K = ai.attr("bigpicheight");
        var W = ai.attr("productname");
        var j = ai.attr("ifshowname");
        var P = ai.attr("aattribute");
        if (t == "carouselPhotos") {
            D.css({
                overflow: "visible"
            });
            D.siblings(".photoSmallPrePicOuter").find(".cs_triangle_up").hide();
            D.find(".cs_triangle_up").show().addClass("g_borderSelected");
            var T = ai.attr("pic");
            G.find(".imgContainer").attr("id", "photoList" + T);
            if (_manageMode) {
                var H = G.data("carouselPhotosOptions");
                Site.moduleCarouselPhotosItemManage.init(H)
            }
        }
        if (M) {
            var R = Fai.Img.calcSize(F, K, X, S, Fai.Img.MODE_SCALE_FILL);
            L.width(R.width);
            L.height(R.height)
        } else {
            L.css("width", X).css("height", S)
        }
        var C = [];
        C.push("<div class='loadingImg' style='width:" + X + "px;height:" + S + "px;'>");
        C.push("<table cellspacing='0' cellpadding='0' class='loadingImgTable' style='width:" + X + "px;height:" + S + "px;'><tbody><tr><td class='loadingImgTd'>");
        C.push("<div class='ajaxLoading2' style='margin:0 auto;'></div>");
        C.push("</td></tr></tbody></table>");
        C.push("</div>");
        G.find(".photoSmallPic_td").append(C.join(""));
        var ab = L.attr("src");
        if (ab == Y) {
            L.attr("src", "")
        }
        L.attr("src", Y);
        L.css("margin", "auto");
        var ah = ai.attr("alt");
        L.attr("alt", ah);
        if (t == "carouselPhotos") {
            G.find(".photoContainerLeft").css("margin-top", "1.5px");
            G.find(".photoContainerLeft .imgContainer").css("width", X).css("height", S)
        } else {
            G.find(".photoContainerLeft").css("overflow", "hidden")
        }
        L.wrap("<a id='bigImgDetail' " + P + "></a>");
        G.find("#imgInnerNameDiv p").html(Fai.encodeHtml(W));
        var ad = G.find("#imgInnerNameDiv");
        if (t == "carouselPhotos") {
            var aa = parseInt(ad.css("padding-left").replace("px", "")) + parseInt(ad.css("padding-right").replace("px", ""));
            ad.width(L.width() - aa);
            G.find(".photoNameContainer").width(L.width() - aa);
            ad.css({
                overflow: "hidden",
                margin: "0 auto",
                bottom: "0",
                left: "0",
                right: "0"
            })
        } else {
            ad.width(L.width());
            G.find(".photoNameContainer").width(L.width());
            var V = (G.find(".photoContainerLeft").height() - L.height()) / 2 + L.height() - ad.outerHeight(true);
            var af = V % 2 == 0 ? V : Math.floor(V / 2) * 2;
            ad.css("top", af + "px");
            var Z = (G.find(".photoSmallPicUpFormsMid").width() - L.width()) / 2;
            ad.css("left", Z + "px").css("overflow", "hidden")
        } if (e.isOpenImgEff) {
            Site.bindImageEffectCusEvent_photo(G.find(".photoSmallPic_td"), e.tgOpt)
        }
        var Q = G.find(".photoSmallPrePicSelected").parent().index();
        g.removeClass("photoBigPic-control-prev-disabled");
        h.removeClass("photoBigPic-control-next-disabled");
        p.removeClass("photoSmallPic-control-prev-disabled");
        q.removeClass("photoSmallPic-control-next-disabled");
        var O = G.find(".photoSmallPicDownForms").find(".photoSmallPrePicContainer");
        var ac = parseInt(O.css("left").replace("px"));
        var E = Math.abs(ac) / a;
        var ae = E + i - 1 > w - 1 ? w - 1 : E + i - 1;
        var N = G.find(".photoSmallPicDownFormsMid").width();
        var J, I;
        if (Q == 0) {
            g.addClass("photoBigPic-control-prev-disabled");
            if (ac == 0) {
                p.addClass("photoSmallPic-control-prev-disabled")
            }
        }
        if (Q == (w - 1)) {
            h.addClass("photoBigPic-control-next-disabled");
            J = E;
            I = w - 1;
            if ((I - J + 1) * a <= N && ac >= (w - i - 1) * a) {
                q.addClass("photoSmallPic-control-next-disabled")
            }
        }
        G.data("positionLeft", ac);
        var U = G.find(".photoSmallPrePicSelected").attr("phoid");
        G.find("div.photoContainerLeft").attr("phoid", U).attr("photoname", W).attr("id", "containerLeft_PhotosmallPic" + U)
    }).eq(0).click();
    g.click(function () {
        var G = $(this);
        if (G.hasClass("photoBigPic-control-prev-disabled")) {
            return false
        }
        var C = $("#" + m);
        var j = C.find(".photoSmallPicDownForms").find(".photoSmallPrePicContainer");
        var E = Math.floor(C.find(".photoSmallPicDownFormsMid").width() / a) + 1;
        var J = C.data("positionLeft");
        var F = Math.abs(J) / a;
        var I = F + E - 1 > w - 1 ? w - 1 : F + E - 1;
        var H = C.find(".photoSmallPrePicSelected").parent();
        var K = H.index();
        if (K >= F && K <= I) {
            if (K == F) {
                J += a
            }
        } else {
            J = -(K - 1) * a;
            j.css("left", "0px")
        } if (j.is(":animated")) {
            return false
        }
        $(".img_ProductPhoto_LR_Border").remove();
        $(".img_ProductPhoto_TB_Border").remove();
        $(".editLayer").remove();
        var D = H.prev().find("div.photoSmallPicBox");
        C.find("div.photoContainerLeft").attr("phoid", D.attr("phoid")).attr("photoname", D.find("img").attr("productname")).attr("id", "containerLeft_PhotosmallPic" + D.attr("phoid"));
        j.animate({
            left: J + "px"
        }, function () {
            H.prev().find("div.photoSmallPicBox").click()
        })
    });
    h.click(function () {
        var G = $(this);
        if (G.hasClass("photoBigPic-control-next-disabled")) {
            return false
        }
        var C = $("#" + m);
        var j = $(".photoSmallPicDownForms").find(".photoSmallPrePicContainer");
        var E = Math.floor(C.find(".photoSmallPicDownFormsMid").width() / a) + 1;
        var J = C.data("positionLeft");
        var F = Math.abs(J) / a;
        var I = F + E - 1 > w - 1 ? w - 1 : F + E - 1;
        var H = C.find(".photoSmallPrePicSelected").parent();
        var K = H.index();
        if (K >= F && K <= I) {
            if (K == I) {
                J -= 2 * a
            }
        } else {
            J = -(K - 1) * a;
            j.css("left", "0px")
        } if (j.is(":animated")) {
            return false
        }
        $(".img_ProductPhoto_LR_Border").remove();
        $(".img_ProductPhoto_TB_Border").remove();
        $(".editLayer").remove();
        var D = H.next().find("div.photoSmallPicBox");
        C.find("div.photoContainerLeft").attr("phoid", D.attr("phoid")).attr("photoname", D.find("img").attr("productname")).attr("id", "containerLeft_PhotosmallPic" + D.attr("phoid"));
        j.animate({
            left: J + "px"
        }, function () {
            H.next().find("div.photoSmallPicBox").click()
        })
    });
    q.click(function () {
        var N = $(this);
        var E = $("#" + m);
        if (N.hasClass("photoSmallPic-control-next-disabled")) {
            return false
        }
        var j = N.parents(".photoSmallPicDownForms").find(".photoSmallPrePicContainer"),
            G = N.parents(".photoSmallPicDownForms").find("a.g_imgPrev"),
            F = Math.floor(E.find(".photoSmallPicDownFormsMid").width() / a) + 1;
        if (G.hasClass("photoSmallPic-control-prev-disabled")) {
            G.removeClass("photoSmallPic-control-prev-disabled")
        }
        var O = (F - 1) * a,
            M = parseInt(j.css("left").replace("px"));
        var L = Math.abs(M) / a;
        var P = L + F - 1 > w - 1 ? w - 1 : L + F - 1;
        var K = E.find(".photoSmallPicDownFormsMid").width();
        if (j.is(":animated")) {
            return false
        }
        var D;
        var C, I;
        if (P >= w - 1) {
            C = L;
            I = w - 1;
            if ((I - C + 1) * a <= K) {
                D = true;
                N.addClass("photoSmallPic-control-next-disabled")
            }
        } else {
            C = P;
            I = P + F - 1
        }
        for (var H = C; H <= I; H++) {
            var J = $(z[H]).find("img");
            Site.loadPhotoSmallPicItem(J, t)
        }
        if (!D) {
            j.animate({
                left: "-=" + O + "px"
            })
        }
    });
    p.click(function () {
        var G = $(this);
        if (G.hasClass("photoSmallPic-control-prev-disabled")) {
            return false
        }
        var C = G.parents(".photoSmallPicDownForms").find(".photoSmallPrePicContainer");
        var I = Math.floor(c.find(".photoSmallPicDownFormsMid").width() / a) + 1;
        var F = G.parents(".photoSmallPicDownForms").find("a.g_imgNext");
        if (F.hasClass("photoSmallPic-control-next-disabled")) {
            F.removeClass("photoSmallPic-control-next-disabled")
        }
        var E = parseInt(C.css("left").replace("px"));
        var H = Math.abs(E) / a;
        var D = H - I + 1 > 0 ? H - I + 1 : 0;
        if (D == 0) {
            G.addClass("photoSmallPic-control-prev-disabled")
        }
        var j = (H - D) * a;
        if (C.is(":animated")) {
            return false
        }
        C.animate({
            left: "+=" + j + "px"
        })
    })
};
Site.removePhotoSmallPicMask = function (a) {
    $("#module" + a).find(".loadingImg").remove()
};
Site.loadPhotoSmallPicItem = function (e, d) {
    if (!e.attr("src")) {
        e.attr("src", e.attr("lzurl"))
    }
    var f = parseInt(e.attr("sWidth")),
        b = parseInt(e.attr("sHeight"));
    var a = f > b ? f : b;
    var c = f > b ? "width" : "height";
    if (a > 71) {
        if (d == "carouselPhotos") {
            if (a > 76) {
                e.css(c, 76);
                e.css("height", 60);
                e.css("width", 76)
            }
        } else {
            e.css(c, 71)
        }
    } else {
        e.css("width", f).css("height", b)
    }
    e.show()
};
Site.smallPicPhotoModuleFix = function (v, r) {
    var c = $("#" + v),
        y = c.find("div.photoSmallPicBox");
    var p = c.find(".photoSmallPicUpForms").height();
    var l = c.find(".photoSmallPicDownForms").height();
    c.find(".photoSmallPicForms").height(p + l);
    var x = c.find(".photoSmallPicForms").width();
    c.find(".photoSmallPicUpFormsMid").width(x);
    c.find(".photoSmallPicDownForms").width(x);
    c.find(".photoSmallPicUpForms").width(x);
    var m = c.find(".photoSmallPrePic_control").outerWidth(true);
    c.find(".photoSmallPicDownFormsMid").css("width", x - 2 * m - 20 + "px");
    var d = $(".photoSmallPicUpForms").width();
    var i = c.find(".photoSmallPrePicContainer");
    var a = $(".photoSmallPrePicOuter").outerWidth(true);
    var w = 0;
    if (Fai.isIE6()) {
        w = 2
    }
    i.width(a * y.length + w);
    var e = i.width();
    var b = c.find(".photoSmallPicDownFormsMid").width();
    var s = c.find(".photoSmallPicUpFormsMid").outerHeight() / 2 - 46;
    c.find(".photoSmallPic_control").css("top", s + "px");
    var u = y.length;
    var h = Math.floor(b / a) + 1;
    var t = u % h == 0 ? u / h : Math.floor(u / h) + 1;
    if (t == 1 && b < i.width()) {
        t = 2
    }
    var n = c.find(".photoSmallPicDownForms a.g_imgPrev"),
        o = c.find(".photoSmallPicDownForms a.g_imgNext"),
        f = c.find(".photoSmallPicUpForms a.photoSmallPicArrow_left"),
        g = c.find(".photoSmallPicUpForms a.photoSmallPicArrow_right");
    if (t == 1) {
        n.addClass("photoSmallPic-control-prev-disabled");
        o.addClass("photoSmallPic-control-next-disabled")
    }
    var k = y.length < h ? y.length : h;
    for (var q = 0; q < k; q++) {
        var z = $(y[q]).find("img");
        if (!z.attr("src")) {
            Site.loadPhotoSmallPicItem(z, r)
        }
    }
    c.find(".photoSmallPrePicSelected").click()
};
Site.loadPhotoList = function (b, e, f, i, g) {
    var c = $("#module" + b);
    if (Fai.isNull(c)) {
        return
    }
    var j = 0;
    if (g == "listPhotos") {
        f = 1
    }
    if (!f) {
        c.find(".photoForm").each(function () {
            var l = $(this).attr("faiWidth");
            var k = $(this).attr("faiHeight");
            if (Fai.isNull(k)) {
                return
            }
            var p = $(this).find(".imgDiv");
            var o = p.width();
            var m = p.height();
            var n = Fai.Img.calcSize(l, k, o, m, Fai.Img.MODE_SCALE_FILL);
            if (n.height > j) {
                j = n.height
            }
        })
    }
    if (i >= 4 && i < 6) {
        Site.clearImageEffectContent_photo("module" + b, "parametersDiv")
    }
    var h = c.find(".nameWordWrap");
    if (h.length > 0) {
        var a = 0;
        h.each(function () {
            var k = $(this).height();
            if (k > a) {
                a = k
            }
        });
        h.each(function () {
            $(this).height(a)
        })
    }
    var d = 0;
    c.find(".photoForm").each(function () {
        var t = $(this).attr("faiHeight");
        if (Fai.isNull(t)) {
            return
        }
        var s = $(this).attr("faiWidth");
        var v = $(this).find(".imgDiv");
        var u = v.width();
        if (f) {
            j = v.height()
        }
        var r = {
            width: u,
            height: j
        };
        var n = v.find("img");
        var q = v.find(".J_photoImgPanel");
        if (e == 2) {
            var o = n.attr("iWidth");
            var k = n.attr("iHeight");
            var m = o / k;
            var l = u / j;
            v.css("height", j + "px");
            if (l <= m) {
                n.css("width", m * j + "px");
                n.css("height", j + "px");
                n.css("marginTop", "");
                n.css("marginLeft", ((u - m * j) / 2) + "px");
                q.css({
                    width: u,
                    height: j,
                    position: "relative",
                    overflow: "hidden"
                })
            } else {
                n.css("height", u / m + "px");
                n.css("width", u + "px");
                n.css("marginLeft", "");
                n.css("marginTop", ((j - u / m) / 2) + "px");
                q.css({
                    width: u,
                    height: j,
                    position: "relative",
                    overflow: "hidden"
                })
            }
        } else {
            if (typeof e == "number") {
                e = !!!e
            }
            if (e) {
                r = Fai.Img.calcSize(s, t, u, j, Fai.Img.MODE_SCALE_FILL)
            }
            if (q.length > 0) {
                q.css({
                    marginLeft: "",
                    marginTop: "",
                    width: r.width + "px",
                    height: r.height + "px",
                    position: "relative",
                    overflow: "hidden",
                    margin: "0 auto"
                });
                n.css("marginLeft", "").css("marginTop", "")
            }
            n.css("width", r.width + "px");
            n.css("height", r.height + "px");
            v.css("height", j + "px")
        }
        $(this).find(".photoParameters").css("height", "auto");
        var p = $(this).height();
        if (p > d) {
            d = p
        }
    });
    c.find(".photoForm").css("height", d + "px")
};
Site.multiPhoto = function (n, m, e) {
    var f = false;
    var p = "leftIcon";
    var s = "rightIcon";
    var r = "horizontal";
    var b = false;
    var o = {};
    o = $.extend({}, o, e);
    if (o.leftIconID != null) {
        p = o.leftIconID
    }
    if (o.rightIconID != null) {
        s = o.rightIconID
    }
    if (o.direction != null) {
        r = o.direction
    }
    if (o.zoom != null) {
        b = o.zoom == "true" ? true : false
    }
    var h = n;
    var t = n.width();
    var c = n.height();
    var i = h.find("> ul");
    var d = h.find("li");
    var l = h.find("li .g_border");
    var a = d.outerWidth(true);
    var g = d.outerHeight(true);
    var k = d.length;
    var q = 0;
    if (r == "horizontal") {
        q = parseInt(t / a)
    } else {
        q = parseInt(c / g)
    } if (r == "horizontal") {
        if (Fai.isIE6()) {
            a++
        }
        var j = (a) * k;
        i.css("width", j + "px")
    } else {
        var u = g * k;
        i.css("height", u + "px")
    } if (n.hasClass("J_imgDivsStyle5")) {
        f = true
    }
    $("#" + p).mouseover(function () {
        if ((k >= q) && ((Math.abs(i.position().left) + h.width()) >= i.width())) {
            $(this).addClass("g_imgPrevHover")
        }
    }).mouseout(function () {
        $(this).removeClass("g_imgPrevHover")
    }).click(function () {
        if (i.position().left < 0 || i.position().top < 0) {
            if (i.is(":animated")) {
                return
            }
            if (r == "horizontal") {
                i.animate({
                    left: (i.position().left + a) + "px"
                }, "slow")
            } else {
                if (r == "vertical") {
                    i.animate({
                        top: (i.position().top + g) + "px"
                    }, "slow")
                }
            } if (Math.abs(i.position().left) <= a) {
                $(this).addClass("g_imgPrevNotClick")
            }
            $("#" + s).removeClass("g_imgNextNotClick")
        }
    });
    $("#" + s).mouseover(function () {
        if ((k >= q) && ((Math.abs(i.position().left) + h.width()) <= i.width())) {
            $(this).addClass("g_imgNextHover")
        }
    }).mouseout(function () {
        $(this).removeClass("g_imgNextHover")
    }).click(function () {
        if (i.is(":animated")) {
            return
        }
        if (k >= q) {
            if (r == "horizontal") {
                if ((Math.abs(i.position().left) + h.width()) < i.width()) {
                    if ((Math.abs(i.position().left) + h.width() + a) >= i.width()) {
                        $(this).addClass("g_imgNextNotClick")
                    }
                    $("#" + p).removeClass("g_imgPrevNotClick");
                    i.animate({
                        left: (i.position().left - a) + "px"
                    }, "slow")
                } else {
                    $(this).removeClass("g_imgNextHover");
                    $(this).addClass("g_imgNextNotClick")
                }
            } else {
                if ((Math.abs(i.position().top) + h.height()) < i.height()) {
                    i.animate({
                        top: (i.position().top - g) + "px"
                    }, "slow")
                } else {
                    $(this).removeClass("g_imgNextHover");
                    $(this).addClass("g_imgNextNotClick")
                }
            }
        }
    });
    d.mouseover(function () {
        d.removeClass("g_borderHover");
        $(this).addClass("g_borderHover");
        if (f) {
            if (_manageMode && b) {
                Site.removeEditLayer(m, null, 106)
            }
            d.removeClass("fk-mainBorderColor");
            $(this).addClass("fk-mainBorderColor")
        }
        var v = $(this).find("a").attr("href");
        if (v == m.find("a").attr("href")) {
            return
        }
        m.find("a").attr("href", v);
        var B = $(this).attr("faiWidth");
        var E = $(this).attr("faiHeight");
        var C = m.width();
        var y = m.height();
        if (m.data("divWidth")) {
            C = m.data("divWidth")
        }
        if (m.data("divHeight")) {
            y = m.data("divHeight")
        }
        var D;
        if (f) {
            D = Fai.Img.calcSize(B, E, C, y, Fai.Img.MODE_SCALE_FILL)
        } else {
            D = Fai.Img.calcSize(B, E, C, y, Fai.Img.MODE_SCALE_DEFLATE_FILL)
        }
        var z = m.find("img");
        if (z.is(":animated")) {
            return
        }
        var x = m.find("td");
        var w = x.width();
        var F = x.height();
        var A = [];
        A.push("<div class='ProductDetailloadingImg' style='width:" + w + "px;height:" + F + "px;'>");
        A.push("<table cellspacing='0' cellpadding='0' class='ProductDetailloadingImgTable' style='width:" + w + "px;height:" + F + "px;'><tbody><tr><td class='ProductDetailloadingImgTd'>");
        A.push("<div class='ajaxLoading2' style='margin:0 auto;'></div>");
        A.push("</td></tr></tbody></table>");
        A.push("</div>");
        x.append(A.join(""));
        $(z).load(function () {
            $(".ProductDetailloadingImg").remove();
            $(".multiPhotoImgLoad").fadeOut("slow", function () {
                $(this).remove()
            })
        });
        setTimeout(function () {
            if (!$(z).load()) {
                var G = $("<div class='multiPhotoImgLoad'></div>");
                if (m.find(".multiPhotoImgLoad").length == 0) {
                    G.appendTo(m)
                }
            }
        }, 1000);
        z.css("width", D.width + "px");
        z.css("height", D.height + "px");
        z.attr("src", v);
        m.attr("faiHref", v);
        if (b) {
            m.find(".cloud-zoom").data("zoom").destroy();
            m.find(".cloud-zoom").CloudZoom({
                imageWidth: B,
                imageHeight: E
            })
        }
    }).mouseleave(function () {})
};
Site.createImageEffectContent_photo = function (j, l, c, p) {
    var f = $(j).parents("." + c.targetParent);
    var k = $(j).find(".imageEffects");
    var d = $(f).attr("photoName");
    var m = $(f).attr("photoDisc");
    var i = l[Site.ImageEffect.DATA.KEY.FULL_MASK_OPEN_DISC];
    var n = l[Site.ImageEffect.DATA.KEY.HALF_MASK_OPEN_DISC];
    var o = c.nameHidden;
    if (o && !i && !n) {
        return
    }
    g();
    h(l, c.nameWordWrap);

    function g() {
        var s = [];
        var q = l.effType;
        var r = "";
        if (q == 4) {
            r = "photoFullMask"
        } else {
            if (q == 5) {
                r = "photoHalfMask"
            }
        }
        s.push("<div class='props " + r + "'>");
        s.push("<div class='propList g_specialClass'>");
        if (!o) {
            s.push("<div class='photoName'>" + d + "</div>")
        }
        if (i && m.length > 0 && q == 4) {
            s.push("<div class='photoDisc'>" + m + "</div>")
        }
        if (n && m.length > 0 && q == 5) {
            s.push("<div class='photoDisc'>" + m + "</div>")
        }
        s.push("</div>");
        s.push("</div>");
        $(k).append(s.join(""))
    }

    function h(u, q) {
        var t = $(k).find(".photoName");
        var w = $(k).find(".photoDisc");
        var y = 3;
        if (t.length != 0 && !o) {
            e(u, q);
            Site.clamp($(t)[0], {
                clamp: y
            })
        }
        if (w.length != 0 && u.effType == 4 && i) {
            b(u);
            Site.clamp($(w)[0], {
                clamp: y
            });
            setTimeout(function () {
                var A = $(k).height();
                var C = $(k).find(".props").height();
                if (C > A && !o) {
                    var z = $(w).height();
                    var B = C - A;
                    y = (z) - B + "px";
                    Site.clamp($(w)[0], {
                        clamp: y
                    })
                }
            }, 100)
        }
        if (u.effType == 5) {
            var r = $(k).height() / 3;
            var x = $(k).find(".props");
            var v = $(x).height() + 10;
            var s = r;
            a(u);
            if (v > r) {
                s = v
            }
            $(k).css("height", s).css("bottom", "-" + s + "px")
        }
    }

    function e(u, v) {
        var r = $(k).find(".photoName");
        var t = "";
        $(r).removeAttr("style");
        if (u.effType == 4) {
            var s = u[Site.ImageEffect.DATA.KEY.FULL_MASK_CUS_NAME];
            var w = u[Site.ImageEffect.DATA.KEY.FULL_MASK_NAME_ALIG];
            var q = u[Site.ImageEffect.DATA.KEY.FULL_MASK_NAME_STYLE];
            if (s && typeof q == "string" && q.length > 0) {
                q = $.parseJSON(q);
                t += "color: " + q.fc + ";";
                t += (q.fb == 1) ? " font-weight: bold;" : ""
            }
            if (typeof w == "number") {
                t += " text-align:" + ((w == 1) ? "center;" : (w == 2) ? "left;" : "right;")
            }
        }
        if (v) {
            if (l.effType == 4) {
                t += " word-wrap: break-word;"
            } else {
                t += " overflow: visible; text-overflow: clip; white-space: normal; word-wrap: break-word;"
            }
        } else {
            t += " overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
        } if (u.effType == 5) {
            if (l.style == 88 || l.style == 89 || l.style == 90) {
                t += " padding-top: 2%;"
            } else {
                t += " padding-top: 2.5%;"
            }
        }
        $(r).attr("style", t)
    }

    function b(w) {
        var q = $(k).find(".photoDisc");
        var v = "";
        var s = w[Site.ImageEffect.DATA.KEY.FULL_MASK_CUS_DISC];
        var r = w[Site.ImageEffect.DATA.KEY.FULL_MASK_DISC_STYLE];
        var u = w[Site.ImageEffect.DATA.KEY.FULL_MASK_DISC_ALIG];
        $(q).removeAttr("style");
        if (s && typeof r == "string" && r.length > 0) {
            r = $.parseJSON(r);
            v += " color: " + r.fc + ";"
        }
        if (typeof u == "number") {
            v += " text-align:" + ((u == 1) ? "center;" : (u == 2) ? "left;" : "right;")
        }
        if (!o) {
            var t = (Fai.isIE6() || Fai.isIE7()) ? 16 : 18;
            v += " margin-top: " + t + "px;"
        }
        $(q).attr("style", v)
    }

    function a(v) {
        var s = $(k).find(".photoDisc");
        var u = "";
        var t = v[Site.ImageEffect.DATA.KEY.HALF_MASK_CUS_DISC];
        var w = v[Site.ImageEffect.DATA.KEY.HALF_MASK_DISC_STYLE];
        var r = v[Site.ImageEffect.DATA.KEY.HALF_MASK_DISC_ALIG];
        var q = v[Site.ImageEffect.DATA.KEY.HALF_MASK_OPEN_DISC];
        if (!q) {
            return
        }
        if (t && typeof w == "string" && w.length > 0) {
            w = $.parseJSON(w);
            u += " color: " + w.fc + ";"
        }
        if (typeof r == "number") {
            u += " text-align:" + ((r == 1) ? "center;" : (r == 2) ? "left;" : "right;")
        }
        $(s).attr("style", u)
    }
};
Site.clearImageEffectContent_photo = function (b, a) {
    $("#" + b).find("." + a).remove()
};
Site.bindImageEffectCusEvent_photo = function (g, c) {
    var f = $(g).find(".imageEffects");
    var a = true;
    var e = $(g).parents("." + c.targetParent).find("a");
    var d = $(e).attr("href");
    var b = (typeof d == "undefined" || d.length == 0 || d.indexOf("javascirpt") > 0 || d.indexOf("return") > 0 || e.length == 0) ? false : true;
    if (!b) {
        a = false
    }
    if (a) {
        $(f).css("cursor", "pointer")
    } else {
        $(f).css("cursor", "default")
    }
    $(f).unbind("click").bind("click", function () {
        var l = $(this).parents("." + c.targetParent).find("a");
        if (Fai.isNull(l)) {
            return
        }
        var i = $(l).attr("href");
        var h = $(l).attr("onclick");
        var j = $(l).attr("target");
        var k = (typeof i == "undefined" || i.length == 0 || i.indexOf("javascirpt") > 0 || i.indexOf("return") > 0 || e.length == 0) ? false : true;
        if (typeof h != "undefined") {
            $(l).click()
        } else {
            if (k) {
                window.open(i, j)
            }
        }
    })
};
Site.formMiddleContentWidthArray = new Array();
Site.initModuleWeather = function (a, b, d, c) {
    Site.initIframeLoading(a, b, d, c)
};
Site.initModuleWeather2 = function (b, i, a, d) {
    var f = (a == 11 ? 2 : 1),
        h = 0,
        j = "json",
        e = Fai.isIE6(),
        g = [];
    var k = "//platform.sina.com.cn/weather/forecast?app_key=1315597423&city=" + encodeURIComponent(i) + "&startday=" + h + "&lenday=" + f + "&format=" + j + "&auth_type=uuid&auth_value=0123456789012345&callback=?";
    var c = "//wthrcdn.etouch.cn/weather_mini?city=" + encodeURIComponent(i) + "&callback=?";
    $(".formMiddleContent" + b).css("overflow", "hidden");
    $(".formMiddleContent" + b).append("<div class='weather2Loading'></div>");
    if ($("#toolTips" + a).length > 0) {
        $("#toolTips" + a).remove()
    }
    if (a == 13 || a == 14 || a == 15) {
        $.getJSON(c, function (s) {
            if (!s || s.status != 1000) {
                if (!d) {
                    return
                }
                Site.initModuleWeather2(b, d, a);
                return
            }
            var o = s.data.city;
            var m = s.data.wendu;
            var l = s.data.forecast[0].fengli;
            var q = s.data.forecast[0].fengxiang;
            var p = s.data.forecast[0].type;
            var r = "";
            switch (p) {
                case "暴雨":
                    r = "baoyu";
                    break;
                case "大暴雨":
                    r = "dabaoyu";
                    break;
                case "大雪":
                    r = "daxue";
                    break;
                case "大雨":
                    r = "dayu";
                    break;
                case "多云":
                    r = "duoyun";
                    break;
                case "雷阵雨":
                    r = "leizhenyu";
                    break;
                case "霾":
                    r = "mai";
                    break;
                case "晴":
                    r = "wu";
                    break;
                case "雾":
                    r = "wu";
                    break;
                case "小雪":
                    r = "xiaoxue";
                    break;
                case "小雨":
                    r = "xiaoyu";
                    break;
                case "雪":
                    r = "xue";
                    break;
                case "阴":
                    r = "yin";
                    break;
                case "雨夹雪":
                    r = "yujiaxue";
                    break;
                case "阵雨":
                    r = "zhenyu";
                    break;
                case "中雪":
                    r = "zhongxue";
                    break;
                case "中雨":
                    r = "zhongyu";
                    break;
                case "中到大雨":
                    r = "zhongyu";
                    break;
                case "小到中雨":
                    r = "xiaoyu";
                    break;
                case "中到大雪":
                    r = "zhongxue";
                    break;
                case "小到中雪":
                    r = "xiaoxue";
                    break;
                case "大到暴雨":
                    r = "baoyu";
                    break;
                default:
                    r = "kongbai"
            }
            if (a == 13) {
                if (e) {
                    $(".formMiddleContent" + b).css("height", 80 + "px")
                }
                g.push("<div class='weather2' style='width:300px;'>");
                g.push("<div class='left" + a + "'>");
                g.push("<div class='firstLine" + a + "'>");
                g.push("<div class='cityName" + a + "'>" + o + "</div>");
                g.push("<div class='currentTemperature" + a + "'>");
                g.push("<font face='微软雅黑' color='#fdbf43'>" + m + "℃</font>");
                g.push("</div>");
                g.push("</div>");
                g.push("<div class='secondLine" + a + "'>");
                g.push("<div class='weatherCon" + a + "'>");
                g.push("<span class='weatherCon2" + a + "'>" + p + "</span>");
                g.push("</div>");
                g.push("<div class='fenli" + a + "'>" + l + "</div>");
                g.push("</div>");
                g.push("</div>");
                g.push("<div class='right" + a + "'>");
                g.push("<div class='images" + a + "'>");
                g.push("<img class='image1" + a + "' title='" + p + "' src='" + _resRoot + "/image/site/weather/" + r + "22." + (e ? "gif'" : "png'") + "/>");
                g.push("</div>");
                g.push("</div>")
            } else {
                if (a == 14) {
                    if (e) {
                        $(".formMiddleContent" + b).css("height", 80 + "px")
                    }
                    g.push("<div class='weather2' style='width:250px;'>");
                    g.push("<div class='left" + a + "' style='width: 90px;'>");
                    g.push("<div class='images" + a + "'>");
                    g.push("<img class='image1" + a + "' title='" + p + "' src='" + _resRoot + "/image/site/weather/" + r + "11." + (e ? "gif'" : "png'") + "/>");
                    g.push("</div>");
                    g.push("</div>");
                    g.push("<div class='right" + a + "'>");
                    g.push("<div class='firstLine" + a + "'>");
                    g.push("<div class='cityName" + a + "'>" + o + "</div>");
                    g.push("<div class='currentTemperature" + a + "'>");
                    g.push("<font face='微软雅黑' color='#fdbf43'>" + m + "℃</font>");
                    g.push("</div>");
                    g.push("</div>");
                    g.push("<div class='secondLine" + a + "'>");
                    g.push("<div class='weatherCon" + a + "'>");
                    g.push("<span class='weatherCon2" + a + "'>" + p + "</span>");
                    g.push("</div>");
                    g.push("<div class='fenli" + a + "'>" + l + "</div>");
                    g.push("</div>");
                    g.push("</div>")
                } else {
                    if (a == 15) {
                        if (e) {
                            $(".formMiddleContent" + b).css("height", 80 + "px")
                        }
                        g.push("<div class='weather2' style='width:350px;'>");
                        g.push("<div class='left" + a + "' style='width: 90px;'>");
                        g.push("<div class='images" + a + "'>");
                        g.push("<img class='image1" + a + "' title='" + p + "' src='" + _resRoot + "/image/site/weather/" + r + "33." + (e ? "gif'" : "png'") + "/>");
                        g.push("</div>");
                        g.push("</div>");
                        g.push("<div class='right" + a + "'>");
                        g.push("<div class='firstLine" + a + "'>");
                        g.push("<div class='cityName" + a + "'>" + o + "</div>");
                        g.push("<div class='windDirection" + a + "'>");
                        g.push("" + q + "</div>");
                        g.push("<div class='fenli" + a + "'>" + l + "</div>");
                        g.push("</div>");
                        g.push("<div class='secondLine" + a + "'>");
                        g.push("<div class='currentTemperature" + a + "'>");
                        g.push("<font face='微软雅黑'>" + m + "℃</font>");
                        g.push("</div>");
                        g.push("<div class='weatherCon" + a + "'>");
                        g.push("<span class='weatherCon2" + a + "'>" + p + "</span>");
                        g.push("</div>");
                        g.push;
                        g.push("</div>");
                        g.push("</div>")
                    }
                }
            } if (g.length == 0) {
                var n = "<div id='toolTips" + a + "' style='margin: 0 auto;width: 120px; cursor:pointer;' onclick='Site.initModuleWeather2( " + b + ',"' + i + '", ' + a + ',"' + d + "\")'>网络缓慢，请重新加载</div>";
                $(".formMiddleContent" + b + " .includeWeather" + a).append(n)
            } else {
                $(".formMiddleContent" + b + " .includeWeather" + a).append(g.join(""))
            }
            $(".formMiddleContent" + b + " .weather2Loading").remove()
        })
    } else {
        $.getJSON(k, function (r) {
            if (!r || r.status.code != 0) {
                if (!d) {
                    return
                }
                Site.initModuleWeather2(b, d, a);
                return
            }
            var o = $(".formMiddleContent" + b + " .weather2"),
                w = r.data.city[0].days.day,
                v = false;
            for (var t = 0; t < w.length; t++) {
                var y = w[t].f1 ? w[t].f1 : "qing",
                    x = w[t].f2 ? w[t].f2 : "qing",
                    s = (y == x ? true : false),
                    q = w[t].t1 ? w[t].t1 : "0",
                    n = w[t].t2 ? w[t].t2 : "0",
                    p = w[t].s1,
                    m = w[t].s2,
                    u = w[t].d1,
                    B = w[t].p1,
                    z = r.data.city[0].info.name;
                o.find(".cityName" + a).text(z);
                if (a != 12 && a != 11) {
                    g.push("<ul class='weather2'>");
                    g.push("<li class='cityName" + a + "'>");
                    g.push("" + z + "</li>");
                    g.push("<li class='weatherCon" + a + "'>");
                    if (a == 1) {
                        if (e) {
                            $(".formMiddleContent" + b).css("height", 27 + "px")
                        }
                        g.push("" + p + "")
                    } else {
                        if (e) {
                            $(".formMiddleContent" + b).css("height", 33 + "px")
                        }
                        if (a == 3 || a == 11) {
                            if (!s) {
                                g.push("<img style='margin-right: 5px;' class='image1" + a + "' title='" + p + "' src='" + _resRoot + "/image/site/weather/" + y + "1." + (e ? "gif'" : "png'") + "/>")
                            }
                        }
                        g.push("<img class='image2" + a + "' title='" + m + "' src='" + _resRoot + "/image/site/weather/" + x + "1." + (e ? "gif'" : "png'") + "/>")
                    }
                    g.push("</li>");
                    g.push("<li class='temperature" + a + "'>");
                    g.push("<span class='temperature1" + a + "'>");
                    g.push("" + q + "</span> ~");
                    g.push("<span class='temperature2" + a + "'>");
                    g.push("" + n + "</span>");
                    g.push("</li>");
                    if (a == 7) {
                        g.push("<li class='weatherCondition" + a + "'>");
                        g.push("" + u + "</li>")
                    }
                    g.push("</ul>")
                } else {
                    if (a == 11) {
                        $(".formMiddleContent" + b + " .includeWeather" + a).width(560);
                        if (e) {
                            $(".formMiddleContent" + b).css("height", 81 + "px")
                        }
                        var l = "";
                        t == 0 ? l = "今天" : l = "明天";
                        g.push("<div class='weather2'  style='width:278px;'>");
                        g.push("<div class='cityName" + a + "'>" + (!v ? z : "") + "</div>");
                        g.push("<img class='image1" + a + "' title='" + p + "' src='" + _resRoot + "/image/site/weather/" + y + "11." + (e ? "gif'" : "png'") + "/>");
                        g.push("<div class='weatherToday" + a + "'>");
                        g.push("<div class='weatherTodayInfo" + a + "'>");
                        g.push("<span class='weatherTodayDate" + a + "'>" + l + " ");
                        g.push("" + q + " ~ </span>");
                        g.push("" + n + "<span class='temperature1" + a + "'>");
                        g.push("</span> ");
                        g.push("<span class='temperature2" + a + "'>");
                        g.push("</span>");
                        g.push("</div>");
                        g.push("<div class='weatherCon" + a + "'>");
                        if (!s) {
                            g.push("<span class='weatherCon1" + a + "'>" + p + "</span>");
                            g.push("<span>转</span>")
                        }
                        g.push("<span class='weatherCon2" + a + "'>" + m + "</span>");
                        g.push("</div>");
                        g.push("</div>");
                        g.push("</div>");
                        v = true
                    } else {
                        if (a == 12) {
                            if (e) {
                                $(".formMiddleContent" + b).css("height", 135 + "px")
                            }
                            g.push("<div class='weather2' style='width:250px;'>");
                            g.push("<div class='left" + a + "' style='width: 90px;'>");
                            g.push("<div class='cityName" + a + "'>" + z + "</div>");
                            g.push("<div class='images" + a + "'>");
                            g.push("<img class='image1" + a + "' title='" + p + "' src='" + _resRoot + "/image/site/weather/" + y + "11." + (e ? "gif'" : "png'") + "/>");
                            g.push("</div>");
                            g.push("<div class='weatherCon" + a + "'>");
                            if (!s) {
                                g.push("<span class='weatherCon1" + a + "'>" + p + "</span>");
                                g.push("<span>转</span>")
                            }
                            g.push("<span class='weatherCon2" + a + "'>" + m + "</span>");
                            g.push("</div>");
                            g.push("</div>");
                            g.push("<div class='right" + a + "'>");
                            g.push("<div class='temperatureInclude" + a + "'>");
                            g.push("<div style='float: left;'>温度：</div>");
                            g.push("<div class='temperature" + a + "'>");
                            g.push("<span class='temperature1" + a + "'>" + q + "");
                            g.push("</span> ~");
                            g.push("<span class='temperature2" + a + "'>" + n + "");
                            g.push("</span>");
                            g.push("</div>");
                            g.push("</div>");
                            g.push("<div class='windInclude" + a + "'>");
                            g.push("<div style='float: left;'>风力:</div>");
                            g.push("<div class='wind" + a + "'>");
                            g.push("" + B + "</div>");
                            g.push("</div>");
                            g.push("<div class='windDirectionInclude" + a + "'>");
                            g.push("<div style='float: left;'>风向：</div>");
                            g.push("<div class='windDirection" + a + "'>");
                            g.push("" + u + "</div>");
                            g.push("</div>");
                            g.push("</div>")
                        }
                    }
                }
            }
            if (g.length == 0) {
                var A = "<div id='toolTips" + a + "' style='margin: 0 auto;width: 120px; cursor:pointer;' onclick='Site.initModuleWeather2( " + b + ',"' + i + '", ' + a + ',"' + d + "\")'>网络缓慢，请重新加载</div>";
                $(".formMiddleContent" + b + " .includeWeather" + a).append(A)
            } else {
                $(".formMiddleContent" + b + " .includeWeather" + a).append(g.join(""))
            }
            $(".formMiddleContent" + b + " .weather2Loading").remove()
        })
    }
};
Site.initWeatherOfIP = function (b, a) {
    $.ajax({
        url: "http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js",
        type: "POST",
        dataType: "script",
        success: function (c) {
            var d = remote_ip_info.city;
            Site.initModuleWeather2(b, d, a)
        }
    })
};
Site.initModuleDate = function () {
    var a = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"],
        c = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
        d, e, b;
    return {
        init: function (f, g) {
            d = f, e = g;
            b = $("#module" + d + "Date");
            this.start()
        }, start: function () {
            this.go();
            if (e == 2 || e == 3 || e == 5 || e == 7 || e == 8) {
                setInterval(this.go, 8001)
            }
        }, go: function () {
            var n = new Date(),
                l = n.getFullYear(),
                i = n.getMonth() + 1,
                p = n.getDate(),
                o = n.getDay(),
                f = a[o],
                j = c[o],
                k = n.getHours() + "",
                g = n.getMinutes() + "",
                q = "";
            if (k.length == 1) {
                k = "0" + k
            }
            if (g.length == 1) {
                g = "0" + g
            }
            if (e == 1) {
                q = l + "年" + i + "月" + p + "日 " + f
            } else {
                if (e == 2) {
                    q = l + "年" + i + "月" + p + "日 " + k + ":" + g
                } else {
                    if (e == 3) {
                        q = l + "年" + i + "月" + p + "日 " + f + " " + k + ":" + g
                    } else {
                        if (e == 4) {
                            q = l + "-" + i + "-" + p
                        } else {
                            if (e == 5) {
                                q = l + "-" + i + "-" + p + " " + k + ":" + g
                            } else {
                                if (e == 6) {
                                    q = i + "/" + p + "/" + l + " " + j
                                } else {
                                    if (e == 7) {
                                        q = i + "/" + p + "/" + l + " " + k + ":" + g
                                    } else {
                                        q = i + "/" + p + "/" + l + " " + j + " " + k + ":" + g
                                    }
                                }
                            }
                        }
                    }
                }
            }
            b.text(q)
        }
    }
}();
(function (a) {
    jQuery.fn.extend({
        bannerImageSwitch: function (c) {
            if (typeof Fai == "undefined") {
                alert("must import fai.js");
                return
            }
            var b = a.extend({
                title: true,
                desc: false,
                btn: true,
                repeat: "no-repeat",
                position: "50% 50%",
                titleSize: 14,
                titleFont: "Verdana,宋体",
                titleColor: "#FFF",
                titleTop: 4,
                titleLeft: 4,
                descSize: 12,
                descFont: "Verdana,宋体",
                descColor: "#FFF",
                descTop: 2,
                descLeft: 4,
                btnWidth: 15,
                btnHeight: 15,
                btnMargin: 4,
                btnType: 1,
                playTime: 4000,
                animateTime: 1500,
                animateStyle: "o",
                index: 0,
                wideScreen: false,
                btnFunc: function () {}
            }, c);
            return a(this).each(function () {
                var f = a(this);
                var D = b.width || f.width();
                var N = b.height || f.height();
                var I = b.data.length;
                var L = b.index;
                var e = D < f.width() ? D : f.width();
                var E = f.width();
                var t = (Site.checkBrowser() && Fai.top._bannerData.at > 0) ? true : false;
                f.css("overflow", "hidden");
                f.height(N);
                var P = a('<div class="imageSwitchShowName photoSwitchBg" />').appendTo(f).css("position", "absolute").css("display", "none").css("zIndex", 2).css("width", a.browser.msie && a.browser.version == 6 ? a(f).parent().parent().width() + "px" : a(f).parent().width() + "px").css("height", 30 + "px").css("line-height", 30 + "px");
                if (I == 0) {
                    P.css("visibility", "hidden")
                }
                if (b.showImageName) {
                    P.css("display", "block")
                }
                var H = "none";
                if (b.data.length > 1) {
                    H = b.btn ? "block" : "none"
                }
                if (b.btnType != 0) {
                    var R = a('<div class="imageSwitchBtnArea"/>').appendTo(f).css("position", "absolute").css("zIndex", 3).css("display", H)
                }
                a("<div />").appendTo(f);
                var O = "";
                if (t) {
                    O = "billboard billboard" + Fai.top._bannerData.at
                }
                var l = a('<div class="switchGroup ' + O + '"/>').appendTo(f).css("width", (b.width <= f.width()) ? b.width : "100%").css("position", "relative").height("y,show-y".indexOf(b.animateStyle) != -1 ? N * I : N).css("overflow", "hidden").css("margin", "0 auto");
                if (b.wideScreen) {
                    l.css("width", "100%")
                }
                var T = 0;
                var r = "100%";
                if (b.btnType == 0) {
                    b.animateStyle = "x"
                }
                var M = [];
                var U = "";
                var s = "";
                var g = "";
                var h = "";
                var x = "";
                var m = "";
                var K = "";
                if (b.btnType == 0) {
                    U = "arrowImg"
                } else {
                    if (b.btnType == 1) {
                        U = "numImg"
                    } else {
                        U = "dotImg"
                    }
                }
                a.each(b.data, function (X, aa) {
                    var W = "";
                    var Z = "";
                    K = "";
                    x = "";
                    m = "";
                    if (a.trim(aa.edgeLeft) != "") {
                        x = "background:" + aa.edgeLeft + ";"
                    }
                    if (a.trim(aa.edgeRight) != "") {
                        m = "background:" + aa.edgeRight + ";"
                    }
                    if (!aa.href) {
                        W = "onclick='return false;'"
                    }
                    if (aa.onclick) {
                        W = "onclick='" + aa.onclick + "'"
                    }
                    M = [];
                    s = "";
                    s += "position:absolute;width:100%;";
                    if (b.btnType == 0) {
                        if (b.wideScreen) {
                            s += "left:" + ((X - L) * E) + "px;"
                        } else {
                            s += "left:" + ((X - L) * b.width) + "px;"
                        }
                    }
                    if (t) {
                        M.push("<div class='billboard_item " + U + "'>\n")
                    } else {
                        M.push("<div class='" + U + "' id='" + U + X + "' style='" + s + "'>\n")
                    }
                    g = "";
                    g += "width:100%;";
                    g += "height:" + N + "px;";
                    g += "cursor:" + (aa.href ? "pointer" : "default") + ";";
                    g += "background-position:" + b.position + ";";
                    g += "background-repeat:" + b.repeat + ";";
                    g += "overflow:hidden;";
                    g += "display:block;";
                    g += "outline:none;";
                    g += "margin:0 auto;";
                    g += "position:relative;";
                    g += "z-index:1;";
                    if (aa.width && aa.width > 0) {
                        h = ("<img src='" + aa.src + "' width='" + aa.width + "' height='" + aa.height + "' />\n")
                    } else {
                        h = "";
                        g += "background-image:url(" + aa.src + ");"
                    } if (b.wideScreen) {
                        M.push("<a class='J_bannerEdge J_bannerEdgeLeft bannerEdge bannerEdgeLeft' hidefocus='true' title='" + (aa.tip ? aa.tip : "") + "' href='" + (aa.href ? Fai.encodeHtml(aa.href) : "javascript:;") + "' target='" + (aa.target ? aa.target : "") + "' " + W + " style='" + x + "'></a>");
                        M.push("<a class='J_bannerEdge J_bannerEdgeRight bannerEdge bannerEdgeRight' hidefocus='true' title='" + (aa.tip ? aa.tip : "") + "' href='" + (aa.href ? Fai.encodeHtml(aa.href) : "javascript:;") + "' target='" + (aa.target ? aa.target : "") + "' " + W + " style='" + m + "'></a>")
                    }
                    M.push("<a class='J_bannerItem' hidefocus='true' title='" + (aa.tip ? aa.tip : "") + "' href='" + (aa.href ? Fai.encodeHtml(aa.href) : "javascript:;") + "' target='" + (aa.ot == 1 ? "_blank" : "") + "' style='" + g + "' " + W + ">\n");
                    M.push(h);
                    M.push("</a>\n");
                    M.push("</div>\n");
                    l.append(M.join(""));
                    if (b.btnType == 1) {
                        var Y = a('<a class="imageSwitchBtn" />').appendTo(R).html("<span>" + (X + 1) + "</span>")
                    } else {
                        if (b.btnType == 2) {
                            var Y = a('<a class="imageSwitchBtn_dot" />').appendTo(R)
                        }
                    } if (X == L) {
                        K = "spanShowName"
                    }
                    var V = a('<span class="spanHiddenName ' + K + '"/>').appendTo(P).css("margin-left", 10 + "px").text(aa.name);
                    if (b.btnType != 0) {
                        if (X == L) {
                            if (b.btnType == 1) {
                                Y.addClass("imageSwitchBtnSel")
                            } else {
                                Y.addClass("imageSwitchBtnSel_dot")
                            }
                        }
                    }
                    if (b.btnType == 1) {
                        T += Fai.getDivWidth(Y)
                    }
                });
                if (b.btnType == 0) {
                    if (I > 1) {
                        var C = a('<a class="imageSwitchBtn_arrow arrow_prev" />').appendTo(f).css({
                            position: "absolute",
                            zIndex: 3
                        });
                        var Q = a('<a class="imageSwitchBtn_arrow arrow_next" />').appendTo(f).css({
                            position: "absolute",
                            zIndex: 3
                        })
                    }
                }
                if (b.btnType == 1) {
                    R.width(T)
                }
                var k = f.parent();
                var u = k.width();
                if (a.browser.msie && a.browser.version == 6) {
                    u = k.parent().width()
                }
                var J = k.height();
                if (u > b.width) {
                    u = b.width + (u - b.width) / 2
                }
                if (u > f.width()) {
                    u = f.width()
                }
                if (J > N) {
                    J = N
                }
                if (I > 1) {
                    if (b.btnType != 0) {
                        if (Fai.top.$("#banner").length > 0) {
                            if (b.btnType == 1) {
                                if (D >= f.width()) {
                                    R.css("right", "40px")
                                } else {
                                    R.css("right", "50%");
                                    R.css("marginRight", "-" + D / 2 + "px")
                                }
                            } else {
                                if (b.btnType == 2) {
                                    R.css("left", "50%");
                                    R.css("marginLeft", "-" + R.width() / 2 + "px")
                                }
                            }
                        } else {
                            R.css("left", (u - T) + "px")
                        }
                    } else {
                        var v = f.width() - D;
                        if (D <= f.width()) {
                            v = v - v * 0.5
                        } else {
                            v = 0
                        }
                        C.css("left", v);
                        Q.css("right", v)
                    }
                }
                if (b.btnType != 0) {
                    var G = R.children("a");
                    var w = l.find(".J_bannerItem")
                } else {
                    var d = Q;
                    var y = C
                }
                var A = P.children("span");
                var n = u - T;
                if (I > 1) {
                    if (b.btnType != 0) {
                        P.css("top", (J - R.height() - 9) + "px").css("left", 0 + "px")
                    } else {
                        P.css("top", J + "px").css("left", 0 + "px")
                    }
                    var z = a.browser.msie && a.browser.version == 6 ? parseInt(j() + 30) : parseInt(j() + 20);
                    if (n > z) {
                        if (b.btnType == 1) {
                            R.css("top", (J - R.height() - 6) + "px")
                        } else {
                            if (b.btnType == 2) {
                                R.css("bottom", "5px")
                            } else {
                                C.css("top", "50%");
                                C.css("marginTop", "-" + C.height() / 2 + "px");
                                Q.css("top", "50%");
                                Q.css("marginTop", "-" + Q.height() / 2 + "px")
                            }
                        }
                    } else {
                        if (b.btnType == 1) {
                            R.css("top", (J - R.height() - 30) + "px")
                        } else {
                            if (b.btnType == 2) {
                                R.css("bottom", "5px")
                            } else {
                                C.css("top", "50%");
                                C.css("marginTop", "-" + C.height() / 2 + "px");
                                Q.css("top", "50%");
                                Q.css("marginTop", "-" + Q.height() / 2 + "px")
                            }
                        }
                    }
                }

                function j() {
                    if (A.length > 0) {
                        var W = a(A[0]).width();
                        for (var V = 1; V < A.length; V++) {
                            if (W < a(A[V]).width()) {
                                W = a(A[V]).width()
                            }
                        }
                        return W
                    }
                    return 0
                }
                if ("o,show,none".indexOf(b.animateStyle) != -1) {
                    w.each(function (V, W) {
                        if (L != V) {
                            if (!t) {
                                a(this).hide()
                            }
                            if (b.wideScreen) {
                                a(this).siblings(".J_bannerEdge").hide()
                            }
                        }
                    })
                }
                if (I == 1) {
                    A.eq(0).addClass("spanShowName")
                }
                if (I > 1) {
                    if (t) {
                        Site.bannerAnimate.init({
                            container: Fai.top.$("#banner .switchGroup"),
                            effectIndex: Fai.top._bannerData.at,
                            currentIndex: b.index,
                            speed: Fai.top._bannerData.a,
                            duration: Fai.top._bannerData.i
                        });
                        if (b.btnType != 0) {
                            G.click(function (W) {
                                W.stopPropagation();
                                var V = G.index(this);
                                Site.bannerAnimate.stop();
                                Site.bannerAnimate.goTo(V)
                            })
                        } else {
                            d.click(function (V) {
                                V.stopPropagation();
                                Site.bannerAnimate.next()
                            });
                            y.click(function (V) {
                                V.stopPropagation();
                                Site.bannerAnimate.prev()
                            })
                        }
                        f.mouseover(function () {
                            Site.bannerAnimate.stop()
                        });
                        f.mouseout(function () {
                            Site.bannerAnimate.autoPlay()
                        })
                    } else {
                        if (b.btnType != 0) {
                            G.click(function (W) {
                                W.stopPropagation();
                                var V = G.index(this);
                                if (V == L) {
                                    return
                                }
                                if (b.btnType == 1) {
                                    G.eq(L).removeClass("imageSwitchBtnSel");
                                    G.eq(V).addClass("imageSwitchBtnSel")
                                } else {
                                    G.eq(L).removeClass("imageSwitchBtnSel_dot");
                                    G.eq(V).addClass("imageSwitchBtnSel_dot")
                                }
                                A.eq(L).removeClass("spanShowName");
                                A.eq(V).addClass("spanShowName");
                                switch (b.animateStyle) {
                                    case "o":
                                        w.eq(L).fadeOut(b.animateTime, "failinear");
                                        w.eq(V).fadeIn(b.animateTime, "failinear");
                                        if (b.wideScreen) {
                                            w.eq(L).siblings().fadeOut(b.animateTime, "failinear");
                                            w.eq(V).siblings().fadeIn(b.animateTime, "failinear")
                                        }
                                        break;
                                    case "x":
                                        l.animate({
                                            marginLeft: -V * D
                                        }, b.animateTime);
                                        break;
                                    case "y":
                                        l.animate({
                                            marginTop: -V * N
                                        }, b.animateTime);
                                        break;
                                    case "show":
                                    case "show-x":
                                    case "show-y":
                                        w.eq(L).hide(b.animateTime);
                                        w.eq(V).show(b.animateTime);
                                        break;
                                    case "none":
                                        w.eq(L).hide();
                                        w.eq(V).show();
                                        if (b.wideScreen) {
                                            w.eq(L).siblings().hide();
                                            w.eq(V).siblings().show()
                                        }
                                        break
                                }
                                L = V;
                                var X = Fai.top.$("#bannerGetHref");
                                if (X) {
                                    X.css({
                                        width: b.data[V].imgWidth,
                                        left: (f.width() - b.data[V].imgWidth) / 2 + "px"
                                    });
                                    X.css({
                                        height: b.data[V].imgHeight,
                                        top: (f.height() - b.data[V].imgHeight) / 2 + "px"
                                    })
                                }
                            });

                            function q() {
                                G.eq((L + 1) % I).click()
                            }
                        } else {
                            var p = L;
                            A.eq(p).addClass("spanShowName");

                            function o(W) {
                                W.stopPropagation();
                                if (Fai.top.$(".arrowImg").is(":animated")) {
                                    return
                                }
                                A.eq(p).removeClass("spanShowName");
                                if (p == I - 1) {
                                    p = -1
                                }
                                A.eq(++p).addClass("spanShowName");
                                var V = e;
                                if (b.wideScreen) {
                                    V = E
                                }
                                Fai.top.$("#arrowImg" + p).css({
                                    left: V + "px"
                                });
                                Fai.top.$(".arrowImg").animate({
                                    left: "-=" + V + "px"
                                }, b.animateTime);
                                var X = Fai.top.$("#bannerGetHref");
                                if (X) {
                                    X.css({
                                        width: b.data[p].imgWidth,
                                        left: (f.width() - b.data[p].imgWidth) / 2 + "px"
                                    });
                                    X.css({
                                        height: b.data[p].imgHeight,
                                        top: (f.height() - b.data[p].imgHeight) / 2 + "px"
                                    })
                                }
                            }
                            d.on("click", o);
                            d.hover(function () {
                                d.addClass("arrow_next_hover")
                            }, function () {
                                d.removeClass("arrow_next_hover")
                            });

                            function i(W) {
                                W.stopPropagation();
                                if (Fai.top.$(".arrowImg").is(":animated")) {
                                    return
                                }
                                A.eq(p).removeClass("spanShowName");
                                if (p == 0) {
                                    p = I
                                }
                                var V = e;
                                if (b.wideScreen) {
                                    V = E
                                }
                                A.eq(--p).addClass("spanShowName");
                                Fai.top.$("#arrowImg" + p).css({
                                    left: "-" + V + "px"
                                });
                                Fai.top.$(".arrowImg").animate({
                                    left: "+=" + V + "px"
                                }, b.animateTime);
                                var X = Fai.top.$("#bannerGetHref");
                                if (X) {
                                    X.css({
                                        width: b.data[p].imgWidth,
                                        left: (f.width() - b.data[p].imgWidth) / 2 + "px"
                                    });
                                    X.css({
                                        height: b.data[p].imgHeight,
                                        top: (f.height() - b.data[p].imgHeight) / 2 + "px"
                                    })
                                }
                            }
                            y.on("click", i);
                            y.hover(function () {
                                y.addClass("arrow_prev_hover")
                            }, function () {
                                y.removeClass("arrow_prev_hover")
                            });

                            function B() {
                                d.click()
                            }
                        }
                        var S = "imageSwitch" + Math.random();
                        if (b.btnType != 0) {
                            Fai.addInterval(S, q, parseInt(b.playTime + b.animateTime))
                        } else {
                            Fai.addInterval(S, B, parseInt(b.playTime + b.animateTime))
                        }
                        var F = setTimeout(function () {
                            if (b.btnType != 0) {
                                q()
                            } else {
                                B()
                            }
                            Fai.startInterval(S)
                        }, b.playTime);
                        if (typeof b.mouseoverId != "undefined") {
                            a(Fai.top.$(f).find("." + b.mouseoverId)[0]).mouseover(function () {
                                F && clearTimeout(F);
                                Fai.stopInterval(S)
                            });
                            a(Fai.top.$(f).find("." + b.mouseoverId)[0]).mouseout(function () {
                                F && clearTimeout(F);
                                Fai.startInterval(S)
                            })
                        } else {
                            f.mouseover(function () {
                                F && clearTimeout(F);
                                Fai.stopInterval(S)
                            });
                            f.mouseout(function () {
                                F && clearTimeout(F);
                                Fai.startInterval(S)
                            })
                        }
                    }
                }
            })
        }
    })
})(jQuery);
Site.initBanner = function (s, e, g) {
    if (Fai.top._uiMode) {
        return
    }
    var m = false;
    var a = Fai.top.$("#webBanner");
    var c = Fai.top.$("#banner");
    if (Fai.top._templateLayout == 0 || Fai.top._templateLayout == 1 || Fai.top._templateLayout == 9 || top._templateLayout == 10) {
        var n = Fai.top._manageMode ? Site.getWebBackgroundData().wbh : Fai.top._webBannerHeight;
        if (n > -1) {
            s.height = n;
            if (c.siblings(".nav").length > 0) {
                var o = c.attr("normalheight");
                if (o == -1) {
                    o = c.css("height").replace("px", "")
                }
                var q = c.siblings(".nav").height() || 0;
                if (n > -1) {
                    s.height = a.height() - q;
                    if (a.height() < (parseInt(o) + parseInt(q))) {
                        m = true
                    }
                }
                if (c.attr("normalheight") == -1 && m) {
                    c.css({
                        height: s.height + "px"
                    })
                }
            }
        }
    }
    if (s._open) {
        if (e._open && Fai.flashChecker().f) {
            s.mouseoverId = "bannerGetHref"
        } else {
            s.mouseoverId = "switchGroup"
        }
        c.children().remove();
        c.bannerImageSwitch(s);
        var p = c.width();
        var b = c.height();
        if (m) {
            b = s.height
        }
        var d = (Fai.top.$("#containerFormsCenter").find("div").eq(0).attr("id"));
        var k = Fai.top.$("#banner .switchGroup");
        Fai.top.$("#banner .switchGroup .J_bannerItem").each(function (w) {
            if (!s.data[w]) {
                return false
            }
            var v = s.data[w] ? s.data[w].imgWidth : 0;
            if (p >= v) {
                $(this).css("width", s.data[w].imgWidth);
                var u = k.width() - s.data[w].imgWidth;
                if (Fai.isIE()) {
                    u = u + (u % 2)
                }
                $(this).siblings(".J_bannerEdge").css("width", u / 2)
            } else {
                $(this).css("width", p);
                var u = k.width() - p;
                if (Fai.isIE()) {
                    u = u + (u % 2)
                }
                $(this).siblings(".J_bannerEdge").css("width", u / 2)
            } if (b >= s.data[w].imgHeight) {
                if (Site.checkBrowser() && Fai.top._bannerData.at > 0) {
                    $(this).css("height", b)
                } else {
                    $(this).css("height", s.data[w].imgHeight);
                    $(this).parent().css("paddingTop", (b - s.data[w].imgHeight) / 2 + "px")
                }
                $(this).siblings(".J_bannerEdge").height(s.data[w].imgHeight);
                $(this).siblings(".J_bannerEdge").css("top", (b - s.data[w].imgHeight) / 2 + "px")
            } else {
                $(this).css("height", b);
                $(this).siblings(".J_bannerEdge").height(b)
            }
        });
        c.css("background", "none")
    } else {
        Site.refreshDefaultBannerEdge()
    } if (e._open && Fai.flashChecker().f) {
        if ($.browser.mozilla && $.browser.version == "49.0") {
            return
        }
        var h = 0;
        var t = 0;
        var f = Fai.top.$("#banner").width();
        if (f > 960) {
            f = 960;
            h = parseInt((Fai.top.$("#webBanner").width() - 960) / 2)
        }
        var i = Fai.top.$("#banner").height();
        if (e.position == 1) {
            f = f / 2
        } else {
            if (e.position == 2) {
                f = f / 2;
                h += f
            } else {
                if (e.position == 3) {
                    h += e.positionLeft;
                    t = e.positionTop
                }
            }
        } if (typeof Fai != "undefined" && typeof Fai.top._resRoot != "undefined") {
            resRoot = Fai.top._resRoot
        }
        if (typeof e.color1 == "undefined") {
            e.color1 = "#000"
        }
        if (typeof e.color2 == "undefined") {
            e.color2 = "#FFFFFF"
        }
        var r = "text1=" + Fai.encodeUrl(e.text1) + "&text2=" + Fai.encodeUrl(e.text2) + "&size1=" + e.size1 + "&size2=" + e.size2 + "&color1=0x" + e.color1.substr(1, e.color1.length - 1) + "&color2=0x" + e.color2.substr(1, e.color2.length - 1) + "&style1=" + e.style1 + "&style2=" + e.style2;
        var l = ['<div class="effectShow" id="effectShow" style="position:absolute; top:' + t + "px; left:" + h + 'px; z-index:1;">', '<object id="effectShow_swf" type="application/x-shockwave-flash"  data="' + Fai.top._resRoot + "/image/site/effects/" + e.type + ".swf?" + $.md5(r) + '" width="' + f + '" height="' + i + '">', '<param name="movie" value="' + Fai.top._resRoot + "/image/site/effects/" + e.type + ".swf?" + $.md5(r) + '"/>', '<param name="quality" value="high" />', '<param name="wmode" value="transparent" />', '<param name="flashvars" value="' + r + '"/>', '<embed id="effectShowEmbed" name="effectShow_swf" type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-4445535400000" src="', Fai.top._resRoot, "/image/site/effects/" + e.type + ".swf?" + $.md5(r) + '" wmode="transparent" quality="high" menu="false" play="true" loop="true" width="', f, '" height="', i, 'flashvars="' + r + '"', '" >', "</embed>", "</object>", "</div>"];
        l = l.join("");
        if (g == 4) {
            var j = '<div id="bannerGetHref" class="bannerGetHref" style="position:absolute; top:0; left:' + h + "px; width:" + f + "px; height:100%; z-index:1; background:url('" + resRoot + '/image/site/transpace.png\');" onmouseover="Site.bannerInitHref();"  onmouseout="Site.startBannerInterval();" onclick="Site.bannerGetHref();"></div>';
            l = l + j
        }
        c.append(l);
        var b = c.height();
        var p = c.width();
        if (s.data && s.data.length > 0) {
            Fai.top.$("#bannerGetHref").css({
                width: s.data[0].imgWidth,
                height: s.data[0].imgHeight,
                left: (p - s.data[0].imgWidth) / 2 + "px",
                top: (b - s.data[0].imgHeight) / 2 + "px"
            })
        }
    }
    if (s._open && $(".webBanner").width() != 960) {
        $(window).resize(function (u) {
            if (!u.target.nodeType || u.target.nodeType == 9) {
                setTimeout(function () {
                    Site.refreshBanner(0)
                }, 10)
            }
        })
    }
    Site.adjustBannerFlash()
};
Site.adjustBannerWidth = (function () {
    function b() {
        var i = Fai.top.$(window),
            f = Fai.top.$("#webBanner"),
            e = Fai.top.$("#web");
        webBgData = Fai.top._templateBackgroundData;
        if (f.length < 1) {
            return
        }
        if (webBgData.wbw != -1) {
            var d = Fai.top._manageMode ? Fai.getScrollWidth() : 0,
                h = (parseInt(f.css("borderLeftWidth").replace("px", "")) + parseInt(f.css("borderRightWidth").replace("px", ""))) || 0,
                g = webBgData.wbw + h,
                c = e.width();
            if (c - d < g && c < g) {
                a(c - h)
            }
            i.off("resize.banner");
            i.on("resize.banner", function () {
                c = e.width();
                if (i.width() - d < g && c < g) {
                    a(c - h)
                } else {
                    a(webBgData.wbw)
                }
            })
        } else {
            i.off("resize.banner")
        }
    }

    function a(c) {
        Fai.top.Fai.setCtrlStyleCss("styleWebSite", "", ".webBanner", "width", c + "px !important");
        Fai.top.Fai.setCtrlStyleCss("styleWebSite", "", ".webBanner .banner", "width", "auto !important");
        Fai.top.Fai.setCtrlStyleCss("styleWebSite", "", ".webBanner .switchGroup", "width", c + "px !important")
    }
    return b
})();
Site.startBannerInterval = function () {
    var a = 0;
    if (Fai.intervalFunc != undefined) {
        a = Fai.intervalFunc.length
    }
    if (a > 0) {
        var b = Fai.intervalFunc[0].id;
        if (typeof b != "undefined" && b.substring(0, 11) == "imageSwitch") {
            Fai.startInterval(b)
        }
    }
    if (Fai.top._bannerData.n && Fai.top._bannerData.n.length > 1 && Site.checkBrowser() && Fai.top._bannerData.at > 0) {
        Site.bannerAnimate.autoPlay()
    }
};
Site.stopBannerInterval = function () {
    var a = 0;
    if (Fai.intervalFunc != undefined) {
        a = Fai.intervalFunc.length
    }
    if (a > 0) {
        var b = Fai.intervalFunc[0].id;
        if (typeof b != "undefined" && b.substring(0, 11) == "imageSwitch") {
            Fai.stopInterval(b)
        }
    }
    if (Fai.top._bannerData.n && Fai.top._bannerData.n.length > 1 && Site.checkBrowser() && Fai.top._bannerData.at > 0) {
        Site.bannerAnimate.stop()
    }
};
Site.bannerInitHref = function () {
    Site.stopBannerInterval();
    var c = false;
    var a = Fai.top.$("#banner");
    var b = -1;
    a.find(".spanHiddenName").each(function (d, e) {
        if ($(this).hasClass("spanShowName")) {
            b = d;
            return false
        }
    });
    if (b == -1) {
        return
    }
    a.find(".switchGroup").children().each(function (d, e) {
        if (d == b && Fai.top.$(e).find("a").eq(0).attr("href") != "javascript:;") {
            Fai.top.$("#bannerGetHref").css("cursor", "pointer");
            c = true;
            return false
        }
    });
    if (c == false) {
        Fai.top.$("#bannerGetHref").css("cursor", "default")
    }
};
Site.bannerGetHref = function () {
    var a = Fai.top.$("#banner");
    var c = -1;
    a.find(".spanHiddenName").each(function (d, e) {
        if ($(this).hasClass("spanShowName")) {
            c = d;
            return false
        }
    });
    if (c == -1) {
        return
    }
    var b = "";
    a.find(".switchGroup").children().each(function (d, f) {
        if (d == c) {
            var e = Fai.top.$(f).find("a").eq(0);
            b = e.attr("href");
            if (b == "javascript:;") {
                $(e).click()
            }
            return false
        }
    });
    if (b != "javascript:;") {
        window.open(b)
    }
};
Site.adjustBannerFlash = function () {
    var b = Fai.top.$("#banner");
    var c = Fai.top.$("#imgPageFlash");
    if (c.length > 0) {
        var a = b.width();
        var d = c.width();
        if (a < d) {
            c.css({
                position: "absolute",
                left: -(d - a) / 2 + "px"
            })
        } else {
            c.css({
                position: "",
                left: ""
            })
        }
    }
};
Site.refreshBanner = function (i) {
    if (Fai.top._uiMode) {
        return
    }
    var a = Fai.top.$("#webBanner");
    var e = Fai.top.$("#banner");
    if (Fai.top._bannerData.h) {
        Fai.top.$("#banner").css("display", "none");
        return
    }
    if (typeof i == "undefined") {
        i = 0
    }
    if (Fai.top._bannerData.s == 3 && !Fai.top._bannerData.f.p) {
        Fai.top._bannerData.s = 0
    }
    if (Fai.top._bannerData.s == 4 && Fai.top._bannerData.n.length == 0) {
        Fai.top._bannerData.s = 0
    }
    Fai.top.$("#banner").css("display", "block");
    if (Fai.top._bannerData.s == 0) {
        Fai.top.$("#banner").removeAttr("style");
        Fai.top.$("#banner").children().remove();
        var o = [];
        o.push("<div class='" + e.attr("class") + " defaultBannerMain'></div>");
        o.push("<div class='defaultBannerEdge defaultBannerEdgeLeft'></div>");
        o.push("<div class='defaultBannerEdge defaultBannerEdgeRight'></div>");
        e.append(o.join(""));
        if (Fai.top._templateLayout == 0 || Fai.top._templateLayout == 1 || Fai.top._templateLayout == 9 || top._templateLayout == 10) {
            var j = Fai.top._manageMode ? Site.getWebBackgroundData().wbh : Fai.top._webBannerHeight;
            if (j > -1) {
                if (e.siblings(".nav").length > 0) {
                    var f = e.css("height").replace("px", "");
                    var d = e.siblings(".nav").height();
                    if (a.height() < (parseInt(f) + d)) {
                        f = a.height() - d;
                        e.css({
                            height: f + "px"
                        })
                    }
                }
            }
        }
        Site.refreshDefaultBannerEdge()
    } else {
        if (Fai.top._bannerData.s == 3) {
            Fai.top.$("#banner").css("background", "none");
            Fai.top.$("#banner").css("height", Fai.top._bannerData.f.h + "px");
            Fai.top.$("#banner").children().remove();
            var g = '<embed type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-4445535400000" id="imgPageFlash" src="' + Fai.top._bannerData.f.p + '" wmode="opaque" quality="high" menu="false" play="true" loop="true" width="' + Fai.top._bannerData.f.w + '" height="' + Fai.top._bannerData.f.h + '" ></embed>';
            Fai.top.$("#banner").append(g);
            Site.adjustBannerFlash()
        } else {
            if (Fai.top._bannerData.s == 4) {
                Site.refreshBannerImageSwitch(i)
            }
        }
    } if (Fai.top._bannerData.o) {
        if ($.browser.mozilla && $.browser.version == "49.0") {
            return
        }
        var p = 0;
        var m = 0;
        var l = Fai.top.$("#banner").width();
        var c = Fai.top.$("#banner").height();
        if (l > 960) {
            l = 960;
            p = parseInt((Fai.top.$("#webBanner").width() - 960) / 2)
        }
        if (Fai.top._bannerData.p == 1) {
            l = l / 2
        } else {
            if (Fai.top._bannerData.p == 2) {
                l = l / 2;
                p += l
            } else {
                if (Fai.top._bannerData.p == 3) {
                    p += Fai.top._bannerData.pl;
                    m = Fai.top._bannerData.pt
                }
            }
        } if (typeof Fai != "undefined" && typeof Fai.top._resRoot != "undefined") {
            resRoot = Fai.top._resRoot
        }
        if (typeof Fai.top._bannerData.ce.c1 == "undefined") {
            Fai.top._bannerData.ce.c1 = "#000"
        }
        if (typeof Fai.top._bannerData.ce.c2 == "undefined") {
            Fai.top._bannerData.ce.c2 = "#FFFFFF"
        }
        var k = "text1=" + Fai.encodeUrl(Fai.top._bannerData.ce.t1) + "&text2=" + Fai.encodeUrl(Fai.top._bannerData.ce.t2) + "&size1=" + Fai.top._bannerData.ce.sz1 + "&size2=" + Fai.top._bannerData.ce.sz2 + "&color1=0x" + Fai.top._bannerData.ce.c1.substr(1, Fai.top._bannerData.ce.c1.length - 1) + "&color2=0x" + Fai.top._bannerData.ce.c2.substr(1, Fai.top._bannerData.ce.c2.length - 1) + "&style1=" + Fai.top._bannerData.ce.s1 + "&style2=" + Fai.top._bannerData.ce.s2;
        var h = Fai.top._resRoot + "/image/site/effects/" + Fai.top._bannerData.t + ".swf?" + $.md5(k);
        var b = ['<div class="effectShow" id="effectShow" style="position:absolute; top:' + m + "px; left:" + p + 'px; z-index:1;">', '<object id="effectShow_swf"  type="application/x-shockwave-flash"  data="' + h + '" width="' + l + '" height="' + c + '">', '<param name="movie" value="' + h + '" />', '<param name="quality" value="high" />', '<param name="flashvars" value="' + k + '"/>', '<param name="wmode" value="transparent" />', '<embed name="effectShow_swf"  wmode="transparent" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-4445535400000" id="effectFlash" src="' + h + '" quality="high" menu="false" play="true" loop="true" width="' + l + '" height="' + c + '" flashvars="' + k + '" >', "</embed>", "</object>", "</div>"];
        b = b.join("");
        if (Fai.top._bannerData.s == 4) {
            var n = '<div id="bannerGetHref" class="bannerGetHref" style="position:absolute; top:0; left:' + p + "px; width:" + l + "px; height:100%;z-index:1; background:url('" + resRoot + '/image/site/transpace.png\');"  onmouseover="Site.bannerInitHref();" onmouseout="Site.startBannerInterval();" onclick="Site.bannerGetHref();"></div>';
            b = b + n
        }
        Fai.top.$("#banner").append(b);
        if (Fai.top._bannerData.n && Fai.top._bannerData.n.length > 0) {
            Fai.top.$("#bannerGetHref").css({
                width: Fai.top._bannerData.n[i].w,
                height: Fai.top._bannerData.n[i].h,
                left: (Fai.top.$("#banner").width() - Fai.top._bannerData.n[i].w) / 2 + "px",
                top: (Fai.top.$("#banner").height() - Fai.top._bannerData.n[i].h) / 2 + "px"
            })
        }
    } else {
        Fai.top.$("#effectShow").remove()
    }
};
Site.getWebBackgroundData = function () {
    return Fai.top._useTemplateBackground ? Fai.top._templateBackgroundData : Fai.top._customBackgroundData
};
Site.refreshBannerImageSwitch = function (h) {
    var q = 0;
    var n = 0;
    var o = new Array();
    var j = new Array();
    var k = new Array();
    var i = Fai.top._bannerData.bt;
    var m = false;
    var a = Fai.top.$("#webBanner");
    var e = Fai.top.$("#banner");
    $.each(Fai.top._bannerData.n, function (t, x) {
        var v = x.el || "";
        var w = x.er || "";
        var s = parseInt(x.h);
        var u = parseInt(x.w);
        if (s > q) {
            q = s
        }
        if (u > n) {
            n = u
        }
        if (x.e != 0) {
            var r = x.jUrl || "javascript:;";
            if (Fai.top._manageMode) {
                if ($(".panelLibItem[vid=" + x.i + "]").data("JURL") != undefined) {
                    r = $(".panelLibItem[vid=" + x.i + "]").data("JURL")
                }
                if (x.urlChange == 1) {
                    r = x.jUrl || "javascript:;"
                }
            }
            if (r.length > 12 && r.substring(0, 10) == "javascript") {
                o.push({
                    src: x.p,
                    href: "javascript:;",
                    onclick: r.substring(11) + "return false;",
                    ot: x.ot,
                    imgWidth: u,
                    imgHeight: s,
                    edgeLeft: v,
                    edgeRight: w
                })
            } else {
                o.push({
                    src: x.p,
                    href: r,
                    ot: x.ot,
                    imgWidth: u,
                    imgHeight: s,
                    edgeLeft: v,
                    edgeRight: w
                })
            }
        } else {
            o.push({
                src: x.p,
                imgWidth: u,
                imgHeight: s,
                edgeLeft: v,
                edgeRight: w
            })
        }
        j.push(u);
        k.push(s)
    });
    if (Fai.top._templateLayout == 0 || Fai.top._templateLayout == 1 || Fai.top._templateLayout == 9 || top._templateLayout == 10) {
        var b = Fai.top._manageMode ? Site.getWebBackgroundData().wbh : Fai.top._webBannerHeight;
        if (b > -1) {
            q = b;
            if (e.siblings(".nav").length > 0) {
                var f = e.attr("normalheight");
                if (f == -1) {
                    f = e.css("height").replace("px", "")
                }
                var d = d = e.siblings(".nav").height() || 0;
                if (b > -1 && a.height() < (f + d)) {
                    m = true;
                    q = a.height() - d
                }
            }
        }
    }
    Fai.top.$("#banner").css("background", "none");
    Fai.top.$("#banner").children().remove();
    Fai.top.$("#banner").css("height", q + "px");
    Fai.top.$("#banner").bannerImageSwitch({
        data: o,
        index: h,
        width: n,
        height: q,
        from: "banner",
        playTime: Fai.top._bannerData.i,
        animateTime: Fai.top._bannerData.a,
        btnType: i,
        wideScreen: Fai.top._bannerData.ws
    });
    var p = Fai.top.$("#banner").width();
    var l = Fai.top.$("#banner").height();
    if (m) {
        l = q
    }
    var c = (Fai.top.$("#containerFormsCenter").find("div").eq(0).attr("id"));
    var g = Fai.top.$("#banner .switchGroup");
    Fai.top.$("#banner .switchGroup .J_bannerItem").each(function (s) {
        if (p >= j[s]) {
            $(this).css("width", j[s]);
            var r = g.width() - j[s];
            if (Fai.isIE()) {
                r = r + (r % 2)
            }
            $(this).siblings(".J_bannerEdge").css("width", (r / 2) + "px")
        } else {
            $(this).css("width", p);
            var r = g.width() - p;
            if (Fai.isIE()) {
                r = r + (r % 2)
            }
            $(this).siblings(".J_bannerEdge").css("width", (r / 2) + "px")
        } if (l >= k[s]) {
            if (Site.checkBrowser() && Fai.top._bannerData.at > 0) {
                $(this).css("height", l)
            } else {
                $(this).css("height", k[s]);
                $(this).parent().css("paddingTop", (l - k[s]) / 2 + "px")
            }
            $(this).siblings(".J_bannerEdge").css("height", k[s]);
            $(this).siblings(".J_bannerEdge").css("top", (l - k[s]) / 2 + "px")
        } else {
            $(this).css("height", l);
            $(this).siblings(".J_bannerEdge").css("height", l)
        }
    })
};
Site.refreshDefaultBannerEdge = function () {
    var b = Fai.top.$("#banner");
    if (b.length > 0) {
        var c = b.attr("defaultwidth") || 960;
        if (b.children(".defaultBannerEdge").length > 0) {
            var a = b.width() - c;
            a = (a + (a % 2)) / 2;
            b.children(".defaultBannerEdge").css("width", a)
        }
    }
};
Site.checkBrowser = (function () {
    var c = ["animation", "MozAnimation", "webkitAnimation", "msAnimation", "OAnimation"],
        e = ["transform", "MozTransform", "webkitTransform", "msTransform", "OTransform"],
        b = ["opacity", "MozOpacity", "webkitOpacity", "msOpacity", "OOpacity"],
        d = document.createElement("div"),
        a = {};
    return function (g) {
        if (typeof a[g] == "boolean") {
            return a[g]
        }
        switch (g) {
            case "animation":
                props = c;
                break;
            case "transform":
                props = e;
                break;
            case "opacity":
                props = b;
                break;
            default:
                props = c
        }
        for (var h = 0, f = props.length; h < f; h++) {
            if (d.style[props[h]] !== undefined) {
                a[g] = true;
                return a[g]
            }
        }
        a[g] = false;
        return a[g]
    }
})();
Site.bannerAnimate = {};
(function (h, q, i) {
    var C = false,
        u = 1,
        b = 0,
        g = -1,
        d = -1,
        c = {
            autoPlay: true,
            currentIndex: 0,
            speed: 1500,
            duration: 4000,
            effectIndex: 1
        },
        E, t = false,
        w = true,
        m, o, y = 0,
        A = 0,
        j = 0,
        s;
    q.init = function (F) {
        C = Site.checkBrowser();
        if (!C) {
            return
        }
        if (!F.container) {
            return
        }
        e();
        l();
        D(F);
        k();
        z()
    };

    function e() {
        if (Fai.isSafari()) {} else {
            if (navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)) {} else {
                return
            }
        }
        Fai.top.$("#banner").addClass("fk-fixPerspective")
    }

    function l() {
        t = false;
        clearTimeout(m);
        for (var F = 0; F < y; F++) {
            r(s.eq(F)[0], p)
        }
    }

    function z() {
        n();
        if (E.autoPlay) {
            B()
        }
    }

    function B() {
        if (!t) {
            clearTimeout(m);
            m = setTimeout(q.next, E.duration)
        }
    }

    function v() {
        Site.refreshBanner(b)
    }
    q.autoPlay = function () {
        w = true;
        B()
    };
    q.next = function () {
        var F = b + 1;
        if (F >= s.length) {
            F = 0
        }
        q.goTo(F, false)
    };
    q.prev = function () {
        var F = b - 1;
        if (F < 0) {
            F = s.length - 1
        }
        q.goTo(F, true)
    };
    q.stop = function () {
        if (!w) {
            return
        }
        w = false;
        clearTimeout(m)
    };
    q.goTo = function (L, K) {
        if (isNaN(L) || L >= y || L < 0 || L == b) {
            return
        }
        if (t) {
            return
        }
        d = L;
        if (typeof K === "undefined") {
            var K = (d > b ? false : true)
        }
        var M = Fai.top.$("#banner").find(".imageSwitchBtnArea"),
            F = Fai.top.$("#banner").find(".imageSwitchShowName"),
            H = F.children("span"),
            J = M.children("a"),
            Q = s.eq(b),
            I = s.eq(d);
        if (Fai.top._bannerData.bt == 0) {} else {
            if (Fai.top._bannerData.bt == 1) {
                J.removeClass("imageSwitchBtnSel");
                J.eq(d).addClass("imageSwitchBtnSel")
            } else {
                if (Fai.top._bannerData.bt == 2) {
                    J.removeClass("imageSwitchBtnSel_dot");
                    J.eq(d).addClass("imageSwitchBtnSel_dot")
                }
            }
        }
        H.removeClass("spanShowName");
        H.eq(d).addClass("spanShowName");
        I.css("display", "block");
        if (u == 11) {
            var O = ["15% 15%", "85% 85%", "15% 85%", "85% 15%"];
            var G = ["billboardItem_11_on_zoomOut", "billboardItem_11_on_zoomIn"];
            var P = O[Math.floor(Math.random() * O.length)];
            var N = G[Math.floor(Math.random() * G.length)];
            I.addClass(N).removeClass("billboardItem_11_off");
            x(I, "transformOrigin", P);
            Q.addClass("billboardItem_11_off");
            Q.removeClass("billboardItem_11_on_zoomIn billboardItem_11_on_zoomOut billboardItem_11_start")
        } else {
            Q.removeClass("billboardItem_" + u + "_on billboardItem_" + u + "_on_reverse");
            Q.addClass("billboardItem_" + u + "_off");
            I.removeClass("billboardItem_" + u + "_off billboardItem_" + u + "_off_reverse");
            I.addClass("billboardItem_" + u + "_on");
            if (K) {
                Q.addClass("billboardItem_" + u + "_off_reverse");
                I.addClass("billboardItem_" + u + "_on_reverse")
            }
        }
        t = true;
        g = b;
        b = d;
        f(I[0], p)
    };

    function p() {
        if (r(this, p)) {
            t = false;
            s.eq(g).css("display", "none");
            if (w) {
                clearTimeout(m);
                if (E.effectIndex == 13) {
                    v()
                } else {
                    m = setTimeout(function () {
                        q.next()
                    }, E.duration)
                }
            } else {
                if (E.effectIndex == 13) {
                    v()
                }
            }
        }
    }

    function n() {
        var H;
        for (var G = 0; G < s.length; G++) {
            H = s.eq(G);
            x(H, "animationDuration", E.speed + "ms")
        }
        var F = s.eq(E.currentIndex);
        F.addClass("billboardItem_" + u + "_start");
        s.css("display", "none");
        F.css("display", "block")
    }

    function f(F, G) {
        F.addEventListener("animationend", G, false);
        F.addEventListener("webkitAnimationEnd", G, false);
        F.addEventListener("oAnimationEnd", G, false);
        F.addEventListener("oanimationend", G, false);
        F.addEventListener("msAnimationEnd", G, false);
        return true
    }

    function r(F, G) {
        F.removeEventListener("animationend", G, false);
        F.removeEventListener("webkitAnimationEnd", G, false);
        F.removeEventListener("oAnimationEnd", G, false);
        F.removeEventListener("oanimationend", G, false);
        F.removeEventListener("msAnimationEnd", G, false);
        return true
    }

    function k() {
        A = o.width() || 0;
        j = Fai.top.$("#banner").height() || 0;
        var J;
        if (E.effectIndex == 13) {
            o.addClass("billboard" + u)
        }
        o.css("height", j + "px");
        for (var I = 0; I < s.length; I++) {
            J = s.eq(I);
            J.addClass("billboardItem_" + u + " billboardAnim");
            J.css({
                width: A + "px",
                height: j + "px"
            });
            if (u == 6) {
                x(J, "transformOrigin", "50% 50% " + (-A / 2) + "px")
            } else {
                if (u == 7) {
                    x(J, "transformOrigin", "50% 50% " + (-j / 2) + "px")
                } else {
                    if (u == 8 || u == 9) {
                        var H = h(document.createElement("div"));
                        H.addClass("billboard_item billboardItem_" + u + " billboardItem_" + u + "_" + (I + 1));
                        for (var G = 1; G <= 3; G++) {
                            var L = h(document.createElement("div"));
                            L.addClass("billboardTile billboardTile_" + G + " billboardAnim");
                            x(L, "animationDuration", E.speed + "ms");
                            if (u == 8) {
                                x(L, "transformOrigin", "50% 50% " + (-A / 2) + "px")
                            } else {
                                x(L, "transformOrigin", "50% 50% " + (-j / 2) + "px")
                            }
                            var F = J.clone();
                            F.attr("class", "billboardImg").removeAttr("style");
                            F.find(".J_bannerItem").addClass("billboardImgInner");
                            h(L).append(F);
                            h(H).append(L)
                        }
                        J.before(H);
                        J.remove()
                    } else {
                        if (u == 10 || u == 12) {
                            var H = h(document.createElement("div"));
                            H.addClass("billboard_item billboardItem_" + u + " billboardItem_" + u + "_" + (I + 1));
                            H.css({
                                width: "100%",
                                height: j + "px"
                            });
                            for (var G = 1; G <= 4; G++) {
                                var L = h(document.createElement("div"));
                                L.addClass("billboardTile billboardTile_" + G);
                                var K = h(document.createElement("div"));
                                K.addClass("billboardAnim billboardTileImg");
                                x(K, "animationDuration", E.speed + "ms");
                                L.append(K);
                                var F = J.clone();
                                F.attr("class", "billboardImg").removeAttr("style");
                                F.find(".J_bannerItem").addClass("billboardImgInner");
                                K.append(F);
                                H.append(L)
                            }
                            J.before(H);
                            J.remove()
                        }
                    }
                }
            }
        }
        if (u == 8 || u == 9 || u == 10 || u == 12) {
            s = o.children();
            y = s.length
        }
    }

    function D(F) {
        g = -1;
        d = -1;
        E = h.extend({}, c, F);
        u = E.effectIndex;
        if (E.effectIndex == 13) {
            u = a(1, 12)
        }
        b = E.currentIndex;
        w = E.autoPlay;
        o = E.container;
        s = o.children();
        y = s.length
    }

    function x(H, I, G) {
        var F = I.substring(0, 1).toUpperCase() + I.substring(1);
        H.css("Webkit" + F, G);
        H.css("Moz" + F, G);
        H.css("ms" + F, G);
        H.css("O" + F, G);
        H.css(I, G)
    }

    function a(H, F) {
        var G = F - H + 1;
        return Math.floor(Math.random() * G + H)
    }
})(jQuery, Site.bannerAnimate);
Site.initModuleProductSearch = function (e) {
    var d = $("#module" + e + " .productSearch");
    d.autocomplete({
        source: function (g, f) {
            jQuery.ajax({
                url: "ajax/product_h.jsp",
                data: "cmd=getKeywordList&limit=6&term=" + Fai.encodeUrl(d.val()) + "&prgmid=" + e,
                type: "GET",
                dataType: "json",
                success: function (h) {
                    f($.map(h, function (i) {
                        return {
                            label: i,
                            value: i
                        }
                    }))
                }
            })
        }, delay: 100,
        select: function (g, h) {
            var f = h.item.label;
            Site.searchProduct(e, f)
        }
    });
    d.keypress(function (f) {
        if (f.keyCode == 13) {
            Site.searchProduct(e)
        }
    });
    var c = $("#module" + e);
    var b = c.find(".searchBox").attr("class");
    var a = c.find(".recommandKeyBox");
    if (b == "searchBox") {
        a.css("vertical-align", "7px")
    } else {
        a.css("vertical-align", "11px")
    }
};
Site.searchProduct = function (b, a) {
    var c = $("#module" + b + " .g_itext").val();
    if (a) {
        c = a
    }
    Fai.top.location.href = "pr.jsp?keyword=" + Fai.encodeUrl($.trim(c)) + "&_pp=0_" + b
};
Site.searchProductByKey = function (c, d, b) {
    var a = "pr.jsp?keyword=" + Fai.encodeUrl($.trim(d)) + "&_pp=0_" + c;
    if (Fai.top._manageMode) {
        Site.redirectUrl(a, "_self", b, 1, 0)
    } else {
        Fai.top.location.href = a
    }
};
Site.memberCenterInit = function (b, d, f, c, e, a) {
    if (c) {
        $("#module" + d).find(".formBanner").hide()
    }
    $(".mCenter .mCenterLeft li").click(function () {
        $(".mCenter .mCenterTitle:first-child").text($(this).find("span").html());
        if (c && $(this).attr("id") == "memberCoupon") {
            $(".mCenter .mCenterTitleList").hide()
        } else {
            $(".mCenter .mCenterTitleList").show()
        } if ($(this).attr("id") == "memberOrder") {
            $(".mCenterTitle").removeClass("mCenterTitleSelected");
            $(".memberOrderPanel").find(".itemList .itemLine").show();
            if (c && e) {
                $(".mCenter .mCenterTitleList .mCenterTitle:first-child").addClass("mCenterTitleSelected" + a)
            }
            $(".mCenter .mCenterTitleList .mCenterTitle:first-child").addClass("mCenterTitleSelected");
            $(".mCenter .mCenterTitleList .mCenterTitleOrder").show();
            $(".mCenterTitle").on("click.mCenterTitle", function () {
                $(".mCenter .mCenterTitleList .mCenterTitle:first-child").css("cursor", "pointer");
                if (c && e) {
                    $(".mCenterTitle").removeClass("mCenterTitleSelected" + a);
                    $(this).addClass("mCenterTitleSelected" + a)
                }
                $(".mCenterTitle").removeClass("mCenterTitleSelected");
                $(this).addClass("mCenterTitleSelected");
                if (c) {
                    $(this).css("display", "table-cell")
                } else {
                    $(this).css("display", "inline-block")
                } if ($(this).hasClass("J_refundStatus")) {
                    $(".memberOrderPanel").find(".itemList .itemLine").each(function (k, l) {
                        var j = false;
                        $(l).find(".J_refundTD").each(function (m, p) {
                            var o = parseInt($(p).attr("_rs")) || 0;
                            if (o > 0) {
                                j = true;
                                return false
                            }
                        });
                        if (j) {
                            $(this).show()
                        } else {
                            $(this).hide()
                        }
                    })
                } else {
                    if ($(this).hasClass("mCenterTitleOrder")) {
                        var i = $(this).text();
                        $(".memberOrderPanel").find(".itemList .itemLine .J-status").each(function (j, k) {
                            if ($(this).text() == i) {
                                $(this).parents(".itemLine").show()
                            } else {
                                $(this).parents(".itemLine").hide()
                            }
                        })
                    } else {
                        $(".memberOrderPanel").find(".itemList .itemLine").show()
                    }
                }
            })
        } else {
            $(".mCenterTitle").off("click.mCenterTitle");
            $(".mCenter .mCenterTitleList .mCenterTitle:first-child").removeClass("mCenterTitleSelected");
            $(".mCenter .mCenterTitleList .mCenterTitleOrder").hide()
        }
        var h = $(this).attr("id");
        var g = $(".mCenter .mCenterRight ." + h + "Panel");
        g.show();
        g.siblings().hide();
        if (c && e) {
            $(this).addClass("selected");
            $(this).find("span").addClass("g_selected" + a);
            $(this).siblings().removeClass("selected");
            $(this).siblings().find("span").removeClass("g_selected" + a)
        } else {
            $(this).addClass("selected");
            $(this).find("span").addClass("g_selected");
            $(this).siblings().removeClass("selected");
            $(this).siblings().find("span").removeClass("g_selected")
        }
    });
    switch (b) {
        case "memberOrder":
            $("#memberOrder")[0].click();
            break;
        case "memberIntegral":
            if ($("#memberIntegral").length > 0) {
                $("#memberIntegral")[0].click();
                break
            }
        case "memberInfo":
            $("#addrMsg").click();
            break;
        case "memberCoupon":
            $("#memberCoupon").click();
            break;
        default:
            $("#memberProfile")[0].click();
            break
    }
    Site.initContentSplitLine(d, f)
};
Site.memberCenterNewStyleSmallWidth = function (d, b) {
    var a = $("#module" + d);
    var e = a.width();
    var c = true;
    if (a.find(".memberOrderNewPanel .J-mallOrder .itemList").hasClass("newRefundStyle")) {
        c = false
    }
    if (b && e < 1200 && c) {
        a.find(".J-mCenterR").css("padding-left", "15px");
        a.find(".memberOrderNewPanel .J-mallOrder .itemList .g_title .itemOpt").css("padding-left", "60px")
    }
};
Site.memberCenterCompatibility = function (b) {
    var c = !("placeholder" in document.createElement("input"));
    if (c) {
        var a = $("#module" + b).find(".itemCtrl");
        $.each(a, function (j, l) {
            var m = $(l).find("span");
            m.css({
                "white-space": "nowrap"
            });
            var g = $(m).width();
            var k = $(m).height();
            var f = $(l).position().top + (Fai.isIE6() ? 2 : 0);
            var d = $(l).position().left;
            $(m).css({
                top: f + "px",
                left: d + "px",
                "line-height": k + "px",
                padding: "0px 0px 0px 4px",
                width: g + "px"
            });
            var h = $(l).find("input").val();
            if (h && h.length > 0) {
                $(m).hide()
            }
        })
    }
};
Site.memberHeadPicInit = function (b) {
    if (typeof (headPic) != "undefined") {
        headPic = $.parseJSON(headPic);
        var a = headPic.width / 100;
        $("#memberHeadPic").css({
            width: headPic.imgW / a + "px",
            height: headPic.imgH / a + "px",
            top: -(headPic.top / a) + "px",
            left: -headPic.left / a + "px"
        })
    }
    $(".memberHeadPic").on({
        hover: function () {
            $(".hoverTip").toggle()
        }, click: function () {
            var c = "memberHeadPicEdit.jsp?id=" + b + "&headPic=" + Fai.encodeUrl($.toJSON(headPic)) + "&mCenter=1";
            Fai.popupWindow({
                title: "自定义头像",
                bannerDisplay: false,
                frameSrcUrl: c,
                width: 650,
                height: 650,
                closeFunc: function (d) {
                    if (d) {
                        newImg = d.newImg;
                        if (d.headPic.thumbId || newImg) {
                            headPic = d.headPic;
                            Site.showMemberHeadPic($("#memberHeadPic"), headPic, 100);
                            Site.showMemberHeadPic($("#topBarMemberPic"), headPic, 30);
                            $(".memberProfileBtn").click()
                        }
                    }
                }
            });
            $(".formDialog .formX_old").removeClass("formX_old").removeClass("formX").addClass("formXSite").css("margin-top", "10px");
            $(".formDialog").addClass("formBox")
        }
    })
};
Site.img_sf = function (d) {
    var A = document.body,
        B = document.getElementById("img_1"),
        z = document.getElementById("img_2"),
        x = document.getElementById("img_3"),
        m = document.getElementById("imgShadow3"),
        g = document.getElementById("imgShadow1"),
        b = document.getElementById("imgShadow4"),
        c = document.getElementById("imgShadow5"),
        i = document.getElementById("imgShadow2"),
        p = {};
    if (d.width > 350) {
        d.style.width = 350;
        $(".imgArea").css("width", "350px")
    } else {
        if (d.height > 350) {
            d.style.height = 350;
            $(".imgArea").css("height", "350px")
        }
    }
    var e = d.height,
        s = d.width,
        j = Math.min(e, s),
        C = document.getElementById("img_dsf"),
        r = coverImgHeight = m.style.width == "" ? j : $(m).width(),
        a, f = $(".editPicArea");
    $(".imgArea").css("height", e + "px");
    coverImgLeft = m.style.width == "" ? (s - r) / 2 : m.offsetLeft, coverImgTop = m.style.width == "" ? (e - coverImgHeight) / 2 : m.offsetTop;
    t();
    $(".imgArea").css({
        top: (f.height() - e) / 2 + "px",
        left: (f.width() - s) / 2 - 10 + "px"
    });
    var l, w, o, u, k, n, y, v;
    var q = false;
    $("body").on("mouseup", function () {
        q = false
    });
    $(".imgArea .coverBox,#layerImg").on({
        mousedown: function (E) {
            E = E ? E : window.event;
            l = m.offsetTop;
            w = m.offsetLeft;
            o = $(m).width();
            k = {
                x: E.clientX,
                y: E.clientY
            };
            q = true;
            Site.enablePopupBtn("save", true);
            var D = E.target.id;
            if (D == "dragBotCenter" || D == "dragRightCenter" || D == "dragRightBot") {
                h(1)
            } else {
                if (D == "dragLeftCenter" || D == "dragLeftBot") {
                    h(2)
                } else {
                    if (D == "dragTopCenter" || D == "dragRightTop") {
                        h(3)
                    } else {
                        if (D == "dragLeftTop") {
                            h(4)
                        } else {
                            h(0)
                        }
                    }
                }
            }
        }, mouseup: function () {
            q = false
        }
    });

    function h(D) {
        document.onmousemove = function (E) {
            if (!q) {
                return
            }
            E = E ? E : window.event;
            n = {
                x: E.clientX,
                y: E.clientY
            };
            y = n.x - k.x;
            v = n.y - k.y;
            switch (D) {
                case 0:
                    r = o;
                    coverImgTop = l + v;
                    coverImgLeft = w + y;
                    break;
                case 1:
                    r = o + y;
                    coverImgTop = l;
                    coverImgLeft = w;
                    break;
                case 2:
                    r = o - y;
                    coverImgTop = l;
                    coverImgLeft = w + y;
                    break;
                case 3:
                    r = o + y;
                    coverImgTop = l - y;
                    coverImgLeft = w;
                    break;
                case 4:
                    r = o - y;
                    coverImgTop = l + y;
                    coverImgLeft = w + y;
                    break
            }
            t()
        }
    }

    function t() {
        if (r < 100) {
            r = 100;
            coverImgHeight = 100
        } else {
            if (r > Math.min(s, e)) {
                r = Math.min(s, e);
                coverImgHeight = Math.min(s, e)
            }
        } if (coverImgTop < 0) {
            coverImgTop = 0
        } else {
            if (coverImgTop > e - r) {
                coverImgTop = e - r
            }
        } if (coverImgLeft < 0) {
            coverImgLeft = 0
        } else {
            if (coverImgLeft > s - r) {
                coverImgLeft = s - r
            }
        } if (coverImgTop >= 0 && coverImgTop <= e - r && coverImgLeft >= 0 && coverImgLeft <= s - r) {
            $(m).css({
                width: r,
                height: r,
                top: coverImgTop,
                left: coverImgLeft
            });
            $("#coverBox").css({
                width: r - 2,
                height: r - 2,
                top: coverImgTop,
                left: coverImgLeft
            });
            $(g).css({
                width: s,
                height: coverImgTop,
                top: 0,
                left: 0
            });
            $(i).css({
                width: coverImgLeft,
                height: r,
                top: coverImgTop,
                left: 0
            });
            $(b).css({
                width: s - r - coverImgLeft,
                height: r,
                top: coverImgTop,
                left: r + coverImgLeft
            });
            $(c).css({
                width: s,
                height: e - r - coverImgTop,
                top: r + coverImgTop,
                left: 0
            });
            a = [r / 100, r / 50, r / 30];
            $("#img_1").css({
                width: s / a[0],
                height: e / a[0],
                top: -coverImgTop / a[0],
                left: -coverImgLeft / a[0]
            });
            $("#img_2").css({
                width: s / a[1],
                height: e / a[1],
                top: -coverImgTop / a[1],
                left: -coverImgLeft / a[1]
            });
            $("#img_3").css({
                width: s / a[2],
                height: e / a[2],
                top: -coverImgTop / a[2],
                left: -coverImgLeft / a[2]
            })
        }
    }
};
Site.showMemberHeadPic = function (d, a, b) {
    d.attr("src", a.path);
    var c = a.width / b;
    d.css({
        width: a.imgW / c,
        height: a.imgH / c,
        top: -a.top / c,
        left: -a.left / c
    })
};
Site.memberImgFileUpload = function (a, c, e) {
    var d = e.split(",");
    var b = {
        file_post_name: "Filedata",
        upload_url: "/ajax/memberHeadImgUp_h.jsp",
        button_placeholder_id: c,
        file_size_limit: a + "MB",
        file_queue_limit: 1,
        button_cursor: SWFUpload.CURSOR.HAND,
        button_width: "80",
        button_height: "30",
        requeue_on_error: false,
        post_params: {
            ctrl: "Filedata",
            app: 21
        },
        file_types: d.join(";"),
        file_dialog_complete_handler: function (f) {
            this._allSuccess = false;
            this.startUpload()
        }, file_queue_error_handler: function (g, f, h) {
            switch (f) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                    Fai.ing(LS.siteFormSubmitCheckFileSizeErr, true);
                    break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                    Site.initPopupBox(LS.mobiFormSubmitFileUploadNotAllow, "alert", "");
                    break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                    Site.initPopupBox(jm.format(LS.mobiFormSubmitFileUploadOneTimeNum, "1"), "alert", "");
                    break;
                default:
                    Site.initPopupBox(LS.mobiFormSubmitFileUploadReSelect, "alert", "");
                    break
            }
        }, upload_success_handler: function (g, f) {
            var h = jQuery.parseJSON(f);
            this._allSuccess = h.success;
            this._sysResult = h.msg;
            if (h.success) {
                onFileUploadEvent("upload", h)
            } else {
                $("#imgShadow3").removeClass("loading");
                $("#imgShadow3").children().show();
                Fai.ing("文件" + g.name + "，" + h.msg)
            }
        }, upload_error_handler: function (g, f, h) {
            if (f == -280) {
                Fai.ing("文件取消成功", false)
            } else {
                if (f == -270) {
                    Fai.ing("已经存在名称为" + g.name + "的文件。", true)
                } else {
                    Fai.ing("服务繁忙，文件" + g.name + "上传失败，请稍候重试。")
                }
            }
            $("#imgShadow3").removeClass("loading");
            $("#imgShadow3").children().show()
        }, upload_complete_handler: function (f) {
            if (f.filestatus == SWFUpload.FILE_STATUS.COMPLETE && this._allSuccess) {
                swfObj.startUpload()
            } else {
                if (f.filestatus == SWFUpload.FILE_STATUS.ERROR) {
                    Fai.ing("服务繁忙，文件" + f.name + "上传失败，请稍候重试。");
                    $("#imgShadow3").removeClass("loading");
                    $("#imgShadow3").children().show()
                }
            }
        }, upload_start_handler: function (f) {
            Fai.enablePopupWindowBtn(0, "save", false);
            Fai.ing("读取文件准备上传", false)
        }, view_progress: function (f, i, h, g) {
            Fai.ing("正在上传" + g + "%", false);
            $("#imgShadow3").addClass("loading");
            $("#imgShadow3").children().hide()
        }
    };
    swfObj = SWFUploadCreator.create(b);
    onFileUploadEvent = function (n, j) {
        if (n == "upload") {
            var k = j.name,
                i = j.size,
                h = j.path,
                m = j.id,
                f = j.width,
                l = j.height;
            smallPath = j.smallPath;
            newImg = j;
            var g = new Image();
            g.src = smallPath;
            g.onload = function () {
                Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSucess, Fai.encodeHtml(k)), true);
                $("#imgShadow3").removeClass("loading");
                $("#imgShadow3").children().show();
                $(".formBodyContent").find(".editPicArea #memberHeadPic").attr("src", smallPath);
                $(".formBodyContent").find(".viewPicArea img").attr("src", smallPath);
                $("#imgShadow3").css("width", "")
            };
            Site.enablePopupBtn("save", true)
        }
    }
};
Site.initPopupBox = function (f, d, e) {
    var b = ["<div style='text-align:center;width: 100%;font-size: 12px; color:#636363;position:absolute;top:20px;'>", f, "</div>"];
    b.push("<div class='memberHeadEdit'>");
    if (d == "confirm") {
        b.push("<div style='display: inline-block;width: 100%; text-align:center;position:absolute;top:50px;'>");
        b.push("		<div class='confirmBtn' style='display: inline-block;zoom: 1;*display: inline;    padding: 0 10px !important;height: 25px; text-align: center;margin: 10px 10px 10px auto;line-height:25px; border: 1px solid #0064B5;background:#49A3FF;color: #FFFFFF;font-size: 12px; border-radius: 2px;'>确 定</div>");
        b.push("		<div class='cancelBtn' style='display: inline-block;zoom: 1;*display: inline;height: 25px;padding: 0 10px !important;text-align: center;margin: 10px auto 10px 10px;height: 25px;line-height: 25px;     border: 1px solid #8F8F8F;background: #F5F5F5;color: #666666;font-size: 12px; border-radius: 2px;' >取 消</div>");
        b.push("</div>")
    } else {
        b.push("		<div class='confirmBtn' style='position:absolute;top:60px;zoom: 1;height: 25px; text-align: center;line-height:25px; border: 1px solid #0064B5;background:#49A3FF;color: #FFFFFF;font-size: 12px;left:100px;padding: 0 10px !important;border-radius: 2px;'>确 定</div>")
    }
    b.push("</div>");
    var a = {};
    a.htmlContent = b.join("");
    a.width = 255;
    a.height = 122;
    var c = Site.popupBox(a);
    c.find(".popupBClose").css("margin", "10px 0px auto auto");
    c.on("click", ".confirmBtn", function () {
        c.find(".popupBClose").click();
        e()
    });
    c.on("click", ".cancelBtn", function () {
        c.find(".popupBClose").click()
    })
};
Site.enablePopupBtn = function (c, a) {
    var b = $("#" + c);
    if (a) {
        b.removeAttr("disabled");
        b.removeClass("saveButton-disabled");
        b.faiButton("enable")
    } else {
        b.attr("disabled", true);
        b.faiButton("disable")
    }
};
Site.memberAddrMsgOpera = function (b, a, c, m, q, f, h, y, r, l, z, x) {
    var p = "-----------",
        v = [],
        j, A, n, t, C, k, u;
    var e = -1;
    var B = {};
    $.each(l, function (D, E) {
        if (E.parentId == null || E.parentId == "" || E.parentId === 0) {
            B[E.id] = E
        }
    });
    if (Site.addrInfoListGlobal != null && Site.addrInfoListGlobal != []) {
        c = Site.addrInfoListGlobal
    }
    var w = {};
    w.addrInfoList = c;
    $(".addAddrMsgPanel, .edit").click(function () {
        var V = "",
            Z = 0,
            G = {},
            aa = "",
            ab = "";
        e = $(this).parents(".addrMsg_default").length == 0 ? $(this).parents(".addrMsg").attr("_item") : $(this).parents(".addrMsg_default").attr("_item");
        if ($(this).hasClass("edit")) {
            ab = $(this).parent().parent().attr("_item");
            V = "ajax/memberAdm_h.jsp?cmd=set&opera=editAddr&editItem=" + ab + "&id=" + b;
            G = c[ab];
            Z = G.isDefault;
            aa = "edit"
        } else {
            V = "ajax/memberAdm_h.jsp?cmd=set&opera=addAddr&id=" + b;
            if (c.length == 0) {
                Z = 1
            } else {
                Z = 0
            }
            aa = "add"
        } if (h) {
            var S = "<div style='width:942px; height:1px; font-size:0; background-color:#eeeeee; margin-top:15px;' />";
            S += "<div class='editAddrInfo editAddrNewInfo'>";
            for (var Y = 0; Y < a.length; Y++) {
                var E = a[Y].fieldKey;
                var ag = a[Y].name;
                var R = a[Y].required;
                if (E == "zip") {
                    continue
                }
                S += "<div class='addrInfoItem'>";
                if (E != "addr") {
                    S += "<div class='propItemName'>" + ag + "</div>";
                    if (R) {
                        S += "<div class='g_stress'>*</div>"
                    } else {
                        S += "<div class='g_stress' style='visibility: hidden;'>*</div>"
                    }
                }
                if (E == "addr") {
                    S += "<div class='propItemName'>所在地区</div>";
                    if (R) {
                        S += "<div class='g_stress'>*</div>"
                    } else {
                        S += "<div class='g_stress' style='visibility: hidden;'>*</div>"
                    }
                    S += "<div class='propItemValue'><select id='allArea' class='allArea'>";
                    S += "<option value=''>请选择</option>";
                    if (!z) {
                        S += "<option value='cn'>中国</option>"
                    }
                    if (!x) {
                        S += "<option value='os'>海外</option>"
                    }
                    $.each(B, function (ah, ai) {
                        S += "<option value='" + B[ah].id + "'>" + Fai.encodeHtml(B[ah].name) + "</option>"
                    });
                    S += "</select></div>";
                    S += "<div class='propItemValue' style='display:none;'>";
                    S += "<input type='text' id='areaBoxInput' class='areaBoxInput' style='width: 295px;' placeholder='请选择' readOnly='true' isCn isOs isCus area1 area2 area3/>";
                    S += "<div id='areaBox1' class='areaBox1 areaBox1New' style='display:none;'>";
                    S += "<div id='province_box' class='province_box'>";
                    S += "<div class='pv_head J_areaHead'>";
                    S += "<div class='pv_pv pv'>省份</div>";
                    S += "<div class='pv_city city'>城市</div>";
                    S += "<div class='pv_county county'>县/区/镇</div>";
                    S += "</div>";
                    S += "<div class='pv_content'>";
                    S += "<div class='spaceLine'></div>";
                    $.each(site_cityUtil.getAreaGroupsPinYin(), function (ah, ai) {
                        S += "<div class='pv_group' style='" + (ai[0] == "OS" ? "display:none;" : "") + "'>";
                        S += "<div class='group_head'>" + ai[0] + "</div>";
                        S += "<div class='group_content'>";
                        $.each(ai[1], function (ak, aj) {
                            if (q == 2052 || q == 1028) {
                                S += "<div class='group_item' pid='" + aj + "' pname='" + site_cityUtil.getInfo(aj).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(aj).name) + "</div>"
                            } else {
                                S += "<div class='group_item' pid='" + aj + "' pname='" + site_cityUtil.getInfoEn(aj).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(aj).name) + "</div>"
                            }
                        });
                        S += "</div>";
                        S += "</div>";
                        S += "<div class='spaceLine'></div>"
                    });
                    S += "</div>";
                    S += "</div>";
                    S += "<div id='city_box' class='city_box' style='display:none;'>";
                    S += "<div class='city_head J_areaHead'>";
                    S += "<div class='city_pv pv'>省份</div>";
                    S += "<div class='city_city city'>城市</div>";
                    S += "<div class='city_county county'>县/区/镇</div>";
                    S += "</div>";
                    S += "</div>";
                    S += "<div id='county_box' class='county_box' style='display:none;'>";
                    S += "<div class='county_head J_areaHead'>";
                    S += "<div class='county_pv pv'>省份</div>";
                    S += "<div class='county_city city'>城市</div>";
                    S += "<div class='county_county county'>县/区/镇</div>";
                    S += "</div>";
                    S += "</div>";
                    S += "</div>";
                    S += "<div id='areaBox2' class='areaBox2 areaBox2New' style='display:none;'>";
                    S += "<div id='sec_box' class='sec_box'>";
                    S += "<div class='sec_head J_areaHead2'>";
                    S += "<div class='sec_sec sec'>一级行政区</div>";
                    S += "<div class='sec_thd thd'>二级行政区</div>";
                    S += "</div>";
                    S += "<div class='sec_content'></div>";
                    S += "</div>";
                    S += "<div id='thd_box' class='thd_box' style='display:none;'>";
                    S += "<div class='thd_head J_areaHead2'>";
                    S += "<div class='thd_sec sec'>一级行政区</div>";
                    S += "<div class='thd_thd thd'>二级行政区</div>";
                    S += "</div>";
                    S += "<div class='thd_content'></div>";
                    S += "</div>";
                    S += "</div>";
                    S += "</div>";
                    S += "</div>";
                    S += "<div class='addrInfoItem'>";
                    S += "<div id='addrInfoStreet'>";
                    S += "<div class='propItemName'>详细地址</div><div class='g_stress' " + (!R ? "style='visibility: hidden;'" : "") + " >*</div>";
                    S += "<div class='propItemValue'><input class='addrInfo_street' placeholder='" + LS.streetAddress + "' id='addrInfo_street' ></input></div>";
                    S += "</div>"
                } else {
                    var ac = "";
                    var K = "";
                    if (E == "mobile") {
                        var U = [];
                        U.push("<select id='mobileCt' name='mobileCt' style='width:120px;'>");
                        if (f != null && f.length > 0) {
                            for (var W = 0; W < f.length; W++) {
                                var af = f[W]["ctCode"];
                                U.push("<option value='" + f[W]["ctName"] + "'>" + f[W]["ctShowName"] + af + "</option>")
                            }
                        }
                        U.push("</select>");
                        ac = U.join("");
                        K = "width:232px; margin-left:8px;"
                    }
                    S += "<div class='propItemValue'>" + ac + "<input id='" + E + "' class='propItemEdit' style='border:1px solid #e7e7e7; text-indent:6px; " + K + "' maxlength=50></input></div>"
                }
                S += "</div>"
            }
            S += "</div>";
            S += "<div class='saveOrCancel saveOrCancelNew'>";
            S += "<div class='save save" + (h && (y > 0) ? r : "") + "' style='width:108px; height:35px;'>" + LS.confirm + "</div>";
            S += "<div class='cancel popupBClose' style='width:108px; height:33px;'>" + LS.cancel + "</div>";
            S += "</div>";
            var F = parseInt(Math.random() * 10000);
            var H = {
                boxId: F,
                title: LS.shippingAddress,
                htmlContent: S,
                width: 942,
                boxName: "addrInfo"
            }
        } else {
            var S = "<div style='width:130px; height:1px; font-size:0; background-color:#44a5ff; margin-left:26px; float:left;' />";
            S += "<div style='width:234px; height:1px; font-size:0; background-color:#dadada; margin-left:146px;' />";
            S += "<div class='editAddrInfo'>";
            for (var Y = 0; Y < a.length; Y++) {
                var E = a[Y].fieldKey;
                var ag = a[Y].name;
                var R = a[Y].required;
                S += "<div class='addrInfoItem'>";
                if (E != "addr") {
                    S += "<div class='propItemName'>" + ag + " :</div>"
                }
                if (E == "addr") {
                    S += "<div class='propItemName'>所在地区 :</div>";
                    S += "<div class='propItemValue'><select id='allArea' class='allArea' style='width: 170px;'>";
                    S += "<option value=''>请选择</option>";
                    S += "<option value='cn'>中国</option>";
                    S += "<option value='os'>海外</option>";
                    $.each(B, function (ah, ai) {
                        S += "<option value='" + B[ah].id + "'>" + Fai.encodeHtml(B[ah].name) + "</option>"
                    });
                    S += "</select></div>";
                    if (R) {
                        S += "<div class='g_stress'>*</div>"
                    }
                    S += "<div class='propItemName J-ssq'>省/市/区 :</div>";
                    S += "<div class='propItemValue J-ssq'><input type='text' id='areaBoxInput' class='propItemEdit' style='border: 1px solid #e7e7e7;text-indent: 6px;-webkit-border-radius: 0;' placeholder='请选择' readOnly='true' isCn isOs isCus area1 area2 area3/></div>";
                    S += "<div id='areaBox1' class='areaBox1' style='display:none;'>";
                    S += "<div id='province_box' class='province_box'>";
                    S += "<div class='pv_head J_areaHead'>";
                    S += "<div class='pv_pv pv'>省份</div>";
                    S += "<div class='pv_city city'>城市</div>";
                    S += "<div class='pv_county county'>县/区/镇</div>";
                    S += "</div>";
                    S += "<div class='pv_content'>";
                    S += "<div class='spaceLine'></div>";
                    $.each(site_cityUtil.getAreaGroupsPinYin(), function (ah, ai) {
                        S += "<div class='pv_group' style='" + (ai[0] == "OS" ? "display:none;" : "") + "'>";
                        S += "<div class='group_head'>" + ai[0] + "</div>";
                        S += "<div class='group_content'>";
                        $.each(ai[1], function (ak, aj) {
                            if (q == 2052 || q == 1028) {
                                S += "<div class='group_item' pid='" + aj + "' pname='" + site_cityUtil.getInfo(aj).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(aj).name) + "</div>"
                            } else {
                                S += "<div class='group_item' pid='" + aj + "' pname='" + site_cityUtil.getInfoEn(aj).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(aj).name) + "</div>"
                            }
                        });
                        S += "</div>";
                        S += "</div>";
                        S += "<div class='spaceLine'></div>"
                    });
                    S += "</div>";
                    S += "</div>";
                    S += "<div id='city_box' class='city_box' style='display:none;'>";
                    S += "<div class='city_head J_areaHead'>";
                    S += "<div class='city_pv pv'>省份</div>";
                    S += "<div class='city_city city'>城市</div>";
                    S += "<div class='city_county county'>县/区/镇</div>";
                    S += "</div>";
                    S += "</div>";
                    S += "<div id='county_box' class='county_box' style='display:none;'>";
                    S += "<div class='county_head J_areaHead'>";
                    S += "<div class='county_pv pv'>省份</div>";
                    S += "<div class='county_city city'>城市</div>";
                    S += "<div class='county_county county'>县/区/镇</div>";
                    S += "</div>";
                    S += "</div>";
                    S += "</div>";
                    S += "<div id='areaBox2' class='areaBox2' style='display:none;'>";
                    S += "<div id='sec_box' class='sec_box'>";
                    S += "<div class='sec_head J_areaHead2'>";
                    S += "<div class='sec_sec sec'>一级行政区</div>";
                    S += "<div class='sec_thd thd'>二级行政区</div>";
                    S += "</div>";
                    S += "<div class='sec_content'></div>";
                    S += "</div>";
                    S += "<div id='thd_box' class='thd_box' style='display:none;'>";
                    S += "<div class='thd_head J_areaHead2'>";
                    S += "<div class='thd_sec sec'>一级行政区</div>";
                    S += "<div class='thd_thd thd'>二级行政区</div>";
                    S += "</div>";
                    S += "<div class='thd_content'></div>";
                    S += "</div>";
                    S += "</div>";
                    if (R) {
                        S += "<div class='g_stress J-ssq'>*</div>"
                    }
                    S += "<div id='addrInfoStreet'>";
                    S += "<div class='propItemName'>" + LS.streetAddress + " :</div>";
                    S += "<div class='propItemValue'><textarea id='addrInfo_street' style='height:80px;'></textarea></div>";
                    if (R) {
                        S += "<div class='g_stress'>*</div>"
                    }
                    S += "</div>"
                } else {
                    var ac = "";
                    var K = "";
                    if (E == "mobile") {
                        var U = [];
                        U.push("<select id='mobileCt' name='mobileCt' style='width:53px;'>");
                        if (f != null && f.length > 0) {
                            for (var W = 0; W < f.length; W++) {
                                var af = f[W]["ctCode"];
                                U.push("<option value='" + f[W]["ctName"] + "'>" + f[W]["ctShowName"] + af + "</option>")
                            }
                        }
                        U.push("</select>");
                        ac = U.join("");
                        K = "width:107px; margin-left:8px;"
                    }
                    S += "<div class='propItemValue'>" + ac + "<input id='" + E + "' class='propItemEdit' style='-webkit-border-radius:0;-moz-border-radius:0;  border:1px solid #e7e7e7; text-indent:6px; " + K + "' maxlength=50></input></div>";
                    if (R) {
                        S += "<div class='g_stress'>*</div>"
                    }
                }
                S += "</div>"
            }
            S += "</div>";
            S += "<div class='saveOrCancel'>";
            S += "<div class='cancel popupBClose' style='width:76px; height:35px;'>" + LS.cancel + "</div>";
            S += "<div class='save' style='width:86px; height:35px;'>" + LS.confirm + "</div>";
            S += "</div>";
            var F = parseInt(Math.random() * 10000);
            var H = {
                boxId: F,
                title: LS.editAddrMsg,
                htmlContent: S,
                width: 410,
                boxName: "addrInfo"
            }
        }
        var Q = Site.popupBox(H);
        if (Fai.isIE6() || Fai.isIE7()) {
            $(".editAddrInfo").find(".addrInfoItem").attr("style", "width:100%;");
            $(".editAddrInfo").find(".addrInfoItem").find("#addrInfoStreet").attr("style", "width:100%;")
        }
        var D = ($(".J-ssq").length > 0);
        if (D) {
            if ($("#areaBoxInput").length > 0) {
                $("#areaBox1,#areaBox2").css("left", $("#areaBoxInput").position().left);
                $("#areaBox1,#areaBox2").css("top", $("#areaBoxInput").position().top + $("#areaBoxInput").height())
            }
            $(".J-ssq").hide()
        }
        $(document).unbind("click.forAreaBox").bind("click.forAreaBox", function () {
            $("#areaBox1").hide();
            $("#areaBox2").hide()
        });
        $("#areaBox1,#areaBox2").unbind("click.forAreaBox").bind("click.forAreaBox", function (ah) {
            P(ah)
        });

        function P(ah) {
            if (ah.stopPropagation) {
                ah.stopPropagation()
            } else {
                ah.cancelBubble = true
            }
        }
        $("#allArea").change(function () {
            if ($("#allArea").val() == null || $("#allArea").val() == "" || $("#allArea").val() == "os") {
                if (D) {
                    $(".J-ssq").hide()
                } else {
                    $("#areaBoxInput").parent(".propItemValue").hide()
                }
            } else {
                if (D) {
                    $(".J-ssq").show()
                } else {
                    $("#areaBoxInput").parent(".propItemValue").show()
                }
            }
            $("#areaBox1").hide();
            $("#areaBox2").hide();
            if ($("#allArea").val() == null || $("#allArea").val() == "") {
                return
            }
            $("#areaBoxInput").attr("isCn", 0);
            $("#areaBoxInput").attr("isCus", 0);
            $("#areaBoxInput").attr("isOs", 0);
            $("#areaBoxInput").attr("area1", "");
            $("#areaBoxInput").attr("area2", "");
            $("#areaBoxInput").attr("area3", "");
            if ($("#allArea").val() == "cn") {
                $("#areaBoxInput").attr("isCn", 1);
                $("#areaBox1 .pv").click();
                $("#areaBox1 .city_content").remove();
                $("#areaBox1 .county_content").remove();
                $("#areaBox1").show()
            } else {
                if ($("#allArea").val() == "os") {
                    $("#areaBoxInput").attr("isOs", 1);
                    $("#areaBoxInput").attr("area1", 990000);
                    $("#areaBoxInput").attr("area2", 990100)
                } else {
                    $("#areaBoxInput").attr("isCus", 1);
                    $("#areaBoxInput").attr("area1", $("#allArea").val());
                    $("#areaBox2 .sec_content").html("");
                    $("#areaBox2 .thd_content").html("");
                    $("#areaBox2").show()
                }
            }
            $("#areaBoxInput").val("");
            if ($("#allArea").val() == "cn" || $("#allArea").val() == "os") {
                return
            }
            var ah = d($("#allArea").val());
            $("#sec_box .sec_content").append(ah);
            $("#areaBoxInput").val($("#areaBoxInput").val() + $("#allArea option[value='" + $("#allArea").val() + "']").text())
        });
        $("#areaBoxInput").unbind("click").bind("click", function (ah) {
            if ($("#allArea").val() == "cn") {
                $("#areaBox1").toggle();
                $("#areaBox2").hide();
                $("#province_box").show();
                $("#city_box").hide();
                $("#county_box").hide()
            } else {
                if ($("#allArea").val() == null || $("#allArea").val() == "os") {} else {
                    $("#areaBox2").toggle();
                    $("#areaBox1").hide();
                    $("#sec_box").show();
                    $("#thd_box").hide()
                }
            }
            P(ah)
        });
        $(".J_areaHead .pv").click(function () {
            $("#province_box").show();
            $("#city_box").hide();
            $("#county_box").hide()
        });
        $(".J_areaHead .city").click(function () {
            $("#province_box").hide();
            $("#city_box").show();
            $("#county_box").hide()
        });
        $(".J_areaHead .county").click(function () {
            $("#province_box").hide();
            $("#city_box").hide();
            $("#county_box").show()
        });
        $(".J_areaHead2 .sec").click(function () {
            $("#sec_box").show();
            $("#thd_box").hide()
        });
        $(".J_areaHead2 .thd").click(function () {
            $("#sec_box").hide();
            $("#thd_box").show()
        });
        $("#province_box .group_item").bind("click", function () {
            $("#areaBox1 .city_content").remove();
            $("#areaBox1 .county_content").remove();
            var ah = $(this).attr("pname");
            var ai = $(this).attr("pid");
            $(".J_areaHead .city").click();
            $("#areaBoxInput").val("");
            $("#areaBoxInput").val($("#areaBoxInput").val() + ah);
            $("#areaBoxInput").removeAttr("lastArea");
            $("#areaBoxInput").removeAttr("lastAreaType");
            $("#areaBoxInput").attr("area1", ai);
            $("#areaBoxInput").attr("area2", "");
            $("#areaBoxInput").attr("area3", "");
            var aj = o(site_cityUtil.getCities(ai));
            $("#city_box").append(aj)
        });
        $("#city_box").delegate(".group_item", "click", function () {
            $("#areaBox1 .county_content").remove();
            var ah = $(this).attr("cname");
            var aj = $(this).attr("cid");
            $(".J_areaHead .county").click();
            var al = $("#areaBoxInput").attr("lastArea");
            var ai = $("#areaBoxInput").attr("lastAreaType");
            if (ai != null && ai != "") {
                $("#areaBoxInput").val($("#areaBoxInput").val().substring(0, $("#areaBoxInput").val().indexOf("-")))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + ah);
            $("#areaBoxInput").attr("lastArea", "-" + ah);
            $("#areaBoxInput").attr("lastAreaType", "city");
            $("#areaBoxInput").attr("area2", aj);
            $("#areaBoxInput").attr("area3", "");
            var ak = i(site_cityUtil.getCounty(aj));
            $("#county_box").append(ak)
        });
        $("#county_box").delegate(".group_item", "click", function () {
            var ah = $(this).attr("cname");
            var aj = $(this).attr("cid");
            var ak = $("#areaBoxInput").attr("lastArea");
            var ai = $("#areaBoxInput").attr("lastAreaType");
            if (ai != null && ai == "county") {
                $("#areaBoxInput").val($("#areaBoxInput").val().replace(ak, ""))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + ah);
            $("#areaBoxInput").attr("lastArea", "-" + ah);
            $("#areaBoxInput").attr("lastAreaType", "county");
            $("#areaBoxInput").attr("area3", aj);
            $("#areaBox1").hide()
        });
        $("#sec_box").delegate(".group_item", "click", function () {
            $("#areaBox2 .thd_content").html("");
            var ah = $(this).attr("cname");
            var aj = $(this).attr("cid");
            $(".J_areaHead2 .thd").click();
            var al = $("#areaBoxInput").attr("lastArea");
            var ai = $("#areaBoxInput").attr("lastAreaType");
            if (ai != null && ai != "" && $("#areaBoxInput").val().indexOf("-") != -1) {
                $("#areaBoxInput").val($("#areaBoxInput").val().substring(0, $("#areaBoxInput").val().indexOf("-")))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + ah);
            $("#areaBoxInput").attr("lastArea", "-" + ah);
            $("#areaBoxInput").attr("lastAreaType", "sec");
            $("#areaBoxInput").attr("area2", aj);
            $("#areaBoxInput").attr("area3", "");
            var ak = d(aj);
            $("#thd_box .thd_content").append(ak)
        });
        $("#thd_box").delegate(".group_item", "click", function () {
            var ah = $(this).attr("cname");
            var aj = $(this).attr("cid");
            var ak = $("#areaBoxInput").attr("lastArea");
            var ai = $("#areaBoxInput").attr("lastAreaType");
            if (ai != null && ai == "thd") {
                $("#areaBoxInput").val($("#areaBoxInput").val().replace(ak, ""))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + ah);
            $("#areaBoxInput").attr("lastArea", "-" + ah);
            $("#areaBoxInput").attr("lastAreaType", "thd");
            $("#areaBoxInput").attr("area3", aj);
            $("#areaBox2").hide()
        });
        if ($(this).hasClass("edit")) {
            for (var Y = 0; Y < a.length; Y++) {
                var E = a[Y].fieldKey;
                var ae = G[E];
                if (E == "addr") {
                    var T = G.addr_info;
                    if (T != null) {
                        var N = T.isCus;
                        if (!N) {
                            var M = "";
                            var J = "";
                            var I = "";
                            if (q == 2052 || q == 1028) {
                                M = site_cityUtil.getInfo(T.countyCode).name;
                                J = site_cityUtil.getInfo(T.cityCode).name;
                                I = site_cityUtil.getInfo(T.provinceCode).name
                            } else {
                                M = site_cityUtil.getInfoEn(T.countyCode).name;
                                J = site_cityUtil.getInfoEn(T.cityCode).name;
                                I = site_cityUtil.getInfoEn(T.provinceCode).name
                            } if (T.provinceCode == 990000) {
                                $("#areaBoxInput").attr("isOs", 1);
                                $("#allArea").val("os");
                                $("#allArea").change()
                            } else {
                                $("#areaBoxInput").attr("isCn", 1);
                                $("#allArea").val("cn");
                                $("#allArea").change()
                            }
                            $("#areaBoxInput").attr("area1", T.provinceCode);
                            $("#areaBoxInput").attr("area2", T.cityCode);
                            $("#areaBoxInput").attr("area3", T.countyCode);
                            $("#addrInfo_street").val(T.streetAddr);
                            $("#areaBoxInput").attr("lastArea", "-" + M);
                            $("#areaBoxInput").attr("lastAreaType", "county");
                            setTimeout(function () {
                                $("#areaBox1 .group_item[pid='" + T.provinceCode + "']").click();
                                setTimeout(function () {
                                    $("#areaBox1 .group_item[cid='" + T.cityCode + "']").click();
                                    setTimeout(function () {
                                        $("#areaBox1 .group_item[cid='" + T.countyCode + "']").click()
                                    }, 0)
                                }, 0)
                            }, 0)
                        } else {
                            var ad = g(T.countyCode);
                            var X = g(T.cityCode);
                            var L = g(T.provinceCode);
                            $("#allArea").val(T.provinceCode);
                            $("#allArea").change();
                            $("#areaBoxInput").attr("lastArea", "-" + ad);
                            $("#areaBoxInput").attr("lastAreaType", "thd");
                            $("#areaBoxInput").val(L + "-" + X + "-" + ad);
                            $("#areaBoxInput").attr("isCus", 1);
                            $("#areaBoxInput").attr("area1", T.provinceCode);
                            $("#areaBoxInput").attr("area2", T.cityCode);
                            $("#areaBoxInput").attr("area3", T.countyCode);
                            $("#addrInfo_street").val(T.streetAddr)
                        }
                    } else {
                        $("#addrInfo_street").val(G.addr)
                    }
                } else {
                    if (E == "mobile") {
                        $("#mobileCt").val(G.mobileCt)
                    }
                } if (ae == null) {
                    ae = ""
                }
                $(".propItemValue").find("#" + E).val(ae)
            }
        }
        var O = {};
        Q.find(".saveOrCancel .save").on("click", function () {
            for (var am = 0; am < a.length; am++) {
                var aq = a[am].fieldKey;
                var ah = a[am].name;
                var ao = a[am].required;
                if (aq == "addr") {
                    var ap = $("#allArea").val();
                    if (ap == null || ap == "") {
                        Fai.ing("请选择地区");
                        return
                    } else {
                        if (ap == "os") {
                            O.provinceCode = 990000;
                            O.cityCode = 990100;
                            O.streetAddr = $("#addrInfo_street").val();
                            O.isCus = false;
                            G.addr_info = O;
                            G.addr = "海外" + O.streetAddr;
                            continue
                        } else {
                            if (ap != "cn") {
                                O.isCus = true
                            } else {
                                O.isCus = false
                            }
                        }
                    }
                    var ak = $("#areaBoxInput").attr("area3");
                    var an = $("#areaBoxInput").attr("area2");
                    var al = $("#areaBoxInput").attr("area1");
                    var ar = $("#addrInfo_street");
                    if (ao && (al == null || al == "")) {
                        Fai.ing(LS.mallStlSubmitAddrErr, 1);
                        return
                    }
                    if (ao && (an == null || an == "") && !O.isCus) {
                        Fai.ing(LS.mallStlSubmitAddrErr, 1);
                        return
                    }
                    if (ao && ar.val() == "") {
                        Fai.ing(LS.editStreetAddr, 1);
                        return
                    }
                    O.provinceCode = al;
                    O.cityCode = an;
                    O.countyCode = ak;
                    O.streetAddr = ar.val();
                    G.addr_info = O;
                    G.addr = $("#areaBoxInput").val().replace(/-/g, "") + ar.val()
                } else {
                    var ai = $(".editAddrInfo").find("#" + aq);
                    if (ai.length == 0) {
                        continue
                    }
                    var aj = ai.val();
                    if (ao && aj.length == 0) {
                        Fai.ing(LS.addrInfoInputError + ah, 1);
                        return
                    }
                    if ((aq == "email" && !Fai.isEmail(aj) && ao) || (aq == "phone" && !Fai.isPhone(aj) && ao)) {
                        Fai.ing(LS.addrInfoInputError + ah, 1);
                        return
                    }
                    if (aq == "mobile") {
                        aj = $.trim(aj);
                        if (aj.length > 0) {
                            if (!Fai.isNationMobile(aj)) {
                                Fai.ing(LS.mobileNumRegular, 1);
                                return
                            }
                            G.mobileCt = $(".editAddrInfo").find("#mobileCt").val()
                        } else {
                            G.mobileCt = ""
                        }
                    }
                    G[aq] = aj
                }
            }
            G.isDefault = Z;
            if (aa == "add") {
                c.push(G)
            }
            $.ajax({
                type: "post",
                url: V,
                data: "info=" + Fai.encodeUrl($.toJSON(w)),
                success: function (at) {
                    if (m == 1) {
                        var aw = document.location.search.search(/imme/) > -1 ? "?imme&" : "?";
                        if (aa == "add") {
                            document.location.href = "mstl.jsp" + aw + "opera=add"
                        } else {
                            if (aa == "edit") {
                                var av = w.addrInfoList[e];
                                var au = $(".addrMsg_default[_item='" + e + "']").add(".addrMsg[_item='" + e + "']");
                                au.find(".name").text(av.name);
                                au.find(".phone").text(av.phone);
                                au.find(".zip").text(av.zip);
                                au.find(".address").text(av.addr);
                                if (av.phone == null || av.phone == "") {
                                    au.find(".phone").text(av.mobile)
                                }
                                if (av.addr_info != null || av.addr_info != "") {
                                    setTimeout(function () {
                                        $("#mallShipTemplate_province").val(av.addr_info.provinceCode);
                                        $("#mallShipTemplate_province").change();
                                        setTimeout(function () {
                                            $("#mallShipTemplate_city").val(av.addr_info.cityCode);
                                            $("#mallShipTemplate_city").change();
                                            setTimeout(function () {
                                                $("#mallShipTemplate_county").val(av.addr_info.countyCode);
                                                $("#mallShipTemplate_county").change()
                                            }, 0)
                                        }, 0)
                                    }, 0);
                                    $("#streetAddress").val(av.addr_info.streetAddr)
                                }
                                $(".propItemValue").each(function (ax, az) {
                                    var ay = $(this).attr("_field");
                                    $(this).find("input").val(av[ay])
                                });
                                $(".saveOrCancel .popupBClose").click()
                            } else {
                                document.location.href = "mstl.jsp" + aw
                            }
                        }
                    } else {
                        document.location.href = "mCenter.jsp?item=memberInfo"
                    }
                }, error: function () {
                    Fai.ing(LS.systemError)
                }
            })
        })
    });
    $(".delete").click(function () {
        var D = $(this).parent().parent().attr("_item");
        var F = ["<div class='fk-cancelOrder'>", "<div style='padding:10px;'>", LS.conCancelAddrInfo, "</div>", "<div style='padding:10px 0 18px 0;'>", "<span class='J-rpt-cancel popupBClose' style='margin-right:20px;'>", LS.cancel, "</span>", "<span class='J-rpt-save con-hover'>" + LS.confirm + "</span>", "</div>", "</div>"];
        var I = parseInt(Math.random() * 10000);
        var E = {
            boxId: I,
            title: "",
            htmlContent: F.join(""),
            width: 300
        };
        var G = Site.popupBox(E);
        var H = "ajax/memberAdm_h.jsp?cmd=set&id=" + b;
        G.find(".J-rpt-save").on("click", function () {
            c.splice(D, 1);
            $.ajax({
                type: "post",
                url: H,
                data: "info=" + Fai.encodeUrl($.toJSON(w)),
                error: function () {
                    Fai.ing(LS.systemError, false)
                }, success: function (J) {
                    var K = $.parseJSON(J);
                    if (K.success) {
                        if (m == 1) {
                            var L = document.location.search.search(/imme/) > -1 ? "?imme" : "";
                            document.location.href = "mstl.jsp" + L
                        } else {
                            document.location.href = "mCenter.jsp?item=memberInfo"
                        }
                    } else {
                        Fai.ing(K.msg, true)
                    }
                }
            })
        })
    });
    $(".makeDefault").click(function () {
        var E = $(this).parent().parent().attr("_item");
        var D = "ajax/memberAdm_h.jsp?cmd=set&id=" + b;
        for (e in c) {
            c[e].isDefault = 0
        }
        c[E].isDefault = 1;
        $.ajax({
            type: "post",
            url: D,
            data: "info=" + Fai.encodeUrl($.toJSON(w)),
            error: function () {
                Fai.ing(LS.systemError, false)
            }, success: function (F) {
                var G = $.parseJSON(F);
                if (G.success) {
                    if (m == 1) {
                        var H = document.location.search.search(/imme/) > -1 ? "?imme" : "";
                        document.location.href = "mstl.jsp" + H
                    } else {
                        document.location.href = "mCenter.jsp?item=memberInfo"
                    }
                } else {
                    Fai.ing(G.msg, true)
                }
            }
        })
    });
    if (Fai.isIE6()) {
        $(".addrMsg , .addrMsg_default").hover(function () {
            if ($(this).hasClass("isDefault")) {
                $(this).find(".edit").attr("style", "margin-left:85px;")
            } else {
                $(this).find(".edit").attr("style", "margin-left:70px;")
            } if (h) {
                $(this).find(".other").attr("style", "top:20px;")
            } else {
                $(this).find(".other").attr("style", "top:90px;")
            }
        }, function () {
            if (h) {
                $(this).find(".other").attr("style", "top:-65px;")
            } else {
                $(this).find(".other").attr("style", "top:150px;")
            }
        })
    }

    function o(E) {
        var D = "";
        D += "<div class='city_content'>";
        $.each(E, function (F, G) {
            if (q == 2052 || q == 1028) {
                D += "<div class='group_item' cid='" + G.id + "' cname='" + site_cityUtil.getInfo(G.id).name + "'>" + site_cityUtil.simpleCityNameStr(site_cityUtil.getInfo(G.id).name) + "</div>"
            } else {
                D += "<div class='group_item' cid='" + G.id + "' cname='" + site_cityUtil.getInfoEn(G.id).name + "'>" + site_cityUtil.simpleCityNameStrEn(site_cityUtil.getInfoEn(G.id).name) + "</div>"
            }
        });
        D += "</div>";
        return D
    }

    function i(E) {
        var D = "";
        D += "<div class='county_content'>";
        $.each(E, function (F, G) {
            if (q == 2052 || q == 1028) {
                D += "<div class='group_item' cid='" + G.id + "' cname='" + site_cityUtil.getInfo(G.id).name + "'>" + site_cityUtil.getInfo(G.id).name + "</div>"
            } else {
                D += "<div class='group_item' cid='" + G.id + "' cname='" + site_cityUtil.getInfoEn(G.id).name + "'>" + site_cityUtil.getInfoEn(G.id).name + "</div>"
            }
        });
        D += "</div>";
        return D
    }

    function g(E) {
        var D = "";
        var F = false;
        $.each(l, function (G, H) {
            if (F) {
                return
            }
            if (H.id == E) {
                D = H.name;
                F = true
            }
        });
        return D
    }

    function s(E) {
        var D = [];
        $.each(l, function (F, G) {
            if (G.parentId == E) {
                D.push(G)
            }
        });
        return D
    }

    function d(D) {
        if (isNaN(D)) {
            return ""
        }
        var F = parseInt(D);
        var E = "";
        $.each(s(F), function (G, H) {
            E += "<div class='group_item' cid='" + H.id + "' cname='" + H.name + "'>" + H.name + "</div>"
        });
        return E
    }
};
Site.memberIntegralInit = function (g, d, f, a) {
    var e = false;
    if (d) {
        e = true
    }
    $("#integralTabLine").find(".integralTab").click(function () {
        if (e) {
            $("#integralTabLine").find(".g_title").removeClass("g_title" + a);
            $(this).addClass("g_title" + (f ? a : ""));
            b($(this).attr("id"))
        }
        $("#integralTabLine").find(".g_title").removeClass("g_title");
        $(this).addClass("g_title");
        if ($(this).attr("id") === "incomeTab") {
            if (e) {
                $("#expenseTab").css({
                    "border-top": "1px solid #eeeeee",
                    "border-right": "1px solid #eeeeee",
                    "border-left": "none"
                });
                $("#totalTab").css({
                    "border-top": "1px solid #eeeeee",
                    "border-left": "1px solid #eeeeee"
                })
            }
        } else {
            if ($(this).attr("id") === "expenseTab") {
                if (e) {
                    $("#incomeTab").css({
                        "border-top": "1px solid #eeeeee",
                        "border-left": "1px solid #eeeeee"
                    });
                    $("#totalTab").css({
                        "border-top": "1px solid #eeeeee",
                        "border-left": "1px solid #eeeeee"
                    })
                }
            } else {
                if (e) {
                    $("#incomeTab").css({
                        "border-top": "1px solid #eeeeee",
                        "border-right": "1px solid #eeeeee"
                    });
                    $("#expenseTab").css({
                        "border-top": "1px solid #eeeeee",
                        "border-right": "1px solid #eeeeee"
                    })
                }
            }
        }
    });
    c();

    function c() {
        if (g === "income") {
            if (e) {
                $("#expenseTab").css({
                    "border-top": "1px solid #eeeeee",
                    "border-right": "1px solid #eeeeee"
                });
                $("#totalTab").css({
                    "border-top": "1px solid #eeeeee",
                    "border-left": "1px solid #eeeeee"
                });
                $("#incomeTab").addClass("g_title" + (f ? a : ""))
            }
            $("#incomeTab").addClass("g_title")
        } else {
            if (g === "expense") {
                if (e) {
                    $("#incomeTab").css({
                        "border-top": "1px solid #eeeeee",
                        "border-left": "1px solid #eeeeee"
                    });
                    $("#totalTab").css({
                        "border-top": "1px solid #eeeeee",
                        "border-left": "1px solid #eeeeee"
                    });
                    $("#expenseTab").addClass("g_title" + (f ? a : ""))
                }
                $("#expenseTab").addClass("g_title")
            } else {
                if (e) {
                    $("#incomeTab").css({
                        "border-top": "1px solid #eeeeee",
                        "border-right": "1px solid #eeeeee"
                    });
                    $("#expenseTab").css({
                        "border-top": "1px solid #eeeeee",
                        "border-right": "1px solid #eeeeee"
                    });
                    $("#totalTab").addClass("g_title" + (f ? a : ""))
                }
                $("#totalTab").addClass("g_title")
            }
        }
    }

    function b(i) {
        var h = i || "totalTab";
        $(".memberIntegralNewPanel .itemList").find(".itemLine").each(function (j, k) {
            if (h == "incomeTab") {
                if ($(this).find(".itemDate").text().charAt(1) == "+") {
                    $(this).show()
                } else {
                    $(this).hide()
                }
            } else {
                if (h == "expenseTab") {
                    if ($(this).find(".itemDate").text().charAt(1) == "-") {
                        $(this).show()
                    } else {
                        $(this).hide()
                    }
                } else {
                    $(this).show()
                }
            }
        })
    }
};
Site.FitMemberProfilePanelImgSize = function () {
    if ($(".memberProfilePanel").length <= 0) {
        return
    }
    var g = $(".memberProfilePanel .mBulletin_content").find("img"),
        f = $(".mBulletin_Area"),
        c = f.width(),
        e = f.height(),
        b, a, d;
    g.each(function (j, h) {
        b = $(h).attr("width");
        a = $(h).attr("height");
        if (b > c) {
            d = Fai.Img.calcSize(b, a, c, e, Fai.Img.MODE_SCALE_FILL);
            $(h).css({
                width: d.width,
                height: d.height
            });
            if (Fai.isIE()) {
                $(".formStyle55 .formMiddleContent").css("overflow", "hidden")
            }
        }
    })
};
Site.loadPdCollectionList = function (c, b, d, e, a) {
    this.pIdList = b;
    this.mid = c;
    this.isNewUser = d;
    this.colorStyleType = e;
    this.colorStyle = a;
    this.panel = $(".memberCollectionPanel")
};
(function (d, n, e) {
    var j = n.prototype,
        t, g, h, s, q, k, m = [],
        u = 12,
        b, c = [];
    j.init = function () {
        g = this.pIdList, k = this.panel;
        t = this.mid;
        h = this.isNewUser;
        s = this.colorStyleType;
        q = this.colorStyle;
        r();
        a();
        var x = g.slice(0, u);
        b = x.length;
        p(x);
        i()
    };

    function r() {
        d.post("ajax/product_h.jsp", {
            mid: t,
            cmd: "updateCollections",
            ids: d.toJSON(g)
        }, function (x) {
            if (x.success) {
                g = x.list
            }
        }, "json")
    }

    function p(x) {
        d.ajax({
            url: "ajax/product_h.jsp",
            data: {
                cmd: "batchGetPd",
                ids: d.toJSON(x)
            },
            async: false,
            type: "POST",
            dataType: "json",
            success: function (y) {
                if (y.success) {
                    d(function () {
                        o(x, y.list)
                    })
                }
            }
        })
    }

    function v(y) {
        var x = false,
            z;
        d.each(c, function (A, B) {
            if (y == B.lid) {
                x = true;
                z = B
            }
        });
        if (!x) {
            z = l(y)
        }
        return z
    }

    function l(x) {
        var y = {
            lid: x
        };
        d.ajax({
            url: "ajax/productProp_h.jsp?cmd=list&lid=" + x,
            async: false,
            type: "POST",
            dataType: "json",
            success: function (z) {
                if (z.success) {
                    var A = false,
                        B = false;
                    d.each(z.list, function (C, D) {
                        if (D.fieldKey == "mallMarketPrice") {
                            B = true
                        }
                        if (D.fieldKey == "mallPrice") {
                            A = true
                        }
                    });
                    y.showMarketPrice = B;
                    y.showPrice = A;
                    c.push(y)
                }
            }
        });
        return y
    }

    function w() {
        var y = {},
            x = false;
        y.productCollections = g.reverse() + "";
        d.ajax({
            url: "ajax/member_h.jsp",
            data: {
                cmd: "set",
                id: t,
                info: d.toJSON(y)
            },
            async: false,
            type: "POST",
            dataType: "json",
            success: function (z) {
                if (z.success) {
                    x = true
                } else {
                    x = false
                }
            }
        });
        return x
    }

    function a() {
        var x = Math.ceil(g.length / u);
        if (k.find(".pagination").length == 0) {
            k.append('<div class="pagination"><a id="upPage">' + LS.prevPager + '</a> <span id="currentPage">1</span>/<span id="totalPage">' + x + '</span>页 <a id="downPage">' + LS.nextPager + "</a></div>")
        } else {
            d("#totalPage").text(x)
        } if (x > Number(d("#currentPage").text())) {
            d("#downPage").addClass("g_border")
        } else {
            d("#downPage").removeClass("g_border")
        } if (d("#currentPage").text() != "1") {
            d("#upPage").addClass("g_border")
        } else {
            d("#upPage").removeClass("g_border")
        }
    }

    function o(x, y) {
        var z = [];
        d.each(y, function (B, A) {
            var C = v(A.lid);
            z.push("<li>");
            z.push('	<div class="pdImg">');
            z.push('		<a href="pd.jsp?id=' + A.id + '">');
            z.push('			<div class="delColl" data-id="' + A.id + '">');
            z.push('				<div class="delCollBg"></div>');
            z.push('				<div class="delCollIcon"></div>');
            z.push("			</div>  ");
            z.push('			<img src="' + A.picPath + '" />');
            z.push("		</a>");
            z.push("	</div>  ");
            z.push('	<div class="pdName">' + A.name + "</div>");
            z.push('	<div class="pdPrice">');
            if (A.mallPrice != -1 && C.showPrice) {
                z.push('		<div class="mallPrice mallPrice' + (h && (s > 0) ? q : "") + '">' + Fai.top.choiceCurrencyVal + " " + A.mallPrice + "</div>")
            }
            if (A.mallMarketPrice != -1 && C.showMarketPrice) {
                z.push('		<div class="mallMarketPrice">' + Fai.top.choiceCurrencyVal + " " + A.mallMarketPrice + "</div>")
            }
            z.push("	</div>");
            z.push("</li>")
        });
        k.find(".collectionList").append(z.join(""))
    }

    function i() {
        k.on({
            hover: function () {
                d(this).find(".delColl").show()
            }, mouseleave: function () {
                if (d(this).parents(".memberCollectionNewPanel").length == 0) {
                    d(this).find(".delColl").hide()
                }
            }
        }, ".pdImg");
        k.on("click", ".delColl", function () {
            var y = d(this);
            y.parents("a").attr("href", "javascript:;");
            var x = y.attr("data-id");
            var A = g.indexOf(Number(x));
            if (A > -1) {
                g.splice(A, 1)
            }
            var B = ["<div class='fk-cancelOrder'>", "<div style='padding:10px;'>", LS.sureDelCollection, "</div>", "<div style='padding:10px 0 18px 0;'>", "<span class='J-rpt-cancel popupBClose' style='margin-right:20px;'>", LS.cancel, "</span>", "<span class='J-rpt-save con-hover'>" + LS.confirm + "</span>", "</div>", "</div>"];
            var D = parseInt(Math.random() * 10000);
            var z = {
                boxId: D,
                title: "",
                htmlContent: B.join(""),
                width: 300
            };
            var C = Site.popupBox(z);
            C.find(".J-rpt-save").on("click", function () {
                if (w()) {
                    y.parents("li").remove()
                } else {
                    Fai.ing(LS.systemError);
                    return
                }
                a();
                if (g.length > b) {
                    var G = g[b];
                    b = b + 1;
                    var F = [];
                    F.push(G);
                    p(F)
                }
                f();
                if (g.length == 0) {
                    k.find(".collectionList").html("<div class='noCollIcon'></div><div class='noCollTip'>" + LS.notCollection + "</div>");
                    k.find(".pagination").remove()
                }
                var E = true;
                d(".collectionList li").each(function () {
                    if (!d(this).is(":hidden")) {
                        E = false;
                        return true
                    }
                });
                if (E) {
                    d("#upPage").click()
                }
                C.find(".popupBClose").click()
            })
        });
        k.on("click", "#downPage", function () {
            if (d(this).hasClass("g_border")) {
                d("#currentPage").text(Number(d("#currentPage").text()) + 1);
                a();
                if (g.length > b) {
                    var x = g.slice(b, b + u);
                    b = b + x.length;
                    if (x.length > 0) {
                        p(x)
                    }
                }
                f()
            }
        });
        k.on("click", "#upPage", function () {
            if (d(this).hasClass("g_border")) {
                d("#currentPage").text(Number(d("#currentPage").text()) - 1);
                a();
                f()
            }
        })
    }

    function f() {
        var x = Number(d("#currentPage").text()) - 1;
        k.find(".collectionList").children().hide();
        var z = x * u;
        for (var y = z; y < z + 12; y++) {
            k.find(".collectionList li:eq(" + y + ")").show()
        }
    }
})(jQuery, Site.loadPdCollectionList);
Site.memberProfileResetPwd = function (c) {

    var a = Fai.top.$("#module" + c);
    var b = a.find(".itemPwd");
    if (b.is(":visible")) {
        b.hide();
        a.find(".resetPwd").html(LS.memberProfileResetPwd)
    } else {
        b.show();
        a.find(".resetPwd").html(LS.memberProfileCanelPwd)
    }
};
Site.memberProfileSubmit = function (j, q) {
    var b = $("#module" + j);
    b.find(".memberProfileMsg").show();
    var d = b.find(".memberProfileMsg .msgText");
    var p = {};
    var i = false;
    var o = true;
    $(".userEditItem").each(function () {
       var userEditItemName = $(this).attr("id");
        h = $(this).val();
        p[userEditItemName] = h;
        if ("phone" == userEditItemName && h.length > 0) {
            if ($(this).attr("disabled") != "disabled") {
           //     if (!Fai.isNationMobile(h)) {
                if(!(/^1[34578]\d{9}$/.test(h)))
                {
                    d.html(LS.mobileNumRegular);
                    $(this).focus();
                    o = false;
                    return false
                } else {
                    p.mobileCt = $(this).parent().find("#mobileCt").val();
                    i = true
                }
            } else {
                p[userEditItemName] = ""
            }
        }
    });
    if (!o) {
        return
    }
    var c = b.find(".itemPwd");
    var oldPassword="";
    if (c.is(":visible")) {
        var n = $("#memberProfileOldPwd").val();
        if (n == null || n == "") {
            d.html(LS.memberProfileOldPwdEmpty);
            $("#memberProfileOldPwd").focus();
            return
        }
        var e = $("#memberProfilePwd").val();
        if (e == null || e == "") {
            d.html(LS.memberProfilePwdEmpty);
            $("#memberProfilePwd").focus();
            return
        }
        if (e.length < 4) {
            d.html(LS.memberProfilePwdMinLength);
            $("#memberProfilePwd").focus();
            return
        }
        var k = $("#memberProfileRepwd").val();
        if (e != k) {
            d.html(LS.memberProfilePwdNotMatch);
            $("#memberProfileRepwd").focus();
            return
        }
       oldPassword = $.md5(n);
        p.password = $.md5(e)
    }
    var l = "";
    var h = "";
    var r = 0;
    $(".userEditItem").each(function () {
        userEditItemID = $(this).attr("id");
        h = $(this).val();
        userEditItemName = $(this).attr("name");
        userEditItemMaxLength = $(this).attr("maxlength");
        if (userEditItemID == "email" && h.length > 0) {
            if (!Fai.isEmail(h)) {
                d.html(Fai.format(LS.memberProfileItemCorrect, userEditItemName));
                $(this).focus();
                r = 1;
                return false
            }
        }
        if (h.length > userEditItemMaxLength) {
            d.html(Fai.format(LS.memberProfileUserEditItemMaxLength, userEditItemName, userEditItemMaxLength));
            $(this).focus();
            r = 1;
            return false
        }
    });
    if (r == 1) {
        return
    }
    var g = 0;
    var m = 0;
    var a = "";
    $(".isCheckUAI").each(function () {
        userEditItemID = $(this).attr("id");
        h = $(this).val();
        userEditItemName = $(this).attr("name");
        if (h == null || h == "") {
            if ($(this).is("input")) {
                d.html(Fai.format(LS.memberSignupUserAddItemIsEmpty, userEditItemName))
            } else {
                d.html(Fai.format(LS.memberSignupUserAddItemIsEmpty2, userEditItemName))
            }
            $(this).focus();
            g = 1;
            return false
        }
        if (userEditItemID == "email" && h.length > 0) {
            if (!Fai.isEmail(h)) {
                d.html(Fai.format(LS.memberProfileItemCorrect, userEditItemName));
                $(this).focus();
                m = 1;
                return false
            }
        }
    });
    if (g == 1) {
        return
    }
    if (m == 1) {
        return
    }
    var f = b.find(".memberProfileBtn");
    f.attr("disabled", true);
    d.html(LS.memberProfileSubmitting);
    $.ajax({
        type: "post",
        async: false,
        url: "/matchPlatform/member_memberUpdateInfo.action",
        data: "id=" + q + "&oldPassword="+oldPassword+"&jsonMember=" + Fai.encodeUrl($.toJSON(p)),
        error: function () {
            f.removeAttr("disabled");
            d.html(LS.memberProfileError)
        }, success: function (s) {
            f.removeAttr("disabled");
            var t = jQuery.parseJSON(s);
            if (t.STATUS=="success") {
                d.html(LS.memberProfileOK);
                setTimeout(function () {
                    d.html("");
                    d.parent().hide()
                }, 3000);
                b.find(".itemPwd").hide();
                b.find(".itemPwd input").val("");
                b.find(".resetPwd").html(LS.memberProfileResetPwd);
                if (i == true) {
                    b.find("#mobile").attr("disabled", "disabled");
                    b.find("#mobile").removeAttr("style");
                    var u = b.find("#mobileCt").find("option:selected").text();
                    if (u != null && u.indexOf("+") >= 0) {
                        u = u.substring(u.indexOf("+"));
                        b.find("#mobile").val(u + " " + b.find("#mobile").val())
                    }
                    b.find("#mobileCt").remove()
                }
                Site.checkMemberDataIntegrity(j)
            }
            else if(t.STATUS=="timeout")
            {
                d.html(LS.siteFormSubmitNotLogin)
            }
            else if(t.STATUS=="failed") {
                d.html(t.REASON);
            }
        }
    })
};
Site.checkMemberDataIntegrity = function (c) {
    var d = Fai.top.$("#module" + c);
    var f = 0;
    var e = 0;
    var a = d.find(".allTooltip").width();
    var b = 0;
    d.find(".memberProNewfile .J_memberProfileItem").not(".itemPwd").each(function (g, h) {
        e++;
        if (typeof $(this).find("input").val() != "undefined" && $(this).find("input").val().length > 0) {
            f++;
            return true
        }
    });
    b = f / e;
    d.find(".dataIntegrity").text(Math.floor(b * 100));
    d.find(".realTooltip").css("width", b * a)
};
Site.loadCouponList = (function (e) {
    function f(m) {
        this.mid = m
    }
    var g = f.prototype,
        k, b = 0;
    pageno = [1, 1, 1], pageSize = 9;
    var j = [];
    j[0] = new Array(), j[1] = new Array(), j[2] = new Array(), couponColorList = ["red", "orange", "yellow", "green", "blue", "pink", "purple", "gray"];
    g.init = function (n, m) {
        k = this;
        if (_manageMode) {
            var o = {
                id: 0,
                couponName: "示例优惠券",
                savePrice: 10,
                orderMinPrice: 10,
                couponLeaveAmount: 999,
                flag: 0,
                receiveCount: 1,
                state: true,
                validity: "无时间限制",
                cdId: 73,
                bg: 0,
                status: 0,
                redeemCode: "1111111"
            };
            j[0] = [o, o, o];
            e(".couponList").append(i(n, m));
            return
        }
        c(n, m);
        l(n, m)
    };

    function c(n, m) {
        var o = k;
        e.ajax({
            url: "ajax/mallCoupon_h.jsp?cmd=getCouponByMid",
            data: "mid=" + o.mid,
            dataType: "json",
            success: function (p) {
                if (p.success) {
                    if (p.receiveList) {
                        j[0] = p.receiveList
                    }
                    if (p.usedList) {
                        j[1] = p.usedList
                    }
                    if (p.expireList) {
                        j[2] = p.expireList
                    }
                    a(n, m)
                }
            }, error: function () {}
        })
    }

    function a(o, n) {
        var s = k;
        var r = e(".couponList");
        var q = [];
        q.push('<div class="tabList">');
        q.push('<div class="coupon-tab"><span class="">' + (o ? LS.myCoupon : LS.notUse) + '(<span class="couponAmount">' + j[0].length + "</span>)</span><em></em></div>");
        q.push('<div class="coupon-tab"><span>' + (o ? LS.usedCoupon : LS.used) + '(<span class="couponAmount">' + j[1].length + "</span>)</span><em></em></div>");
        q.push('<div class="coupon-tab"><span>' + (o ? LS.expiredCoupon : LS.expired) + '(<span class="couponAmount">' + j[2].length + "</span>)</span><em></em></div>");
        q.push("</div>");
        r.append(q.join(""));
        var p = e(".coupon-tab").eq(b),
            m = e(".g_selected").css("background-color");
        h(p, o, n);
        p.addClass("g_selected");
        p.find("em").css({
            "border-top-color": m
        })
    }

    function l(n, m) {
        var o = k;
        e("body").on("click", ".coupon-tab", function () {
            if (b == Number(e(this).index())) {
                return
            }
            h(e(this), n, m)
        });
        e("body").on({
            mouseover: function () {
                var p = e(this).find(".editLayer");
                if (p.length == 0) {
                    e(this).append("<div class='editLayer'><div class='barlayer'></div><span class='coupon-delete'></span></div>");
                    if (e(this).hasClass("coupon-new")) {
                        e(this).find(".editLayer").animate({
                            right: "10px"
                        })
                    } else {
                        e(this).find(".editLayer").animate({
                            right: "0px"
                        })
                    }
                } else {
                    p.show()
                }
            }, mouseleave: function () {
                var p = e(this).find(".editLayer");
                if (e(this).hasClass("coupon-new")) {
                    p.animate({
                        right: "-10px"
                    }, 500, function () {
                        p.remove()
                    })
                } else {
                    p.animate({
                        right: "-32px"
                    }, 500, function () {
                        p.remove()
                    })
                }
            }
        }, ".coupon");
        e("body").on("click", ".coupon-delete", function () {
            var p = e(this).parents(".coupon").attr("data_id"),
                w = e(this).parents(".coupon-warp");
            var q = LS.delCouponWillUnavail;
            if (b != 0) {
                q = LS.confirmDelCoupon
            }
            var u;
            var r = j[b];
            var v = r.length;
            var t = ["<div class='fk-cancelOrder'>", "<div style='padding:10px;'>", q, "</div>", "<div style='padding:10px 0 18px 0;'>", "<span class='J-rpt-cancel popupBClose' style='margin-right:20px;'>", LS.cancel, "</span>", "<span class='J-rpt-save con-hover'>" + LS.confirm + "</span>", "</div>", "</div>"];
            var x = parseInt(Math.random() * 10000);
            var y = {
                boxId: x,
                title: "",
                htmlContent: t.join(""),
                width: 300
            };
            var s = Site.popupBox(y);
            s.find(".J-rpt-save").on("click", function () {
                for (var z = 0; z < v; z++) {
                    if (parseInt(p) == r[z].cdId) {
                        u = z;
                        break
                    }
                }
                j[b].splice(z, 1);
                e.ajax({
                    url: "ajax/member_h.jsp?cmd=delCoupon",
                    data: "mid=" + o.mid + "&cdid=" + p,
                    dataType: "json",
                    success: function (A) {
                        if (A.success) {
                            w.remove();
                            d(b, pageno[b], n, m);
                            e(".coupon-tab").eq(b).find(".couponAmount").text(j[b].length)
                        }
                    }, error: function () {}
                });
                s.find(".popupBClose").click()
            })
        })
    }

    function h(p, o, n) {
        var m = e(".g_selected").css("background-color");
        e(".coupon-tab").removeClass("g_selected");
        e(".coupon-tab").find("em").css({
            "border-top-color": ""
        });
        p.addClass("g_selected");
        p.find("em").css({
            "border-top-color": m
        });
        b = p.index();
        e(".show-coupon-list").remove();
        e(".couponList").append(i(o, n));
        if (j[b].length > pageSize) {
            e(".couponList").append("<div class='pagenation' id='pagenation" + b + "'></div>");
            new Site.Pagenation(b, {
                pageNo: 1,
                pageSize: pageSize,
                totalSize: j[b].length
            }, d)
        } else {
            e(".memberCouponPanel .pagenation").remove()
        }
    }

    function i(p, o) {
        var r = k,
            n = [],
            m = pageno[b];
        n = j[b].slice((m - 1) * pageSize, m * pageSize);
        var q = [];
        q.push("<div class='show-coupon-list'>");
        e.each(n, function (t, s) {
            if (b != 0) {
                s.bg = 7
            }
            if (p == "new") {
                q.push("<div class='coupon-warp'>");
                q.push("<div class='coupon-code-new'>" + LS.couponNumber + "：" + s.redeemCode + "</div>");
                q.push("<div class='coupon coupon-new' data_id='" + s.cdId + "'>");
                q.push("<div class='coupon-content-new " + ((b == 1 || b == 2) ? "coupon-background" : "") + " coupon-color-" + couponColorList[s.bg] + "'>");
                q.push("<div class='couponSavePrice'><span class='priceSign'>" + Fai.top.choiceCurrencyVal + "</span><span class='couponPrice'>" + s.savePrice + "</span><span class='couponActivity'>" + LS.Event + LS.name + "：" + Fai.encodeHtml(s.couponName) + "</span></div>");
                q.push("<div class='couponCondition'>" + LS.useCondition + "：" + LS.full + s.orderMinPrice + "</div>");
                q.push("<div class='couponTime'>" + LS.valiteTime + "：" + s.validity + "</div>");
                q.push("</div>");
                if (b == 1) {
                    if (o == 2052 || o == 1028) {
                        q.push('<div class="fk-coupon-used"></div>')
                    } else {
                        q.push('<div class="fk-coupon-used-en"></div>')
                    }
                }
                q.push("</div>");
                q.push("</div>")
            } else {
                q.push("<div class='coupon-warp'>");
                q.push("<div class='coupon-code'>" + LS.couponNumber + "：" + s.redeemCode + "</div>");
                q.push("<div class='coupon' data_id='" + s.cdId + "'>");
                q.push("<div class='coupon-left coupon-" + couponColorList[s.bg] + "-left'></div>");
                q.push("<div class='coupon-content coupon-color-" + couponColorList[s.bg] + "'>");
                q.push("<div class='couponSavePrice'><span class='priceSign'>" + Fai.top.choiceCurrencyVal + "</span><span class='couponPrice'>" + s.savePrice + "</span></div>");
                q.push("<div>" + LS.Event + LS.name + "：" + Fai.encodeHtml(s.couponName) + "</div>");
                q.push("<div>" + LS.useCondition + "：" + LS.full + s.orderMinPrice + "</div>");
                q.push("<div>" + LS.valiteTime + "：" + s.validity + "</div>");
                q.push("</div>");
                q.push("<div class='coupon-right coupon-" + couponColorList[s.bg] + "-right'></div>");
                q.push("<div class='coupon-watermark'>券</div>");
                if (b == 2) {
                    q.push('<div class="fk-coupon-expired"></div>')
                }
                q.push("</div>");
                q.push("</div>")
            }
        });
        q.push("</div>");
        return q.join("")
    }

    function d(p, m, o, n) {
        pageno[p] = m;
        e(".tabList").next().remove();
        e(".tabList").after(i(o, n))
    }
    return f
})(jQuery);
Site.onlyShowPhoneCode = function (a) {
    var b = $("#" + a);
    if (typeof b == "undefined" || b == null) {
        return
    }
    var c = b.val();
    c = c.substring(0, c.length - 5);
    b.val(c)
};
Site.initModuleMemberSignup = function (b, e, d, a) {
    $("#memberSignupAcct").focus();
    if (e == 2) {
        $("#module" + b).find(".formMiddle").addClass("memberSignupMiddle");
        var c = $("#module" + b).find("#memberSignupButton");
        $(c).unbind("click").bind("click", function () {
            if (d) {
                Fai.ing("您目前处于网站管理状态，请先点击网站右上方的“退出”后再注册会员。")
            } else {
                Site.memberSignupSubmit(b, a, e)
            }
        });
        Site.memberSignupCompatibility(b)
    }
};
Site.memberSignupCompatibility = function (b) {
    if (Fai.isIE6()) {
        var e = $("#module" + b).find(".J_memberSignupPanel");
        $(e).removeAttr("style");
        var d = $(e).width();
        if (d > 313 || d < 200) {
            d = (d > 313) ? "313px" : (d < 200) ? "200px" : "auto";
            $(e).css("width", d)
        }
    }
    var c = !("placeholder" in document.createElement("input"));
    if (c) {
        var a = $("#module" + b).find(".itemMiddle");
        $.each(a, function (k, m) {
            var n = $(m).find("span");
            n.css({
                "white-space": "nowrap"
            });
            var h = n.width();
            var l = n.height();
            var g = $(m).position().top + (Fai.isIE6() ? 2 : 0);
            var f = $(m).position().left;
            $(n).css({
                top: g + "px",
                left: f + "px",
                "line-height": l + "px",
                padding: "0px 0px 0px 4px",
                width: h + "px"
            });
            var j = $(m).find("input").val();
            if (j && j.length > 0) {
                $(n).hide()
            }
        })
    }
};
Site.getSignMobileCode = function (d, b) {
    var c = Site.checkGetMobileCodeParam(d, b);
    var a = $("#module" + d);
    if (d == "J_memberRegisterDialogPanel") {
        a = $("#J_memberRegisterDialogPanel")
    }
    if (c.checkResult == true) {
        $.ajax({
            type: "post",
            url: "ajax/member_h.jsp?cmd=getMobileCode",
            data: "mobile=" + c.info.mobile + "&mobileCt=" + c.info.mobileCt + "&validateCode=" + c.info.captcha,
            error: function () {
                Site.showSignupMsg(b, d, "", LS.getMobileCodeErrAf, true)
            }, success: function (e) {
                var f = jQuery.parseJSON(e);
                if (f.success) {
                    Site.showSignupMsg(b, d, "", LS.sendMobileCodeSuc, true);
                    Site.getSignMobileCodeCountDown(d)
                } else {
                    Site.changeCaptchaImg(a.find("#memberSignupCaptchaImg")[0]);
                    $("#memberSignupCaptcha").val("");
                    if (f.rt == -401) {
                        Site.showSignupMsg(b, d, "memberSignupCaptcha", LS.memberSignupRegisterCaptchaNotMatch)
                    } else {
                        if (f.rt == -2) {
                            Site.showSignupMsg(b, d, "", LS.argsError)
                        } else {
                            if (f.rt == 2) {
                                Site.showSignupMsg(b, d, "mobile", LS.memberDialogSendMobileCodeErr)
                            } else {
                                if (f.rt == -4 || f.rt == 8) {
                                    Site.showSignupMsg(b, d, "", LS.getMobileOneMin, true)
                                } else {
                                    if (f.rt == -8) {
                                        Site.showSignupMsg(b, d, "", LS.getMobileHalfHour, true)
                                    } else {
                                        if (f.rt == 3) {
                                            Site.showSignupMsg(b, d, "", LS.memberDialogMobileMoneyErr, true)
                                        } else {
                                            if (f.rt == 9) {
                                                Site.showSignupMsg(b, d, "", LS.memberDialogSendMobileCodeLimit, true)
                                            } else {
                                                if (f.rt == 101) {
                                                    Site.showSignupMsg(b, d, "", LS.mobileSetErr, true)
                                                } else {
                                                    if (f.rt == -6) {
                                                        Site.showSignupMsg(b, d, "mobile", LS.mobileHasSigned, true)
                                                    } else {
                                                        if (f.rt == 23) {
                                                            Site.showSignupMsg(b, d, "", LS.mobileNationTplErr, true)
                                                        } else {
                                                            Site.showSignupMsg(b, d, "", LS.getMobileRefresh, true)
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        })
    }
};
Site.getSignMobileCodeCountDown = function (d) {
    var b = $("#module" + d);
    if (d == "J_memberRegisterDialogPanel") {
        b = $("#J_memberRegisterDialogPanel")
    }
    var e = b.find(".getMobileCdBtn");
    var c = e.attr("cTime");
    var f = 60;
    if (!c || c == null) {
        c = 0
    } else {
        c = parseInt(c);
        f = 1800
    }
    c++;
    e.attr("cTime", c);
    e.attr("s_onclick", e.attr("onclick"));
    e.removeAttr("onclick");
    var a = setInterval(function () {
        f--;
        e.html(LS.reGetMsg + "(" + f + ")");
        if (f <= 0) {
            e.html(e.attr("title"));
            e.attr("onclick", e.attr("s_onclick"));
            clearInterval(a)
        }
    }, 1000)
};
Site.checkGetMobileCodeParam = function (f, c) {
    var e = {
        checkResult: false,
        info: {}
    };
    var b = $("#module" + f);
    if (f == "J_memberRegisterDialogPanel") {
        b = $("#J_memberRegisterDialogPanel")
    }
    var a = b.find("#mobile").val();
    var d = b.find("#memberSignupCaptcha").val();
    if (!Fai.isNationMobile(a)) {
        Site.showSignupMsg(c, f, "mobile", LS.mobileNumRegular);
        return e
    }
    if (d == null || d == "") {
        Site.showSignupMsg(c, f, "memberSignupCaptcha", LS.memberSignupRegisterCaptchaEmpty);
        return e
    }
    e.checkResult = true;
    e.info.mobile = a;
    if (a && a != null && $.trim(a) != "") {
        e.info.mobileCt = b.find("#mobileCt").val()
    } else {
        e.info.mobileCt = ""
    }
    e.info.captcha = d;
    return e
};
Site.memberSignupSubmit = function (b, a, i) {
    if (_siteDemo) {
        Fai.ing("当前为“模板网站”，请先“复制网站”再进行注册。");
        return
    }
    var c = $("#module" + b);
    var h = c.find("#memberSignupAcct").val();
    var f = c.find("#memberSignupPwd").val();
    var g = Site.checkSignupValid(b, i);
    if (!g.checkResult) {
        return
    }
    var d = c.find(".memberSignupBtn");
    var e = c.find(".memberSignupMsg .msgText");
    d.attr("disabled", true);
    e.html(LS.memberSignupRegisterIng);
    $.ajax({
        type: "post",
        url: "ajax/member_h.jsp?cmd=add",
        data: "info=" + Fai.encodeUrl($.toJSON(g.info)) + "&validateCode=" + g.captcha,
        error: function () {
            d.removeAttr("disabled");
            Site.showSignupMsg(i, b, "", LS.memberSignupRegisterError, true)
        }, success: function (j) {
            var k = jQuery.parseJSON(j);
            if (k.success) {
                if (k.active) {
                    Site.memberActiveDialog(g.info.email, Fai.encodeUrl(g.info.acct), function () {
                        if (a) {
                            Fai.top.location.href = "login.jsp?errno=12&url=" + Fai.encodeUrl(a)
                        } else {
                            Fai.top.location.href = "login.jsp?errno=12"
                        }
                        Fai.top.event.returnValue = false
                    })
                } else {
                    if (a) {
                        Site.autoLogin(h, f, a)
                    } else {
                        Fai.top.location.href = "login.jsp?errno=12"
                    }
                }
            } else {
                d.removeAttr("disabled");
                Site.changeCaptchaImg($("#memberSignupCaptchaImg")[0]);
                $("#memberSignupCaptcha").val("");
                if (k.rt == -601) {
                    Site.showSignupMsg(i, b, "messageAuthCode", LS.reGetMobileCode)
                } else {
                    if (k.rt == -401) {
                        Site.showSignupMsg(i, b, "memberSignupCaptcha", LS.memberSignupRegisterCaptchaNotMatch)
                    } else {
                        if (k.rt == -8) {
                            Site.showSignupMsg(i, b, "mobile", LS.mobileHasSigned)
                        } else {
                            if (k.rt == -6) {
                                Site.showSignupMsg(i, b, "memberSignupAcct", LS.memberSignupRegisterExisted)
                            } else {
                                if (k.rt == -4) {
                                    Site.showSignupMsg(i, b, "", LS.memberSignupRegisterLimit, true)
                                } else {
                                    if (k.rt == -28) {
                                        Site.showSignupMsg(i, b, "", LS.memberRegisterLimit, true)
                                    } else {
                                        if (k.rt == -20) {
                                            Site.showSignupMsg(i, b, "", k.msg, true)
                                        } else {
                                            Site.showSignupMsg(i, b, "", LS.memberSignupRegisterError, true)
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    })
};
Site.memberSignupDialogSubmit = function (b, a, n, g, l, o, k, c, h) {
    if (_siteDemo) {
        Fai.ing("当前为“模板网站”，请先“复制网站”再进行注册。");
        return
    }
    var e = $("#" + b);
    var m = e.find("#memberSignupAcct").val();
    var j = e.find("#memberSignupPwd").val();
    var i = Site.checkSignupValid(b, n);
    if (!i.checkResult) {
        return
    }
    var d = e.find(".memberSignupBtn");
    var f = e.find(".memberSignupMsg .msgText");
    d.attr("disabled", true);
    f.html(LS.memberSignupRegisterIng);
    $.ajax({
        type: "post",
        url: "ajax/member_h.jsp?cmd=add",
        data: "info=" + Fai.encodeUrl($.toJSON(i.info)) + "&validateCode=" + i.captcha,
        error: function () {
            d.removeAttr("disabled");
            Site.showSignupMsg(n, b, "", LS.memberSignupRegisterError, true)
        }, success: function (p) {
            var q = jQuery.parseJSON(p);
            if (q.success) {
                if (q.active) {
                    Site.memberActiveDialog(i.info.email, Fai.encodeUrl(i.info.acct), function () {
                        if (a) {
                            Fai.top.location.href = "login.jsp?errno=12&url=" + Fai.encodeUrl(a)
                        } else {
                            Fai.top.location.href = "login.jsp?errno=12"
                        }
                        Fai.top.event.returnValue = false
                    })
                } else {
                    if (a) {
                        Site.autoLoginForDialog(m, j, a, g, b, l, o, k, c, h)
                    } else {
                        Fai.top.location.href = "login.jsp?errno=12"
                    }
                }
            } else {
                d.removeAttr("disabled");
                Site.changeCaptchaImg($("#memberSignupCaptchaImg")[0]);
                $("#memberSignupCaptcha").val("");
                if (q.rt == -601) {
                    Site.showSignupMsg(n, b, "messageAuthCode", LS.reGetMobileCode)
                } else {
                    if (q.rt == -401) {
                        Site.showSignupMsg(n, b, "memberSignupCaptcha", LS.memberSignupRegisterCaptchaNotMatch)
                    } else {
                        if (q.rt == -8) {
                            Site.showSignupMsg(n, b, "mobile", LS.mobileHasSigned)
                        } else {
                            if (q.rt == -6) {
                                Site.showSignupMsg(n, b, "memberSignupAcct", LS.memberSignupRegisterExisted)
                            } else {
                                if (q.rt == -4) {
                                    Site.showSignupMsg(n, b, "", LS.memberSignupRegisterLimit, true)
                                } else {
                                    if (q.rt == -28) {
                                        Site.showSignupMsg(n, b, "", LS.memberRegisterLimit, true)
                                    } else {
                                        Site.showSignupMsg(n, b, "", LS.memberSignupRegisterError, true)
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    })
};
Site.autoLogin = function (c, b, a) {
    b = $.md5(b);
    $.ajax({
        type: "post",
        url: "ajax/login_h.jsp",
        data: "cmd=loginMember&acct=" + Fai.encodeUrl(c) + "&pwd=" + Fai.encodeUrl(b),
        error: function () {
            Fai.top.location.href = "login.jsp?errno=-1&url=" + Fai.encodeUrl(a) + "&acct=" + Fai.encodeUrl(c)
        }, success: function (d) {
            var d = jQuery.parseJSON(d);
            if (d.success) {
                Fai.top.location.href = a;
                return
            } else {
                Fai.top.location.href = "login.jsp?returnUrl=" + Fai.encodeUrl(a)
            }
        }
    })
};
Site.autoLoginForDialog = function (i, f, a, d, c, h, j, g, b, e) {
    f = $.md5(f);
    $.ajax({
        type: "post",
        url: "ajax/login_h.jsp",
        data: "cmd=loginMember&acct=" + Fai.encodeUrl(i) + "&pwd=" + Fai.encodeUrl(f),
        error: function () {
            Fai.top.location.href = "login.jsp?errno=-1&url=" + Fai.encodeUrl(a) + "&acct=" + Fai.encodeUrl(i)
        }, success: function (k) {
            var k = jQuery.parseJSON(k);
            if (k.success) {
                $("#_TOKEN").attr("value") || $("title").after(k._TOKEN);
                if (g == "addCartItem") {
                    var l = {};
                    l.pid = d;
                    l.mid = h;
                    l.url = j;
                    l.opList = b;
                    l.count = e;
                    l.doWhat = "add";
                    $.cookie("isNeedAddCartItem", $.toJSON(l));
                    Fai.top.location.reload()
                } else {
                    if (g == "immeBuy") {
                        var l = {};
                        l.pid = d;
                        l.mid = h;
                        l.url = j;
                        l.opList = b;
                        l.count = e;
                        l.doWhat = "buy";
                        $.cookie("isNeedAddCartItem", $.toJSON(l));
                        Fai.top.location.reload()
                    }
                }
                return
            } else {
                Fai.top.location.href = "login.jsp?returnUrl=" + Fai.encodeUrl(a)
            }
        }
    })
};
Site.memberSignup = function (a) {
    if (a) {
        Fai.top.location.href = "signup.html?url=" + Fai.encodeUrl(a)
    } else {
        Fai.top.location.href = "signup.html"
    }
};
Site.checkSignupValid = function (s, e) {
    var b = {
        checkResult: true,
        captcha: "",
        info: {}
    };
    if (s == "J_memberRegisterDialogPanel") {
        var a = $("#" + s)
    } else {
        var a = $("#module" + s)
    }
    a.find(".memberSignupMsg").show();
    var d = a.find(".memberSignupMsg .msgText");
    var k = $.trim($("#memberSignupAcct").val());
    if (k == null || k == "") {
        Site.showSignupMsg(e, s, "memberSignupAcct", LS.memberSignupRegisterAcctEmpty);
        b.checkResult = false;
        return b
    }
    var g = $("#memberSignupPwd").val();
    if (g == null || g == "") {
        Site.showSignupMsg(e, s, "memberSignupPwd", LS.memberSignupRegisterPwdEmpty);
        b.checkResult = false;
        return b
    }
    if (g.length < 4) {
        Site.showSignupMsg(e, s, "memberSignupPwd", LS.memberSignupRegisterPwdMinLength);
        b.checkResult = false;
        return b
    }
    var n = $("#memberSignupRepwd").val();
    if (g != n) {
        Site.showSignupMsg(e, s, "memberSignupRepwd", LS.memberSignupRegisterPwdNotMatch);
        b.checkResult = false;
        return b
    }
    var o = "";
    if ($("#memberSignupRemark").length > 0) {
        o = $("#memberSignupRemark").val();
        var t = $("#memberSignupRemark").attr("maxlength");
        if (o.length > t) {
            Site.showSignupMsg(e, s, "memberSignupRemark", Fai.format(LS.memberSignupRegisterRemarkMaxLength, t));
            b.checkResult = false;
            return b
        }
    }
    if (typeof (a.find("#messageAuthCode").attr("maxlength")) != "undefined" && a.find("#messageAuthCode").attr("maxlength") != null) {
        var m = a.find("#messageAuthCode").val();
        if (typeof (m) == "undefined" || m == null || m == "") {
            Site.showSignupMsg(e, s, "messageAuthCode", LS.inputMobileCode);
            b.checkResult = false;
            return b
        }
        b.info.messageAuthCode = m
    }
    b.info.acct = k;
    b.info.pwd = $.md5(g);
    b.info.remark = o;
    var c = "";
    var p = "";
    var h = "";
    var r = 0;
    var l = "";
    var f = 0;
    var j = "";
    $(".userAddItem").each(function () {
        userAddItemID = $(this).attr("id");
        h = $(this).val();
        c = $(this).attr("name");
        l = $(this).attr("maxlength");
        b.info[userAddItemID] = h;
        if (h.length > l) {
            Site.showSignupMsg(e, s, userAddItemID, Fai.format(LS.memberSignupUserAddItemMaxLength, c, l));
            r = 1;
            b.checkResult = false;
            return b
        }
        if (userAddItemID == "phone" && h.length > 0) {
            if (!Fai.isPhone(h)) {
                Site.showSignupMsg(e, s, userAddItemID, Fai.format(LS.memberSignupUserAddItemCorrect, c));
                f = 1;
                b.checkResult = false;
                return b
            }
        }
        if (userAddItemID == "email" && h.length > 0) {
            if (!Fai.isEmail(h)) {
                Site.showSignupMsg(e, s, userAddItemID, Fai.format(LS.memberSignupUserAddItemCorrect, c));
                f = 1;
                b.checkResult = false;
                return b
            }
        }
        if (userAddItemID == "mobile" && h.length > 0) {
            if (!Fai.isNationMobile(h)) {
                Site.showSignupMsg(e, s, userAddItemID, LS.mobileNumRegular);
                f = 1;
                b.checkResult = false;
                return b
            } else {
                b.info.mobileCt = $("#mobileCt").val()
            }
        }
    });
    if (f == 1) {
        b.checkResult = false;
        return b
    }
    if (r == 1) {
        b.checkResult = false;
        return b
    }
    var i = 0;
    $(".isCheckUAI").each(function () {
        userAddItemID = $(this).attr("id");
        h = $(this).val();
        c = $(this).attr("name");
        if (h == null || h == "") {
            if ($(this).is("input")) {
                Site.showSignupMsg(e, s, userAddItemID, Fai.format(LS.memberSignupUserAddItemIsEmpty, c))
            } else {
                Site.showSignupMsg(e, s, userAddItemID, Fai.format(LS.memberSignupUserAddItemIsEmpty2, c))
            }
            i = 1;
            return false
        }
        if (userAddItemID == "email" && h.length > 0) {
            if (!Fai.isEmail(h)) {
                Site.showSignupMsg(e, s, userAddItemID, Fai.format(LS.memberSignupUserAddItemCorrect, c));
                i = 1;
                return false
            }
        }
    });
    if (i == 1) {
        b.checkResult = false;
        return b
    }
    b.captcha = $("#memberSignupCaptcha").val();
    if (b.captcha == null || b.captcha == "") {
        Site.showSignupMsg(e, s, "memberSignupCaptcha", LS.memberSignupRegisterCaptchaEmpty);
        b.checkResult = false;
        return b
    }
    var q = $("#memberAgreePro");
    if (q.length > 0) {
        if (!q.prop("checked")) {
            Site.showSignupMsg(e, s, "memberAgreePro", LS.memberProtocolNotAgree, true);
            b.checkResult = false;
            return b
        }
    }
    b.checkResult = true;
    return b
};
Site.showSignupMsg = function (g, a, h, f, i) {
    if (a == "J_memberRegisterDialogPanel") {
        Fai.ing(f);
        return
    }
    var b = $("#module" + a);
    var e = new Object();
    var d = "";
    if (h.length > 0) {
        e = $(b).find("#" + h);
        d = $(e).prop("tagName").toLocaleLowerCase()
    }
    if (g == 1) {
        b.find(".memberSignupMsg").show();
        var c = b.find(".memberSignupMsg .msgText");
        if (d.length > 0 && d == "input") {
            $(e).focus();
            c.html(f)
        } else {
            c.html(f)
        }
        return
    }
    if (i) {
        Fai.ing(f, false);
        return
    }
    if (g == 2) {
        var j = {
            moduleId: "module" + a,
            targetId: h,
            tipText: f
        };
        Site.floatTip(j);
        $(e).addClass("focusBg");
        return
    }
};
Site.initModuleMemberLogin = function (b, d, e, c, a) {
    if (typeof a != "object") {
        a = new Object()
    }
    if (d == 2) {
        $("#module" + b).find(".J_loginButton").bind("click", function () {
            if (c) {
                Fai.ing("您目前处于网站管理状态，请先点击网站右上方的“退出”后再登录会员。")
            } else {
                if (e) {
                    Site.memberLogin1(b, a)
                } else {
                    Site.memberLogin2(b, d, a)
                }
            }
        })
    }
    Site.memberLoginCompatibility(b)
};
Site.memberLoginCompatibility = function (c) {
    var b = $("#module" + c);
    if (c == "loginDialog") {
        b = $("#J_memberLoginDialogPanel")
    }
    if (Fai.isIE6()) {
        var f = b.find(".J_memberLoginPanel");
        $(f).removeAttr("style");
        var e = $(f).width();
        if (e > 260 || e < 180) {
            e = (e > 260) ? "260px" : (e < 180) ? "180px" : "auto";
            $(f).css("width", e)
        }
    }
    var d = !("placeholder" in document.createElement("input"));
    if (d) {
        var a = b.find(".J_memberLoginItem");
        $.each(a, function (l, n) {
            var o = $(n).find("span");
            var j = $(o).width();
            var m = $(o).height();
            var h = $(n).position().top + (Fai.isIE6() ? 2 : 0);
            var g = $(n).position().left;
            if ($(n).hasClass("memberCaptcha")) {
                g += 10
            } else {
                g += 25
            }
            $(o).css({
                top: h + "px",
                left: g + "px",
                "line-height": m + "px",
                padding: "0px 0px 0px 4px",
                width: j + "px"
            });
            var k = $(n).find("input").val();
            if (k.length > 0) {
                $(o).hide()
            }
        })
    }
};
Site.memberLogin = function (b) {
    var a = Fai.top.location.href;
    if (a.indexOf("errno=") > -1) {
        return
    }
    var c = "login.jsp?url=" + Fai.encodeUrl(Fai.getUrlRoot(a));
    if (b !== undefined) {
        c += "&errno=" + b
    }
    Fai.top.location.href = c
};
Site.memberLogin1 = function (b, i) {
    Site.logDog(200061, 2);
    if (typeof i != "object") {
        i = new Object()
    }
    var a = Fai.getUrlParam(Fai.top.location.href, "url");
    if (!a) {
        a = "./index.jsp"
    }
    var c = $("#module" + b);
    var h = c.find(".memberAcctInput").val();
    var g = c.find(".memberPwdInput").val();
    if (h == null || h == "") {
        Fai.top.location.href = "login.jsp?errno=1&url=" + Fai.encodeUrl(a);
        return
    }
    if (g == null || g == "") {
        Fai.top.location.href = "login.jsp?errno=2&url=" + Fai.encodeUrl(a) + "&acct=" + Fai.encodeUrl(h);
        return
    }
    g = $.md5(g);
    var f = c.find(".member");
    f.hide();
    var j = c.find(".memberMsg");
    j.html(LS.memberLogining);
    j.show();
    var e = false;
    var d = c.find("#autoLogin" + b);
    if (d && d.attr("checked")) {
        e = true
    }
    $.ajax({
        type: "post",
        url: "ajax/login_h.jsp",
        data: "cmd=loginMember&acct=" + Fai.encodeUrl(h) + "&pwd=" + Fai.encodeUrl(g) + "&autoLogin=" + Fai.encodeUrl(e),
        error: function () {
            Fai.top.location.href = "login.jsp?errno=-1&url=" + Fai.encodeUrl(a) + "&acct=" + Fai.encodeUrl(h)
        }, success: function (u) {
            var u = jQuery.parseJSON(u);
            if (u.success) {
                $("#_TOKEN").attr("value") || $("title").after(u._TOKEN);
                if (!!i.skipUrl) {
                    a = i.skipUrl
                }
                if (i.isPhotoSlide) {
                    var l = a.split(";");
                    for (var o = 0; o < l.length - 1; o++) {
                        var q = new RegExp("[^script:]");
                        if (q.test(a)) {
                            var t = l[o].split(":"),
                                k = t[1].indexOf("(") + 1,
                                n = t[1].lastIndexOf(")"),
                                r = Array.prototype.slice.call(t[1].substring(k, n).split(",")),
                                m = t[1].substring(0, k - 1),
                                s = [];
                            Site.photoSlide.returnIndex = function () {
                                delete Site.photoSlide.returnIndex;
                                Fai.top.location.href = "/index.jsp"
                            };
                            var p = [{
                                name: m,
                                base: window
                            }];
                            s = p.concat(r);
                            jzUtils.run.apply(window, s)
                        }
                    }
                } else {
                    Fai.top.location.href = a;
                    return
                }
            } else {
                if (u.active) {
                    Site.memberInactiveDialog(u.mail, u.memName);
                    f.show();
                    j.hide()
                } else {
                    Fai.top.location.href = "login.jsp?errno=" + u.rt + "&captcha=" + u.captcha + "&url=" + Fai.encodeUrl(a) + "&acct=" + Fai.encodeUrl(h)
                }
            }
        }
    })
};
Site.mbLogining = false;
Site.memberLogin2 = function (b, l, n) {
    Site.logDog(200061, 2);
    if (typeof n != "object") {
        n = new Object()
    }
    if (Site.mbLogining) {
        return
    }
    Site.mbLogining = true;
    var a = Fai.getUrlParam(Fai.top.location.href, "url");
    if (!a) {
        a = "./index.jsp"
    }
    var o = Fai.getUrlParam(Fai.top.location.href, "mid");
    var d = Fai.getUrlParam(Fai.top.location.href, "fid");
    var c = $("#module" + b);
    var k = $.trim(c.find(".memberAcctInput").val());
    var h = c.find(".memberPwdInput").val();
    var g = (c.find(".memberCaptcha").css("display") != "none");
    var i = c.find(".memberCaptchaInput").val();
    if (k == null || k == "") {
        Site.showMemberLoginMsg(b, 1, false, l);
        return
    }
    if (h == null || h == "") {
        Site.showMemberLoginMsg(b, 2, false, l);
        return
    }
    if (g && (i == null || i == "")) {
        Site.showMemberLoginMsg(b, 3, false, l);
        return
    }
    h = $.md5(h);
    var m = c.find(".memberLoginMsg");
    m.show();
    m.find(".msgText").html(LS.memberLogining);
    var j = c.find(".memberLoginBtn");
    j.attr("disabled", true);
    var f = false;
    var e = c.find("#autoLogin" + b);
    if (e && e.attr("checked")) {
        f = true
    }
    $.ajax({
        type: "post",
        url: "ajax/login_h.jsp",
        data: "cmd=loginMember&acct=" + Fai.encodeUrl(k) + "&pwd=" + Fai.encodeUrl(h) + "&captcha=" + Fai.encodeUrl(i) + "&autoLogin=" + Fai.encodeUrl(f),
        error: function () {
            Site.mbLogining = false;
            j.removeAttr("disabled");
            Site.showMemberLoginMsg(b, -1, l)
        }, success: function (z) {
            Site.mbLogining = false;
            j.removeAttr("disabled");
            var z = jQuery.parseJSON(z);
            if (z.success) {
                $("#_TOKEN").attr("value") || $("title").after(z._TOKEN);
                if (o != null && d != null) {
                    $.cookie("_moduleid", o, {
                        expires: 1
                    });
                    $.cookie("_fileid", d, {
                        expires: 1
                    })
                }
                if (!!n.skipUrl) {
                    a = n.skipUrl
                }
                if (n.isPhotoSlide) {
                    var q = a.split(";");
                    for (var t = 0; t < q.length - 1; t++) {
                        var v = new RegExp("[^script:]");
                        if (v.test(a)) {
                            var y = q[t].split(":"),
                                p = y[1].indexOf("(") + 1,
                                s = y[1].lastIndexOf(")"),
                                w = Array.prototype.slice.call(y[1].substring(p, s).split(",")),
                                x = [],
                                r = y[1].substring(0, p - 1);
                            Site.photoSlide.returnIndex = function () {
                                delete Site.photoSlide.returnIndex;
                                Fai.top.location.href = "/index.jsp"
                            };
                            var u = [{
                                name: r,
                                base: window
                            }];
                            x = u.concat(w);
                            jzUtils.run.apply(window, x)
                        }
                    }
                } else {
                    Fai.top.location.href = a;
                    return
                }
            } else {
                if (z.active) {
                    Site.memberInactiveDialog(z.mail, z.memName)
                } else {
                    Site.showMemberLoginMsg(b, z.rt, z.captcha, l)
                }
            }
        }
    })
};
Site.memberLogin3 = function (j) {
    if (typeof j != "object") {
        j = new Object()
    }
    var a = Fai.getUrlParam(Fai.top.location.href, "url");
    if (!a) {
        a = "./index.jsp"
    }
    var b = $("#J_WebRightBar");
    var i = $.trim(b.find("#memberAcct").val());
    var f = b.find("#memberPwd").val();
    var e = (b.find(".rbar-captcha").css("display") != "none");
    var g = b.find(".memberLoginCaptcha").val();
    if (i == null || i == "") {
        Fai.top.location.href = "login.jsp?errno=1&url=" + Fai.encodeUrl(a);
        return
    }
    if (f == null || f == "") {
        Fai.top.location.href = "login.jsp?errno=2&url=" + Fai.encodeUrl(a) + "&acct=" + Fai.encodeUrl(i);
        return
    }
    f = $.md5(f);
    var h = b.find(".memberLoginBtn");
    h.attr("disabled", true);
    var d = false;
    var c = b.find("#autoLoginRightBar");
    if (c && c.attr("checked")) {
        d = true
    }
    $.ajax({
        type: "post",
        url: "ajax/login_h.jsp",
        data: "cmd=loginMember&acct=" + Fai.encodeUrl(i) + "&pwd=" + Fai.encodeUrl(f) + "&captcha=" + Fai.encodeUrl(g) + "&autoLogin=" + Fai.encodeUrl(d),
        error: function () {
            Site.mbLogining = false;
            h.removeAttr("disabled");
            Fai.top.location.href = "login.jsp?errno=-1&url=" + Fai.encodeUrl(a) + "&acct=" + Fai.encodeUrl(i)
        }, success: function (k) {
            Site.mbLogining = false;
            h.removeAttr("disabled");
            var k = jQuery.parseJSON(k);
            if (k.success) {
                $("#_TOKEN").attr("value") || $("title").after(k._TOKEN);
                if (!!j.skipUrl) {
                    a = j.skipUrl
                }
                Fai.top.location.href = a;
                return
            } else {
                if (k.active) {
                    Site.memberInactiveDialog(k.mail, k.memName);
                    return
                }
                if (k.captcha) {
                    Fai.top.location.href = "login.jsp?errno=" + k.rt + "&captcha=" + k.captcha + "&url=" + Fai.encodeUrl(a) + "&acct=" + Fai.encodeUrl(i);
                    return
                } else {
                    Site.showMemberLoginMsg("webRightBar", k.rt, k.captcha, 2)
                }
            }
        }
    })
};
Site.mbLogining = false;
Site.memberLogin4 = function (e, c, o, l, b, i) {
    var a = Fai.getUrlParam(Fai.top.location.href, "url");
    if (!a) {
        a = "./index.jsp"
    }
    if (Site.mbLogining) {
        return
    }
    Site.mbLogining = true;
    var d = $("#J_memberLoginDialogPanel");
    var n = $.trim(d.find("#memberAcct").val());
    var j = d.find("#memberPwd").val();
    var h = (d.find(".memberCaptcha").css("display") != "none");
    var k = d.find(".memberCaptchaInput").val();
    if (n == null || n == "") {
        Fai.ing("帐号不能为空！");
        return
    }
    if (j == null || j == "") {
        Fai.ing("密码不能为空！");
        return
    }
    if (h && (k == null || k == "")) {
        Fai.ing(LS.memberCaptchError);
        return
    }
    j = $.md5(j);
    var m = d.find(".memberLoginBtn");
    m.attr("disabled", true);
    var g = false;
    var f = d.find("#memberLoginDialogAutoLogin");
    if (f && f.attr("checked")) {
        g = true
    }
    $.ajax({
        type: "post",
        url: "ajax/login_h.jsp",
        data: "cmd=loginMember&acct=" + Fai.encodeUrl(n) + "&pwd=" + Fai.encodeUrl(j) + "&captcha=" + Fai.encodeUrl(k) + "&autoLogin=" + Fai.encodeUrl(g),
        error: function () {
            Site.mbLogining = false;
            m.removeAttr("disabled");
            Fai.top.location.href = "login.jsp?errno=-1&url=" + Fai.encodeUrl(a) + "&acct=" + Fai.encodeUrl(n)
        }, success: function (p) {
            Site.mbLogining = false;
            m.removeAttr("disabled");
            var p = jQuery.parseJSON(p);
            if (p.success) {
                $("#_TOKEN").attr("value") || $("title").after(p._TOKEN);
                if (l == "addCartItem") {
                    var q = {};
                    q.pid = e;
                    q.mid = c;
                    q.url = o;
                    q.opList = b;
                    q.count = i;
                    q.doWhat = "add";
                    $.cookie("isNeedAddCartItem", $.toJSON(q));
                    Fai.top.location.reload()
                } else {
                    if (l == "immeBuy") {
                        var q = {};
                        q.pid = e;
                        q.mid = c;
                        q.url = o;
                        q.opList = b;
                        q.count = i;
                        q.doWhat = "buy";
                        $.cookie("isNeedAddCartItem", $.toJSON(q));
                        Fai.top.location.reload()
                    }
                }
                return
            } else {
                if (p.active) {
                    Site.memberInactiveDialog(p.mail, p.memName);
                    return
                } else {
                    Site.showMemberLoginMsg("loginDialog", p.rt, p.captcha, 2)
                }
            }
        }
    })
};
Site.showMemberLoginMsg = function (a, b, e, f) {
    var c, d = "",
        h = "",
        i = false;
    if (a == "webRightBar") {
        c = $("#J_WebRightBar")
    } else {
        if (a == "loginDialog") {
            c = $("#J_memberLoginDialogPanel")
        } else {
            c = $("#module" + a)
        }
    } if (b == 1) {
        d = LS.memberInputAcct;
        c.find(".memberAcctInput").focus();
        h = "memberLoginAcct"
    } else {
        if (b == 2) {
            d = LS.memberInputPwd;
            c.find(".memberPwdInput").focus();
            h = "memberLoginPwd"
        } else {
            if (b == 3) {
                d = LS.memberInputCaptcha;
                h = "memberLoginCaptcha"
            } else {
                if (b == 11) {
                    d = LS.memberLoginFirst;
                    i = true
                } else {
                    if (b == 12) {
                        d = LS.memberLoginSignup;
                        i = true
                    } else {
                        if (b == 13) {
                            d = LS.memberLoginToView;
                            i = true
                        } else {
                            if (b == 14) {
                                d = LS.memberLoginNoPermission;
                                i = true
                            } else {
                                if (b == -3) {
                                    d = LS.memberPwdError;
                                    h = "memberLoginPwd"
                                } else {
                                    if (b == -301) {
                                        d = LS.memberCaptchError;
                                        h = "memberLoginCaptcha"
                                    } else {
                                        if (b == -302) {
                                            d = LS.memberAcctError;
                                            h = "memberLoginAcct"
                                        } else {
                                            if (b == -303) {
                                                d = LS.memberNoAuth;
                                                h = "memberLoginAcct"
                                            } else {
                                                if (b == -305) {
                                                    d = LS.memberPwdError;
                                                    h = "memberLoginPwd"
                                                } else {
                                                    d = LS.memberLoginError;
                                                    i = true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    } if (e && a != "webRightBar") {
        c.find(".memberCaptcha").show();
        c.find(".memberCaptchaImg").attr("src", "validateCode.jsp?" + Math.random() * 1000);
        Site.memberLoginCompatibility(a)
    }
    if (i) {
        Fai.ing(d, false);
        return
    }
    if (f == 1) {
        var g = c.find(".memberLoginMsg");
        g.show();
        g.find(".msgText").html(d)
    }
    if (f == 2) {
        var j = {
            moduleId: "module" + a,
            targetId: h,
            tipText: d
        };
        if (a != "loginDialog") {
            if (a == "webRightBar") {
                j.moduleId = "J_WebRightBar"
            } else {
                j.moduleId = "module" + a
            }
            setTimeout(function () {
                Site.floatTip(j)
            }, 50)
        } else {
            Fai.ing(d)
        }
    }
};
var countdown=60;
Site.changeCaptchaImg = function (obj) {
   // $(a).attr("src", "validateCode.jsp?" + Math.random() * 1000)
    if (countdown == 0) {
        obj.removeAttribute("disabled");
        obj.value="免费获取验证码";
        countdown = 60;
        return;
    } else {
        obj.setAttribute("disabled", true);
        obj.value="重新发送(" + countdown + ")";
        countdown--;
    }
    setTimeout(function() {
            Site.changeCaptchaImg(obj) }
        ,1000)



};
Site.wxListener = {
    timer: "",
    winOpen: "",
    w_uid: "",
    c: 0,
    wx_name: "",
    wx_avator: ""
};
Site.initWXLogin = function (d, a, e, c, f, h, b) {
    a += "/wxLogin.jsp";
    $("#" + h).click(function () {
        if (Site.wxListener.c == 0) {
            Site.wxListener.winOpen = window.open("https://open.weixin.qq.com/connect/qrconnect?appid=" + d + "&redirect_uri=" + Fai.encodeUrl(a) + "&response_type=code&scope=snsapi_login#wechat_redirect", "", "height=525,width=585, toolbar=no, menubar=no, scrollbars=no, status=no, location=yes, resizable=yes");
            Site.wxListener.timer = window.setInterval("Site.wxWinListener('" + e + "', " + c + ", " + f + ", " + b + ")", 500);
            window.addEventListener("message", g, false);
            ++Site.wxListener.c
        }
    });

    function g(i) {
        var j = $.parseJSON(i.data);
        Site.wxListener.w_uid = j.uid;
        Site.wxListener.wx_name = j.wx_name;
        Site.wxListener.wx_avator = j.wx_avator;
        Site.wxListener.winOpen.close()
    }
};
Site.wxWinListener = function (d, c, f, b) {
    if (Site.wxListener.winOpen.closed == true) {
        window.clearInterval(Site.wxListener.timer);
        Site.wxListener.c = 0;
        if (Site.wxListener.w_uid != null && Site.wxListener.w_uid != "") {
            var a = Fai.getUrlParam(Fai.top.location.href, "url");
            if (!a) {
                a = "./index.jsp"
            }
            var e = Site.checkHasMobileOption(d);
            $.ajax({
                type: "post",
                url: "ajax/login_h.jsp?cmd=otherLoginMember",
                data: "loginType=3&openId=" + Site.wxListener.w_uid + "&hasMobile=" + e,
                error: function () {
                    Fai.ing(LS.memberLoginError, true)
                }, success: function (u) {
                    var u = jQuery.parseJSON(u);
                    if (u.success) {
                        $("#_TOKEN").attr("value") || $("title").after(u._TOKEN);
                        var h = $.cookie("forThirtLoginBuy");
                        if (typeof h != "undefined" && h != null && h != "") {
                            var s = $.parseJSON(h);
                            if (typeof s != "undefined" && s != null) {
                                if (s.where == "addCartItem") {
                                    var o = {};
                                    o.pid = s.pid;
                                    o.mid = s.mid;
                                    o.url = s.url;
                                    o.opList = s.opList;
                                    o.count = s.count;
                                    o.doWhat = "add";
                                    $.cookie("isNeedAddCartItem", $.toJSON(o));
                                    Fai.top.location.reload()
                                } else {
                                    if (s.where == "immeBuy") {
                                        var o = {};
                                        o.pid = s.pid;
                                        o.mid = s.mid;
                                        o.url = s.url;
                                        o.opList = s.opList;
                                        o.count = s.count;
                                        o.doWhat = "buy";
                                        $.cookie("isNeedAddCartItem", $.toJSON(o));
                                        Fai.top.location.reload()
                                    }
                                }
                            }
                            $.cookie("forThirtLoginBuy", null);
                            return
                        }
                        if (!!b.skipUrl) {
                            a = b.skipUrl
                        }
                        if (b.isPhotoSlide) {
                            var j = a.split(";");
                            for (var m = 0; m < j.length - 1; m++) {
                                var p = new RegExp("[^script:]");
                                if (p.test(a)) {
                                    var t = j[m].split(":"),
                                        g = t[1].indexOf("(") + 1,
                                        l = t[1].lastIndexOf(")"),
                                        q = Array.prototype.slice.call(t[1].substring(g, l).split(",")),
                                        k = t[1].substring(0, g - 1),
                                        r = [];
                                    Site.photoSlide.returnIndex = function () {
                                        delete Site.photoSlide.returnIndex;
                                        Fai.top.location.href = "/index.jsp"
                                    };
                                    var n = [{
                                        name: k,
                                        base: window
                                    }];
                                    r = n.concat(q);
                                    jzUtils.run.apply(window, r)
                                }
                            }
                        } else {
                            Fai.top.location.href = a;
                            return
                        }
                    } else {
                        if (u.active) {
                            Site.memberInactiveDialog(u.mail, u.memName)
                        } else {
                            if (u.rt == -3) {
                                Site.memberOtherLoginAdd(Site.wxListener.w_uid, jQuery.parseJSON(d), c, f, 3, b, u.signNeenMobile, u.mobileCtNameList)
                            } else {
                                if (u.rt == -303) {
                                    Fai.ing(LS.memberNoAuth, true)
                                } else {
                                    Fai.ing(LS.argsError, true)
                                }
                            }
                        }
                    }
                }
            })
        }
    }
};
Site.wbListener = {
    timer: "",
    winOpen: "",
    w_uid: "",
    c: 0,
    wb_name: "",
    wb_avator: ""
};
Site.initWBLogin = function (h, a, d, c, e, g, b) {
    $("#" + g).click(function () {
        if (Site.wbListener.c == 0) {
            Site.wbListener.winOpen = window.open("https://api.weibo.com/oauth2/authorize?client_id=" + h + "&redirect_uri=" + a + "/wbLogin.jsp&response_type=code", "", "height=525,width=585, toolbar=no, menubar=no, scrollbars=no, status=no, location=yes, resizable=yes");
            Site.wbListener.timer = window.setInterval("Site.wbWinListener('" + d + "', " + c + ", " + e + ", " + b + ")", 500);
            window.addEventListener("message", f, false);
            ++Site.wbListener.c
        }
    });

    function f(i) {
        var j = $.parseJSON(i.data);
        Site.wbListener.w_uid = j.uid;
        Site.wbListener.wb_name = j.name;
        Site.wbListener.wb_avator = j.w_avator;
        Site.wbListener.winOpen.close()
    }
};
Site.wbWinListener = function (d, c, f, b) {
    if (Site.wbListener.winOpen.closed == true) {
        window.clearInterval(Site.wbListener.timer);
        Site.wbListener.c = 0;
        if (Site.wbListener.w_uid != null && Site.wbListener.w_uid != "") {
            var a = Fai.getUrlParam(Fai.top.location.href, "url");
            if (!a) {
                a = "./index.jsp"
            }
            var e = Site.checkHasMobileOption(d);
            $.ajax({
                type: "post",
                url: "ajax/login_h.jsp?cmd=otherLoginMember",
                data: "loginType=2&openId=" + Site.wbListener.w_uid + "&hasMobile=" + e,
                error: function () {
                    Fai.ing(LS.memberLoginError, true)
                }, success: function (u) {
                    var u = jQuery.parseJSON(u);
                    if (u.success) {
                        $("#_TOKEN").attr("value") || $("title").after(u._TOKEN);
                        var h = $.cookie("forThirtLoginBuy");
                        if (typeof h != "undefined" && h != null && h != "") {
                            var s = $.parseJSON(h);
                            if (typeof s != "undefined" && s != null) {
                                if (s.where == "addCartItem") {
                                    var o = {};
                                    o.pid = s.pid;
                                    o.mid = s.mid;
                                    o.url = s.url;
                                    o.opList = s.opList;
                                    o.count = s.count;
                                    o.doWhat = "add";
                                    $.cookie("isNeedAddCartItem", $.toJSON(o));
                                    Fai.top.location.reload()
                                } else {
                                    if (s.where == "immeBuy") {
                                        var o = {};
                                        o.pid = s.pid;
                                        o.mid = s.mid;
                                        o.url = s.url;
                                        o.opList = s.opList;
                                        o.count = s.count;
                                        o.doWhat = "buy";
                                        $.cookie("isNeedAddCartItem", $.toJSON(o));
                                        Fai.top.location.reload()
                                    }
                                }
                            }
                            $.cookie("forThirtLoginBuy", null);
                            return
                        }
                        if (!!b.skipUrl) {
                            a = b.skipUrl
                        }
                        if (b.isPhotoSlide) {
                            var j = a.split(";");
                            for (var m = 0; m < j.length - 1; m++) {
                                var p = new RegExp("[^script:]");
                                if (p.test(a)) {
                                    var t = j[m].split(":"),
                                        g = t[1].indexOf("(") + 1,
                                        l = t[1].lastIndexOf(")"),
                                        q = Array.prototype.slice.call(t[1].substring(g, l).split(",")),
                                        k = t[1].substring(0, g - 1),
                                        r = [];
                                    Site.photoSlide.returnIndex = function () {
                                        delete Site.photoSlide.returnIndex;
                                        Fai.top.location.href = "/index.jsp"
                                    };
                                    var n = [{
                                        name: k,
                                        base: window
                                    }];
                                    r = n.concat(q);
                                    jzUtils.run.apply(window, r)
                                }
                            }
                        } else {
                            Fai.top.location.href = a;
                            return
                        }
                    } else {
                        if (u.active) {
                            Site.memberInactiveDialog(u.mail, u.memName)
                        } else {
                            if (u.rt == -3) {
                                Site.memberOtherLoginAdd(Site.wbListener.w_uid, jQuery.parseJSON(d), c, f, 2, b, u.signNeenMobile, u.mobileCtNameList)
                            } else {
                                if (u.rt == -303) {
                                    Fai.ing(LS.memberNoAuth, true)
                                } else {
                                    Fai.ing(LS.argsError, true)
                                }
                            }
                        }
                    }
                }
            })
        }
    }
};
Site.qqPopupID = "";
Site.initQQLogin = function (g, a, d, c, e, f, b) {
    Site.qqLoginPC(g, a, d, c, e, f, b)
};
Site.qqListener = {
    timer: "",
    winOpen: "",
    q_uid: "",
    c: 0,
    q_name: "",
    q_avator: ""
};
Site.qqLoginPC = function (h, a, d, c, e, g, b) {
    $("#" + g).click(function () {
        if (Site.qqListener.c == 0) {
            Site.qqListener.winOpen = window.open("https://graph.qq.com/oauth2.0/authorize?client_id=" + h + "&redirect_uri=" + a + "/qqLoginPC.jsp&response_type=token&scope=all", "", "height=525,width=585, toolbar=no, menubar=no, scrollbars=no, status=no, location=yes, resizable=yes");
            Site.qqListener.timer = window.setInterval("Site.qqWinListenerPC('" + d + "', " + c + ", " + e + ", " + b + ")", 500);
            window.addEventListener("message", f, false);
            ++Site.qqListener.c
        }
    });

    function f(i) {
        var j = $.parseJSON(i.data);
        Site.qqListener.q_uid = j.uid;
        Site.qqListener.q_name = j.q_name;
        Site.qqListener.q_avator = j.q_avator;
        Site.qqListener.winOpen.close()
    }
};
Site.qqWinListenerPC = function (d, c, f, b) {
    if (Site.qqListener.winOpen.closed == true) {
        window.clearInterval(Site.qqListener.timer);
        Site.qqListener.c = 0;
        if (Site.qqListener.q_uid != null && Site.qqListener.q_uid != "") {
            var a = Fai.getUrlParam(Fai.top.location.href, "url");
            if (!a) {
                a = "./index.jsp"
            }
            var e = Site.checkHasMobileOption(d);
            $.ajax({
                type: "post",
                url: "ajax/login_h.jsp?cmd=otherLoginMember",
                data: "loginType=1&openId=" + Site.qqListener.q_uid + "&hasMobile=" + e,
                error: function () {
                    Fai.ing(LS.memberLoginError, true)
                }, success: function (u) {
                    var u = jQuery.parseJSON(u);
                    if (u.success) {
                        $("#_TOKEN").attr("value") || $("title").after(u._TOKEN);
                        var h = $.cookie("forThirtLoginBuy");
                        if (typeof h != "undefined" && h != null && h != "") {
                            var s = $.parseJSON(h);
                            if (typeof s != "undefined" && s != null) {
                                if (s.where == "addCartItem") {
                                    var o = {};
                                    o.pid = s.pid;
                                    o.mid = s.mid;
                                    o.url = s.url;
                                    o.opList = s.opList;
                                    o.count = s.count;
                                    o.doWhat = "add";
                                    $.cookie("isNeedAddCartItem", $.toJSON(o));
                                    Fai.top.location.reload()
                                } else {
                                    if (s.where == "immeBuy") {
                                        var o = {};
                                        o.pid = s.pid;
                                        o.mid = s.mid;
                                        o.url = s.url;
                                        o.opList = s.opList;
                                        o.count = s.count;
                                        o.doWhat = "buy";
                                        $.cookie("isNeedAddCartItem", $.toJSON(o));
                                        Fai.top.location.reload()
                                    }
                                }
                            }
                            $.cookie("forThirtLoginBuy", null);
                            return
                        }
                        if (!!b.skipUrl) {
                            a = b.skipUrl
                        }
                        if (b.isPhotoSlide) {
                            var j = a.split(";");
                            for (var m = 0; m < j.length - 1; m++) {
                                var p = new RegExp("[^script:]");
                                if (p.test(a)) {
                                    var t = j[m].split(":"),
                                        g = t[1].indexOf("(") + 1,
                                        l = t[1].lastIndexOf(")"),
                                        q = Array.prototype.slice.call(t[1].substring(g, l).split(",")),
                                        k = t[1].substring(0, g - 1),
                                        r = [];
                                    Site.photoSlide.returnIndex = function () {
                                        delete Site.photoSlide.returnIndex;
                                        Fai.top.location.href = "/index.jsp"
                                    };
                                    var n = [{
                                        name: k,
                                        base: window
                                    }];
                                    r = n.concat(q);
                                    jzUtils.run.apply(window, r)
                                }
                            }
                        } else {
                            Fai.top.location.href = a;
                            return
                        }
                    } else {
                        if (u.active) {
                            Site.memberInactiveDialog(u.mail, u.memName)
                        } else {
                            if (u.rt == -3) {
                                Site.memberOtherLoginAdd(Site.qqListener.q_uid, jQuery.parseJSON(d), c, f, 1, b, u.signNeenMobile, u.mobileCtNameList)
                            } else {
                                if (u.rt == -303) {
                                    Fai.ing(LS.memberNoAuth, true)
                                } else {
                                    Fai.ing(LS.argsError, true)
                                }
                            }
                        }
                    }
                }
            })
        }
    }
};
Site.checkHasMobileOption = function (b) {
    b = jQuery.parseJSON(b);
    var c = false;
    if (b) {
        for (var a = 0; a < b.length; a++) {
            if (b[a]["fieldKey"] == "mobile") {
                c = true;
                break
            }
        }
    }
    return c
};
Site.memberOtherLoginAdd = function (a, h, b, c, f, m, g, e) {
    var n = parseInt(Math.random() * 10000);
    var i = "",
        l = "",
        d = 170,
        k = 40;
    if (f == 1) {
        i = Site.qqListener.q_avator;
        l = Site.qqListener.q_name
    } else {
        if (f == 2) {
            i = Site.wbListener.wb_avator;
            k = 50;
            d = 165;
            l = Site.wbListener.wb_name
        } else {
            if (f == 3) {
                i = Site.wxListener.wx_avator;
                d = 158;
                k = 64;
                l = Site.wxListener.wx_name
            }
        }
    }
    var o = ['<div style="width:190px; height:1px; font-size:0; background-color:#44a5ff; margin-left:33px; float:left;"/>', '<div style="width:130px; height:1px; font-size:0; background-color:#dadada; margin-left:223px;"/>', '<div style="width:', k, "px; height:", k, "px; margin-top:10px; margin-left:", d, "px; background:url(", i, ');"/>', '<div style="padding:6px 2px;">', '<div style="padding:5px 0;">', '<div style="width:140px;float:left;">&nbsp;</div>', '<div id="bindAcct" class="checkBoxStyle_unCheck"/><div id="bindAcctLabel" style="vertical-align:middle;font-size:14px;cursor:pointer;">', LS.memberOtherLgnBindAcct, "</div>", "</div>", '<div style="width:280px; height:1px; font-size:0; background-color:#dadada; margin-left:45px; margin-top:10px; margin-bottom:10px;"/>', '<table cellpadding="0" cellspacing="0" style="_margin:0 auto">', '<tr style="display:block; margin-top:10px; width:320px;">', '<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">', LS.memberOtherLgnAcct, '</td><td><input id="acct" type="text" maxlength="50" value="', l, '" style="width:168px; height:25px; margin-left:5px;-webkit-border-radius:0;-moz-border-radius:0;border:1px solid #e7e7e7; text-indent:6px;"/><span style="font-size:14px; color:rgb(255,36,46); margin-left:5px;">*</span><input id="openId" type="password" disabled style="display:none;"/></td>', "</tr>", '<tr style="display:block; margin-top:10px; width:320px;">', '<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">', LS.memberOtherLgnPwd, '</td><td><input id="pwd" type="password" maxlength="20" style="width:168px; height:25px; margin-left:5px;-webkit-border-radius:0;-moz-border-radius:0;border:1px solid #e7e7e7; text-indent:6px;"/><span style="font-size:14px; color:rgb(255,36,46); margin-left:5px;">*</span></td>', "</tr>", '<tr style="display:block; margin-top:10px; width:320px;">', '<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">', LS.memberOtherLgnRePwd, '</td><td><input id="repwd" type="password" maxlength="20" style="width:168px; height:25px; margin-left:5px;-webkit-border-radius:0;-moz-border-radius:0;border:1px solid #e7e7e7; text-indent:6px;"/><span style="font-size:14px; color:rgb(255,36,46); margin-left:5px;">*</span></td>', "</tr>"];
    $.each(h, function (r, v) {
        var u, t = "width:168px;";
        if (v.fieldKey == "mobile") {
            t = "width:103px;";
            u = [];
            u.push("<select id='mobileCt' name='mobileCt' style='width:60px;margin-left:5px;height:28px;font-size: 12px;color: rgb(99,99,99);border: 1px solid #e7e7e7;text-indent: 6px;' >");
            if (e) {
                for (var q = 0; q < e.length; q++) {
                    u.push("<option value='" + e[q]["ctName"] + "'>" + e[q]["ctShowName"] + e[q]["ctCode"] + "</option>")
                }
            }
            u.push("</select>");
            u.join("")
        }
        var s = ['<tr class="bindAcctHidn" style="display:block; margin-top:10px; width:320px;">', '<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">', v.name, "：</td><td>", u, '<input id="', v.fieldKey, '" type="text" name="', v.name, '" maxlength="50" placeholder="', v.placeholder, '" class="userAddItem', v.must ? " isCheckUAI" : "", '" style="' + t + 'height:25px; margin-left:5px;-webkit-border-radius:0;-moz-border-radius:0; border:1px solid #e7e7e7; text-indent:6px;"/>', v.must ? '<span style="font-size:14px; color:rgb(255,36,46); margin-left:5px;">*</span></td>' : "</td>", "</tr>", ];
        o.push(s.join(""))
    });
    if (b) {
        o.push('<tr class="bindAcctHidn" style="display:block; margin-top:10px; width:320px;">');
        o.push('<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">' + LS.memberOtherLgnRemark + "</td>");
        o.push('<td><textarea id="remark" maxlength="' + c + '" style="width:168px;height:50px; margin-left:5px;-webkit-border-radius:0;-moz-border-radius:0; border:1px solid #e7e7e7; text-indent:6px;"></textarea></td>');
        o.push("</tr>")
    }
    if (g) {
        o.push('<tr class="bindAcctHidn" style="display:block; margin-top:10px; width:320px;">');
        o.push('<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">' + LS.memberSignup_captcha + "</td>");
        o.push('<td><input id="memberSignupCaptcha" type="text" style="width:80px;margin-left:5px;height: 25px;font-size: 12px;color: rgb(99,99,99);border: 1px solid #e7e7e7;text-indent: 6px;" maxlength="4"/><div style="width:81px;height:25px;line-height:25px;float:right;text-align:center;color:red;"><img style="width:100%;height:100%;cursor:pointer;margin-left:10px;margin-top:2px;" alt="" id="memberSignupCaptchaImg" onclick="Site.changeCaptchaImg(this)" title="' + LS.msgBoradChageValidateCode + '" src="validateCode.jsp?' + Math.random() * 1000 + '"/></div></td>');
        o.push("</tr>");
        o.push('<tr class="bindAcctHidn" style="display:block; margin-top:10px; width:320px;">');
        o.push('<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">' + LS.mobileMsmCode + "</td>");
        o.push('<td><input type="text" style="width:80px;margin-left:5px;height: 25px;font-size: 12px;color: rgb(99,99,99);border: 1px solid #e7e7e7;text-indent:6px;" id="messageAuthCode" maxlength="6" /><div style="width:100px;height:25px;line-height:25px;float:right;text-align:center;margin-left:10px;margin-top:1px;" class="memberOtherSignup"><div title="' + LS.getMobileMsmCode + '" class="getMobileCdBtn" onclick="Site.getOtherSignMobileCode()">' + LS.getMobileMsmCode + "</div></div></td>");
        o.push("</tr>")
    }
    var j = "";
    if (f == 1) {
        j = LS.memberOtherLgnQQMsg
    } else {
        if (f == 2) {
            j = LS.memberOtherLgnSinaMsg
        } else {
            if (f == 3) {
                j = LS.memberOtherLgnWXMsg
            }
        }
    }
    o.push("</table>");
    o.push('<div id="oLoginBindMsg" style="text-align:center;display:none;padding:10px 0;font-family:MicrosoftYaHei Regular;font-size:12px;color:rgb(157,157,157);">( ' + j + ")</div>");
    o.push('<div id="oLoginTip" style="text-align:center;padding-top:6px;color:red;"></div>');
    o.push('<div style="height:30px;line-height:30px;text-align:center;padding:5px 0;">');
    o.push('<a hidefocus="true" class="formBtn" style="width:142px; height:35px; background:#1779ff; font-size:14px; " href="javascript:;" onclick=\'Site.memberOtherLoginSubmit(' + n + "," + f + "," + $.toJSON(m) + ");return false;'>" + LS.confirm + "</a>");
    o.push("</div></div>");
    o = o.join("");
    var p = {
        boxId: n,
        boxName: "qqLogin",
        title: LS.memberOtherLgnAddTitle,
        htmlContent: o,
        width: 380
    };
    Site.popupBox(p);
    $("#openId").val(a);
    $("#bindAcct,#bindAcctLabel").click(function () {
        if ($("#bindAcct").attr("class") == "checkBoxStyle_unCheck") {
            $("#bindAcct").attr("class", "checkBoxStyle_check");
            $("#oLoginTip").text("");
            $(".bindAcctHidn").hide();
            $("#oLoginBindMsg").show()
        } else {
            $("#bindAcct").attr("class", "checkBoxStyle_unCheck");
            $("#oLoginTip").text("");
            $(".bindAcctHidn").show();
            $("#oLoginBindMsg").hide()
        }
    })
};
Site.getOtherSignMobileCode = function () {
    var a = Site.checkOtherGetMobileCodeParam();
    if (a.checkResult == true) {
        $.ajax({
            type: "post",
            url: "ajax/member_h.jsp?cmd=getMobileCode",
            data: "mobile=" + a.info.mobile + "&mobileCt=" + a.info.mobileCt + "&validateCode=" + a.info.captcha,
            error: function () {
                Fai.ing(LS.getMobileCodeErrAf, true)
            }, success: function (b) {
                var c = jQuery.parseJSON(b);
                if (c.success) {
                    Fai.ing(LS.sendMobileCodeSuc, true);
                    Site.otherSignMobileCodeCountDown()
                } else {
                    Site.changeCaptchaImg($("#memberSignupCaptchaImg")[0]);
                    $("#memberSignupCaptcha").val("");
                    if (c.rt == -401) {
                        Fai.ing(LS.memberSignupRegisterCaptchaNotMatch, true)
                    } else {
                        if (c.rt == -2) {
                            Fai.ing(LS.argsError, true)
                        } else {
                            if (c.rt == 2) {
                                Fai.ing(LS.memberDialogSendMobileCodeErr, true)
                            } else {
                                if (c.rt == -4 || c.rt == 8) {
                                    Fai.ing(LS.getMobileOneMin, true)
                                } else {
                                    if (c.rt == -8) {
                                        Fai.ing(LS.getMobileHalfHour, true)
                                    } else {
                                        if (c.rt == 3) {
                                            Fai.ing(LS.memberDialogMobileMoneyErr, true)
                                        } else {
                                            if (c.rt == 9) {
                                                Fai.ing(LS.memberDialogSendMobileCodeLimit, true)
                                            } else {
                                                if (c.rt == 101) {
                                                    Fai.ing(LS.mobileSetErr, true)
                                                } else {
                                                    if (c.rt == -6) {
                                                        Fai.ing(LS.mobileHasSigned, true)
                                                    } else {
                                                        if (c.rt == 23) {
                                                            Fai.ing(LS.mobileNationTplErr, true)
                                                        } else {
                                                            Fai.ing(LS.getMobileRefresh, true)
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        })
    }
};
Site.checkOtherGetMobileCodeParam = function () {
    var c = {
        checkResult: false,
        info: {}
    };
    var a = $("#mobile").val();
    var b = $("#memberSignupCaptcha").val();
    if (!Fai.isNationMobile(a)) {
        Fai.ing(LS.mobileNumRegular, true);
        return c
    }
    if (b == null || b == "") {
        Fai.ing(LS.memberSignupRegisterCaptchaEmpty, true);
        return c
    }
    c.checkResult = true;
    c.info.mobile = a;
    if (a && a != null && $.trim(a) != "") {
        c.info.mobileCt = $("#mobileCt").val()
    } else {
        c.info.mobileCt = ""
    }
    c.info.captcha = b;
    return c
};
Site.otherSignMobileCodeCountDown = function () {
    var c = $(".getMobileCdBtn");
    var b = c.attr("cTime");
    var d = 60;
    if (!b || b == null) {
        b = 0
    } else {
        b = parseInt(b);
        d = 1800
    }
    b++;
    c.attr("cTime", b);
    c.attr("s_onclick", c.attr("onclick"));
    c.removeAttr("onclick");
    var a = setInterval(function () {
        d--;
        c.html(LS.reGetMsg + "(" + d + ")");
        if (d <= 0) {
            c.html(c.attr("title"));
            c.attr("onclick", c.attr("s_onclick"));
            clearInterval(a)
        }
    }, 1000)
};
Site.memberOtherLoginSubmit = function (a, j, l) {
    var e = $("#bindAcct").attr("class") == "checkBoxStyle_check";
    var r = "cmd=bindAcct";
    var d = $("#oLoginTip");
    var m = $.trim($("#acct").val());
    if (m == null || m == "") {
        d.html(LS.memberSignupRegisterAcctEmpty);
        $("#acct").focus();
        return
    }
    var h = $("#pwd").val();
    if (h == null || h == "") {
        d.html(LS.memberSignupRegisterPwdEmpty);
        $("#pwd").focus();
        return
    }
    if (h.length < 4) {
        d.html(LS.memberSignupRegisterPwdMinLength);
        $("#pwd").focus();
        return
    }
    var p = $("#repwd").val();
    if (h != p) {
        d.html(LS.memberSignupRegisterPwdNotMatch);
        $("#repwd").focus();
        return
    }
    var u = {};
    u.acct = m;
    u.pwd = $.md5(h);
    if (j == 1) {
        u.qqOpenId = $("#openId").val();
        u.headImgUrl = Site.qqListener.q_avator
    } else {
        if (j == 2) {
            u.sinaOpenId = $("#openId").val();
            u.headImgUrl = Site.wbListener.wb_avator
        } else {
            if (j == 3) {
                u.wxOpenId = $("#openId").val();
                u.headImgUrl = Site.wxListener.wx_avator
            }
        }
    } if (!e) {
        r = "cmd=otherAdd";
        var q = "";
        if ($("#remark").length > 0) {
            q = $("#remark").val();
            var v = $("#remark").attr("maxlength");
            if (q.length > v) {
                d.html(Fai.format(LS.memberSignupRegisterRemarkMaxLength, v));
                $("#remark").focus();
                return
            }
        }
        u.remark = q;
        var c = "",
            s = "",
            i = "",
            t = 0,
            n = "",
            g = 0;
        $(".userAddItem").each(function () {
            userAddItemID = $(this).attr("id");
            i = $(this).val();
            c = $(this).attr("name");
            n = $(this).attr("maxlength");
            u[userAddItemID] = i;
            if (i.length > n) {
                d.html(Fai.format(LS.memberSignupUserAddItemMaxLength, c, n));
                $(this).focus();
                t = 1;
                return false
            }
            if (userAddItemID == "phone" && i.length > 0) {
                if (!Fai.isPhone(i)) {
                    d.html(Fai.format(LS.memberSignupUserAddItemCorrect, c));
                    $(this).focus();
                    g = 1;
                    return false
                }
            }
            if (userAddItemID == "mobile" && i.length > 0) {
                if (!Fai.isNationMobile(i)) {
                    d.html(LS.mobileNumRegular);
                    g = 1;
                    return false
                } else {
                    u.mobileCt = $("#mobileCt").val()
                }
            }
        });
        if (g == 1) {
            return
        }
        if (t == 1) {
            return
        }
        if (typeof ($("#messageAuthCode").attr("maxlength")) != "undefined" && $("#messageAuthCode").attr("maxlength") != null) {
            var f = $("#memberSignupCaptcha").val();
            if (typeof (f) == "undefined" || f == null || f == "") {
                d.html(LS.memberInputCaptcha);
                return false
            }
            var o = $("#messageAuthCode").val();
            if (typeof (o) == "undefined" || o == null || o == "") {
                d.html(LS.inputMobileCode);
                return false
            }
            u.messageAuthCode = o
        }
        var k = 0;
        $("#popupBoxContent" + a + " .isCheckUAI").each(function () {
            userAddItemID = $(this).attr("id");
            i = $(this).val();
            c = $(this).attr("name");
            if (i == null || i == "") {
                d.html(Fai.format(LS.memberSignupUserAddItemIsEmpty, c));
                $(this).focus();
                k = 1;
                return false
            }
            if (userAddItemID == "email" && i.length > 0) {
                if (!Fai.isEmail(i)) {
                    d.html(Fai.format(LS.memberSignupUserAddItemCorrect, c));
                    $(this).focus();
                    k = 1;
                    return false
                }
            }
        });
        if (k == 1) {
            return
        }
    }
    d.html(LS.memberSignupRegisterIng);
    var b = Fai.getUrlParam(Fai.top.location.href, "url");
    if (!b) {
        b = "./index.jsp"
    }
    $.ajax({
        type: "post",
        url: "ajax/member_h.jsp?" + r,
        data: "info=" + Fai.encodeUrl($.toJSON(u)) + "&loginType=" + j,
        error: function () {
            d.html(LS.memberSignupRegisterError)
        }, success: function (K) {
            var B = jQuery.parseJSON(K);
            if (B.success) {
                $("#_TOKEN").attr("value") || $("title").after(K._TOKEN);
                var x = $.cookie("forThirtLoginBuy");
                if (typeof x != "undefined" && x != null && x != "") {
                    var J = $.parseJSON(x);
                    if (typeof J != "undefined" && J != null) {
                        if (J.where == "addCartItem") {
                            var E = {};
                            E.pid = J.pid;
                            E.mid = J.mid;
                            E.url = J.url;
                            E.opList = J.opList;
                            E.count = J.count;
                            E.doWhat = "add";
                            $.cookie("isNeedAddCartItem", $.toJSON(E));
                            Fai.top.location.reload()
                        } else {
                            if (J.where == "immeBuy") {
                                var E = {};
                                E.pid = J.pid;
                                E.mid = J.mid;
                                E.url = J.url;
                                E.opList = J.opList;
                                E.count = J.count;
                                E.doWhat = "buy";
                                $.cookie("isNeedAddCartItem", $.toJSON(E));
                                Fai.top.location.reload()
                            }
                        }
                    }
                    $.cookie("forThirtLoginBuy", null);
                    return
                }
                if (B.fromBind) {
                    Fai.top.$("#popupBg" + a).remove();
                    Fai.top.$("#popupBox" + a).remove();
                    Site.memberInactiveDialog(B.mail, B.memName)
                } else {
                    if (B.active) {
                        Fai.top.$("#popupBg" + a).remove();
                        Fai.top.$("#popupBox" + a).remove();
                        Site.memberActiveDialog(u.email, Fai.encodeUrl(u.acct), function () {
                            Fai.top.location.href = b;
                            Fai.top.event.returnValue = false
                        })
                    } else {
                        if (!!l.skipUrl) {
                            b = l.skipUrl
                        }
                        if (l.isPhotoSlide) {
                            var y = b.split(";");
                            for (var C = 0; C < y.length - 1; C++) {
                                var F = new RegExp("[^script:]");
                                if (F.test(b)) {
                                    var I = y[C].split(":"),
                                        w = I[1].indexOf("(") + 1,
                                        A = I[1].lastIndexOf(")"),
                                        G = Array.prototype.slice.call(I[1].substring(w, A).split(",")),
                                        z = I[1].substring(0, w - 1),
                                        H = [];
                                    Site.photoSlide.returnIndex = function () {
                                        delete Site.photoSlide.returnIndex;
                                        Fai.top.location.href = "/index.jsp"
                                    };
                                    var D = [{
                                        name: z,
                                        base: window
                                    }];
                                    H = D.concat(G);
                                    jzUtils.run.apply(window, H)
                                }
                            }
                        } else {
                            Fai.top.location.href = b
                        }
                    }
                }
            } else {
                if (B.rt == -601) {
                    d.html(LS.reGetMobileCode)
                } else {
                    if (B.rt == -8) {
                        d.html(LS.mobileHasSigned)
                    } else {
                        if (B.rt == -6) {
                            d.html(LS.memberSignupRegisterExisted)
                        } else {
                            if (B.rt == -4) {
                                d.html(LS.memberSignupRegisterLimit)
                            } else {
                                if (B.rt == -3) {
                                    d.html(LS.memberDialogNotFound)
                                } else {
                                    if (B.rt == Site.otherLoginErrno.acctAlreadyBind) {
                                        d.html(LS.memberOtherLgnAcctAlreadyBind)
                                    } else {
                                        d.html(LS.memberSignupRegisterError)
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    })
};
Site.otherLoginErrno = {
    acctAlreadyBind: 1
};
Site.memberFdPwdStepOne = function (c) {
    var d = parseInt(Math.random() * 10000);
    var a = $.trim($("#module" + c + " .memberAcct").val());
    var e = ["<div class='memberFdPwdStepOne' style='height:100%;'>", "<div style='width:80px; height:1px; font-size:0; background-color:#44a5ff; margin-left:26px; float:left;' class='J_titleBlueLine'></div>", "<div style='width:250px; height:1px; font-size:0; background-color:#dadada; margin-left:96px;'></div>", "<div class='itemLine' style='margin-top:8px;'>", "<div class='itemTitle' style='font-family:微软雅黑; font-size:14px; color:rgb(99,99,99); width:110px;'>", LS.memberDialogFwdAcct, "</div>", "<div class='itemCtrl'><input type='text' id='macct' name='macct' style='-webkit-border-radius: 0; -moz-border-radius: 0; border:1px solid #e7e7e7; width:168px;height:30px;' class='acctInput' value='", Fai.encodeHtml(a), "'/></div>", "</div>", "<div class='itemLine'>", "<div class='itemTitle'></div>", "<div class='itemCtrl'><a hidefocus='true' class='formBtn' style='background:#1779ff; margin-left:50px;' href='javascript:;' onclick='Site.memberFdPwdStepTwo(", d, ");return false;'>", LS.memberDialogNextStep, "</a></div>", "</div>", "</div>"];
    e = e.join("");
    var b = {
        boxId: d,
        title: "<span class='J_fidnPwFirstTitle'>" + LS.memberDialogFwdStepOneTitle + "</span>",
        htmlContent: e,
        width: 372,
        height: 176,
        boxName: "memberFdPwd"
    };
    Site.popupBox(b);
    setTimeout(function () {
        var g = Fai.top.$("#popupBox" + d);
        var f = g.find(".J_fidnPwFirstTitle").width();
        g.find(".J_titleBlueLine").css("width", (f + 10) + "px")
    }, 200)
};
Site.memberFdPwdStepTwo = function (b) {
    var a = $.trim($("#macct").val());
    if (a == "") {
        Fai.ing(LS.memberDialogPleaseEnterAcct, true);
        $("#macct").focus();
        return
    }
    $.ajax({
        type: "post",
        url: "ajax/member_h.jsp?cmd=getMAcctMail",
        data: "mAcct=" + Fai.encodeUrl(a),
        error: function () {
            Fai.ing(LS.systemError, false)
        }, success: function (q) {
            var q = jQuery.parseJSON(q);
            if (q.success) {
                if (!q.findPwByMobileOpen) {
                    if (q.noMail) {
                        var e = LS.memberDialogNoEmailMsg;
                        Site.showModifyPwContMsg(e, b);
                        return
                    }
                }
                if (!q.findPwByMailOpen) {
                    if (q.mobile == null || q.mobile == "null" || "" == q.mobile) {
                        var e = LS.memberDialogNoMobile;
                        Site.showModifyPwContMsg(e, b);
                        return
                    }
                }
                if (q.noMail && (q.mobile == "null" || "" == q.mobile)) {
                    var e = LS.memberDialogNoMailMobile;
                    Site.showModifyPwContMsg(e, b);
                    return
                }
                if (q.noMail) {
                    q.findPwByMailOpen = false
                }
                if (q.mobile == "null" || "" == q.mobile) {
                    q.findPwByMobileOpen = false
                }
                Fai.top.$("#popupBg" + b).remove();
                Fai.top.$("#popupBox" + b).remove();
                var k = parseInt(Math.random() * 10000);
                var p = "",
                    g = "",
                    f = "";
                var c = "";
                if (Fai.isIE6()) {
                    g = "position:relative;";
                    f = "top:5px;";
                    c = "height:355px"
                } else {
                    g = "position:absolute; top:30px;";
                    f = "top:-20px;";
                    p = "position:relative;margin-top:-20px;"
                }
                var m = ["<div class='memberFdPwdStepTwo' style='height:90%;", g, "'>", "<div class='J_btBlueLine' style='width:110px; height:1px; font-size:0; background-color:#44a5ff; margin-left:26px; position:absolute; z-index:1;", f, "'></div>", "<div style='width:460px; height:1px; font-size:0; background-color:#dadada; margin-left:26px; position:absolute; ", f, "'></div>"];
                var h = [];
                if (q.findPwByMailOpen) {
                    if (q.noMail) {
                        h = ["<div class='J_fdFwdByMailContent' style='" + c + "'>", "<div class='memberFdPwdTwoMsg' style='color:#636363;font-family:微软雅黑;font-size:14px;font-weight:bold;position:relative;top:90px;left:70px;width:360px;'>", LS.memberShowNoMail + "<br>" + LS.memberDialogConMg, "</div>", "<div class='memberDialogNoNumberTip'></div>", "<div style='margin-top:35px;'><div class='itemTitle2' style='height:34px; width:173px;'></div><a hidefocus='true' style='background: #1779ff; width:166px; height:35px;position:relative;top:170px;' class='formBtn' href='javascript:;' onclick='Site.closeFdPwdBoxById(", k, ");return false;'>", LS.confirm, " </a></div>", "</div>"]
                    } else {
                        h = ["<div class='J_fdFwdByMailContent' style='", p, "'>", "<div class='memberFdPwdTwoMsg'>", "<div class='itemStepLine'>", LS.memberDialogFwdOneStep, "<a href='javascript:;' hidefocus='true' style='color:#ff6d00' id='memSendPwdCode' onclick='Site.sendMemberEmailPwdCode();return false;'>", LS.memberDialogClickHere, "</a><span id='menWaitMsg'></span>", Fai.format(LS.memberDialogFwdOneStepThirdMsg, q.mail), "</div>", "<div class='itemStepLine'>", LS.memberDialogFwdTwoStep, "</div>", "<div class='itemStepLine'>", LS.memberDialogFwdThreeStep, "</div>", "</div>", "<div style='height:26px; margin-top:30px;'><div class='itemTitle2' style='padding-top:3px; width:124px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwdMailCode, "</div><input type='text' id='memEmailCode' style='width:284px; height:26px; border: 1px solid #e7e7e7;-webkit-border-radius: 0; -moz-border-radius: 0px;'/></div>", "<div style='display:none;'><div class='itemTitle2'></div><input type='text' id='memMailCodeSign' disabled/></div>", "<div style='display:none;'><div class='itemTitle2'></div><input type='text' id='macct2' value='", Fai.encodeHtml(a), "' disabled/></div>", "<div style='height:26px; margin-top:20px;'><div class='itemTitle2' style='padding-top:3px; width:124px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwd, "</div><input type='password' id='memPwd' style='width:284px; height:26px; border: 1px solid #e7e7e7;-webkit-border-radius: 0; -moz-border-radius: 0px;'/></div>", "<div style='height:26px; margin-top:20px;'><div class='itemTitle2' style='padding-top:3px; width:124px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwd2, "</div><input type='password' id='memPwd2' style='width:284px; height:26px; border: 1px solid #e7e7e7;-webkit-border-radius: 0; -moz-border-radius: 0px;'/></div>", "<div id='memPwdItemErrorWrap' style='display:none;padding:0 10px; margin-top:10px;text-align:center;'><span style='color:red;height:24px;line-height:24px;font-family:微软雅黑;font-size:14px;' id='memPwdItemError'></span></div>", "<div style='margin-top:35px;'><div class='itemTitle2' style='height:34px; width:173px;'></div><a hidefocus='true' style='background: #1779ff; width:166px; height:35px;' class='formBtn' href='javascript:;' onclick='Site.memberFdPwdStepLast(", k, ",", 1, ");return false;'>", LS.memberDialogNextStep, " </a></div>", "</div>"]
                    }
                }
                var j = [];
                if (q.findPwByMobileOpen) {
                    var o = "display:block;" + c;
                    if (q.findPwByMailOpen) {
                        o = "display:none;" + c
                    }
                    if (q.mobile == "null" || "" == q.mobile) {
                        j = ["<div class='J_fdFwdByMobileContent' style='" + o + "'>", "<div class='memberFdPwdTwoMsg' style ='color:#636363;font-family:微软雅黑;font-size:14px;font-weight:bold;position:relative;top:90px;left:70px;width:360px;'>", LS.memberShowNoMobile + "<br>" + LS.memberDialogConMg, "</div>", "<div class='memberDialogNoNumberTip'></div>", "<div style='margin-top:35px;'><div class='itemTitle2' style='height:34px; width:173px;'></div><a hidefocus='true' style='background: #1779ff; width:166px; height:35px;position:relative;top:170px;' class='formBtn' href='javascript:;' onclick='Site.closeFdPwdBoxById(", k, ");return false;'>", LS.confirm, " </a></div>", "</div>"]
                    } else {
                        var d = "";
                        if (!q.findPwByMailOpen || q.noMail) {
                            d = "<div style='display:none;'><div class='itemTitle2'></div><input type='text' id='macct2' value='" + Fai.encodeHtml(a) + "' disabled/></div>"
                        }
                        j = ["<div class='J_fdFwdByMobileContent' style='", o, p, "'>", "<div class='memberFdPwdTwoMsg'>", "<div class='itemStepLine'>", LS.memberDialogFwdOneStep, "<a href='javascript:;' hidefocus='true' style='color:#ff6d00' id='memSendMobilePwdCode' onclick='Site.sendMemberMobileCode();return false;'>", LS.memberDialogClickHere, "</a><span id='menMbWaitMsg'></span>", Fai.format(LS.memberDialogFwdByMobileOneStep, q.mobile), "</div>", "<div class='itemStepLine'>", LS.memberDialogFwdByMobileSendStep, "</div>", "<div class='itemStepLine'>", LS.memberDialogFwdThreeStep, "</div>", "</div>", "<div style='height:26px; margin-top:30px;'><div class='itemTitle2' style='padding-top:3px; width:124px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.mobileCodeTip + " : &nbsp;", "</div><input type='text' id='memMobileCode' maxlength='6' style='width:284px; height:26px; border: 1px solid #e7e7e7;-webkit-border-radius: 0; -moz-border-radius: 0px;'/></div>", "<div style='display:none;'><div class='itemTitle2'></div><input type='text' id='memMobileCodeSign' disabled/></div>", d, "<div style='height:26px; margin-top:20px;'><div class='itemTitle2' style='padding-top:3px; width:124px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwd, "</div><input type='password' id='memPwdMb' style='width:284px; height:26px; border: 1px solid #e7e7e7;-webkit-border-radius: 0; -moz-border-radius: 0px;'/></div>", "<div style='height:26px; margin-top:20px;'><div class='itemTitle2' style='padding-top:3px; width:124px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwd2, "</div><input type='password' id='memPwdMb2' style='width:284px; height:26px; border: 1px solid #e7e7e7;-webkit-border-radius: 0; -moz-border-radius: 0px;'/></div>", "<div id='memPwdMbItemErrorWrap' style='display:none;padding:0 10px; margin-top:10px;text-align:center;'><span style='color:red;height:24px;line-height:24px;font-family:微软雅黑;font-size:14px;' id='memPwdMbItemError'></span></div>", "<div style='margin-top:35px;'><div class='itemTitle2' style='height:34px; width:173px;'></div><a hidefocus='true' style='background: #1779ff; width:166px; height:35px;' class='formBtn' href='javascript:;' onclick='Site.memberFdPwdStepLast(", k, ",", 2, ");return false;'>", LS.memberDialogNextStep, " </a></div>", "</div>"]
                    }
                }
                Array.prototype.push.apply(m, h);
                Array.prototype.push.apply(m, j);
                m.push("</div>");
                m = m.join("");
                var i = "";
                if (q.findPwByMailOpen) {
                    i = "<span  class='f-findPwSetHoverBox J_findPwByMailBox' onclick='Site.changeFdPwdShowTab(1, " + k + "," + q.findPwByMailOpen + ")'>" + LS.memberDialogMailTitle + "</span>"
                }
                if (q.findPwByMobileOpen) {
                    var l = "";
                    if (q.findPwByMailOpen) {
                        l = "style='margin-left:30px;'"
                    }
                    i = i + "<span " + l + "  class='f-findPwSetHoverBox J_findPwByMobileBox' onclick='Site.changeFdPwdShowTab(2, " + k + "," + q.findPwByMailOpen + ")'>" + LS.memberDialogMobileTitle + "</span>"
                }
                var n = {
                    boxId: k,
                    title: i,
                    htmlContent: m,
                    width: 510,
                    height: 437,
                    boxName: "memberFdPwd"
                };
                Site.popupBox(n);
                setTimeout(function () {
                    Site.changeFdPwdShowTab(1, k, q.findPwByMailOpen)
                }, 200)
            } else {
                if (q.notFound) {
                    Fai.ing(LS.memberDialogNotFound, true)
                } else {
                    Fai.ing(LS.argsError, true)
                }
            }
        }
    })
};
Site.memberFdPwdStepLast = function (b, a) {
    if (typeof (a) != "undefined" && a == 2) {
        Site.memberFdPwdByMobileStepLast(b)
    } else {
        Site.memberFdPwdByMailStepLast(b)
    }
};
Site.sendMemberMobileCode = function () {
    if ($("#memSendMobilePwdCode").data("_disable")) {
        return
    }
    var a = $("#macct2").val();
    if (a == "") {
        Fai.ing(LS.memberDialogPleaseEnterAcct, true);
        return
    }
    $.ajax({
        type: "post",
        url: "ajax/member_h.jsp?cmd=sendMemberPwdMobileCode",
        data: "memName=" + Fai.encodeUrl(a),
        error: function () {
            $("#memSendMobilePwdCode").data("_disable", false);
            Fai.ing(LS.systemError, false)
        }, success: function (b) {
            $("#memSendMobilePwdCode").data("_disable", false);
            var b = jQuery.parseJSON(b);
            if (b.success) {
                $("#memMobileCodeSign").val(b.mobileCodeSign);
                $("#memPwdMbItemErrorWrap").show();
                $("#memPwdMbItemError").html(LS.memberDialogSendMobileCode);
                $("#memSendMobilePwdCode").hide();
                $("#menMbWaitMsg").show();
                $("#menMbWaitMsg").text(Fai.format(LS.memberDialogCountDown, 60));
                $("#menMbWaitMsg").data("_time", 60);
                Site.memberMbDisableTimeout("memSendMobilePwdCode")
            } else {
                if (b.argErr) {
                    $("#memPwdMbItemErrorWrap").show();
                    $("#memPwdMbItemError").html(LS.memberDialogSendMobileClose)
                } else {
                    if (b.apiKeyNotFound) {
                        $("#memPwdMbItemErrorWrap").show();
                        $("#memPwdMbItemError").html(LS.memberDialogYunPianErr)
                    } else {
                        if (b.tplNotFound) {
                            $("#memPwdMbItemErrorWrap").show();
                            $("#memPwdMbItemError").html(LS.memberDialogMobileTplErr)
                        } else {
                            if (b.notFound) {
                                Fai.ing(LS.memberDialogNotFound, true)
                            } else {
                                if (b.limitOne) {
                                    Fai.ing(LS.getMobileOneMin, true)
                                } else {
                                    if (b.limitTwo) {
                                        Fai.ing(LS.getMobileHalfHour, true)
                                    } else {
                                        if (b.noMoney) {
                                            Fai.ing(LS.memberDialogMobileMoneyErr, true)
                                        } else {
                                            if (b.mobileErr) {
                                                Fai.ing(LS.memberDialogSendMobileCodeErr, true)
                                            } else {
                                                if (b.sendLimit) {
                                                    Fai.ing(LS.memberDialogSendMobileCodeLimit, true)
                                                } else {
                                                    if (b.mobileSysErr) {
                                                        Fai.ing(LS.memberDialogSendMobileSysErr, true)
                                                    } else {
                                                        if (b.tplNationErr) {
                                                            Fai.ing(LS.mobileNationTplErr, true)
                                                        } else {
                                                            if (b.systemErr) {
                                                                Fai.ing(LS.systemError, true)
                                                            } else {
                                                                Fai.ing(LS.argsError, true)
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    });
    $("#memSendMobilePwdCode").data("_disable", true)
};
Site.memberFdPwdByMobileStepLast = function (f) {
    var b = $("#macct2").val();
    if (b == "") {
        Fai.ing(LS.memberDialogPleaseEnterAcct, true);
        return
    }
    var g;
    var d = $("#memMobileCode").val();
    var c = $("#memMobileCodeSign").val();
    var a = $("#memPwdMb").val();
    var h = $("#memPwdMb2").val();
    if (!c) {
        g = LS.memberDialogSendMobileFirst
    } else {
        if (!d) {
            g = LS.inputMobileCode
        } else {
            if (d.length != 6) {
                g = LS.mobileNumRegular
            } else {
                if (!a) {
                    g = LS.memberDialogPleaseEnterPwd
                } else {
                    if (!h) {
                        g = LS.memberDialogPleaseEnterPwd2
                    } else {
                        if (a != h) {
                            g = LS.memberDialogPwdDifToPwd2
                        } else {
                            if (a.length < 4 || a.length > 20) {
                                g = Fai.format(LS.memberDialogPwdLimit, 4, 20)
                            }
                        }
                    }
                }
            }
        }
    } if (g) {
        $("#memPwdMbItemErrorWrap").show();
        $("#memPwdMbItemError").html(g);
        return
    }
    $("#memPwdMbItemErrorWrap").show();
    $("#memPwdMbItemError").html(LS.memberDialogResetting);
    var e = "memMobileCode=" + Fai.encodeUrl(d) + "&memMobileCodeSign=" + Fai.encodeUrl(c) + "&memPwd=" + $.md5(a) + "&memName=" + Fai.encodeUrl(b);
    $.ajax({
        type: "post",
        url: "ajax/member_h.jsp?cmd=setMemberPwdByMobileCode",
        data: e,
        error: function () {
            Fai.ing(LS.systemError, false)
        }, success: function (i) {
            var i = jQuery.parseJSON(i);
            if (i.success) {
                Fai.top.$("#popupBg" + f).remove();
                Fai.top.$("#popupBox" + f).remove();
                var k = ["<div style='padding-left:60px;'>", "<div class='alertWarn memberFdPwdLastMsg' style='margin-top:17px;'>", LS.memberDialogReSetPwdSucess, "</div>", "<div style='padding:10px 0 10px 30px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwdAcct, i.macct, "</div>", "<a href='javascript:void(0);' class='formBtn popupBClose' style='margin-left:45px; margin-top:16px; background:#1779ff; width:166px; height:35px;'>", LS.login, "</a>", "</div>"];
                k = k.join("");
                var j = {
                    htmlContent: k,
                    width: 372,
                    height: 176
                };
                Site.popupBox(j)
            } else {
                if (i.rt == 1) {
                    $("#memMobileCodeSign").val("");
                    $("#memPwdMbItemErrorWrap").show();
                    $("#memPwdMbItemError").html(LS.reGetMobileCode)
                } else {
                    if (i.notFound) {
                        Fai.ing(LS.memberDialogNotFound, true)
                    } else {
                        Fai.ing(LS.argsError, true)
                    }
                }
            }
        }
    })
};
Site.sendMemberEmailPwdCode = function () {
    if ($("#memSendMobilePwdCode").data("_disable")) {
        return
    }
    var a = $("#macct2").val();
    if (a == "") {
        Fai.ing(LS.memberDialogPleaseEnterAcct, true);
        return
    }
    $.ajax({
        type: "post",
        url: "ajax/mail_h.jsp?cmd=sendMemberPwdEmail",
        data: "memName=" + Fai.encodeUrl(a),
        error: function () {
            $("#memSendPwdCode").data("_disable", false);
            Fai.ing(LS.systemError, false)
        }, success: function (b) {
            $("#memSendPwdCode").data("_disable", false);
            var b = jQuery.parseJSON(b);
            if (b.success) {
                $("#memMailCodeSign").val(b.emailCodeSign);
                $("#memPwdItemErrorWrap").show();
                $("#memPwdItemError").html(LS.memberDialogSendMailSucess);
                $("#memSendPwdCode").hide();
                $("#menWaitMsg").show();
                $("#menWaitMsg").text(Fai.format(LS.memberDialogCountDown, 60));
                $("#menWaitMsg").data("_time", 60);
                Site.memberDisableTimeout("memSendPwdCode", 1)
            } else {
                if (b.aliasNotF) {
                    $("#memPwdItemErrorWrap").show();
                    $("#memPwdItemError").html(LS.memberDialogAliasNotFound)
                } else {
                    if (b.notFound) {
                        Fai.ing(LS.memberDialogNotFound, true)
                    } else {
                        Fai.ing(LS.argsError, true)
                    }
                }
            }
        }
    });
    $("#memSendPwdCode").data("_disable", true)
};
Site.memberFdPwdByMailStepLast = function (f) {
    var d = $("#macct2").val();
    if (d == "") {
        Fai.ing(LS.memberDialogPleaseEnterAcct, true);
        return
    }
    var g;
    var b = $("#memEmailCode").val();
    var c = $("#memMailCodeSign").val();
    var a = $("#memPwd").val();
    var h = $("#memPwd2").val();
    if (!c) {
        g = LS.memberDialogPleaseSendCode
    } else {
        if (!b) {
            g = LS.memberDialogPleaseEnterCode
        } else {
            if (!a) {
                g = LS.memberDialogPleaseEnterPwd
            } else {
                if (!h) {
                    g = LS.memberDialogPleaseEnterPwd2
                } else {
                    if (a != h) {
                        g = LS.memberDialogPwdDifToPwd2
                    } else {
                        if (a.length < 4 || a.length > 20) {
                            g = Fai.format(LS.memberDialogPwdLimit, 4, 20)
                        }
                    }
                }
            }
        }
    } if (g) {
        $("#memPwdItemErrorWrap").show();
        $("#memPwdItemError").html(g);
        return
    }
    $("#memPwdItemErrorWrap").show();
    $("#memPwdItemError").html(LS.memberDialogResetting);
    var e = "memEmailCode=" + Fai.encodeUrl(b) + "&memMailCodeSign=" + Fai.encodeUrl(c) + "&memPwd=" + $.md5(a) + "&memName=" + Fai.encodeUrl(d);
    $.ajax({
        type: "post",
        url: "ajax/member_h.jsp?cmd=setMemberPwdByCode",
        data: e,
        error: function () {
            Fai.ing(LS.systemError, false)
        }, success: function (i) {
            var i = jQuery.parseJSON(i);
            if (i.success) {
                Fai.top.$("#popupBg" + f).remove();
                Fai.top.$("#popupBox" + f).remove();
                var k = ["<div style='padding-left:60px;'>", "<div class='alertWarn memberFdPwdLastMsg' style='margin-top:17px;'>", LS.memberDialogReSetPwdSucess, "</div>", "<div style='padding:10px 0 10px 30px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwdAcct, i.macct, "</div>", "<a href='javascript:void(0);' class='formBtn popupBClose' style='margin-left:45px; margin-top:16px; background:#1779ff; width:166px; height:35px;'>", LS.login, "</a>", "</div>"];
                k = k.join("");
                var j = {
                    htmlContent: k,
                    width: 372,
                    height: 176
                };
                Site.popupBox(j)
            } else {
                if (i.rt == 1) {
                    $("#memMailCodeSign").val("");
                    $("#memPwdItemErrorWrap").show();
                    $("#memPwdItemError").html(LS.memberDialogCodeMailFailure)
                } else {
                    if (i.notFound) {
                        Fai.ing(LS.memberDialogNotFound, true)
                    } else {
                        Fai.ing(LS.argsError, true)
                    }
                }
            }
        }
    })
};
Site.memberInactiveDialog = function (a, c) {
    var d = ["<div class='formPanel'>", "<div class='itemLine2 reActWarn'>", LS.memberDialogAcctInactive, "</div>", "<div class='itemLine2'>", Fai.format(LS.memberDialogShowLoginMail, a), "</div>", "<div class='itemLine2 reActWarn'>", LS.memberDialogNoRevSureEmail, "</div>", "<div class='itemLine2' style='padding-top:0;padding-bottom:0;'>", LS.memberDialogPleaseConfirmYourMail, "<input type='text' id='memEmail' class='memEmailAlterInput' value='", a, "'/><a id='memSendMail' hidefocus='true' onclick='Site.memberSendActiveMail(\"", Fai.encodeHtml(c), "\");' href='javascript:void(0);'>", LS.memberDialogClickReSendMsg, "</a><span id='menWaitMsg'></span></div>", "<div class='itemLine2' id='showOKorErrorMsg' style='color:red;'></div>", "</div>"];
    d = d.join("");
    var b = {
        title: LS.memberDialogTips,
        htmlContent: d,
        width: 465,
        height: 226
    };
    Site.popupBox(b)
};
Site.memberActiveDialog = function (a, c, e) {
    var d = ["<div class='formPanel'>", "<div class='itemLine2 reActWarn'>", LS.memberDialogRegSuccess, "</div>", "<div class='itemLine2'>", Fai.format(LS.memberDialogShowLoginMail, a), "</div>", "<div class='itemLine2 reActWarn'>", LS.memberDialogNoRevSureEmail, "</div>", "<div class='itemLine2' style='padding-top:0;padding-bottom:0;'>", LS.memberDialogPleaseConfirmYourMail, "<input type='text' id='memEmail' class='memEmailAlterInput' value='", a, "'/><a id='memSendMail' hidefocus='true' onclick='Site.memberSendActiveMail(\"", Fai.encodeHtml(c), "\");' href='javascript:void(0);'>", LS.memberDialogClickReSendMsg, "</a><span id='menWaitMsg'></span></div>", "<div class='itemLine2' id='showOKorErrorMsg' style='color:red;'></div>", "</div>"];
    d = d.join("");
    var b = {
        title: LS.memberDialogActiveAcctTitle,
        htmlContent: d,
        width: 465,
        height: 226,
        closeFunc: e
    };
    Site.popupBox(b);
    $.ajax({
        type: "post",
        url: "ajax/mail_h.jsp?cmd=sendMemberActiveMail",
        data: "memName=" + Fai.encodeUrl(c) + "&memEmail=" + a,
        error: function () {
            Fai.ing(LS.systemError, false)
        }, success: function (f) {}
    })
};
Site.memberSendActiveMail = function (b) {
    if ($("#memSendMail").data("_disable")) {
        return
    }
    var a = $.trim($("#memEmail").val());
    if (!Fai.isEmail(a)) {
        Fai.ing(LS.memberDialogPleaseSureMail, true);
        return
    }
    $.ajax({
        type: "post",
        url: "ajax/mail_h.jsp?cmd=sendMemberActiveMail",
        data: "memName=" + Fai.encodeUrl(b) + "&memEmail=" + a,
        error: function () {
            $("#memSendMail").data("_disable", false);
            Fai.ing(LS.systemError, false)
        }, success: function (c) {
            $("#memSendMail").data("_disable", false);
            var c = jQuery.parseJSON(c);
            if (c.success) {
                Fai.top.$("#showOKorErrorMsg").html(LS.memberDialogOKorErrorMsg);
                Fai.top.$("#memSendMail").hide();
                Fai.top.$("#menWaitMsg").show();
                Fai.top.$("#menWaitMsg").text(Fai.format(LS.memberDialogAfterTimeToResend, 60));
                Fai.top.$("#menWaitMsg").data("_time", 60);
                Site.memberDisableTimeout("memSendMail", 0)
            } else {
                if (c.AliaNotF) {
                    $("#showOKorErrorMsg").html(LS.memberDialogAliasNotFound);
                    $("#showOKorErrorMsg").show()
                }
            }
        }
    });
    $("#memSendMail").data("_disable", true)
};
Site.memberDisableTimeout = function (d, b) {
    var c = Fai.top.$("#menWaitMsg");
    var a = parseInt(c.data("_time"));
    if (a > 0) {
        a--;
        setTimeout(function () {
            var e = LS.memberDialogAfterTimeToResend;
            if (b == 1) {
                e = LS.memberDialogCountDown
            }
            c.text(Fai.format(e, a));
            Site.memberDisableTimeout(d, b)
        }, 1000);
        $("#menWaitMsg").data("_time", a)
    } else {
        Fai.top.$("#" + d).show();
        c.text("").hide()
    }
};
Site.memberMbDisableTimeout = function (c) {
    var b = Fai.top.$("#menMbWaitMsg");
    var a = parseInt(b.data("_time"));
    if (a > 0) {
        a--;
        setTimeout(function () {
            var d = LS.memberDialogCountDown;
            b.text(Fai.format(d, a));
            Site.memberMbDisableTimeout(c)
        }, 1000);
        $("#menMbWaitMsg").data("_time", a)
    } else {
        Fai.top.$("#" + c).show();
        b.text("").hide()
    }
};
Site.closeFdPwdBoxById = function (a) {
    Fai.top.$("#popupBg" + a).remove();
    Fai.top.$("#popupBox" + a).remove()
};
Site.showModifyPwContMsg = function (d, b) {
    var c = ["<div>", "<div style='padding:8px 26px;text-align:center;height:60px;'>", d, "</div>", "<a href='javascript:void(0);' class='formBtn popupBClose' style='margin-left:128px;'>", LS.confirm, "</a>", "</div>"];
    c = c.join("");
    var a = {
        htmlContent: c,
        width: 378,
        height: 120
    };
    Site.popupBox(a);
    Fai.top.$("#popupBg" + b).remove();
    Fai.top.$("#popupBox" + b).remove()
};
Site.changeFdPwdShowTab = function (b, c, e) {
    if (!e) {
        b = 2
    }
    if (b == 1) {
        var d = Fai.top.$("#popupBox" + c);
        var a = d.find(".J_findPwByMailBox").width();
        d.find(".J_findPwByMailBox").css("color", "#44A5FF");
        d.find(".J_findPwByMobileBox").css("color", "");
        if (typeof (a) != "undefined" && a > 0) {
            d.find(".J_btBlueLine").css({
                width: ((a + 10) + "px"),
                "margin-left": "26px"
            })
        }
        d.find(".J_fdFwdByMobileContent").css("display", "none");
        d.find(".J_fdFwdByMailContent").css({
            display: "block"
        })
    } else {
        if (b == 2) {
            var d = Fai.top.$("#popupBox" + c);
            d.find(".J_findPwByMobileBox").css("color", "#44A5FF");
            d.find(".J_findPwByMailBox").css("color", "");
            var a = d.find(".J_findPwByMobileBox").width();
            var f = d.find(".J_findPwByMailBox").width();
            if (typeof (a) != "undefined" && a > 0) {
                if (f <= 0) {
                    f = f + 26
                } else {
                    f = f + 56
                }
                d.find(".J_btBlueLine").css({
                    width: ((a + 15) + "px"),
                    "margin-left": (f + "px")
                })
            }
            d.find(".J_fdFwdByMailContent").css("display", "none");
            d.find(".J_fdFwdByMobileContent").css({
                display: "block"
            })
        }
    }
};
Site.initModuleBdMap = function (b, e, a, d) {
    var k = Fai.top.$("#mapframe" + e);
    var j = k.attr("width");
    var i = k.attr("height");
    var l = "<iframe id='mapframe" + e + "' name='mapframe' frameborder='0' scrolling='no' height='" + i + "' width='" + j + "' src='about:blank'></iframe>";
    k.replaceWith(l);
    var c = Fai.top.$("#mapframe" + e).parent().width();
    var m = a + c + "&ran=" + Math.random();
    Site.initIframeLoading(b, e, m, d);
    $("#refreshChlid" + e).css("padding-top", "40%");
    var g = Fai.top.$("#module" + e);
    var h = g.width() / 2 - 30;
    var f = '<div class="coverDiv" style="position:absolute;width:66px;height:38px;left:' + h + 'px;top:0;z-index:9028;"></div>';
    g.append(f)
};
Site.initModuleSiteSearch = function (f) {
    var g = $("#module" + f),
        c = $(g.find("input.g_itext")[0]),
        e = $(g.find(".g_btn")[0]);
    c.keypress(function (h) {
        if (h.keyCode == 13 && e.length > 0) {
            e[0].click()
        }
    });
    var d = $("#module" + f);
    var b = d.find(".searchBox").attr("class");
    var a = d.find(".recommandKeyBox");
    if (b == "searchBox") {
        a.css("vertical-align", "7px")
    } else {
        a.css("vertical-align", "11px")
    }
};
Site.searchInSite = function (d) {
    var c = $("#module" + d + " input.g_itext"),
        b = c.val(),
        a = c.attr("_nSL");
    if (c.attr("_searching")) {
        return
    }
    c.attr("_searching", true);
    Fai.top.location.href = "sr.jsp?skeyword=" + Fai.encodeUrl($.trim(b)) + "&nSL=" + a
};
Site.searchInSiteByKey = function (e, f, d) {
    var c = $("#module" + e + " input.g_itext"),
        a = c.attr("_nSL"),
        b = "sr.jsp?skeyword=" + Fai.encodeUrl($.trim(f)) + "&nSL=" + a;
    if (c.attr("_searching")) {
        return
    }
    c.attr("_searching", true);
    if (Fai.top._manageMode) {
        Site.redirectUrl(b, "_self", d, 1, 0)
    } else {
        Fai.top.location.href = b
    }
};
Site.msgBoardShowMsg = function (a) {
    $("#msgAdd .msgTips").show();
    $("#msgAdd .msgTips").html(a)
};
Site.msgBoardAddMsg = function (m, b, k) {
    if (_siteDemo) {
        Fai.ing("当前为“模板网站”，请先“复制网站”再进行留言。");
        return
    }
    $msgBoard = $("#msgBoard" + b);
    var a = $msgBoard.find("#reqName").val();
    var h = $msgBoard.find("#reqPhone").val();
    var i = $msgBoard.find("#reqEmail").val();
    var g = $msgBoard.find("#reqContent").val();
    var l = $msgBoard.find("#msgBoardCaptcha").val();
    var c = $msgBoard.find(".msgTips").show();
    var f = 0;
    $msgBoard.find("input.msg_isMust").each(function () {
        var o = $(this).attr("id");
        var p = $(this).attr("name");
        var n = $(this).val();
        if (n == "" || n == null) {
            c.html(Fai.format(LS.msgBoardInputIsEmpty, Fai.encodeHtml(p)));
            $msgBoard.find("#" + o).focus();
            f = 1;
            return false
        }
        if (o == "reqPhone" && !Fai.isPhone(n)) {
            c.html(Fai.format(LS.msgBoardInputCorrect, Fai.encodeHtml(p)));
            $msgBoard.find("#" + o).focus();
            f = 1;
            return false
        }
        if (o == "reqEmail" && !Fai.isEmail(n)) {
            c.html(Fai.format(LS.msgBoardInputCorrect, Fai.encodeHtml(p)));
            $msgBoard.find("#" + o).focus();
            f = 1;
            return false
        }
    });
    if (f == 1) {
        return false
    }
    var e = 0;
    $msgBoard.find("input.msg_ipt").each(function () {
        var o = $(this).attr("id");
        var q = $(this).attr("name");
        var n = $(this).val();
        var p = $(this).attr("maxlength");
        if (n.length > p) {
            c.html(Fai.format(LS.msgBoardInputMaxLength, Fai.encodeHtml(q), p));
            $msgBoard.find("#" + o).focus();
            e = 1;
            return false
        }
        if (o == "reqPhone" && n.length && !Fai.isPhone(n)) {
            c.html(Fai.format(LS.msgBoardInputCorrect, Fai.encodeHtml(q)));
            $msgBoard.find("#" + o).focus();
            e = 1;
            return false
        }
        if (o == "reqEmail" && n.length && !Fai.isEmail(n)) {
            c.html(Fai.format(LS.msgBoardInputCorrect, Fai.encodeHtml(q)));
            $msgBoard.find("#" + o).focus();
            e = 1;
            return false
        }
    });
    if (e == 1) {
        return false
    }
    if (g == null || g == "") {
        Site.msgBoardShowMsg(LS.msgBoardInputContent);
        $msgBoard.find("#reqContent").focus();
        return
    }
    var d = 10000;
    if (g.length > d) {
        Site.msgBoardShowMsg(Fai.format(LS.msgBoardInputContent2, d));
        $msgBoard.find("#reqContent").focus();
        return
    }
    if (l == null || l == "") {
        Site.msgBoardShowMsg(LS.msgBoardInputValidateCode);
        $msgBoard.find("#msgBoardCaptcha").focus();
        return
    }
    Site.msgBoardShowMsg(LS.msgBoardDoing);
    var j = {};
    $msgBoard.find("input.msg_ipt").each(function () {
        var o = $(this).attr("id");
        var n = $(this).val();
        j[o] = $.trim(n)
    });
    j.reqContent = g;
    j.memberId = (k === undefined) ? 0 : k;
    $.ajax({
        type: "post",
        url: "ajax/msgBoard_h.jsp",
        data: "cmd=add&msgBdData=" + Fai.encodeUrl($.toJSON(j)) + "&validateCode=" + Fai.encodeUrl(l),
        error: function () {
            var o = Site.getDialogContent(true, Fai.format(LS.systemError));
            var n = {
                htmlContent: o,
                width: 205,
                height: 78
            };
            Site.popupBox(n);
            setTimeout(function () {
                Fai.top.location.reload()
            }, 3000)
        }, success: function (n) {
            n = jQuery.parseJSON(n);
            if (n.success) {
                var p = Site.getDialogContent(true, Fai.format(LS.msgBoardSendOkAutoOpen));
                var o = {
                    htmlContent: p,
                    width: 205,
                    height: 78
                };
                Site.popupBox(o);
                setTimeout(function () {
                    Fai.top.location.reload()
                }, 3000);
                $msgBoard.find('#msgAdd input[type="text"]').val("");
                $msgBoard.find("#reqContent").val("")
            } else {
                if (n.errno == 1) {
                    Site.msgBoardShowMsg(LS.captchaError)
                } else {
                    if (n.errno == 2) {
                        Site.msgBoardShowMsg(LS.argsError)
                    } else {
                        if (n.errno == -4) {
                            Site.msgBoardShowMsg(LS.msgBoardAddCountLimit)
                        } else {
                            Site.msgBoardShowMsg(LS.systemError)
                        }
                    }
                }
            }
            Site.changeMsgBoardValidateCode()
        }
    })
};
Site.changeMsgBoardValidateCode = function () {
    $("#msgBoardCaptchaImg").attr("src", "validateCode.jsp?" + Math.random() * 1000)
};
Site.setStarSelect = function (a) {
    _getBackgroundColor = function (c) {
        var d = "";
        while (c[0].tagName.toLowerCase() != "html") {
            d = c.css("background-color");
            if (d != "rgba(0, 0, 0, 0)" && d != "transparent") {
                break
            }
            c = c.parent()
        }
        return d
    };
    var b = "";
    if ($(".submitStarList").length > 0) {
        b = _getBackgroundColor($(".submitStarList"))
    }
    if (!b) {
        b = "#FFF"
    }
    $("body").on({
        click: function () {
            a = $(this).index();
            if (a < 5) {
                var c = $(this).parent();
                c.attr("star", a + 1);
                _changeSelectStar(a, c)
            }
        }, hover: function () {
            var d = $(this).index();
            if (d < 5) {
                var c = $(this).parent();
                _changeSelectStar(d, c)
            }
        }, mouseleave: function (d) {
            if (a < 5) {
                var c = $(this).parent();
                _changeSelectStar(a, c)
            }
        }
    }, ".submitStarList li");
    if ($(".statisticCommSwap").length != 0) {
        $(".statisticBox .percent span").css({
            "border-color": "transparent " + b + " transparent transparent"
        })
    }
    _changeSelectStar = function (e, g) {
        var h = $(".submitStarList").hasClass("fk-pdStyle5") || false;
        for (var f = 0; f < 5; f++) {
            var c = g.find("li").eq(f);
            if (f < e + 1) {
                if (e < 2) {
                    c.removeClass("select_more");
                    c.addClass("select_less")
                } else {
                    c.removeClass("select_less");
                    c.addClass("select_more")
                }
            } else {
                c.removeClass("select_more");
                c.removeClass("select_less")
            }
        }
        var j = "";
        var d = "";
        if (e == 0) {
            j = LS.badComment;
            d = "#b7b6b6"
        } else {
            if (e == 1) {
                j = LS.moderateComment;
                d = "#b7b6b6"
            } else {
                if (e == 2) {
                    j = LS.moderateComment;
                    d = "#ffb600"
                } else {
                    j = LS.highComment;
                    d = "#ffb600"
                }
            }
        } if (e == -1) {
            g.find("li:last").removeClass("scoreTipHover")
        } else {
            if (!h) {
                g.find("li:last").css({
                    color: d
                })
            }
            g.find("li:last").html("<em></em><span></span>" + (e + 1) + LS.score + j);
            g.find("li:last").addClass("scoreTipHover")
        } if (!h) {
            g.find("li:last em").css({
                "border-color": "transparent " + d + " transparent transparent"
            })
        }
        g.find("li:last span").css({
            "border-color": "transparent " + b + " transparent transparent"
        })
    }
};
Site.msgSubmitShowMsg = function (b, a) {
    $("#msgSubmit" + a).find("#msgSAdd .msgSTips").show();
    $("#msgSubmit" + a).find("#msgSAdd .msgSTips").html(b)
};
Site.msgSubmitAddMsg = function (m, b, k) {
    $msgSubmit = $("#msgSubmit" + b);
    var a = $.trim($msgSubmit.find("#reqName").val());
    var h = $msgSubmit.find("#reqPhone").val();
    var i = $msgSubmit.find("#reqEmail").val();
    var g = $msgSubmit.find("#reqContent").val();
    var l = $msgSubmit.find("#msgSubmitCaptcha").val();
    var c = $msgSubmit.find(".msgSTips").show();
    var f = 0;
    $msgSubmit.find("input.msgSubmit_isMust").each(function () {
        var o = $(this).attr("id");
        var p = $(this).attr("name");
        var n = $(this).val();
        if (n == "" || n == null) {
            c.html(Fai.format(LS.msgBoardInputIsEmpty, Fai.encodeHtml(p)));
            $msgSubmit.find("#" + o).focus();
            f = 1;
            return false
        }
        if (o == "reqPhone" && !Fai.isPhone(n)) {
            c.html(Fai.format(LS.msgBoardInputCorrect, Fai.encodeHtml(p)));
            $msgSubmit.find("#" + o).focus();
            f = 1;
            return false
        }
        if (o == "reqEmail" && !Fai.isEmail(n)) {
            c.html(Fai.format(LS.msgBoardInputCorrect, Fai.encodeHtml(p)));
            $msgSubmit.find("#" + o).focus();
            f = 1;
            return false
        }
    });
    if (f == 1) {
        return false
    }
    var e = 0;
    $msgSubmit.find("input.msgSubmit_ipt").each(function () {
        var o = $(this).attr("id");
        var q = $(this).attr("name");
        var n = $(this).val();
        var p = $(this).attr("maxlength");
        if (n.length > p) {
            c.html(Fai.format(LS.msgBoardInputMaxLength, Fai.encodeHtml(q), p));
            $msgSubmit.find("#" + o).focus();
            e = 1;
            return false
        }
        if (o == "reqPhone" && n.length && !Fai.isPhone(n)) {
            c.html(Fai.format(LS.msgBoardInputCorrect, Fai.encodeHtml(q)));
            $msgSubmit.find("#" + o).focus();
            e = 1;
            return false
        }
        if (o == "reqEmail" && n.length && !Fai.isEmail(n)) {
            c.html(Fai.format(LS.msgBoardInputCorrect, Fai.encodeHtml(q)));
            $msgSubmit.find("#" + o).focus();
            e = 1;
            return false
        }
    });
    if (e == 1) {
        return false
    }
    if (g == null || g == "") {
        Site.msgSubmitShowMsg(LS.msgBoardInputContent, b);
        $msgSubmit.find("#reqContent").focus();
        return
    }
    var d = 10000;
    if (g.length > d) {
        Site.msgSubmitShowMsg(Fai.format(LS.msgBoardInputContent2, d), b);
        $msgSubmit.find("#reqContent").focus();
        return
    }
    if (l == null || l == "") {
        Site.msgSubmitShowMsg(LS.msgBoardInputValidateCode, b);
        $msgSubmit.find("#msgSubmitCaptcha").focus();
        return
    }
    Site.msgSubmitShowMsg(LS.msgBoardDoing, b);
    var j = {};
    $msgSubmit.find("input.msgSubmit_ipt").each(function () {
        var o = $(this).attr("id");
        var n = $(this).val();
        j[o] = $.trim(n)
    });
    j.reqContent = g;
    j.memberId = (k === undefined) ? 0 : k;
    $.ajax({
        type: "post",
        url: "ajax/msgBoard_h.jsp",
        data: "cmd=add&msgBdData=" + Fai.encodeUrl($.toJSON(j)) + "&validateCode=" + Fai.encodeUrl(l) + "&vCodeId=" + Fai.encodeUrl(b),
        error: function () {
            var o = Site.getDialogContent(true, Fai.format(LS.systemError));
            var n = {
                htmlContent: o,
                width: 205,
                height: 78
            };
            Site.popupBox(n);
            setTimeout(function () {
                Fai.top.location.reload()
            }, 3000)
        }, success: function (n) {
            n = jQuery.parseJSON(n);
            if (n.success) {
                var p = Site.getDialogContent(true, Fai.format(LS.msgBoardSendOkAutoOpen));
                var o = {
                    htmlContent: p,
                    width: 205,
                    height: 78
                };
                Site.popupBox(o);
                setTimeout(function () {
                    Fai.top.location.reload()
                }, 3000);
                $msgSubmit.find('#msgSAdd input[type="text"]').val("");
                $msgSubmit.find("#reqContent").val("")
            } else {
                if (n.errno == 1) {
                    Site.msgSubmitShowMsg(LS.captchaError, b)
                } else {
                    if (n.errno == 2) {
                        Site.msgSubmitShowMsg(LS.argsError, b)
                    } else {
                        if (n.errno == -4) {
                            Site.msgSubmitShowMsg(LS.msgBoardAddCountLimit, b)
                        } else {
                            Site.msgSubmitShowMsg(LS.systemError, b)
                        }
                    }
                }
            }
            Site.changeMsgSubmitValidateCode(b)
        }
    })
};
Site.changeMsgSubmitValidateCode = function (a) {
    $("#msgSubmit" + a).find("#msgSubmitCaptchaImg").attr("src", "validateCode.jsp?" + Math.random() * 1000 + "&vCodeId=" + a)
};
Site.fixMsgSubmitStyle = function (f) {
    var g = parseInt(Fai.top.$("#module" + f + "").find("#msgSubmit" + f + "").find(".msgSAdd_N").width());
    var b = parseInt(Fai.top.$("#module" + f + "").find("#msgSubmit" + f + "").find(".msgSAdd_N").find(".msgPanel_N").css("margin-right"));
    var a = parseInt(Fai.top.$("#module" + f + "").find("#msgSubmit" + f + "").find(".msgSAdd_N").find(".msgPanel_N").width());
    var d = a + b;
    if (Fai.top.$("#module" + f + "").width() <= 400) {
        if (Fai.top.$("#module" + f + "").width() < 150) {
            Fai.top.$("#module" + f + "").find(".msgSubmit_overToPoint").css("width", "60px");
            Fai.top.$("#module" + f + "").find(".msgSubmit_PropBoard").css("width", "56px");
            Fai.top.$("#module" + f + "").find(".paramResizeHandleRight").css("left", "56px")
        }
        Fai.top.$("#module" + f + "").find("#msgSubmit" + f + "").css({
            "margin-left": "6px"
        });
        Fai.top.$("#module" + f + "").find(".msgSAdd").find(".g_itext").css({
            width: "106px"
        });
        Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").css({
            "line-height": "70px",
            height: "70px"
        });
        Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
            width: "104px",
            height: "64px"
        });
        Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddButton_N").find(".msgSubmit_overToPoint").css({
            width: "5px"
        });
        Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgCaptcha_N").find(".validateCode_N").css({
            "float": "none",
            "margin-left": "50px"
        });
        Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgCaptcha_N").find("#msgSubmitCaptchaImg").css({
            "margin-bottom": "15px",
            "margin-top": "10px"
        });
        if (Fai.top.$("#module" + f + "").width() > 300) {
            Fai.top.$("#module" + f + "").find(".msgSAdd").find(".m_ibutton").css({
                "float": "left"
            })
        }
    }
    var c;
    var e = Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").length;
    if (Fai.top.$("#module" + f + "").width() > 400) {
        if (d <= g && g < 2 * d) {
            Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                width: "194px"
            });
            Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                width: "194px"
            })
        } else {
            if (2 * d <= g && g < 3 * d) {
                if (e > 2) {
                    c = a + b + 194;
                    Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                        width: "194px"
                    });
                    Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                        width: c + "px"
                    })
                } else {
                    if (e == 2) {
                        c = a + b + 194;
                        Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                            width: "194px"
                        });
                        Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                            width: c + "px"
                        })
                    } else {
                        if (e == 1) {
                            c = 194;
                            Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                                width: "194px"
                            });
                            Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                                width: c + "px"
                            })
                        }
                    }
                }
            } else {
                if (g >= 3 * d) {
                    if (g >= 3 * (b + a)) {
                        if (e > 2) {
                            c = 2 * (a + b) + 194;
                            Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                                width: "194px"
                            });
                            Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                                width: c + "px"
                            })
                        } else {
                            if (e == 2) {
                                c = a + b + 194;
                                Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                                    width: "194px"
                                });
                                Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                                    width: c + "px"
                                })
                            } else {
                                if (e == 1) {
                                    c = 194;
                                    Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                                        width: "194px"
                                    });
                                    Fai.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                                        width: c + "px"
                                    })
                                }
                            }
                        }
                    }
                }
            }
        } if (Fai.top.$("#module" + f + "").width() > 300 && Fai.top.$("#module" + f + "").width() < 650) {
            Fai.top.$("#module" + f + "").find(".msgSAdd").find(".m_ibutton").css({
                "float": "left"
            })
        }
    }
};
Site.fixMsgBoardStyle = function (g) {
    var h = parseInt(Fai.top.$("#module" + g + "").find("#msgBoard" + g + "").find(".msgSAdd_N").width());
    var b = parseInt(Fai.top.$("#module" + g + "").find("#msgBoard" + g + "").find(".msgSAdd_N").find(".msgPanel_N").css("margin-right"));
    var a = parseInt(Fai.top.$("#module" + g + "").find("#msgBoard" + g + "").find(".msgSAdd_N").find(".msgPanel_N").width());
    var e = a + b;
    var c = 280 + b;
    if (Fai.top.$("#module" + g + "").width() <= 400) {
        Fai.top.$("#module" + g + "").find("#msgBoard" + g + "").css({
            "margin-left": "6px"
        });
        Fai.top.$("#module" + g + "").find(".msgSAdd").find(".g_itext").css({
            width: "106px"
        });
        Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
            width: "104px",
            height: "64px"
        });
        Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").css({
            "line-height": "70px",
            height: "70px"
        });
        Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgBoardPanel").find(".msgTitle_N").find(".msgUser").css({
            "margin-left": "35px",
            "text-align": "center"
        });
        Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgBoardPanel").find(".msgContent").find(".userMsg").css({
            "margin-left": "16px",
            "margin-top": "16px"
        });
        Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgBoardPanel").find(".user_level_name").css({
            position: "relative"
        });
        Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddButton_N").find(".msgSubmit_overToPoint").css({
            width: "5px"
        });
        Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgCaptcha_N").find(".validateCode_N").css({
            "float": "none",
            "margin-left": "50px"
        });
        Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgCaptcha_N").find("#msgBoardCaptchaImg").css({
            "margin-bottom": "15px",
            "margin-top": "10px"
        });
        Fai.top.$("#module" + g + "").find("#pagenation" + g + "").find("div").each(function (i, j) {
            if ($(this).hasClass("pagePrev_N") || $(this).hasClass("pageNext_N") || $(this).hasClass("J_pageArrow_N")) {
                $(this).show()
            } else {
                $(this).hide()
            }
        })
    } else {
        Fai.top.$("#module" + g + "").find("#pagenation" + g + "").find("div").each(function (i, j) {
            $(this).show()
        })
    }
    var d;
    var f = Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").length;
    if (Fai.top.$("#module" + g + "").width() > 400) {
        if (e <= h && h < 2 * e) {
            Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                width: "246px"
            });
            Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                width: "244px"
            })
        } else {
            if (2 * e <= h && h < 3 * c) {
                if (f > 2) {
                    d = a + b + 246;
                    Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                        width: "246px"
                    });
                    Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                        width: d + "px"
                    })
                } else {
                    if (f == 2) {
                        d = a + b + 246;
                        Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                            width: "246px"
                        });
                        Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                            width: d + "px"
                        })
                    } else {
                        if (f == 1) {
                            d = 246;
                            Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                                width: "246px"
                            });
                            Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                                width: d + "px"
                            })
                        }
                    }
                }
            } else {
                if (h > 3 * c) {
                    if (h >= 3 * (b + a)) {
                        if (f > 2) {
                            d = 2 * (a + b) + 194;
                            Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                                width: "194px"
                            });
                            Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                                width: d + "px"
                            })
                        } else {
                            if (f == 2) {
                                d = a + b + 194;
                                Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                                    width: "194px"
                                });
                                Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                                    width: d + "px"
                                })
                            } else {
                                if (f == 1) {
                                    d = 246;
                                    Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                                        width: "246px"
                                    });
                                    Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                                        width: d + "px"
                                    })
                                }
                            }
                        }
                    } else {
                        if (f >= 2) {
                            d = a + b + 194;
                            Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                                width: "194px"
                            });
                            Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                                width: d + "px"
                            })
                        } else {
                            if (f == 1) {
                                d = 246;
                                Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({
                                    width: "246px"
                                });
                                Fai.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
                                    width: d + "px"
                                })
                            }
                        }
                    }
                }
            }
        }
    }
};
Site.jumpToPage = function (d, b, a) {
    var c = parseInt($(Fai.top.$("#module" + d + "").find(".pagenation_N").find(".jumpPageDiv").find("#jumpPage")).val());
    if (isNaN(c)) {
        c = 1
    }
    if (c > b) {
        c = parseInt(b)
    }
    if (c == 0) {
        c = 1
    }
    window.location.href = "" + a + "?m" + d + "pageno=" + c + "#module" + d + ""
};
Site.msgSubmitCusResize = function (b) {
    var a = "#msgSubmit" + b;
    Site.msgComCusResize(b, a)
};
Site.msgBoardCusResize = function (b) {
    var a = "#msgBoard" + b;
    Site.msgComCusResize(b, a)
};
Site.msgComCusResize = function (g, d) {
    var c = $(d).find(".msgSAdd");
    var f = c.find(".msgSubmit_PropBoard");
    var b = f.width();
    f.attr("class", "msgSubmit_PropBoard paramResize");
    c.find(".msgFlag_N").find(".msgSubmit_overToPoint").attr("class", "msgSubmit_overToPoint");
    var a = c.find(".paramResize");
    a.hover(function () {
        a.css("cursor", "auto")
    });
    h();
    var e = c.find(".paramResize,.u-paramResize-w,.u-paramResize-e");
    e.hover(function () {
        a.css({
            "border-left": "1px dashed #2b73ba",
            "border-right": "1px dashed #2b73ba",
            "border-top": "1px solid #2b73ba",
            "border-bottom": "1px solid #2b73ba"
        })
    }, function () {
        a.css("border", "1px dashed transparent")
    });

    function h() {
        if (a.length < 1) {
            return
        }
        a.each(function () {
            var o = $(this),
                i = Fai.isIE8() ? $(document) : $(window),
                q, n, k = $(this).parent(),
                m, l = {};
            if (o.hasClass("paramResize")) {
                o.before("<div class='u-paramResize-w' style='float:left' title='可拖动调节宽度'><div style='position:absolute;width:5px;height:" + $(o).height() + "px;z-index:999'></div></div>");
                o.after("<div class='u-paramResize-e' style='float:left' title='可拖动调节宽度'><div class='paramResizeHandleRight' style='position:absolute;top:0px;left:" + b + "px;width:5px;height:" + $(o).height() + "px;z-index:999'></div></div>");
                $(".u-paramResize-e,.u-paramResize-w").css("cursor", "e-resize")
            }
            q = $(o).prev();
            n = $(o).next();
            if (!n.hasClass("u-paramResize-e") || !q.hasClass("u-paramResize-w")) {
                return
            }
            q.off("mousedown.fi").on("mousedown.fi", r);
            n.off("mousedown.fi").on("mousedown.fi", r);

            function r(s) {
                s = s || window.event;
                l.x = s.pageX;
                if ($(this).hasClass("u-paramResize-w")) {
                    l.dir = "w";
                    l.ptb = parseInt(k.css("width"))
                } else {
                    if ($(this).hasClass("u-paramResize-e")) {
                        l.dir = "e";
                        l.ptb = parseInt(k.css("width"))
                    }
                }
                m = $("#dockTip").show().css({
                    left: "-1000px;",
                    top: "-1000px"
                });
                i.off("mousemove.fi").on("mousemove.fi", j);
                i.off("mouseup.fi").on("mouseup.fi", p);
                s.preventDefault()
            }

            function j(v) {
                $("body").css("cursor", "e-resize");
                a.css({
                    "border-left": "1px dashed #2b73ba",
                    "border-right": "1px dashed #2b73ba",
                    "border-top": "1px solid #2b73ba",
                    "border-bottom": "1px solid #2b73ba"
                });
                v = v || window.event;
                var w = {
                        x: v.pageX
                    },
                    t, z, s = 1,
                    u = 200,
                    y = "",
                    x;
                if (l.dir == "w") {
                    t = l.x - w.x;
                    z = l.ptb + t;
                    z = z > s ? z : s;
                    z = z > u ? u : z;
                    z = Math.round(z);
                    y = "宽度:"
                } else {
                    if (l.dir == "e") {
                        t = w.x - l.x;
                        z = l.ptb + t;
                        z = z > s ? z : s;
                        z = z > u ? u : z;
                        z = Math.round(z);
                        y = "宽度:"
                    }
                } if (d.indexOf("msgSubmit") > -1) {
                    x = 280 - 60 + z;
                    f.parent().css({
                        width: z + "px"
                    });
                    f.css({
                        width: (z - 4) + "px"
                    });
                    c.find(".paramResizeHandleRight").css("left", (z - 4) + "px");
                    c.find(".msgPanel_N").css({
                        width: x + "px"
                    });
                    Site.fixMsgSubmitStyle(g)
                } else {
                    if (d.indexOf("msgBoard") > -1) {
                        x = 330 - 60 + z;
                        f.parent().css({
                            width: z + "px"
                        });
                        f.css({
                            width: (z - 4) + "px"
                        });
                        c.find(".paramResizeHandleRight").css("left", (z - 4) + "px");
                        c.find(".msgPanel_N").css({
                            width: x + "px"
                        });
                        Site.fixMsgBoardStyle(g)
                    }
                }
                m.html(y + z).css({
                    left: v.pageX - 28,
                    top: v.pageY - 40
                });
                v.preventDefault()
            }

            function p(t) {
                $("body").css("cursor", "");
                a.css("border", "1px dashed transparent");
                t = t || window.event;
                l.dir = "";
                i.off("mousemove.fi");
                i.off("mouseup.fi");
                m.hide();
                var s = Site.getModuleAttr(g);
                s.data.changed = true;
                Site.styleChanged();
                l = {};
                t.preventDefault()
            }
        })
    }
};
Site.desMallBuyCount = function (c) {
    var a = $("#cartbuyCount" + c).val();
    var b = 1;
    if (Fai.isInteger(a)) {
        b = parseInt(a)
    }
    b--;
    if ($("#limitAmountDiv").text() == "") {
        if (b < 2) {
            b = 1;
            $("#buyCountDes" + c).addClass("disableMallJian");
            $("#buyCountInc" + c).removeClass("disableMallJia")
        } else {
            if (b > 9999998) {
                b = 9999999;
                $("#buyCountDes" + c).removeClass("disableMallJian");
                $("#buyCountInc" + c).addClass("disableMallJia")
            } else {
                $("#buyCountDes" + c).removeClass("disableMallJian");
                $("#buyCountInc" + c).removeClass("disableMallJia")
            }
        }
    }
    $("#cartbuyCount" + c).val(b)
};
Site.incMallBuyCount = function (c) {
    var a = $("#cartbuyCount" + c).val();
    var b = 0;
    if (Fai.isInteger(a)) {
        b = parseInt(a)
    }
    b++;
    if ($("#limitAmountDiv").text() == "") {
        if (b < 2) {
            b = 1;
            $("#buyCountDes" + c).addClass("disableMallJian");
            $("#buyCountInc" + c).removeClass("disableMallJia")
        } else {
            if (b > 9999998) {
                b = 9999999;
                $("#buyCountDes" + c).removeClass("disableMallJian");
                $("#buyCountInc" + c).addClass("disableMallJia")
            } else {
                $("#buyCountDes" + c).removeClass("disableMallJian");
                $("#buyCountInc" + c).removeClass("disableMallJia")
            }
        }
    }
    $("#cartbuyCount" + c).val(b)
};
Site.mallBuyCountChange = function (c) {
    if ($("#limitAmountDiv").text() == "") {
        var a = $("#cartbuyCount" + c).val();
        var b = 1;
        if (Fai.isInteger(a)) {
            b = parseInt(a)
        }
        if (b < 2) {
            b = 1;
            $("#buyCountDes" + c).addClass("disableMallJian");
            $("#buyCountInc" + c).removeClass("disableMallJia")
        } else {
            if (b > 9999998) {
                b = 9999999;
                $("#buyCountDes" + c).removeClass("disableMallJian");
                $("#buyCountInc" + c).addClass("disableMallJia")
            } else {
                $("#buyCountDes" + c).removeClass("disableMallJian");
                $("#buyCountInc" + c).removeClass("disableMallJia")
            }
        }
        $("#cartbuyCount" + c).val(b)
    }
};
Site.mallBuy = function (e, b, g) {
    var d = "mbuy.jsp?id=" + e;
    if (b && b != "undefined") {
        var c = $("#module" + b);
        var h = c.find(".optionMsg");
        if (Fai.isNull(c)) {
            return
        }
        var i = true;
        var f = [];
        d += "&fromDetail=true";
        c.find(".optionItemWrap").each(function () {
            var k = $(this).parent().parent().find(".propName").text();
            if ($(this).find(".optionItemHover").length == 1) {
                var l = $(this).attr("data");
                var j = $(this).find(".optionItemHover").attr("data");
                var m = {};
                m.name = l;
                m.value = parseInt(j);
                f.push(m);
                h.hide()
            } else {
                h.show();
                if (b === "PdSlide") {
                    var o = $(this).parent().parent().position();
                    var n = $(".fk-slideForProduct .f-propListContent");
                    n.scrollTop(o.top)
                }
                h.html(Fai.format(LS.mallCartChoiceItemError, Fai.encodeHtml(k)));
                i = false;
                return false
            }
        });
        if (!i) {
            return false
        }
        if (f.length > 0) {
            d += "&optionList=" + Fai.encodeUrl($.toJSON(f))
        }
    }
    if (g && g.length > 0) {
        d += "&" + g
    }
    var a = window.open(d + "&ram=" + Math.random(), "mallcart");
    a.focus();
    if (Fai.isIE()) {
        window.event.cancelBubble = true;
        window.event.returnValue = false
    } else {
        event.stopPropagation();
        event.preventDefault()
    }
};
Site.MallAjaxErrno = {
    ok: 0,
    error: 1,
    manager: 2,
    login: 3,
    idNotExist: 4,
    orderSettle: 5,
    noMall: 6,
    toProductDetail: 7,
    orderNotExist: 8,
    networkError: 9,
    outOfMallAmount: 10,
    mallAmountZero: 11,
    mallOptionStop: 12,
    OutOfAllowAmount: 13,
    notAdded: 14,
    payDomainError: 15,
    couponNotFound: 16,
    couponUnavail: 17,
    couponOverTime: 18
};
Site.getDialogHtml = function (r, g) {
    if (!Fai.isInteger(r.rt)) {
        r.rt = 1
    }
    var h = parseInt(r.rt),
        d = 0,
        m = 0,
        k = "",
        e = "about:blant;",
        p = LS.goToMallCartStr,
        a = LS.continueShopping,
        b = LS.resultFailMsg,
        n = "resultFailIcon";
    if (!g) {
        g = "javascript:;"
    }
    var i = "mcart.jsp";
    var q = "target='_blank'";
    var f;
    switch (h) {
        case Site.MallAjaxErrno.ok:
            n = "suc-ico";
            b = LS.resultSuccessMsg;
            if (typeof (r.totalPrice) != "undefined") {
                d = r.totalPrice
            }
            if (typeof (r.totalAmount) != "undefined") {
                m = r.totalAmount
            }
            if (typeof (r.choiceCurrencyVal) != "undefiend") {
                k = r.choiceCurrencyVal
            }
            var j = k + d;
            f = Fai.format(LS.cartDetailInfo, m, j);
            break;
        case Site.MallAjaxErrno.error:
            Site.getTopWindow().location.href = "mcart.jsp?msg=2";
            return false;
            break;
        case Site.MallAjaxErrno.manager:
            n = "resultFailIcon";
            b = "购买失败。";
            var p = "去购物车结算";
            var a = "继续购物";
            f = "当前为管理状态，购买失败。";
            r.success = true;
            break;
        case Site.MallAjaxErrno.login:
            return false;
            break;
        case Site.MallAjaxErrno.idNotExist:
            Site.getTopWindow().location.href = "mcart.jsp?msg=1";
            return false;
            break;
        case Site.MallAjaxErrno.orderSettle:
            Site.getTopWindow().location.href = "mcart.jsp";
            return false;
            break;
        case Site.MallAjaxErrno.noMall:
            Site.getTopWindow().location.href = "mcart.jsp";
            return false;
            break;
        case Site.MallAjaxErrno.toProductDetail:
            Site.getTopWindow().location.href = "pd.jsp?id=" + productId + "&ram=" + Math.random();
            return false;
            break;
        case Site.MallAjaxErrno.orderNotExist:
            Site.getTopWindow().location.href = "mcart.jsp?msg=1";
            return false;
            break;
        case Site.MallAjaxErrno.networkError:
            f = LS.networkError;
            break;
        case Site.MallAjaxErrno.outOfMallAmount:
            f = LS.mallAmountOverFlow;
            break;
        case Site.MallAjaxErrno.mallAmountZero:
            f = LS.mallAmountZero;
            break;
        case Site.MallAjaxErrno.mallOptionStop:
            f = LS.mallOptionStop;
            break;
        case Site.MallAjaxErrno.OutOfAllowAmount:
            f = LS.allowAmountOverFlow;
            break;
        case Site.MallAjaxErrno.notAdded:
            f = LS.mallProductNotAdded;
            break;
        default:
            Site.getTopWindow().location.href.reload();
            return false
    }
    var l = [];
    if (r.success) {
        l = ["<div class='mallCartOperate'>", "<a id='settleAccountsBtn' class='formBtn' " + q + " href='" + i + "' style='width:108px; height:35px; background:#ff6d00;font-size:14px;'>" + p + "</a>", "<a id='dialogContinueShopping' href='javascript:;' class='shopping popupBClose' style='font-size:14px; color:#636363 !important;'>", a, "</a>", "</div>"]
    }
    var c = "";
    if (Site.getTopWindow()._lcid === 1033) {
        c = "letter-spacing:0px;"
    }
    var o = ["<table style='width:100%;height:100%;'>", "<tr>", "<td style='width:50px;'></td>", "<td style='width:280px;'>", "<div class='" + n + " addItemTextTips' style='font-size:14px; color:#636363' >" + b + "</div>", "<div class='cartInfoContent' style='" + c + "' >" + f + "</div>", l.join(""), "</td>", "<td style='width:50px;'></td>", "</tr>", "</table>"];
    if (h == Site.MallAjaxErrno.mallAmountZero || h == Site.MallAjaxErrno.OutOfAllowAmount || h == Site.MallAjaxErrno.outOfMallAmount) {
        o[0] = "<table style='width:100%;height:100%;margin-top:10px;'>"
    }
    return o.join("")
};
var loginDialogCache = [];
loginDialogCache.html = "";
loginDialogCache.qqOpen = false;
loginDialogCache.sinaOpen = false;
loginDialogCache.wxOpen = false;
loginDialogCache.qqAppId = "";
loginDialogCache.sinaAppKey = "";
loginDialogCache.wxAppKey = "";
loginDialogCache.qqReUri = "";
loginDialogCache.sinaReUri = "";
loginDialogCache.wxReUri = "";
loginDialogCache.displayList;
loginDialogCache.noRemark;
loginDialogCache.REMARK_MAXLEN;
loginDialogCache.extendParam;
var loginDialogLock = false;
Site.createLoginDialog = function (C, e, q, E, g, A) {
    var m, v, w, B, F, z, n, b;
    var l, H, s;
    var o = "";
    var k = "";
    var d = "";
    var G = "";
    var j = "";
    var t = "";
    var i = "";
    var x;
    var f;
    var y;
    var u;
    var r = "";
    if (loginDialogLock) {
        return
    }
    loginDialogLock = true;
    if (loginDialogCache != null && loginDialogCache.html != null && loginDialogCache.html != "") {
        var J = parseInt(Math.random() * 10000);
        var p = {
            boxId: J,
            boxName: "loginDialog",
            title: "",
            htmlContent: loginDialogCache.html,
            width: 380
        };
        r = Site.popupBox(p);
        if (loginDialogCache.qqOpen || loginDialogCache.sinaOpen || loginDialogCache.wxOpen) {
            var a = {};
            a.pid = C;
            a.mid = e;
            a.url = q;
            a.opList = g;
            a.count = A;
            a.where = E;
            $.cookie("forThirtLoginBuy", $.toJSON(a))
        }
        if (loginDialogCache.qqOpen) {
            Site.initQQLogin(loginDialogCache.qqAppId, loginDialogCache.qqReUri, loginDialogCache.displayList, loginDialogCache.noRemark, loginDialogCache.REMARK_MAXLEN, "ld_qqLogin", loginDialogCache.extendParam)
        }
        if (loginDialogCache.sinaOpen) {
            Site.initWBLogin(loginDialogCache.sinaAppKey, loginDialogCache.sinaReUri, loginDialogCache.displayList, loginDialogCache.noRemark, loginDialogCache.REMARK_MAXLEN, "ld_wbLogin", loginDialogCache.extendParam)
        }
        if (loginDialogCache.wxOpen) {
            Site.initWXLogin(loginDialogCache.wxAppKey, loginDialogCache.wxReUri, loginDialogCache.displayList, loginDialogCache.noRemark, loginDialogCache.REMARK_MAXLEN, "ld_wxLogin", loginDialogCache.extendParam)
        }
        c();
        loginDialogLock = false
    } else {
        $.ajax({
            type: "post",
            url: "ajax/site_h.jsp?cmd=getMemberLoginMsg",
            error: function () {
                Fai.ing("获取登录信息错误,请稍后再试.")
            }, success: function (K) {
                var K = jQuery.parseJSON(K);
                if (K.success) {
                    var P = K.msg;
                    v = P.findPwdOpen;
                    m = P.autoLogin;
                    w = P.qqOpen;
                    B = P.sinaOpen;
                    F = P.wxOpen;
                    z = P.noRemark;
                    n = P.signUpbyMobile;
                    b = P.proOpen;
                    l = P.qqReUrlId;
                    H = P.sinaReUrlId;
                    s = P.wxReUrlId;
                    o = P.qqReUri;
                    k = P.sinaReUri;
                    d = P.wxReUri;
                    G = P.qqAppId;
                    j = P.sinaAppKey;
                    t = P.wxAppKey;
                    i = P.registerHtml;
                    x = $.toJSON(P.displayList);
                    f = $.toJSON(P.extendParam);
                    y = P.REMARK_MAXLEN;
                    u = P.ACCT_MAXLEN;
                    loginDialogCache.qqOpen = w;
                    loginDialogCache.sinaOpen = B;
                    loginDialogCache.wxOpen = F;
                    loginDialogCache.qqAppId = G;
                    loginDialogCache.sinaAppKey = j;
                    loginDialogCache.wxAppKey = t;
                    loginDialogCache.qqReUri = o;
                    loginDialogCache.sinaReUri = k;
                    loginDialogCache.wxReUri = d;
                    loginDialogCache.displayList = x;
                    loginDialogCache.noRemark = z;
                    loginDialogCache.REMARK_MAXLEN = y;
                    loginDialogCache.extendParam = f;
                    var Q = [];
                    Q = h(Q, m, v, "");
                    Q = D(Q, w, B, F);
                    Q = I(Q, n, b);
                    var N = Q.join("");
                    loginDialogCache.html = N;
                    var O = parseInt(Math.random() * 10000);
                    var L = {
                        boxId: O,
                        boxName: "loginDialog",
                        title: "",
                        htmlContent: N,
                        width: 380
                    };
                    r = Site.popupBox(L);
                    if (w || B || F) {
                        var M = {};
                        M.pid = C;
                        M.mid = e;
                        M.url = q;
                        M.opList = g;
                        M.count = A;
                        M.where = E;
                        $.cookie("forThirtLoginBuy", $.toJSON(M))
                    }
                    if (w) {
                        Site.initQQLogin(G, o, x, z, y, "ld_qqLogin", f)
                    }
                    if (B) {
                        Site.initWBLogin(j, k, x, z, y, "ld_wbLogin", f)
                    }
                    if (F) {
                        Site.initWXLogin(t, d, x, z, y, "ld_wxLogin", f)
                    }
                    c();
                    loginDialogLock = false
                }
            }
        })
    }

    function h(N, L, M, K) {
        N.push("<div id='J_memberLoginDialogPanel' class='memberLoginDialogPanel'>\n");
        N.push("<div class='loginAndRegister'>\n");
        N.push("<div class='login loginDialogSelected'>" + LS.memberLogin + "</div>\n");
        N.push("<div class='register'>" + LS.memberReg + "</div>\n");
        N.push("</div>\n");
        N.push("<div class='splitLine'></div>\n");
        N.push("<div class='memberLoginDialogItemList'>\n");
        N.push("<div id='memberLoginAcct' class='J_memberLoginItem memberLoginDialogItem'>\n");
        N.push("<input id='memberAcct' class='generateInput memberAcctInput' type='text' value='" + ($.cookie("loginMemberAcct") == null ? "" : $.cookie("loginMemberAcct")) + "' placeholder='" + LS.loginDialogAcct + "' />\n");
        N.push("</div>\n");
        N.push("<div id='memberLoginPwd' class='J_memberLoginItem memberLoginDialogItem itemSpace'>\n");
        N.push("<input id='memberPwd' class='generateInput memberPwdInput' type='password' placeholder='" + LS.loginDialogPsw + "' onkeydown='if (Fai.isEnterKey(event)){$(\"#J_memberLoginDialogPanel .J_loginButton\").click();}'/>\n");
        N.push("</div>\n");
        N.push("<div class='J_memberLoginItem memberCaptcha memberLoginDialogItem'>\n");
        N.push("<input id='memberLoginCaptcha' class='memberCaptchaInput' type='text' placeholder='" + LS.loginDialogCaptcha + "' />\n");
        N.push("<img alt='' id='memberCaptchaImg' class='memberCaptchaImg' onclick='Site.changeCaptchaImg(this)' title='" + LS.msgBoradChageValidateCode + "'/>\n");
        N.push("</div>\n");
        if (L || M) {
            N.push("<div class='memberLoginDialogItem'>\n");
            if (L) {
                if (M) {
                    N.push("<div class='autoLogin'>\n");
                    N.push("<input type='checkbox' value='1' id='memberLoginDialogAutoLogin' /><label for='memberLoginDialogAutoLogin'>" + LS.loginDialogRememberMe + "</label><label class='special' for='memberLoginDialogAutoLogin'>" + LS.loginDialogAutoLogin + "</label>\n")
                } else {
                    N.push("<div class='autoLogin autoLogin_noFindPwd g_specialClass'>\n");
                    N.push("<input type='checkbox' value='1' id='memberLoginDialogAutoLogin' /><label for='memberLoginDialogAutoLogin'>" + LS.loginDialogRememberMe + "</label><label for='memberLoginDialogAutoLogin'>" + LS.loginDialogAutoLogin + "</label>\n")
                }
                N.push("</div>\n")
            }
            N.push("<div class='signup'>\n");
            if (M) {
                N.push("<a hidefocus='true' href='javascript:;' onclick='Site.memberFdPwdStepOne(0);return false;'>" + LS.loginDialogFindPsw + "?</a>\n")
            }
            N.push("</div>\n");
            N.push("</div>\n")
        }
        N.push("<div class='memberLoginDialogItem memberLoginDialogItem_Button'>\n");
        N.push("<div class=' J_loginButton loginButton loginButton'>\n");
        N.push("<div class='left'></div>\n");
        N.push("<div class='middle'>" + LS.memberLogin + "</div>\n");
        N.push("<div class='right'></div>\n");
        N.push("</div>\n");
        N.push("</div>\n");
        N.push("</div>\n");
        return N
    }

    function D(N, L, K, M) {
        if (L || K || M) {
            N.push("<div class='thirdPartyLogin'>\n");
            N.push("<div class='thirdPartyTips'>" + LS.loginDialogUseThird + "</div>\n");
            N.push("<div class='thirdPartyGroup'>\n");
            if (L) {
                N.push("<a id='ld_qqLogin' href='javascript:;' hidefocus='true' class='thirdPartyItem qq'></a>")
            }
            if (K) {
                N.push("<a id='ld_wbLogin' href='javascript:;' hidefocus='true' class='thirdPartyItem sina'></a>")
            }
            if (M) {
                N.push("<a id='ld_wxLogin' href='javascript:;' hidefocus='true' class='thirdPartyItem wx'></a>")
            }
            N.push("</div>\n");
            N.push("</div>\n")
        }
        N.push("</div>\n");
        return N
    }

    function I(M, L, K) {
        M.push("<div id='J_memberRegisterDialogPanel' class='memberRegisterDialogPanel' style='display:none;'>\n");
        M.push("<div class='loginAndRegister'>\n");
        M.push("<div class='login'>" + LS.memberLogin + "</div>\n");
        M.push("<div class='register loginDialogSelected'>" + LS.memberReg + "</div>\n");
        M.push("</div>\n");
        M.push("<div class='splitLine'></div>\n");
        M.push("<div class='memberSignupContent' cellpadding='0' cellspacing='0'>\n");
        M.push("<div class='memberSignupItem itemSpace'>\n");
        M.push("<div class='itemMiddle'>\n");
        M.push("<input type='text' id='memberSignupAcct' placeholder='" + LS.loginDialogAcct + "' maxlength='" + u + "' />\n");
        M.push("</div>\n");
        M.push("<div class='itemRight'>*</div>\n");
        M.push("</div>\n");
        M.push("<div class='memberSignupItem itemSpace'>\n");
        M.push("<div class='itemMiddle'>\n");
        M.push("<input type='password' id='memberSignupPwd' placeholder='" + LS.loginDialogPsw + "' maxlength='" + u + "' />\n");
        M.push("</div>\n");
        M.push("<div class='itemRight'>*</div>\n");
        M.push("</div>\n");
        M.push("<div class='memberSignupItem itemSpace'>\n");
        M.push("<div class='itemMiddle'>\n");
        M.push("<input type='password' id='memberSignupRepwd' placeholder='" + LS.loginDialogConfirmPsw + "' maxlength='" + u + "' />\n");
        M.push("</div>\n");
        M.push("<div class='itemRight'>*</div>\n");
        M.push("</div>\n");
        M.push(i);
        if (z) {
            M.push("<div class='memberSignupItem_remark itemSpace'>\n");
            M.push("<div class='itemMiddle'>\n");
            M.push("<textarea id='memberSignupRemark' placeholder='" + LS.loginDialogComment + "' maxlength='" + y + "'></textarea>\n");
            M.push("</div>\n");
            M.push("<div class='itemRight'></div>\n");
            M.push("</div>\n")
        }
        M.push("<div class='memberSignupItem_captcha'>\n");
        M.push("<div class='itemMiddle' style='float:left;width: 150px;'>\n");
        M.push("<input id='memberSignupCaptcha' type='text' maxlength='4' placeholder='" + LS.loginDialogCaptcha + "' onkeydown='if (Fai.isEnterKey(event)){$(\"#J_memberRegisterButton\").click();}'/>\n");
        M.push("</div>\n");
        M.push("<div class='itemRight'><img alt='' id='memberSignupCaptchaImg' class='memberSignupCaptchaImg' onclick='Site.changeCaptchaImg(this)' title='" + LS.msgBoradChageValidateCode + "' src='validateCode.jsp?" + parseInt(Math.random() * 1000) + "'/></div>\n");
        M.push("</div>\n");
        if (L) {
            M.push("<div class='mobileItem itemSpace'>\n");
            M.push("<div class='itemMiddle'>\n");
            M.push("<input type='text' id='messageAuthCode' maxlength='6' placeholder='" + LS.loginDialogMsgCode + "' />\n");
            M.push("</div>\n");
            M.push("<div class='itemRight'><div title='" + LS.getMobileMsmCode + "' class='getMobileCdBtn' onclick='Site.getSignMobileCode(\"J_memberRegisterDialogPanel\",2)'>" + LS.getMobileMsmCode + "</div></div>\n");
            M.push("</div>\n")
        }
        M.push("</div>\n");
        if (K) {
            M.push("<div class='memberSignupItem_regInfo'>\n");
            M.push("<div class='itemMiddle'>\n");
            M.push("<input type='checkbox' id='memberAgreePro' maxlength='" + y + "' checked /><label for='memberAgreePro'>" + LS.loginDialogReadAndAgree + "</label>\n");
            M.push("<a hidefocus='true' href='mProtocol.jsp' target='_blank'>《" + LS.loginDialogAgreement + "》</a>\n");
            M.push("</div>\n");
            M.push("</div>\n")
        }
        M.push("<div id='J_memberRegisterButton' class='memberSignupItem_signupButton'>\n");
        M.push("<div class='itemLeft'>&nbsp;</div>\n");
        M.push("<div class='itemMiddle'>" + LS.memberReg + "</div>\n");
        M.push("<div class='itemRight'>&nbsp;</div>\n");
        M.push("</div>\n");
        M.push("</div>\n");
        return M
    }

    function c() {
        $("#J_memberLoginDialogPanel .J_loginButton").off("click").on("click", function () {
            if (!_manageMode) {
                Site.memberLogin4(C, e, q, E, g, A)
            } else {
                Fai.ing("您目前处于网站管理状态，请先点击网站右上方的“退出”后再登录会员。")
            }
        });
        $("#J_memberRegisterButton").off("click").on("click", function () {
            if (!_manageMode) {
                Site.memberSignupDialogSubmit("J_memberRegisterDialogPanel", Fai.top.location.href, 2, C, e, q, E, g, A)
            } else {
                Fai.ing("您目前处于网站管理状态，请先点击网站右上方的“退出”后再注册会员。")
            }
        });
        $(".loginAndRegister").find(".login").off("click").on("click", function () {
            $("#J_memberLoginDialogPanel").show();
            $("#J_memberRegisterDialogPanel").hide()
        });
        $(".loginAndRegister").find(".register").off("click").on("click", function () {
            $("#J_memberLoginDialogPanel").hide();
            $("#J_memberRegisterDialogPanel").show()
        });
        $("#J_memberRegisterDialogPanel .memberSignupContent").mCustomScrollbar({
            theme: "greyish-thin",
            scrollSpeed: 10,
            advanced: {
                updateOnContentResize: true
            },
            axis: "y",
            callbacks: {}
        })
    }
};
Site.mallBuying = {};
Site.mallBuy2 = function (e, a, p) {
    if (_siteDemo) {
        Fai.ing("当前为“模板网站”，请先“复制网站”再进行购买。");
        return
    }
    if (typeof (Site.mallBuying[e]) == "undefined") {
        Site.mallBuying[e] = false
    }
    var f = false;
    $.each(Site.mallBuying, function (j, i) {
        if (i) {
            f = true;
            return false
        }
    });
    if (f) {
        return
    }
    Site.mallBuying[e] = true;
    var n = "id=" + e;
    if (a && a != "undefined") {
        var c;
        if (a === "PdSlide") {
            c = $("#fk-productSlideContent")
        } else {
            c = $("#module" + a)
        }
        var q = c.find(".optionMsg");
        if (Fai.isNull(c)) {
            Site.mallBuying[e] = false;
            return
        }
        var r = true;
        var k = [];
        n += "&fromDetail=true";
        var m = $.cookie("isNeedAddCartItem");
        if (typeof m == "undefined" || m == null || m == "") {
            c.find(".optionItemWrap").each(function () {
                var v = $(this);
                if (v.find(".optionItemHover").length == 1) {
                    var u = v.attr("data"),
                        t = v.attr("type"),
                        i = v.find(".optionItemHover").attr("data"),
                        w = {};
                    w.name = u;
                    w.value = parseInt(i);
                    if (t != null) {
                        w.type = parseInt(t)
                    }
                    k.push(w);
                    q.hide()
                } else {
                    var j = v.parent().parent().find(".propName").text();
                    q.show();
                    q.html(Fai.format(LS.mallCartChoiceItemError, Fai.encodeHtml(j)));
                    if (a === "PdSlide") {
                        var y = $(this).parent().parent().position();
                        var x = $(".fk-slideForProduct .f-propListContent");
                        x.scrollTop(y.top)
                    }
                    r = false;
                    return false
                }
            });
            if (Site.optionsStr.oldOptionsStr != "null" && Site.optionsStr.oldOptionsStr) {
                var o = Site.optionsStr.oldOptionsStr.split("_"),
                    d = [];
                for (var h = 0; h < o.length; h++) {
                    for (var g = 0; g < k.length; g++) {
                        if (k[g].name == o[h]) {
                            d.push(k[g])
                        }
                    }
                }
                k = d
            }
            if (!r) {
                Site.mallBuying[e] = false;
                return false
            }
            if (k.length > 0) {
                n += "&optionList=" + Fai.encodeUrl($.toJSON(k))
            }
            var b = $("#cartbuyCount" + a).val();
            var l = 1;
            if (Fai.isInteger(b)) {
                l = parseInt(b)
            }
            if (l < 1) {
                l = 1
            } else {
                if (l > 9999999) {
                    l = 9999999
                }
            }
            $("#cartbuyCount" + a).val(l);
            n += "&amount=" + l
        } else {
            var s = $.parseJSON(m);
            k = Fai.decodeUrl(s.opList);
            if (typeof k != "undefined" && k != "[]" && k != "") {
                n += "&optionList=" + Fai.encodeUrl(k)
            }
            n += "&amount=" + s.count;
            $.cookie("isNeedAddCartItem", null)
        }
    }

    if (Fai.isIE()) {
        window.event.cancelBubble = true;
        window.event.returnValue = false
    } else {
        if (!Fai.isMozilla()) {
            event.stopPropagation();
            event.preventDefault()
        }
    }
};
Site.initOptionsStr = function (a) {
    Site.optionsStr.oldOptionsStr = a
};
Site.optionsStr = {};
Site.mallImmeBuying = false;
Site.mallImmeBuy = function (f, b) {
    if (_siteDemo) {
        Fai.ing("当前为“模板网站”，请先“复制网站”再进行立刻购买。");
        return
    }
    if (Site.mallImmeBuying) {
        return
    }
    Site.mallImmeBuying = true;
    var n = "id=" + f;
    var d;
    if (b === "PdSlide") {
        d = $("#fk-productSlideContent")
    } else {
        d = $("#module" + b)
    }
    var m = $.cookie("isNeedAddCartItem");
    if (typeof m == "undefined" || m == null || m == "") {
        if (b && b != "undefined") {
            var p = d.find(".optionMsg");
            if (Fai.isNull(d)) {
                return
            }
            var r = true;
            var k = [];
            n += "&fromDetail=true";
            d.find(".optionItemWrap").each(function () {
                var v = $(this);
                if (v.find(".optionItemHover").length == 1) {
                    var u = v.attr("data"),
                        t = v.attr("type"),
                        i = v.find(".optionItemHover").attr("data"),
                        w = {};
                    w.name = u;
                    w.value = parseInt(i);
                    if (t != null) {
                        w.type = parseInt(t)
                    }
                    k.push(w);
                    p.hide()
                } else {
                    var j = v.parent().parent().find(".propName").text();
                    p.show();
                    p.html(Fai.format(LS.mallCartChoiceItemError, Fai.encodeHtml(j)));
                    if (b === "PdSlide") {
                        var y = $(this).parent().parent().position();
                        var x = $(".fk-slideForProduct .f-propListContent");
                        x.scrollTop(y.top)
                    }
                    r = false;
                    return false
                }
            });
            if (Site.optionsStr.oldOptionsStr != "null" && Site.optionsStr.oldOptionsStr) {
                var o = Site.optionsStr.oldOptionsStr.split("_"),
                    e = [];
                for (var h = 0; h < o.length; h++) {
                    for (var g = 0; g < k.length; g++) {
                        if (k[g].name == o[h]) {
                            e.push(k[g])
                        }
                    }
                }
                k = e
            }
            if (!r) {
                Site.mallImmeBuying = false;
                return false
            }
            if (k.length > 0) {
                n += "&optionList=" + Fai.encodeUrl($.toJSON(k))
            }
        }
        var q = $("#cartbuyCount" + b),
            c = q.val(),
            l = 1;
        if (Fai.isInteger(c)) {
            l = parseInt(c)
        }
        if (l < 1) {
            l = 1
        } else {
            if (l > 9999999) {
                l = 9999999
            }
        }
        q.val(l);
        var a = {
            pid: f,
            amount: l,
            optList: $.toJSON(k)
        };
        n += "&amount=" + l + "&codata=" + $.toJSON(a)
    } else {
        var k = [];
        var s = $.parseJSON(m);
        k = Fai.decodeUrl(s.opList);
        if (b && b != "undefined") {
            n += "&fromDetail=true";
            if (typeof k != "undefined" && k != "[]" && k != "") {
                n += "&optionList=" + Fai.encodeUrl(k)
            }
        }
        var a = {
            pid: s.pid,
            amount: s.count,
            optList: $.toJSON(k)
        };
        n += "&amount=" + s.count + "&codata=" + $.toJSON(a);
        $.cookie("isNeedAddCartItem", null)
    }

    if (Fai.isIE()) {
        window.event.cancelBubble = true;
        window.event.returnValue = false
    } else {
        if (!Fai.isMozilla()) {
            event.stopPropagation();
            event.preventDefault()
        }
    }
};
Site.desMallCartAmount = function (c, d, f, l, g, o) {
    var e = Fai.top.$("#module" + c);
    var q = e.find(".itemLine" + d);
    var n = q.find(".amountEdit");
    var k = parseInt(n.val());
    var j = q.find(".J_mcart-pdSelect").prop("checked");
    var i = k;
    k--;
    if (k < g || k == g) {
        k = g;
        $("#buyCountDes" + c + "_" + d).addClass("disableMallJian");
        $("#buyCountInc" + c + "_" + d).removeClass("disableMallJia")
    } else {
        if (k > 9999998) {
            k = 9999999;
            $("#buyCountDes" + c + "_" + d).removeClass("disableMallJian");
            $("#buyCountInc" + c + "_" + d).addClass("disableMallJia")
        } else {
            $("#buyCountDes" + c + "_" + d).removeClass("disableMallJian");
            $("#buyCountInc" + c + "_" + d).removeClass("disableMallJia")
        }
    }
    n.val(k);
    if (i != k && j) {
        Site.mallCartAmountChange(c, d, f, l, g, o)
    } else {
        var b = parseFloat(q.find(".amountEdit").attr("_itemprice"), 2);
        var m = parseInt(q.find(".amountEdit").val());
        var h = (b * m);
        h = h.toFixed(2);
        q.find(".itemTotalText").text(h)
    }
};
Site.incMallCartAmount = function (c, d, f, l, g, o) {
    var e = Fai.top.$("#module" + c);
    var q = e.find(".itemLine" + d);
    var n = q.find(".amountEdit");
    var k = parseInt(n.val());
    var i = k;
    var j = q.find(".J_mcart-pdSelect").prop("checked");
    k++;
    if (k < 2) {
        k = 1;
        $("#buyCountDes" + c + "_" + d).addClass("disableMallJian");
        $("#buyCountInc" + c + "_" + d).removeClass("disableMallJia")
    } else {
        if ((k > o || k == o) && o != 0) {
            k = o;
            $("#buyCountDes" + c + "_" + d).removeClass("disableMallJian");
            $("#buyCountInc" + c + "_" + d).addClass("disableMallJia")
        } else {
            if (k > 9999998) {
                k = 9999999;
                $("#buyCountDes" + c + "_" + d).removeClass("disableMallJian");
                $("#buyCountInc" + c + "_" + d).addClass("disableMallJia")
            } else {
                $("#buyCountDes" + c + "_" + d).removeClass("disableMallJian");
                $("#buyCountInc" + c + "_" + d).removeClass("disableMallJia")
            }
        }
    }
    n.val(k);
    if (i != k && j) {
        Site.mallCartAmountChange(c, d, f, l, g, o)
    } else {
        var b = parseFloat(q.find(".amountEdit").attr("_itemprice"), 2);
        var m = parseInt(q.find(".amountEdit").val());
        var h = (b * m);
        h = h.toFixed(2);
        q.find(".itemTotalText").text(h)
    }
};
Site.mallCartAmountChange = function (a, b, d, k, h, l) {
    var c = Fai.top.$("#module" + a);
    var m = c.find(".itemLine" + b);
    var e = m.find(".amountEdit");
    var g = e.val();
    var f = 1;
    var i = m.find(".J_mcart-pdSelect").prop("checked");
    if (Fai.isInteger(g)) {
        f = parseInt(g)
    }
    if (f < h) {
        f = h;
        $("#buyCountDes" + a + "_" + b).addClass("disableMallJian");
        $("#buyCountInc" + a + "_" + b).removeClass("disableMallJia")
    } else {
        if ((f > l || f == l) && l != 0) {
            f = l;
            $("#buyCountDes" + a + "_" + b).removeClass("disableMallJian");
            $("#buyCountInc" + a + "_" + b).addClass("disableMallJia")
        } else {
            if (f > 9999998) {
                f = 9999999;
                $("#buyCountDes" + a + "_" + b).removeClass("disableMallJian");
                $("#buyCountInc" + a + "_" + b).addClass("disableMallJia")
            } else {
                $("#buyCountDes" + a + "_" + b).removeClass("disableMallJian");
                $("#buyCountInc" + a + "_" + b).removeClass("disableMallJia")
            }
        }
    }
    e.val(f);
    var j = c.find(".cartMsg");
    if (isNaN(f) || f <= 0 || f > 9999999) {
        j.html(LS.mallCartAmountError);
        return
    }
    c.find(".amountEdit").attr("disabled", true);
    j.show();
    if (c.find(".mallCartNew").length > 0) {
        j.hide()
    }
    j.html(LS.mallCartUpdating);

};
Site.reCountCartMoney = function (d) {
    var b = d.find(".cartTotalValue");
    var g = b.attr("choiceCurrencyVal");
    var c = b.attr("levelDiscount");
    var a = b.attr("levelName");
    var f = 0;
    var e = 0;
    d.find(".itemListcount").each(function () {
        var p = $.parseJSON($(this).attr("saleInfo"));
        var n = $(this).find(".itemLine");
        if (d.find(".J_mallCart").hasClass("mallCartNew")) {
            n = $(this).find(".goodsInfoLine")
        }
        if (typeof (n) != "undefined" && n != null && n.length > 0) {
            var u = 0;
            if (typeof (p) != "undefined" && p != null && Site.checkSaleProVal(p)) {
                var j = $(this).attr("lineno");
                var q = p.other.ruleData.d;
                if (p.other.ruleData.s == "1" || p.other.ruleData.s == "2") {
                    var h = 0;
                    var l = 0;
                    n.each(function () {
                        var i = Site.getEachItemPrice(this);
                        var v = $(this).find(".J_mcart-pdSelect").prop("checked");
                        $(this).find(".itemTotalText").text(i.toFixed(2));
                        if (v) {
                            l += i
                        }
                    });
                    var q = p.other.ruleData.d;
                    var t = 0;
                    var m = 0;
                    for (var o = 0; o < q.length; o++) {
                        var s = parseFloat(q[o].m);
                        var k = parseFloat(q[o].n);
                        if (s <= 0) {
                            s = 0;
                            k = 0
                        }
                        if (l >= s) {
                            if (s > t) {
                                t = s;
                                m = k
                            }
                        }
                    }
                    f += l;
                    e += l - m;
                    if (m > 0) {
                        var r = [];
                        r.push("<div class='needPay'>");
                        r.push(g + (l - m).toFixed(2));
                        r.push("</div>");
                        r.push("<div class='itemTotalPay'>");
                        r.push(g + l.toFixed(2));
                        r.push("</div>");
                        $(".J_salePrice_" + j).html(r.join(""));
                        $(".J_salePrice_" + j).css("bottom", "1px");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalss").addClass("fullReduceRed");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalss").removeClass("fullReduceGray");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalssRect").addClass("fullReduceRectRed");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalssRect").removeClass("fullReduceRectGray")
                    } else {
                        $(".J_salePrice_" + j).removeAttr("style");
                        $(".J_salePrice_" + j).html(g + l.toFixed(2));
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalss").addClass("fullReduceGray");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalss").removeClass("fullReduceRed");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalssRect").addClass("fullReduceRectGray");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalssRect").removeClass("fullReduceRectRed")
                    }
                }
            } else {
                n.each(function () {
                    p = $.parseJSON($(this).attr("saleInfo"));
                    var v = $(this).find(".J_mcart-pdSelect").prop("checked");
                    var i = Site.getEachItemPrice(this);
                    if (v) {
                        u += i;
                        f += i
                    }
                    $(this).find(".itemTotalText").text(i.toFixed(2))
                })
            }
            e += u
        }
    });
    Site.refreshTopAndRightBarMallCartNum();
    if (d.has("mallCartNew")) {
        $(".J_countTotal").html(LS.goodsTotalMoney + "<span class='countTotalText'>" + g + f.toFixed(2) + "</span>");
        $(".J_countSave").html("&nbsp;&nbsp;&nbsp;" + LS.offsetMoney + "<span class='countSaveText'>" + g + (f - e).toFixed(2) + "</span>");
        d.find(".cartTotalValue").html("<span class='currencyValText'>" + g + "</span>" + e.toFixed(2))
    } else {
        $(".J_countTotal").html(LS.shoppingCartCountMoney + g + f.toFixed(2));
        $(".J_countSave").html("&nbsp;&nbsp;&nbsp;" + LS.shoppingCartCountReduce + g + (f - e).toFixed(2));
        d.find(".cartTotalValue").html(g + e.toFixed(2))
    }
};
Site.getEachItemPrice = function (d) {
    var c = parseFloat($(d).find(".amountEdit").attr("_itemprice"), 2);
    var b = parseInt($(d).find(".amountEdit").val());
    if (isNaN(b)) {
        return parseFloat($(d).find(".itemTotalText").html())
    } else {
        return (c * b)
    }
};
Site.showSaleRedPromotion = function (e, c, a, m, k) {
    if (typeof (e) == "undefined" || typeof (c) == "undefined" || e == null || c == null) {
        return
    }
    if (c < 0) {
        return
    }
    var h = $(".showRedsalePro").eq(0).width();
    var l = $(".J_fullReduceCalss_" + c).eq(0).width();
    if (Site.checkSaleProVal(e)) {
        var f = e.other.ruleData.d;
        if (f.length > 0) {
            var g = "";
            var b = [];
            for (var d = 0; d < f.length; d++) {
                if (typeof (f[d].m) != "undefined" && typeof (f[d].n) != "undefined") {
                    if (d != 0) {
                        b.push(LS.comma)
                    }
                    b.push(Fai.format(LS.salePromotionFullReduce, f[d].m, f[d].n))
                }
            }
            if (e.other.ruleData.s == "1") {
                g = Fai.format(LS.salePromotionSigle, b.join(""))
            } else {
                if (e.other.ruleData.s == "2") {
                    g = Fai.format(LS.salePromotionGroup, b.join(""))
                }
            }
            $(".J_saleWord_" + c).css({
                left: (45 + l) + "px",
                width: (h - 235 - l) + "px"
            });
            $(".J_saleWord_" + c).html(g);
            $(".J_saleWord_" + c).attr("title", g)
        }
    }
    if (typeof (a) == "undefined" || typeof (m) == "undefined" || typeof (k) == "undefined" || a == null || m == null || k == null) {
        return
    }
    if (a == m) {
        $(".J_salePrice_" + c).html(k + a.toFixed(2))
    } else {
        var j = [];
        j.push("<div class='needPay'>");
        j.push(k + a.toFixed(2));
        j.push("</div>");
        j.push("<div class='itemTotalPay'>");
        j.push(k + m.toFixed(2));
        j.push("</div>");
        $(".J_salePrice_" + c).html(j.join(""));
        $(".J_salePrice_" + c).css("bottom", "1px");
        $(".J_salePrice_" + c).parent(".showRedsalePro").find(".fullReduceCalss").addClass("fullReduceRed");
        $(".J_salePrice_" + c).parent(".showRedsalePro").find(".fullReduceCalss").removeClass("fullReduceGray");
        $(".J_salePrice_" + c).parent(".showRedsalePro").find(".fullReduceCalssRect").addClass("fullReduceRectRed");
        $(".J_salePrice_" + c).parent(".showRedsalePro").find(".fullReduceCalssRect").removeClass("fullReduceRectGray")
    }
};
Site.showCountPrice = function (e, b, g, c, a, d) {
    if (typeof (e) == "undefined" || typeof (b) == "undefined" || typeof (g) == "undefined" || e == null || b == null || g == null) {
        return
    }
    var h = b - e;
    if (d) {
        $(".J_countTotal").html(LS.goodsTotalMoney + "<span class='countTotalText'>" + g + b.toFixed(2) + "</span>");
        $(".J_countSave").html("&nbsp;&nbsp;&nbsp;" + LS.offsetMoney + "<span class='countSaveText'>" + g + h.toFixed(2) + "</span>");
        var f = [];
        f.push("<span class='cartTotalName'>");
        f.push(LS.finalPayMoney);
        f.push("</span>");
        f.push("<span class='cartTotalValue mCart_color' choiceCurrencyVal ='" + g + "' levelDiscount='" + c + "' levelName='" + a + "'  >");
        f.push("<span class='currencyValText'>" + g + "</span>" + e.toFixed(2));
        f.push("</span>");
        $(".J_countNeedPay").html(f.join(""))
    } else {
        $(".J_countTotal").html(LS.shoppingCartCountMoney + g + b.toFixed(2));
        $(".J_countSave").html("&nbsp;&nbsp;&nbsp;" + LS.shoppingCartCountReduce + g + h.toFixed(2));
        var f = [];
        f.push("<span class='cartTotalName'>");
        f.push(LS.shouldPayMoney);
        f.push("</span>");
        f.push("<span class='cartTotalValue g_stress' choiceCurrencyVal ='" + g + "' levelDiscount='" + c + "' levelName='" + a + "'  >");
        f.push(g + e.toFixed(2));
        f.push("</span>");
        $(".J_countNeedPay").html(f.join(""))
    }
};
Site.showSaleMemOrRedPrice = function (d, a, i, h, b) {
    if (typeof (d) != "undefined" && d != null) {
        if (Site.checkSaleProVal(d)) {
            var e = d.other.ruleData.d;
            if (e.length > 0) {
                var f = "";
                var c = e[0].m;
                if (d.other.ruleData.s == "1") {
                    if (_lcid == 2052 || _lcid == 1028) {
                        f = Fai.format(LS.salePromotionPdDisCount, c.toFixed(1))
                    } else {
                        f = Fai.format(LS.salePromotionPdDisCount, 10 * (10 - c))
                    }
                } else {
                    if (d.other.ruleData.s == "2") {
                        f = Fai.format(LS.salePromotionPdLapse, h + c.toFixed(2))
                    }
                }
                var g = [];
                g.push("<div class='saleMemOrRedName'>");
                g.push("<table cellpadding='0' cellspacing='0'><tr>");
                g.push("<td>");
                g.push(LS.salePromotionName);
                g.push("</td>");
                g.push("<td>");
                g.push("<div class='saleMemOrJt'>");
                g.push("</div>");
                g.push("</td>");
                g.push("</tr></table>");
                g.push("</div>");
                g.push("<div class='saleMemOrRedVal'>");
                g.push(LS.salePromotionActivity + Fai.encodeHtml(d.name));
                g.push("<div style='height:3px;'></div>");
                g.push(f);
                g.push("</div>");
                $(".J_itemPrice_" + b).filter(":not('.mallCartNew .J_itemPrice_" + b + "')").css("margin-top", "-18px");
                $(".J_saleMemOrRedPrice_" + b).html(g.join(""))
            }
        }
    } else {
        if (a > 0 && a < 1) {
            var g = [];
            g.push("<div class='saleMemOrRedName'>");
            g.push("<table cellpadding='0' cellspacing='0'><tr>");
            g.push("<td>");
            g.push(LS.memberPrice);
            g.push("</td>");
            g.push("<td>");
            g.push("<div class='saleMemOrJt'>");
            g.push("</div>");
            g.push("</td>");
            g.push("</tr></table>");
            g.push("</div>");
            g.push("</div>");
            g.push("<div class='saleMemOrRedVal'>");
            a = Math.round(a * 100);
            g.push(i + Fai.format(LS.salePromotionRedVal, "*" + a + "%"));
            g.push("</div>");
            $(".J_itemPrice_" + b).filter(":not('.mallCartNew .J_itemPrice_" + b + "')").css("margin-top", "-18px");
            $(".J_saleMemOrRedPrice_" + b).html(g.join(""))
        }
    }
};
Site.checkSaleProVal = function (a) {
    if (typeof (a.other) != "undefined") {
        if (typeof (a.other.ruleData) != "undefined") {
            if (typeof (a.other.ruleData.s) != "undefined" && typeof (a.other.ruleData.d) != "undefined") {
                if (a.other.ruleData.d != null && a.other.ruleData.d.length > 0) {
                    return true
                }
            }
        }
    }
    return false
};
Site.showSaleMemOrRedValInIE = function () {
    $(".saleProSignHover").hover(function () {
        $(this).find(".saleMemOrRedName").css("border-bottom-width", "0px");
        $(this).find(".saleMemOrRedVal").css({
            "background-color": "#ffefe9",
            display: "block"
        });
        $(this).find(".saleMemOrJt").addClass("saleMemOrJtUp")
    }, function () {
        $(this).find(".saleMemOrRedName").css("border-bottom-width", "1px");
        $(this).find(".saleMemOrRedVal").css({
            "background-color": "#ffefe9",
            display: "none"
        });
        $(this).find(".saleMemOrJt").removeClass("saleMemOrJtUp")
    })
};
Site.mallCartItemDel = function (h, e, a, g, d, c) {
    var b = Fai.top.$("#module" + h);
    var f = b.find(".cartMsg");
    f.show();
    if (b.find(".mallCartNew").length > 0) {
        f.hide()
    }
    f.html(LS.mallCartUpdating);

};
Site.mallSettle = function (b) {
    var c = $(".J_mcart-pdSelect").not("input:checked");
    var a = $(".J_mcart-pdSelect").filter("input:checked");
    var d = new Array();
    $(c).each(function () {
        var e = $(this).attr("itemId");
        d.push(e)
    });
    $(".J_mallCart .itemInvalid").each(function () {
        var e = $(this).attr("itemid");
        d.push(e)
    });
    if (a.length > 500) {
        Fai.ing(LS.mcartTooLong)
    } else {
        if (a.length) {
            if (b > 0) {
                Fai.top.location.href = "mstl.jsp?id=" + b + "&unCheckedItemIds=" + d
            } else {
                Fai.top.location.href = "mstl.jsp"
            }
        } else {
            Fai.ing(LS.mallSelectSettleItem)
        }
    }
};
Site.mallSelectAllShop = function (g, e) {
    var d = $("#module" + g),
        f = d.find("#selectAll"),
        h = d.find(".J_mcart-pdSelect"),
        b = d.find(".J_mcart-pdSelect:checked"),
        a = h.not("input:checked");
    var c = f.prop("checked");
    if (!e) {
        if (c) {
            a.click();
            f.prop("checked", true)
        } else {
            b.click();
            f.prop("checked", false)
        }
    } else {
        h.prop("checked", c)
    }
    Site.setCheckBoxToFalgDiv(d)
};
Site.mallSelectShop = function (f, g, a, h, d) {
    var c = $("#module" + f),
        e = c.find(".J_mcart-pdSelect"),
        b = c.find("#selectAll");
    b.prop("checked", true);
    $.each(e, function (j, k) {
        if (!$(k).prop("checked")) {
            b.prop("checked", false);
            return false
        }
    });
    if (!d) {
        Site.mallCartAmountChange(f, g, a, h)
    }
    Site.setCheckBoxToFalgDiv(c)
};
Site.mallStlPayMode = function (b, c) {
    var a = Fai.top.$("#module" + b);
    a.find("input[name=mallPay]").val(c);
    if (c == 2) {
        a.find(".bankList").show()
    } else {
        a.find(".bankList").hide()
    } if (c == 3 || c == 4 || c == 5 || c == 6 || c == 7 || c == 9 || c == 8 || c == 10) {
        a.find(".payOnlinePanel").show();
        a.find(".payOnlinePanel input[value='" + c + "']").click();
        if (c === 8) {
            $(a.find(".payOnlinePanel input[type='radio']")[0]).click()
        }
    } else {
        a.find(".payOnlinePanel").hide()
    }
};
Site.mallStlCalcTotal = function (a) {
    var b = Fai.top.$("#module" + a);
    var e = parseFloat(b.find(".cartTotal").attr("pay_price"));
    if (isNaN(e)) {
        return
    }
    var c = parseFloat(b.find("input[name=mallShip]:checked").attr("price"));
    if (isNaN(c)) {
        c = 0
    }
    if ($("#mallShipTemplate_province").length > 0) {
        var i = b.find("input[name=mallShip]:checked");
        i.attr("provinceCode", $.trim($("#mallShipTemplate_areaBoxInput").attr("area1")));
        i.attr("cityCode", $.trim($("#mallShipTemplate_areaBoxInput").attr("area2")));
        i.attr("countyCode", $.trim($("#mallShipTemplate_areaBoxInput").attr("area3")))
    }
    var f = 0;
    if ($("#offsetMoney").length > 0) {
        var h = $("#offsetMoney").attr("_offsetmoney");
        if (!isNaN(h)) {
            f = parseFloat(h);
            if ((e + c) < f) {
                Fai.ing(Fai.format(LS.integral_maxUse, $("#useItg").attr("_maxuse"), Fai.encodeHtml($("#useItg").attr("__itegName"))), true);
                $("#useItg").focus();
                b.find(".mallStlTotal .totalValue").text((e + c).toFixed(2));
                return
            }
        }
    }
    var g = 0;
    if ($("#couponOffsetMoney").length > 0) {
        var h = $("#couponOffsetMoney").attr("_offsetmoney");
        if (!isNaN(h)) {
            g = parseInt(h)
        }
    }
    if (e < (f + g)) {
        return false
    }
    var d = parseInt(b.find("#presentItg").attr("value"));
    if (d > 0) {
        b.find("#presentItg").text(parseInt((e - f - g).toFixed(2) * d))
    }
    b.find(".mallStlTotal .totalValue").text((e + c - f - g).toFixed(2))
};
Site.mallStlChangeBank = function (a) {
    $("#" + a).attr("checked", true)
};
Site.mallNumeric = function (a) {
    $("#module" + a + " .numeric").numeric({
        decimal: " ",
        negative: false
    })
};
Site.getBackgroundColor = function (a) {
    var b = "";
    while (a[0].tagName.toLowerCase() != "html") {
        b = a.css("background-color");
        if (b != "rgba(0, 0, 0, 0)" && b != "transparent") {
            break
        }
        a = a.parent()
    }
    return b
};
Site.getMallSubmitData = function (e, t, r, d, o) {
    var i = "";
    e.find(".propItemValue").each(function () {
        var y = $(this),
            B = y.attr("_required") == 1;
        if (y.hasClass("J-pccS") && o) {
            var w = $("#areaBoxInput").attr("area1");
            if (B && (w == null || w == "")) {
                i = LS.mallStlSubmitAddrErr;
                return false
            }
            var z = $("#areaBoxInput").attr("area2");
            if (B && (z == null || z == "")) {
                i = LS.mallStlSubmitAddrErr;
                return false
            }
            var E = $("#areaBoxInput").attr("area3"),
                u = $("#addrInfo_street"),
                F = $.trim($("#addrInfo_street").val());
            if (B && F === "") {
                i = LS.editStreetAddr;
                return false
            }
            var A = $("#areaBoxInput").val().replace(/-/g, "") + F;
            if (d != 0) {
                var C = {};
                C.provinceCode = w;
                C.cityCode = z;
                C.countyCode = E;
                C.streetAddr = F;
                r.addr_info = C;
                r.addr = A;
                r.isDefault = 1
            }
            t.addr = A
        } else {
            var D = y.attr("_field");
            var v;
            var x;
            if (D == "mobile") {
                v = y.find("input").val();
                if (v.length > 0) {
                    if (!Fai.isNationMobile(v)) {
                        i = LS.mallStlSubmitInput2 + y.attr("_prop");
                        return false
                    } else {
                        x = y.find("select").val()
                    }
                } else {
                    x = ""
                }
            } else {
                v = y.find("input").val()
            } if (B == 1 && !v) {
                i = LS.mallStlSubmitInput + y.attr("_prop");
                return false
            }
            if (v && v.length > 0) {
                if (D === "email" && !Fai.isEmail(v)) {
                    i = LS.mallStlSubmitInput2 + y.attr("_prop");
                    return false
                }
                if (D === "phone" && !Fai.isPhone(v)) {
                    i = LS.mallStlSubmitInput2 + y.attr("_prop");
                    return false
                }
            }
            if (typeof D !== "undefined") {
                t[D] = v;
                if (d != 0 && o) {
                    r[D] = v;
                    if (D == "mobile" && v.length > 0) {
                        r.mobileCt = x
                    }
                }
                if (D == "mobile" && v.length > 0) {
                    t.mobileCt = x
                }
            }
        }
    });
    if (i != "") {
        return i
    }
    if (Site.orderMessageOpen) {
        var n = Fai.decodeHtml($("#orderLeveaMsgIn").val());
        if (n.length > Site.orderMessageMaxNum) {
            n = n.substring(0, Site.orderMessageMaxNum)
        }
        if (n !== Site.orderLeveaMsgTip) {
            t.msg = n
        } else {
            t.msg = ""
        }
    } else {
        t.msg = ""
    }
    var b = e.find("input[name=mallShip]:checked");
    if ($("#mallShipTemplate_province").length === 1 && b.length === 1) {
        var h = parseInt(b.attr("provinceCode")),
            k = parseInt(b.attr("cityCode")),
            g = parseInt(b.attr("countyCode"));
        if (!h || isNaN(h) || !site_cityUtil.isValidProvince(h)) {
            i = LS.mallStlSubmitAddrErr;
            return i
        }
        if (!k || isNaN(k) || !site_cityUtil.isValidCity(k, h)) {
            i = LS.mallStlSubmitAddrErr;
            return i
        }
        var j = {
            type: parseInt(b.val()),
            templateId: parseInt(b.attr("templateId")),
            provinceCode: h,
            cityCode: k,
            countyCode: g,
            streetAddr: $.trim($("#streetAddress").val())
        };
        t.shipType = j
    } else {
        if (b.length === 1) {
            t.shipType = parseInt(b.val())
        }
    }
    var l = e.find("input[name=mallPay]:checked");
    if (l.length == 1) {
        t.payMode = parseInt(l.val())
    }
    var m = parseInt(l.val());
    var s = $("#useItg");
    if (s.length > 0) {
        var c = s.val();
        if (Fai.isInteger(c)) {
            var f = parseInt(s.attr("_maxUse")),
                a = parseInt(s.attr("_currentitg")),
                q = s.attr("_itgname");
            if (c > a) {
                i = Fai.format(LS.integral_notOverCurrent, Fai.encodeHtml(q), Fai.encodeHtml(q));
                return i
            }
            if (c > f) {
                i = Fai.format(LS.integral_notOver, Fai.encodeHtml(q), f);
                return i
            }
            if (c < 0) {
                i = LS.integral_inputInteger;
                return i
            }
            t.useItg = parseInt(c)
        } else {
            if (c.length != 0) {
                i = LS.integral_inputInteger;
                return i
            }
        }
    }
    if ($("#presentItgShow").length > 0) {
        t.presentItg = true
    }
    if ($("#couponList  input:checked").length > 0) {
        var p = $("#couponList  input:checked").attr("data_id");
        t.cdId = Number(p)
    }
    return i
};
Site.mallImmeSubmit = function (c, l, n, j) {
    var i = {},
        e = {},
        c = Fai.top.$("#module" + c),
        f = c.find(".stlMsg");
    var d = Site.getMallSubmitData(c, i, e, l, n);
    if (d != "") {
        f.show();
        f.html(d);
        Site.scrollToDiv(c);
        return
    }
    var b = c.find(".mallStlOpt input");
    b.attr("disabled", true);
    f.show();
    f.html(LS.mallStlSubmitting);
    Site.scrollToDiv(c);
    if (l != 0 && n) {
        var k = {},
            g = [];
        g.push(e);
        k.addrInfoList = g;
        $.ajax({
            type: "post",
            url: action = "ajax/memberAdm_h.jsp?cmd=set&opera=addAddr&id=" + l,
            data: "info=" + Fai.encodeUrl($.toJSON(k)),
            success: function (o) {}, error: function () {}
        })
    }
    if (i.payMode == 5) {
        var m = i.name;
        var a = new RegExp("[\\u4E00-\\u9FFF]+", "g");
        if (m) {
            if (m.length < 2) {
                if (!a.test(m)) {
                    f.hide();
                    Site.scrollToDiv(c);
                    Fai.ing(LS.orderValidRecvName);
                    b.attr("disabled", false);
                    return
                }
            }
        } else {
            if (l != 0 && j) {
                var h = "";
                if (j.length < 2) {
                    if (!a.test(m)) {
                        h = "会员"
                    }
                }
                i.name = h + j
            } else {
                i.name = "游客"
            }
        }
    }

};
Site.mallSubmit = function (e, a, b, q, n, p, l) {
    if (a == 0) {
        Fai.top.location.href = "mdetail.jsp";
        return
    }
    var k = {},
        g = {},
        e = Fai.top.$("#module" + e),
        h = e.find(".stlMsg");
    var f = Site.getMallSubmitData(e, k, g, n, p);
    if (f != "") {
        h.show();
        h.html(f);
        Site.scrollToDiv(e);
        return
    }
    var d = e.find(".mallStlOpt input");
    d.attr("disabled", true);
    h.show();
    h.html(LS.mallStlSubmitting);
    Site.scrollToDiv(e);
    if (n != 0 && p) {
        var m = {},
            i = [];
        i.push(g);
        m.addrInfoList = i;
        $.ajax({
            type: "post",
            url: action = "ajax/memberAdm_h.jsp?cmd=set&opera=addAddr&id=" + n,
            data: "info=" + Fai.encodeUrl($.toJSON(m)),
            success: function (r) {}, error: function () {}
        })
    }
    if (k.payMode == 5) {
        var o = k.name;
        var c = new RegExp("[\\u4E00-\\u9FFF]+", "g");
        if (o) {
            if (o.length < 2) {
                if (!c.test(o)) {
                    h.hide();
                    Site.scrollToDiv(e);
                    Fai.ing(LS.orderValidRecvName);
                    d.attr("disabled", false);
                    return
                }
            }
        } else {
            if (n != 0 && l) {
                var j = "";
                if (l.length < 2) {
                    if (!c.test(o)) {
                        j = "会员"
                    }
                }
                k.name = j + l
            } else {
                k.name = "游客"
            }
        }
    }

};
Site.initModuleMallAddrInfo = function (c, b, f, u, q) {
    var t = "-----------",
        z = [],
        m, B, r, y, C, o, A;
    if (Site.addrInfoListGlobal != null && Site.addrInfoListGlobal != []) {
        c = Site.addrInfoListGlobal
    }
    if (c.length == 0) {
        var n = "";
        n += "<div class='spaceLine'></div>";
        $.each(site_cityUtil.getAreaGroupsPinYin(), function (j, D) {
            n += "<div class='pv_group' style='" + (D[0] == "OS" ? "display:none;" : "") + "'>";
            n += "<div class='group_head'>" + D[0] + "</div>";
            n += "<div class='group_content'>";
            $.each(D[1], function (E, i) {
                if (u == 2052 || u == 1028) {
                    n += "<div class='group_item' pid='" + i + "' pname='" + site_cityUtil.getInfo(i).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(i).name) + "</div>"
                } else {
                    n += "<div class='group_item' pid='" + i + "' pname='" + site_cityUtil.getInfoEn(i).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(i).name) + "</div>"
                }
            });
            n += "</div>";
            n += "</div>";
            n += "<div class='spaceLine'></div>"
        });
        $("#areaBox1 .pv_content").html("").append(n);
        if ($("#areaBox1").length > 0) {
            $("#areaBox1").css("left", $("#areaBoxInput").position().left + 13)
        }
        $("#areaBoxInput").hide();
        var a = $(".J_isOldStyle2").length > 0;
        if (a) {
            $("#areaBox1").parents(".propList").css("overflow", "visible")
        }
        $(document).unbind("click.forAreaBox3").bind("click.forAreaBox3", function () {
            $("#areaBox1").hide();
            $("#areaBox2").hide()
        });
        $("#areaBox1,#areaBox2").unbind("click.forAreaBox").bind("click.forAreaBox", function (i) {
            k(i)
        });

        function k(i) {
            if (i.stopPropagation) {
                i.stopPropagation()
            } else {
                i.cancelBubble = true
            }
        }
        $("#allArea").change(function () {
            if ($("#allArea").val() == null || $("#allArea").val() == "" || $("#allArea").val() == "os") {
                $("#areaBoxInput").hide()
            } else {
                $("#areaBoxInput").show()
            }
            $("#areaBox1").hide();
            $("#areaBox2").hide();
            if ($("#allArea").val() == null || $("#allArea").val() == "") {
                return
            }
            $("#areaBoxInput").attr("isCn", 0);
            $("#areaBoxInput").attr("isCus", 0);
            $("#areaBoxInput").attr("isOs", 0);
            $("#areaBoxInput").attr("area1", "");
            $("#areaBoxInput").attr("area2", "");
            $("#areaBoxInput").attr("area3", "");
            if ($("#allArea").val() == "cn") {
                $("#areaBoxInput").attr("isCn", 1);
                $("#areaBox1 .pv").click();
                $("#areaBox1 .city_content").remove();
                $("#areaBox1 .county_content").remove();
                $("#areaBox1").show()
            } else {
                if ($("#allArea").val() == "os") {
                    $("#areaBoxInput").attr("isOs", 1);
                    $("#areaBoxInput").attr("area1", 990000);
                    $("#areaBoxInput").attr("area2", 990100)
                } else {
                    $("#areaBoxInput").attr("isCus", 1);
                    $("#areaBoxInput").attr("area1", $("#allArea").val());
                    $("#areaBox2 .sec_content").html("");
                    $("#areaBox2 .thd_content").html("");
                    $("#areaBox2").show()
                }
            }
            $("#areaBoxInput").val("");
            $("#mallShipTemplate_allArea").val($("#allArea").val());
            $("#mallShipTemplate_allArea").change();
            if ($("#allArea").val() == "cn" || $("#allArea").val() == "os") {
                return
            }
            var i = d($("#allArea").val());
            $("#sec_box .sec_content").append(i);
            $("#areaBoxInput").val($("#areaBoxInput").val() + $("#allArea option[value='" + $("#allArea").val() + "']").text())
        });
        $("#areaBoxInput").unbind("click").bind("click", function (i) {
            if ($("#allArea").val() == "cn") {
                $("#areaBox1").toggle();
                $("#areaBox2").hide();
                $("#province_box").show();
                $("#city_box").hide();
                $("#county_box").hide()
            } else {
                if ($("#allArea").val() == null || $("#allArea").val() == "os") {} else {
                    $("#areaBox2").toggle();
                    $("#areaBox1").hide();
                    $("#sec_box").show();
                    $("#thd_box").hide()
                }
            }
            k(i)
        });
        $("#areaBox1 .J_areaHead .pv").click(function () {
            $("#province_box").show();
            $("#city_box").hide();
            $("#county_box").hide()
        });
        $("#areaBox1 .J_areaHead .city").click(function () {
            $("#province_box").hide();
            $("#city_box").show();
            $("#county_box").hide()
        });
        $("#areaBox1 .J_areaHead .county").click(function () {
            $("#province_box").hide();
            $("#city_box").hide();
            $("#county_box").show()
        });
        $("#areaBox2 .J_areaHead2 .sec").click(function () {
            $("#sec_box").show();
            $("#thd_box").hide()
        });
        $("#areaBox2 .J_areaHead2 .thd").click(function () {
            $("#sec_box").hide();
            $("#thd_box").show()
        });
        $("#province_box .group_item").bind("click", function () {
            $("#areaBox1 .city_content").remove();
            $("#areaBox1 .county_content").remove();
            var i = $(this).attr("pname");
            var j = $(this).attr("pid");
            $("#areaBox1 .J_areaHead .city").click();
            $("#areaBoxInput").val("");
            $("#areaBoxInput").val($("#areaBoxInput").val() + i);
            $("#areaBoxInput").removeAttr("lastArea");
            $("#areaBoxInput").removeAttr("lastAreaType");
            $("#areaBoxInput").attr("area1", j);
            $("#areaBoxInput").attr("area2", "");
            $("#areaBoxInput").attr("area3", "");
            $("#areaBox1 .city_content").remove();
            var D = s(site_cityUtil.getCities(j));
            $("#city_box").append(D);
            $("#mallShipTemplate_province_box .group_item[pid='" + j + "']").click()
        });
        $("#city_box").delegate(".group_item", "click", function () {
            $("#areaBox1 .county_content").remove();
            var i = $(this).attr("cname");
            var D = $(this).attr("cid");
            $("#areaBox1 .J_areaHead .county").click();
            var F = $("#areaBoxInput").attr("lastArea");
            var j = $("#areaBoxInput").attr("lastAreaType");
            if (j != null && j != "") {
                $("#areaBoxInput").val($("#areaBoxInput").val().substring(0, $("#areaBoxInput").val().indexOf("-")))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + i);
            $("#areaBoxInput").attr("lastArea", "-" + i);
            $("#areaBoxInput").attr("lastAreaType", "city");
            $("#areaBoxInput").attr("area2", D);
            $("#areaBoxInput").attr("area3", "");
            $("#areaBox1 .county_content").remove();
            var E = l(site_cityUtil.getCounty(D));
            $("#county_box").append(E);
            $("#mallShipTemplate_city_box .group_item[cid='" + D + "']").click()
        });
        $("#county_box").delegate(".group_item", "click", function () {
            var i = $(this).attr("cname");
            var D = $(this).attr("cid");
            var E = $("#areaBoxInput").attr("lastArea");
            var j = $("#areaBoxInput").attr("lastAreaType");
            if (j != null && j == "county") {
                $("#areaBoxInput").val($("#areaBoxInput").val().replace(E, ""))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + i);
            $("#areaBoxInput").attr("lastArea", "-" + i);
            $("#areaBoxInput").attr("lastAreaType", "county");
            $("#areaBoxInput").attr("area3", D);
            $("#areaBox1").hide();
            $("#mallShipTemplate_county_box .group_item[cid='" + D + "']").click()
        });
        $("#sec_box").delegate(".group_item", "click", function () {
            $("#areaBox2 .thd_content").html("");
            var i = $(this).attr("cname");
            var D = $(this).attr("cid");
            $(".J_areaHead2 .thd").click();
            var F = $("#areaBoxInput").attr("lastArea");
            var j = $("#areaBoxInput").attr("lastAreaType");
            if (j != null && j != "" && $("#areaBoxInput").val().indexOf("-") != -1) {
                $("#areaBoxInput").val($("#areaBoxInput").val().substring(0, $("#areaBoxInput").val().indexOf("-")))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + i);
            $("#areaBoxInput").attr("lastArea", "-" + i);
            $("#areaBoxInput").attr("lastAreaType", "sec");
            $("#areaBoxInput").attr("area2", D);
            $("#areaBoxInput").attr("area3", "");
            var E = d(D);
            $("#thd_box .thd_content").append(E);
            $("#mallShipTemplate_sec_box .group_item[cid='" + D + "']").click()
        });
        $("#thd_box").delegate(".group_item", "click", function () {
            var i = $(this).attr("cname");
            var D = $(this).attr("cid");
            var E = $("#areaBoxInput").attr("lastArea");
            var j = $("#areaBoxInput").attr("lastAreaType");
            if (j != null && j == "thd") {
                $("#areaBoxInput").val($("#areaBoxInput").val().replace(E, ""))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + i);
            $("#areaBoxInput").attr("lastArea", "-" + i);
            $("#areaBoxInput").attr("lastAreaType", "thd");
            $("#areaBoxInput").attr("area3", D);
            $("#areaBox2").hide();
            $("#mallShipTemplate_thd_box .group_item[cid='" + D + "']").click()
        })
    }
    $(".addrMsg_default, .addrMsg").click(function () {
        var F = $(this).attr("_item");
        $(this).find(".selected").show();
        if ($(this).parent().find(".addrMsg_default").hasClass("isDefault")) {
            $(this).parent().find(".addrMsg_default").attr("class", "addrMsg isDefault")
        } else {
            $(this).parent().find(".addrMsg_default").attr("class", "addrMsg notDefault")
        } if ($(this).hasClass("isDefault")) {
            $(this).attr("class", "addrMsg_default isDefault")
        } else {
            $(this).attr("class", "addrMsg_default notDefault")
        }
        $(this).parent().find(".addrMsg_default, .addrMsg").each(function () {
            if ($(this).attr("_item") != F) {
                $(this).find(".selected").hide()
            }
        });
        var D = c[F];
        if (D.addr_info != null) {
            var H = D.addr_info["isCus"];
            if (!H) {
                var K = "";
                var I = "";
                var G = "";
                if (u == 2052 || u == 1028) {
                    K = site_cityUtil.getInfo(D.addr_info.countyCode).name;
                    I = site_cityUtil.getInfo(D.addr_info.cityCode).name;
                    G = site_cityUtil.getInfo(D.addr_info.provinceCode).name
                } else {
                    K = site_cityUtil.getInfoEn(D.addr_info.countyCode).name;
                    I = site_cityUtil.getInfoEn(D.addr_info.cityCode).name;
                    G = site_cityUtil.getInfoEn(D.addr_info.provinceCode).name
                } if (D.addr_info.provinceCode == 990000) {
                    $("#mallShipTemplate_areaBoxInput").attr("isOs", 1);
                    $("#mallShipTemplate_allArea").val("os");
                    $("#mallShipTemplate_allArea").change()
                } else {
                    $("#mallShipTemplate_areaBoxInput").attr("isCn", 1);
                    $("#mallShipTemplate_allArea").val("cn");
                    $("#mallShipTemplate_allArea").change()
                }
                $("#mallShipTemplate_areaBoxInput").attr("area1", D.addr_info.provinceCode);
                $("#mallShipTemplate_areaBoxInput").attr("area2", D.addr_info.cityCode);
                $("#mallShipTemplate_areaBoxInput").attr("area3", D.addr_info.countyCode);
                $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + K);
                $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "county");
                setTimeout(function () {
                    $("#mallShipTemplate_areaBox1 .group_item[pid='" + D.addr_info.provinceCode + "']").click();
                    setTimeout(function () {
                        $("#mallShipTemplate_areaBox1 .group_item[cid='" + D.addr_info.cityCode + "']").click();
                        setTimeout(function () {
                            $("#mallShipTemplate_areaBox1 .group_item[cid='" + D.addr_info.countyCode + "']").click()
                        }, 0)
                    }, 0)
                }, 0);
                $("#streetAddress").val(D.addr_info.streetAddr)
            } else {
                setTimeout(function () {
                    $("#mallShipTemplate_allArea").val(D.addr_info.provinceCode);
                    $("#mallShipTemplate_allArea").change();
                    setTimeout(function () {
                        $("#mallShipTemplate_areaBox2 .group_item[cid='" + D.addr_info.cityCode + "']").click();
                        setTimeout(function () {
                            $("#mallShipTemplate_areaBox2 .group_item[cid='" + D.addr_info.countyCode + "']").click()
                        }, 0)
                    }, 0)
                }, 0);
                $("#streetAddress").val(D.addr_info.streetAddr)
            }
        }
        for (var E = 0; E < b.length; E++) {
            if (b[E] != null) {
                var j = b[E]["fieldKey"];
                var J = D[j];
                $(".propList").find(".propItemValue").each(function () {
                    if ($(this).attr("_field") == j) {
                        $(this).find("input").val(J)
                    }
                });
                if (j == "mobile") {
                    j = "mobileCt";
                    J = D[j];
                    $(".propList").find(".propItemValue").each(function () {
                        if ($(this).attr("_field") == j) {
                            $(this).find("input").val(J)
                        }
                    })
                }
            }
        }
    });
    for (var w = 0; w < c.length; w++) {
        var e = c[w];
        if (e.isDefault == 1) {
            for (var v = 0; v < b.length; v++) {
                if (b[v] != null) {
                    var g = b[v]["fieldKey"];
                    var p = e[g];
                    $(".propList").find(".propItemValue").each(function () {
                        if ($(this).attr("_field") == g) {
                            $(this).find("input").val(p)
                        }
                    });
                    if (g == "mobile") {
                        g = "mobileCt";
                        p = e[g];
                        $(".propList").find(".propItemValue").each(function () {
                            if ($(this).attr("_field") == g) {
                                $(this).find("input").val(p)
                            }
                        })
                    }
                }
            }
            if (e.addr_info != null) {
                $(".addrMsg_default, .addrMsg").each(function () {
                    if ($(this).attr("_item") == w) {
                        $(this).click()
                    }
                })
            }
        }
    }
    if (f == 7) {
        $(".addrMsg_default, .addrMsg").each(function () {
            if ($(this).attr("_item") == (c.length - 1)) {
                $(this).click()
            }
        })
    } else {
        if (f != 6) {
            $(".addrMsg_default, .addrMsg").each(function () {
                if ($(this).attr("_item") == f) {
                    $(this).click()
                }
            })
        }
    } if (Fai.isIE6()) {
        if (c.length > 2) {
            $(".addrMsgList").attr("style", "cursor:pointer;height:300px;width:690px;")
        } else {
            $(".addrMsgList").attr("style", "cursor:pointer;height:150px;")
        }
    }

    function s(j) {
        var i = "";
        i += "<div class='city_content'>";
        $.each(j, function (D, E) {
            if (u == 2052 || u == 1028) {
                i += "<div class='group_item' cid='" + E.id + "' cname='" + site_cityUtil.getInfo(E.id).name + "'>" + site_cityUtil.simpleCityNameStr(site_cityUtil.getInfo(E.id).name) + "</div>"
            } else {
                i += "<div class='group_item' cid='" + E.id + "' cname='" + site_cityUtil.getInfoEn(E.id).name + "'>" + site_cityUtil.simpleCityNameStrEn(site_cityUtil.getInfoEn(E.id).name) + "</div>"
            }
        });
        i += "</div>";
        return i
    }

    function l(j) {
        var i = "";
        i += "<div class='county_content'>";
        $.each(j, function (D, E) {
            if (u == 2052 || u == 1028) {
                i += "<div class='group_item' cid='" + E.id + "' cname='" + site_cityUtil.getInfo(E.id).name + "'>" + site_cityUtil.getInfo(E.id).name + "</div>"
            } else {
                i += "<div class='group_item' cid='" + E.id + "' cname='" + site_cityUtil.getInfoEn(E.id).name + "'>" + site_cityUtil.getInfoEn(E.id).name + "</div>"
            }
        });
        i += "</div>";
        return i
    }

    function h(j) {
        var i = "";
        var D = false;
        $.each(q, function (E, F) {
            if (D) {
                return
            }
            if (F.id == j) {
                i = F.name;
                D = true
            }
        });
        return i
    }

    function x(j) {
        var i = [];
        $.each(q, function (D, E) {
            if (E.parentId == j) {
                i.push(E)
            }
        });
        return i
    }

    function d(i) {
        if (isNaN(i)) {
            return ""
        }
        var D = parseInt(i);
        var j = "";
        $.each(x(D), function (E, F) {
            j += "<div class='group_item' cid='" + F.id + "' cname='" + F.name + "'>" + F.name + "</div>"
        });
        return j
    }
};
Site.changePayModePopup = function (a, c) {
    var e = "g_stress";
    if ($("#changePayMode").hasClass("mDetailStyleFlag")) {
        e = "mDetail_hover_color"
    }
    $("#changePayMode").hover(function () {
        $("#changePayMode").addClass(e)
    }, function () {
        $("#changePayMode").removeClass(e)
    });
    $("#changePayMode").on("click", function () {
        var h = [];
        h.push("<div class='payModePop J_payModepop'>");
        h.push("<div class='p-title'>");
        h.push(LS.choosePayment);
        h.push("</div>");
        if (c.length > 3) {
            h.push("<div class='p-content1'>")
        } else {
            h.push("<div class='p-content2'>")
        }
        $.each(c, function (j, l) {
            var k = d(l);
            if (k) {
                h.push("<div class='p-payMode J_payMode' _data='" + l + "'>");
                h.push("<div class='p-payMode-" + k + "'>");
                h.push("</div>");
                h.push("</div>")
            }
        });
        h.push("</div>");
        h.push("<div class='p-foot'>");
        h.push("<div class='payModeBtn' id='payModeBtn'>");
        h.push(LS.goAndPay);
        h.push("</div>");
        h.push("</div>");
        h.push("</div>");
        var g = {};
        if (c.length > 3) {
            g.height = 295
        } else {
            g.height = 250
        }
        g.width = 500;
        g.htmlContent = h.join("");
        var f = Site.popupBox(g);
        f.find(".J_payMode").on("click", function () {
            $(".J_payModepop").find(".J_payMode").removeClass("selected");
            $(".J_payModepop").find(".selected1").remove();
            $(this).addClass("selected");
            $(this).append("<div class='selected1'></div>")
        });
        $("#payModeBtn").on("click", function () {
            var i = $(".J_payModepop").find(".selected").attr("_data");
            if (!i) {
                Fai.ing(LS.selectPaymentFirst, true);
                return
            }
            var j = {};
            j.payMode = i;

        })
    });

    function d(f) {
        if (f == 2) {
            return "bank"
        } else {
            if (f == 3) {
                return "tenpay"
            } else {
                if (f == 4 || f == 5 || f == 6 || f == 8) {
                    return "alipay"
                } else {
                    if (f == 7) {
                        return "paypal"
                    } else {
                        if (f == 9) {
                            return "pm"
                        } else {
                            if (f == 10 || f == 11) {
                                return "wxpay"
                            }
                        }
                    }
                }
            }
        }
    }

    function b() {
        var f = true;

        return f
    }
};
Site.initPayOrder = function (a) {
    var b = new Site.payOrder(a);
    b.init()
};
Site.payOrder = function (a) {
    this.orderId = a
};
(function (f, a, c) {
    var g = a.prototype;
    var b, h = f(".dtlSubmit"),
        d = f(".detailMsg");
    g.init = function () {
        b = this.orderId;
        i()
    };

    function i() {
        h.on("click", function () {
            var j = e(b);
            if (j) {
                var k = f(this).attr("_href");
                if (k != "WXPAY") {
                    Site.getTopWindow().location.href = k
                } else {
                    Site.getWxpayUrl(b)
                }
            }
        })
    }

    function e() {
        var j = true;

        return j
    }
})(jQuery, Site.payOrder);
Site.initModuleMallShipTemplate = function (z, A, d, C, n, e, b, t, p) {
    var j = C.vType || 1,
        u = C.sco || 0,
        g = C.openItemList;
    var s = "-----------",
        y = [],
        l, B, q, w, D, o, x;
    var i = true;
    var m = "";
    m += "<div class='spaceLine'></div>";
    $.each(site_cityUtil.getAreaGroupsPinYin(), function (E, F) {
        m += "<div class='pv_group' style='" + (F[0] == "OS" ? "display:none;" : "") + "'>";
        m += "<div class='group_head'>" + F[0] + "</div>";
        m += "<div class='group_content'>";
        $.each(F[1], function (H, G) {
            if (t == 2052 || t == 1028) {
                m += "<div class='group_item' pid='" + G + "' pname='" + site_cityUtil.getInfo(G).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(G).name) + "</div>"
            } else {
                m += "<div class='group_item' pid='" + G + "' pname='" + site_cityUtil.getInfoEn(G).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(G).name) + "</div>"
            }
        });
        m += "</div>";
        m += "</div>";
        m += "<div class='spaceLine'></div>"
    });
    $("#mallShipTemplate_areaBox1 .pv_content").html("").append(m);
    var a = $(".J_isOldStyle").length > 0;
    if (a) {
        $("#mallShipTemplate_allArea").parents(".shipList").css("overflow", "visible")
    }
    $(document).unbind("click.forAreaBox4").bind("click.forAreaBox4", function () {
        $("#mallShipTemplate_areaBox1").hide();
        $("#mallShipTemplate_areaBox2").hide()
    });
    $("#mallShipTemplate_areaBox1,#mallShipTemplate_areaBox2").unbind("click.forAreaBox2").bind("click.forAreaBox2", function (E) {
        h(E)
    });

    function h(E) {
        if (E.stopPropagation) {
            E.stopPropagation()
        } else {
            E.cancelBubble = true
        }
    }
    $("#mallShipTemplate_allArea").change(function () {
        if ($("#mallShipTemplate_allArea").val() == null || $("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "os") {
            $("#mallShipTemplate_areaBoxInput").hide();
            $("#mallShipTemplate_areaBox1").hide();
            $("#mallShipTemplate_areaBox2").hide()
        } else {
            $("#mallShipTemplate_areaBoxInput").show()
        } if ($("#mallShipTemplate_allArea").val() == null || $("#mallShipTemplate_allArea").val() == "") {
            return
        }
        $("#mallShipTemplate_areaBoxInput").attr("isCn", 0);
        $("#mallShipTemplate_areaBoxInput").attr("isCus", 0);
        $("#mallShipTemplate_areaBoxInput").attr("isOs", 0);
        $("#mallShipTemplate_areaBoxInput").attr("area1", "");
        $("#mallShipTemplate_areaBoxInput").attr("area2", "");
        $("#mallShipTemplate_areaBoxInput").attr("area3", "");
        if ($("#mallShipTemplate_allArea").val() == "cn") {
            $("#mallShipTemplate_areaBoxInput").attr("isCn", 1);
            $("#mallShipTemplate_areaBox1 .pv").click();
            $("#mallShipTemplate_areaBox1 .city_content").remove();
            $("#mallShipTemplate_areaBox1 .county_content").remove()
        } else {
            if ($("#mallShipTemplate_allArea").val() == "os") {
                $("#mallShipTemplate_areaBoxInput").attr("isOs", 1);
                $("#mallShipTemplate_areaBoxInput").attr("area1", 990000);
                $("#mallShipTemplate_areaBoxInput").attr("area2", 990100)
            } else {
                $("#mallShipTemplate_areaBoxInput").attr("isCus", 1);
                $("#mallShipTemplate_areaBoxInput").attr("area1", $("#mallShipTemplate_allArea").val());
                $("#mallShipTemplate_areaBox2 .sec_content").html("");
                $("#mallShipTemplate_areaBox2 .thd_content").html("")
            }
        }
        $("#mallShipTemplate_areaBoxInput").val("");
        if ($("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
            return
        }
        var E = c($("#mallShipTemplate_allArea").val());
        $("#mallShipTemplate_sec_box .sec_content").append(E);
        $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + $("#mallShipTemplate_allArea option[value='" + $("#mallShipTemplate_allArea").val() + "']").text());
        var F = $("#mallShipTemplate_allArea").val();
        i = false;
        if (A === 0) {
            Site.mallStlCalcTotal(z);
            return
        }
        $.each(g, function (H, J) {
            if (u) {
                var I = false,
                    G = C.scrl || [];
                $.each(G, function (L, K) {
                    if (K.st === J.type) {
                        var M = false;
                        if (i) {
                            M = $.inArray(parseInt(F), K.arl) > -1
                        } else {
                            M = $.inArray(parseInt(F), K.carl) > -1
                        } if (M) {
                            if (K.fc === 1) {
                                if (j === 1) {
                                    if (A >= K.d1) {
                                        I = true;
                                        return false
                                    }
                                } else {
                                    if (A <= K.d1) {
                                        I = true;
                                        return false
                                    }
                                }
                            }
                            if (K.fc === 2) {
                                if (d >= K.d2) {
                                    I = true;
                                    return false
                                }
                            }
                            if (K.fc === 3) {
                                if (j === 1) {
                                    if (A >= K.d1 && d >= K.d2) {
                                        I = true;
                                        return false
                                    }
                                } else {
                                    if (A <= K.d1 && d >= K.d2) {
                                        I = true;
                                        return false
                                    }
                                }
                            }
                            if (K.fc === 4) {
                                if (j === 1) {
                                    if (A >= K.d1 || d >= K.d2) {
                                        I = true;
                                        return false
                                    }
                                } else {
                                    if (A <= K.d1 || d >= K.d2) {
                                        I = true;
                                        return false
                                    }
                                }
                            }
                        }
                    }
                });
                if (I) {
                    $("#template_item_money" + J.type).html("").html(LS.freeShipping);
                    $("#template_item_" + J.type).attr("price", 0);
                    return
                }
            }
            if (!J.regionList || J.regionList.length <= 0) {
                $("#template_item_money" + J.type).html("").html((n + J.defaultPrice.toFixed(1)));
                $("#template_item_" + J.type).attr("price", J.defaultPrice.toFixed(1));
                return true
            }
            $.each(J.regionList, function (Q, T) {
                var L = false;
                if (i) {
                    L = $.inArray(parseInt(F), T.areaList) < 0
                } else {
                    L = $.inArray(parseInt(F), T.cusAreaList) < 0
                } if (L) {
                    $("#template_item_money" + J.type).html("").html((n + J.defaultPrice.toFixed(1)));
                    $("#template_item_" + J.type).attr("price", J.defaultPrice.toFixed(1));
                    return true
                }
                var P = 0,
                    M = T.price,
                    R = T.rha == null ? 1 : T.rha,
                    S = T.ria == null ? 1 : T.ria,
                    N = T.rip || 0;
                var O = A;
                if (R > 0) {
                    P = M;
                    O -= R
                }
                if (S > 0 && O > 0) {
                    var K = (O / S).toFixed(1);
                    K = Math.ceil(K);
                    P += N * K
                }
                $("#template_item_money" + J.type).html("").html((n + P.toFixed(1)));
                $("#template_item_" + J.type).attr("price", P.toFixed(1));
                return false
            })
        });
        Site.mallStlCalcTotal(z)
    });
    $("#mallShipTemplate_areaBoxInput").unbind("click").bind("click", function (E) {
        if ($("#mallShipTemplate_allArea").val() == "cn") {
            $("#mallShipTemplate_areaBox1").toggle();
            $("#mallShipTemplate_areaBox2").hide();
            $("#mallShipTemplate_province_box").show();
            $("#mallShipTemplate_city_box").hide();
            $("#mallShipTemplate_county_box").hide()
        } else {
            if ($("#mallShipTemplate_allArea").val() == null || $("#mallShipTemplate_allArea").val() == "os") {} else {
                $("#mallShipTemplate_areaBox2").toggle();
                $("#mallShipTemplate_areaBox1").hide();
                $("#mallShipTemplate_sec_box").show();
                $("#mallShipTemplate_thd_box").hide()
            }
        }
        h(E)
    });
    $("#mallShipTemplate_areaBox1 .J_areaHead .pv").click(function () {
        $("#mallShipTemplate_province_box").show();
        $("#mallShipTemplate_city_box").hide();
        $("#mallShipTemplate_county_box").hide()
    });
    $("#mallShipTemplate_areaBox1 .J_areaHead .city").click(function () {
        $("#mallShipTemplate_province_box").hide();
        $("#mallShipTemplate_city_box").show();
        $("#mallShipTemplate_county_box").hide()
    });
    $("#mallShipTemplate_areaBox1 .J_areaHead .county").click(function () {
        $("#mallShipTemplate_province_box").hide();
        $("#mallShipTemplate_city_box").hide();
        $("#mallShipTemplate_county_box").show()
    });
    $("#mallShipTemplate_areaBox2 .J_areaHead2 .sec").click(function () {
        $("#mallShipTemplate_sec_box").show();
        $("#mallShipTemplate_thd_box").hide()
    });
    $("#mallShipTemplate_areaBox2 .J_areaHead2 .thd").click(function () {
        $("#mallShipTemplate_sec_box").hide();
        $("#mallShipTemplate_thd_box").show()
    });
    $("#mallShipTemplate_province_box .group_item").bind("click", function () {
        $("#mallShipTemplate_areaBox1 .city_content").remove();
        $("#mallShipTemplate_areaBox1 .county_content").remove();
        var E = $(this).attr("pname");
        var F = $(this).attr("pid");
        $("#mallShipTemplate_areaBox1 .J_areaHead .city").click();
        $("#mallShipTemplate_areaBoxInput").val("");
        $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + E);
        $("#mallShipTemplate_areaBoxInput").removeAttr("lastArea");
        $("#mallShipTemplate_areaBoxInput").removeAttr("lastAreaType");
        $("#mallShipTemplate_areaBoxInput").attr("area1", F);
        $("#mallShipTemplate_areaBoxInput").attr("area2", "");
        $("#mallShipTemplate_areaBoxInput").attr("area3", "");
        $("#mallShipTemplate_areaBox1 .city_content").remove();
        var G = r(site_cityUtil.getCities(F));
        $("#mallShipTemplate_city_box").append(G);
        $.each(g, function (H, I) {
            $("#template_item_" + I.type).attr("price", I.defaultPrice.toFixed(1))
        });
        Site.mallStlCalcTotal(z)
    });
    $("#mallShipTemplate_city_box").delegate(".group_item", "click", function () {
        if ($("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
            i = true
        } else {
            i = false
        }
        $("#mallShipTemplate_areaBox1 .county_content").remove();
        var E = $(this).attr("cname");
        var G = $(this).attr("cid");
        $("#mallShipTemplate_areaBox1 .J_areaHead .county").click();
        var I = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
        var F = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
        if (F != null && F != "") {
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().substring(0, $("#mallShipTemplate_areaBoxInput").val().indexOf("-")))
        }
        $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "city");
        $("#mallShipTemplate_areaBoxInput").attr("area2", G);
        $("#mallShipTemplate_areaBoxInput").attr("area3", "");
        $("#mallShipTemplate_areaBox1 .county_content").remove();
        var H = k(site_cityUtil.getCounty(G));
        $("#mallShipTemplate_county_box").append(H);
        if (A === 0) {
            Site.mallStlCalcTotal(z);
            return
        }
        $.each(g, function (K, M) {
            if (u) {
                var L = false,
                    J = C.scrl || [];
                $.each(J, function (O, N) {
                    if (N.st === M.type) {
                        var P = false;
                        if (i) {
                            P = $.inArray(parseInt(G), N.arl) > -1
                        } else {
                            P = $.inArray(parseInt(G), N.carl) > -1
                        } if (P) {
                            if (N.fc === 1) {
                                if (j === 1) {
                                    if (A >= N.d1) {
                                        L = true;
                                        return false
                                    }
                                } else {
                                    if (A <= N.d1) {
                                        L = true;
                                        return false
                                    }
                                }
                            }
                            if (N.fc === 2) {
                                if (d >= N.d2) {
                                    L = true;
                                    return false
                                }
                            }
                            if (N.fc === 3) {
                                if (j === 1) {
                                    if (A >= N.d1 && d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                } else {
                                    if (A <= N.d1 && d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                }
                            }
                            if (N.fc === 4) {
                                if (j === 1) {
                                    if (A >= N.d1 || d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                } else {
                                    if (A <= N.d1 || d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                }
                            }
                        }
                    }
                });
                if (L) {
                    $("#template_item_money" + M.type).html("").html(LS.freeShipping);
                    $("#template_item_" + M.type).attr("price", 0);
                    return
                }
            }
            if (!M.regionList || M.regionList.length <= 0) {
                $("#template_item_money" + M.type).html("").html((n + M.defaultPrice.toFixed(1)));
                $("#template_item_" + M.type).attr("price", M.defaultPrice.toFixed(1));
                return true
            }
            $.each(M.regionList, function (T, W) {
                var O = false;
                if (i) {
                    O = $.inArray(parseInt(G), W.areaList) < 0
                } else {
                    O = $.inArray(parseInt(G), W.cusAreaList) < 0
                } if (O) {
                    $("#template_item_money" + M.type).html("").html((n + M.defaultPrice.toFixed(1)));
                    $("#template_item_" + M.type).attr("price", M.defaultPrice.toFixed(1));
                    return true
                }
                var S = 0,
                    P = W.price,
                    U = W.rha == null ? 1 : W.rha,
                    V = W.ria == null ? 1 : W.ria,
                    Q = W.rip || 0;
                var R = A;
                if (U > 0) {
                    S = P;
                    R -= U
                }
                if (V > 0 && R > 0) {
                    var N = (R / V).toFixed(1);
                    N = Math.ceil(N);
                    S += Q * N
                }
                $("#template_item_money" + M.type).html("").html((n + S.toFixed(1)));
                $("#template_item_" + M.type).attr("price", S.toFixed(1));
                return false
            })
        });
        Site.mallStlCalcTotal(z)
    });
    $("#mallShipTemplate_county_box").delegate(".group_item", "click", function () {
        var E = $(this).attr("cname");
        var G = $(this).attr("cid");
        var H = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
        var F = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
        if (F != null && F == "county") {
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().replace(H, ""))
        }
        $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "county");
        $("#mallShipTemplate_areaBoxInput").attr("area3", G);
        $("#mallShipTemplate_areaBox1").hide();
        Site.mallStlCalcTotal(z)
    });
    $("#mallShipTemplate_sec_box").delegate(".group_item", "click", function () {
        if ($("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
            i = true
        } else {
            i = false
        }
        $("#mallShipTemplate_areaBox2 .thd_content").html("");
        var E = $(this).attr("cname");
        var G = $(this).attr("cid");
        $("#mallShipTemplate_areaBox2 .J_areaHead2 .thd").click();
        var I = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
        var F = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
        if (F != null && F != "" && $("#mallShipTemplate_areaBoxInput").val().indexOf("-") != -1) {
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().substring(0, $("#mallShipTemplate_areaBoxInput").val().indexOf("-")))
        }
        $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "sec");
        $("#mallShipTemplate_areaBoxInput").attr("area2", G);
        $("#mallShipTemplate_areaBoxInput").attr("area3", "");
        var H = c(G);
        $("#mallShipTemplate_thd_box .thd_content").append(H);
        if (A === 0) {
            Site.mallStlCalcTotal(z);
            return
        }
        $.each(g, function (K, M) {
            if (u) {
                var L = false,
                    J = C.scrl || [];
                $.each(J, function (O, N) {
                    if (N.st === M.type) {
                        var P = false;
                        if (i) {
                            P = $.inArray(parseInt(G), N.arl) > -1
                        } else {
                            P = $.inArray(parseInt(G), N.carl) > -1
                        } if (P) {
                            if (N.fc === 1) {
                                if (j === 1) {
                                    if (A >= N.d1) {
                                        L = true;
                                        return false
                                    }
                                } else {
                                    if (A <= N.d1) {
                                        L = true;
                                        return false
                                    }
                                }
                            }
                            if (N.fc === 2) {
                                if (d >= N.d2) {
                                    L = true;
                                    return false
                                }
                            }
                            if (N.fc === 3) {
                                if (j === 1) {
                                    if (A >= N.d1 && d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                } else {
                                    if (A <= N.d1 && d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                }
                            }
                            if (N.fc === 4) {
                                if (j === 1) {
                                    if (A >= N.d1 || d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                } else {
                                    if (A <= N.d1 || d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                }
                            }
                        }
                    }
                });
                if (L) {
                    $("#template_item_money" + M.type).html("").html(LS.freeShipping);
                    $("#template_item_" + M.type).attr("price", 0);
                    return
                }
            }
            if (!M.regionList || M.regionList.length <= 0) {
                $("#template_item_money" + M.type).html("").html((n + M.defaultPrice.toFixed(1)));
                $("#template_item_" + M.type).attr("price", M.defaultPrice.toFixed(1));
                return true
            }
            $.each(M.regionList, function (T, W) {
                var O = false;
                if (i) {
                    O = $.inArray(parseInt(G), W.areaList) < 0
                } else {
                    O = $.inArray(parseInt(G), W.cusAreaList) < 0
                } if (O) {
                    $("#template_item_money" + M.type).html("").html((n + M.defaultPrice.toFixed(1)));
                    $("#template_item_" + M.type).attr("price", M.defaultPrice.toFixed(1));
                    return true
                }
                var S = 0,
                    P = W.price,
                    U = W.rha == null ? 1 : W.rha,
                    V = W.ria == null ? 1 : W.ria,
                    Q = W.rip || 0;
                var R = A;
                if (U > 0) {
                    S = P;
                    R -= U
                }
                if (V > 0 && R > 0) {
                    var N = (R / V).toFixed(1);
                    N = Math.ceil(N);
                    S += Q * N
                }
                $("#template_item_money" + M.type).html("").html((n + S.toFixed(1)));
                $("#template_item_" + M.type).attr("price", S.toFixed(1));
                return false
            })
        });
        Site.mallStlCalcTotal(z)
    });
    $("#mallShipTemplate_thd_box").delegate(".group_item", "click", function () {
        if ($("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
            i = true
        } else {
            i = false
        }
        var E = $(this).attr("cname");
        var G = $(this).attr("cid");
        var H = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
        var F = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
        if (F != null && F == "thd") {
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().replace(H, ""))
        }
        $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "thd");
        $("#mallShipTemplate_areaBoxInput").attr("area3", G);
        $("#mallShipTemplate_areaBox2").hide();
        if (A === 0) {
            Site.mallStlCalcTotal(z);
            return
        }
        $.each(g, function (J, L) {
            if (u) {
                var K = false,
                    I = C.scrl || [];
                $.each(I, function (N, M) {
                    if (M.st === L.type) {
                        var O = false;
                        if (i) {
                            O = $.inArray(parseInt(G), M.arl) > -1
                        } else {
                            O = $.inArray(parseInt(G), M.carl) > -1
                        } if (O) {
                            if (M.fc === 1) {
                                if (j === 1) {
                                    if (A >= M.d1) {
                                        K = true;
                                        return false
                                    }
                                } else {
                                    if (A <= M.d1) {
                                        K = true;
                                        return false
                                    }
                                }
                            }
                            if (M.fc === 2) {
                                if (d >= M.d2) {
                                    K = true;
                                    return false
                                }
                            }
                            if (M.fc === 3) {
                                if (j === 1) {
                                    if (A >= M.d1 && d >= M.d2) {
                                        K = true;
                                        return false
                                    }
                                } else {
                                    if (A <= M.d1 && d >= M.d2) {
                                        K = true;
                                        return false
                                    }
                                }
                            }
                            if (M.fc === 4) {
                                if (j === 1) {
                                    if (A >= M.d1 || d >= M.d2) {
                                        K = true;
                                        return false
                                    }
                                } else {
                                    if (A <= M.d1 || d >= M.d2) {
                                        K = true;
                                        return false
                                    }
                                }
                            }
                        }
                    }
                });
                if (K) {
                    $("#template_item_money" + L.type).html("").html(LS.freeShipping);
                    $("#template_item_" + L.type).attr("price", 0);
                    return
                }
            }
            if (!L.regionList || L.regionList.length <= 0) {
                $("#template_item_money" + L.type).html("").html((n + L.defaultPrice.toFixed(1)));
                $("#template_item_" + L.type).attr("price", L.defaultPrice.toFixed(1));
                return true
            }
            $.each(L.regionList, function (S, V) {
                var N = false;
                if (i) {
                    N = $.inArray(parseInt(G), V.areaList) < 0
                } else {
                    N = $.inArray(parseInt(G), V.cusAreaList) < 0
                } if (N) {
                    $("#template_item_money" + L.type).html("").html((n + L.defaultPrice.toFixed(1)));
                    $("#template_item_" + L.type).attr("price", L.defaultPrice.toFixed(1));
                    return true
                }
                var R = 0,
                    O = V.price,
                    T = V.rha == null ? 1 : V.rha,
                    U = V.ria == null ? 1 : V.ria,
                    P = V.rip || 0;
                var Q = A;
                if (T > 0) {
                    R = O;
                    Q -= T
                }
                if (U > 0 && Q > 0) {
                    var M = (Q / U).toFixed(1);
                    M = Math.ceil(M);
                    R += P * M
                }
                $("#template_item_money" + L.type).html("").html((n + R.toFixed(1)));
                $("#template_item_" + L.type).attr("price", R.toFixed(1));
                return false
            })
        });
        Site.mallStlCalcTotal(z)
    });
    $("#template_item_" + e.type).click();

    function r(F) {
        var E = "";
        E += "<div class='city_content'>";
        $.each(F, function (G, H) {
            if (t == 2052 || t == 1028) {
                E += "<div class='group_item' cid='" + H.id + "' cname='" + site_cityUtil.getInfo(H.id).name + "'>" + site_cityUtil.simpleCityNameStr(site_cityUtil.getInfo(H.id).name) + "</div>"
            } else {
                E += "<div class='group_item' cid='" + H.id + "' cname='" + site_cityUtil.getInfoEn(H.id).name + "'>" + site_cityUtil.simpleCityNameStrEn(site_cityUtil.getInfoEn(H.id).name) + "</div>"
            }
        });
        E += "</div>";
        return E
    }

    function k(F) {
        var E = "";
        E += "<div class='county_content'>";
        $.each(F, function (G, H) {
            if (t == 2052 || t == 1028) {
                E += "<div class='group_item' cid='" + H.id + "' cname='" + site_cityUtil.getInfo(H.id).name + "'>" + site_cityUtil.getInfo(H.id).name + "</div>"
            } else {
                E += "<div class='group_item' cid='" + H.id + "' cname='" + site_cityUtil.getInfoEn(H.id).name + "'>" + site_cityUtil.getInfoEn(H.id).name + "</div>"
            }
        });
        E += "</div>";
        return E
    }

    function f(F) {
        var E = "";
        var G = false;
        $.each(p, function (H, I) {
            if (G) {
                return
            }
            if (I.id == F) {
                E = I.name;
                G = true
            }
        });
        return E
    }

    function v(F) {
        var E = [];
        $.each(p, function (G, H) {
            if (H.parentId == F) {
                E.push(H)
            }
        });
        return E
    }

    function c(E) {
        if (isNaN(E)) {
            return ""
        }
        var G = parseInt(E);
        var F = "";
        $.each(v(G), function (H, I) {
            F += "<div class='group_item' cid='" + I.id + "' cname='" + I.name + "'>" + I.name + "</div>"
        });
        return F
    }
};
Site.initPresentIpt = function () {
    var a = $("#useItg");
    if (a.length > 0) {
        a.bind("blur", function () {
            var h = parseInt(a.attr("_needitg"));
            var f = parseInt(a.val());
            var k = a.attr("_itgname");
            var j = parseInt(a.attr("_maxuse"));
            var b = 0;
            if (isNaN(f)) {
                f = 0
            }
            var c = $(this).attr("moduleId");
            var d = Fai.top.$("#module" + c);
            var g = parseFloat(d.find(".cartTotal").attr("pay_price"));
            if (isNaN(g)) {
                return
            }
            if ($("#couponList").length > 0 && $("#couponList input:checkbox").is(":checked")) {
                var i = 0;
                if ($("#couponOffsetMoney").length > 0) {
                    var l = $("#couponOffsetMoney").attr("_offsetmoney");
                    if (!isNaN(l)) {
                        i = parseInt(l);
                        var m = Math.floor((g - i) * h);
                        if (m < j) {
                            j = m
                        }
                    }
                }
            }
            if (f > j) {
                Fai.ing(Fai.format(LS.integral_maxUse, j, Fai.encodeHtml(k)), true);
                a.val(j);
                var e = (j / h).toFixed(2);
                $("#offsetMoney").text(e);
                $("#offsetMoney").attr("_offsetmoney", e);
                Site.mallStlCalcTotal(c);
                return
            }
            if (f > parseInt(a.attr("_currentItg"))) {
                Fai.ing(Fai.format(LS.integral_notOverCurrent, Fai.encodeHtml(k), Fai.encodeHtml(k)));
                a.focus();
                return
            }
            if (f < 0) {
                Fai.ing(LS.integral_inputInteger);
                a.focus();
                return
            }
            var e = (f / h).toFixed(2);
            $("#offsetMoney").text(e);
            $("#offsetMoney").attr("_offsetmoney", e);
            if ($("#couponList").length > 0) {
                $("#couponList input:checkbox").each(function () {
                    var n = parseInt($(this).attr("_minPrice"));
                    if (g - e < n) {
                        $(this).parents("#couponList tr").hide();
                        if ($(this).prop("checked")) {
                            $(".useItgTip .maxUse").text($("#useItg").attr("_maxuse"));
                            $(".cp-offsetTip .used-count").text("0");
                            $("#couponOffsetMoney").text("0.00");
                            $("#couponOffsetMoney").attr("_offsetmoney", "0.00")
                        }
                        $("#couponList input:checkbox").attr("checked", false)
                    } else {
                        $(this).parents("#couponList tr").show()
                    }
                });
                if ($("#couponList tr").is(":visible")) {
                    $("#couponListTip").hide()
                } else {
                    $("#couponListTip").show()
                }
            }
            Site.mallStlCalcTotal(c)
        })
    }
};
Site.deductionItem = function (a) {
    $("#itgTitle,#couponTitle").click(function () {
        if (Fai.isIE6() || Fai.isIE7()) {
            $(this).next().show()
        } else {
            $(this).next().slideToggle()
        } if ($(this).find(".switch-sign").text() == "+") {
            $(this).find(".switch-sign").text("-")
        } else {
            $(this).find(".switch-sign").text("+")
        }
    });
    var b = Site.getBackgroundColor($(".J-fk-triangle"));
    $(".J-fk-triangle").css("border-color", "transparent transparent " + b + " transparent");
    $(".couponMsg input:checkbox").click(function () {
        if ($(this).is(":checked")) {
            $(this).attr("checked", false)
        } else {
            $(this).attr("checked", true)
        }
    });
    $(".couponMsg tr").click(function () {
        var i = $(this).find("input:checkbox").is(":checked");
        $("#couponList input:checkbox").attr("checked", false);
        var g = 0;
        $(".cp-offsetTip .used-count").text("0");
        if (!i) {
            $(".cp-offsetTip .used-count").text("1");
            var j = $(this).find("input:checkbox");
            j.attr("checked", true);
            g = parseFloat(j.attr("data_saveprice"))
        }
        if ($(".integralMsg").length > 0) {
            var d = $("#useItg"),
                f = parseInt(d.attr("_needitg")),
                h = parseInt(d.attr("_maxuse"));
            var c = Fai.top.$("#module" + a);
            var e = parseFloat(c.find(".cartTotal").attr("pay_price"));
            if (isNaN(e)) {
                return
            }
            var k = Math.floor((e - g) * f);
            if (k < h) {
                $(".useItgTip .maxUse").text(k)
            } else {
                $(".useItgTip .maxUse").text(h)
            }
        }
        $("#couponOffsetMoney").text(g.toFixed(2));
        $("#couponOffsetMoney").attr("_offsetmoney", g);
        Site.mallStlCalcTotal(a)
    });
    $("#clickShowInput").click(function () {
        $(this).next().show();
        $(this).remove()
    })
};
Site.showBankList = function (b) {
    var a = $("#" + b).attr("value");
    $("#mallPay").attr("value", a)
};
Site.initOnlineBankList = function () {
    $("#payOnlinePanel").insertAfter($("#onlineItem")[0])
};
Site.getWxpayUrl = function (b) {
    var a = $("#wxpayBtn");
    if (a.attr("_sending") === "true") {
        Fai.ing("您的操作太频繁，请稍后再试。", true);
        return
    }
    a.attr("_sending", "true");
    $.ajax({
        type: "post",
        url: "ajax/mall_h.jsp?cmd=getWxpayUrl",
        data: "orderId=" + b,
        error: function () {
            Fai.ing("系统错误。")
        }, success: function (c) {
            var d = $.parseJSON(c);
            if (d.success) {
                Site.showWxQRCode(d.url, b)
            } else {
                Fai.ing(d.errMsg + "(请联系网站管理员)")
            }
        }
    })
};
Site.showWxQRCode = function (a, b) {
    var h = parseInt(Math.random() * 10000);
    var i = 480;
    var d = 800;
    var f = ["<div  id='wxpayQrCodeBox" + h + "' class='popupBg'  style='filter: alpha(opacity=50); opacity:0.5;'></div>", "<div id='wxPayQRCodeDisplay" + h + "' class='webSiteQRCodeDisplay' style='z-index:9032;display:block;width: " + d + "px;height:" + i + "px;left:" + (Fai.top.document.documentElement.clientWidth - d) / 2 + "px;'>", "<div class='wxqrCodeTitileBox'>", "<div class='wxqrCodeTitile'>微信支付</div>", "<a hidefocus='true' href='javascript:;' class='cancelBtn' onclick='Site.closeWxQrcodeDiv(" + h + ");return false;'></a>", "<div style='clear:both;'></div>", "</div>", "<div class='wxpayQrCodeBox'>", "<div class='wxpayQrCodeImgBox'>", "<img title='' src='/qrCode.jsp?cmd=wxPayQrCode&&url=" + a + "' >", "</div>", "<div class='wxpayQrCodeTips'></div>", "</div>", "<div  class='wxGuardImg'></div>", "<div style='clear:both;'></div>", "<div class='paidTips'>完成支付5秒后没跳转，请刷新页面。</div>", "</div>"];
    Fai.top.$(f.join("")).appendTo("body");
    var e = Fai.top.document.documentElement.clientHeight;
    var g = (e - i) / 2;
    var c = $(window).scrollTop();
    $("#wxPayQRCodeDisplay" + h).css("top", g + c);
    $("#wxpayBtn").attr("_sending", "false");
    setInterval("Site.checkOrderStatue(" + b + ")", 2000)
};
Site.closeWxQrcodeDiv = function (a) {
    Fai.top.$("#wxpayQrCodeBox" + a).remove();
    Fai.top.$("#wxPayQRCodeDisplay" + a).remove();
    top.location.reload()
};
Site.checkOrderStatue = function (a) {
    $.ajax({
        type: "post",
        url: "ajax/mall_h.jsp?cmd=checkOrderStatue",
        data: "orderId=" + a,
        error: function () {
            Fai.ing("系统错误。")
        }, success: function (b) {
            var c = $.parseJSON(b);
            if (c.success) {
                window.location.reload()
            }
        }
    })
};
Site.mallCartInit = function (c) {
    var b = Fai.top.$("#memberBar");
    if (b.length < 1) {
        return
    }
    var a = b.find("#mallCart_js");
    var d = b.find(".mallCartPanel");
    $(a).find(".mallCartItem").bind("click", function () {
        window.open("mcart.jsp", "_blank")
    });
    $(d).find(".checkMallCartBtn").bind("click", function () {
        window.open("mcart.jsp", "_blank")
    });
    Site.refreshTopAndRightBarMallCartNum();
    if (c != 13 && c != 14) {
        $(a).bind("mouseenter", function (e) {
            var f = b.find(".mallCartPanel");
            $(this).attr("_mouseIn", 1);
            $(this).find(".mallCartItem").addClass("mallCartItem_hover");
            if (!$(f).is(":visible")) {
                Site.refreshTopBarMallCart(this)
            }
        }).bind("mouseleave", function () {
            $(this).attr("_mouseIn", 0);
            setTimeout(function () {
                var e = b.find(".mallCartPanel");
                var f = $(e).attr("_mouseIn");
                if (f != 1) {
                    $(e).hide();
                    b.find(".mallCartItem").removeClass("mallCartItem_hover")
                }
            }, 50)
        });
        $(d).bind("mouseenter", function () {
            $(this).attr("_mouseIn", 1)
        }).bind("mouseleave", function () {
            $(this).attr("_mouseIn", 0);
            setTimeout(function () {
                var f = Fai.top.$("#memberBar");
                var e = f.find("#mallCart_js");
                var g = $(e).attr("_mouseIn");
                if (g != 1) {
                    f.find(".mallCartPanel").hide();
                    f.find(".mallCartItem").removeClass("mallCartItem_hover")
                }
            }, 50)
        })
    }
};
Site.mobiWebInit = function () {
    var c = Fai.top.$("#memberBar").find("#mobiWeb_js");
    var b = Fai.top.$("#memberBar").find(".mobiWebPanel");
    var a = Fai.top.$("#memberBar").find("#mobiWebQRCode_js");
    $(c).bind("mouseenter", function (f) {
        $(this).attr("_mouseIn", 1);
        $(this).find(".mobiWebItem").addClass("mobiWebItem_hover");
        var d = parseInt($(c).css("margin-left"));
        var e = parseInt($(a).css("width")) + 2;
        var g = $(c).position().left + d - e + $(c).width();
        $(b).css("left", g + "px");
        $(b).show()
    }).bind("mouseleave", function () {
        $(this).attr("_mouseIn", 0);
        setTimeout(function () {
            var d = Fai.top.$("#memberBar").find(".mobiWebPanel");
            var e = $(d).attr("_mouseIn");
            if (e != 1) {
                $(d).hide();
                Fai.top.$("#memberBar").find(".mobiWebItem").removeClass("mobiWebItem_hover")
            }
        }, 50)
    });
    $(b).bind("mouseenter", function (d) {
        $(this).attr("_mouseIn", 1)
    }).bind("mouseleave", function () {
        $(this).attr("_mouseIn", 0);
        setTimeout(function () {
            var d = Fai.top.$("#memberBar").find("#mobiWeb_js");
            var e = $(d).attr("_mouseIn");
            if (e != 1) {
                Fai.top.$("#memberBar").find(".mobiWebPanel").hide();
                Fai.top.$("#memberBar").find(".mobiWebItem").removeClass("mobiWebItem_hover")
            }
        }, 50)
    })
};
Site.refreshTopBarMallCart = function (a) {
    var d = Fai.top.$("#memberBar").find("#mallCartList_js");
    var b = $(a).position().top + $(a).height();
    var c = parseInt($(a).css("margin-left"));
    var e = $(a).position().left + c - parseInt($(d).css("width")) - 2 + $(a).width();
    var f = Fai.top.$("#memberBar").find(".mallCartPanel");
    $(f).css("top", b + "px").css("left", e + "px");
    $(f).show().children().before("<div class='mallCartLoad'></div>");
    if (Fai.isIE6()) {
        var g = $(f).height();
        $(f).find(".mallCartLoad").css("height", g + "px")
    }

};
Site.createTopBarMallCartList = function (c, a, k) {
    Fai.top.$("#memberBar").find(".mcProductList").attr("data-orderId", a).html("");
    var i = [];
    var b = 0,
        m = 0;
    var g = 0;
    for (var h in c) {
        b += c[h].amount
    }
    for (h = 0; h < c.length; h++) {
        var d = c[h],
            e = d.amount;
        if (d.isValid) {
            m += d.price * e
        }
    }
    var j = [];
    j.push("<div class='mall_cart_total'>");
    j.push("<div>");
    j.push(Fai.format(LS.shoppingCartCalculatePro, b));
    j.push("</div>");
    j.push("<div>");
    j.push("<span class='sC-priceTotal'>" + LS.shoppingCartCountMoney + "<b>" + k.toString() + m.toFixed(2) + "</b></span>");
    j.push("</div>");
    j.push("</div>");
    i.push("<ul>");
    i.push("<div style='text-align: left;padding:0 15px;'>" + LS.memberMallCartJoin + "：</div>");
    for (var h in c) {
        var d = c[h];
        var e = d.amount;
        if (g == 5) {
            break
        }
        b = b - e;
        f(d);
        g++
    }
    i.push("<li class='mcProductListTip'></li>");
    Fai.top.$("#memberBar").find(".checkMallCartBtn").css("margin-top", "12px");
    i.push("</ul>");
    Fai.top.$("#memberBar").find(".mcProductList").append(i.join(""));
    Fai.top.$("#memberBar").find(".mall_cart_total").remove();
    Fai.top.$("#memberBar").find(".mcProductList").after(j.join(""));
    var l = [];
    Fai.top.$("#memberBar").find(".mcProductList .mcPdInvalid").each(function () {
        l.push($(this).prop("outerHTML"));
        $(this).remove()
    });
    Fai.top.$("#memberBar").find(".mcProductListTip").before(l.join(""));
    Fai.top.$("#memberBar").find(".checkMallCartBtn").addClass("checkMallCartBtn_hasPro");

    function f(r) {
        var s = d.isValid ? "" : " mcPdInvalid ";
        var p = d.inValidType;
        var q = [];
        if (d.picId != "") {
            q.push("<div class='mcProductList_proPic'>");
            q.push("<img alt=" + Fai.encodeHtml(d.name) + " src=" + d.picPath + ">");
            q.push("</div>")
        } else {
            q.push("<div class='mcProductList_proNoPic'></div>")
        }
        var o = "";
        if (s != "") {
            if (p == "notAdded") {
                o = "title='" + LS.notAdded + "'"
            } else {
                o = " title='" + LS.invalid + "' "
            }
        }
        var n = r.amount;
        if (r.amount > 9999) {
            n = (n + "").substring(0, 3) + "..."
        }
        i.push("<li class='mcProductList_pro " + s + "' data-itemId='" + d.id + "'" + o + ">");
        i.push(q.join(""));
        i.push("<div class='mcProductList_proName' style='width: 85px;'>");
        i.push("<span title='" + Fai.encodeHtml(d.name) + "' style='width:95px;'>" + Fai.encodeHtml(d.name) + "</span>");
        if (!s) {
            i.push("<span title='" + Fai.encodeHtml(d.optionType) + "'>" + Fai.encodeHtml(d.optionType) + "</span>")
        } else {
            i.push("<span " + o + "> [" + LS.invalid + "]</span>")
        }
        i.push("</div>");
        i.push("<div class='mcProductList_proPrice' style='width: 95px;'>");
        if (s) {
            i.push("<span>" + k.toString() + "</span><span class='s_invalid_price'>" + d.price.toFixed(2) + "</span>")
        } else {
            i.push("<span>" + k.toString() + "</span><span class='s_price'>" + d.price.toFixed(2) + "</span>")
        }
        i.push("<span style='margin-left: 10px;float:right;margin-top:-18px;'>×" + n + "</span>");
        i.push("</div>");
        i.push("<div class='mcProductList_proDel' style=''><a hidefocus='true' href='javascript:;' ");
        i.push("onclick='Site.delTopBarMallCartItem(" + a + ", " + d.id + ");return false;'>" + LS.memberMallCartDel + "</a>");
        i.push("</div>");
        i.push("</li>")
    }
};
Site.delTopBarMallCartItem = function (a, b) {

};
Site.refreshTopAndRightBarMallCartNum = function () {

};
Site.showContacterExtMsg = function (f) {
    var e = $("#module" + f),
        g = e.find(".J-head-more"),
        b = e.find(".J-cont-msg-ext"),
        a = e.find(".fk-order-dt").width(),
        c = b.width(),
        d = a - g.position().left;
    g.hover(function () {
        b.css({
            top: g.position().top + g.height() + 14
        });
        if (d >= c) {
            b.css({
                left: g.position().left - 140
            })
        } else {
            b.find(".cont-tri").css({
                left: c - 50
            });
            b.css({
                left: g.position().left - (c - d) - 10
            })
        }
        b.show()
    }, function () {
        b.hide()
    })
};
Site.initFlowMsg = function (c, a) {
    var b = $("#module" + c);

};
Site.initmCenterFlowQuery = function (b) {
    var a = $("#module" + b),
        c = a.find(".J-mallOrder");
    c.find(".J-flow").hover(function () {
        var h = $(this),
            e = h.attr("_oi"),
            i = h.offset().top + h.outerHeight() + 8,
            j = h.offset().left - 100,
            k = $("#m" + b + "-f-" + e);
        if (k.length > 0) {
            k.show();
            if (Fai.isIE6() || Fai.isIE7()) {
                i += 10
            }
            k.css({
                top: i,
                left: j
            });
            return true
        }
        var d = h.attr("_fn"),
            f = h.attr("_fnu");
        var g = ["<div id='m", b, "-f-", e, "' class='fk-flow g_border J-f-block' style='top:", i, "px;left:", j, "px;'>", "<div class='b-head-ico'></div>", "<div class='b-head'>", "<span>", d, "</span>", "<span class='head-bill'>", LS.flowBill, f, "</span>", "</div>", "<div class='flow-ajaxLoading J-ajaxLoad'>&nbsp;</div>", "<div class='no-msg J-no-msg'>", LS.flowNoMsg, "</div>", "<div class='flow-msg J-flow-msg'></div>", "</div>"];
        k = $(g.join(""));
        k.appendTo("body");

    }, function () {
        var e = $(this),
            d = e.attr("_oi");
        $("#m" + b + "-f-" + d).hide()
    })
};
Site.initOrderSuc = function (c) {
    var b = $("#module" + c);
    var a = ["<div class='fk-order-tip formBox' style='width:235px; height:78px; padding:0 0;background-color:#FFF;'>", "<div class='J-close formXSite' style='margin-top:3px; width:30px;'></div>", "<div class='ico suc-ico' style='margin-top:27px; float:left;'>&nbsp;</div>", "<div class='t-txt' style='margin-top:30px; text-align:center;'>" + LS.orderDetailSubmitSuc + "</div>", "<div>"];
    tip = $(a.join(""));
    b.prepend(tip);
    tip.find(".J-close").click(function () {
        tip.remove()
    });
    tip.css({
        top: 20,
        left: (b.width() - tip.width()) / 2
    });
    tip.fadeOut(5000);
    Fai.top.window.setTimeout(function () {
        tip.remove()
    }, 5000)
};
Site.initConfirmReceipt = function (c, d) {
    var b = $("#module" + c);
    var a = b.find(".memberOrderNewPanel").length > 0;
    b.find(".J-con-rpt").click(function () {
        var i = $(this),
            f = i.parent().parent();
        orderId = i.attr("_oid");
        var g = ["<div class='fk-conRpt' style='margin-top:16px;'>", "<div style='padding:10px; font-family:微软雅黑; font-size:12px; color:rgb(99,99,99);'>", LS.orderConfirmMsg, "</div>", "<div style='padding:10px 0 18px 0;'>", "<span class='J-rpt-cancel popupBClose' title='", LS.cancel, "' style='margin-right:20px;width:60px; height:26px; line-height:25px;'>", LS.cancel, "</span>", "<span class='J-rpt-save con-hover' title='", LS.orderSure, "' style='width:77px; height:26px; background:#1779ff; line-height:25px; border:0;'>" + LS.orderSure + "</span>", "</div>", "</div>"];
        var k = parseInt(Math.random() * 10000);
        var e = {
            boxId: k,
            title: "",
            htmlContent: g.join(""),
            width: 372,
            height: 150,
            boxName: "confirmReceipt"
        };
        var h = Site.popupBox(e);
        var j = "cmd=setStatus&id=" + orderId + "&status=20";
        h.find(".J-rpt-save").on("click", function () {

        })
    })
};
Site.initConOrderCancel = function (b, c) {
    var a = $("#module" + b);
    if (!c) {
        a.find(".J-order-cancel").hover(function () {
            var d = $(this);
            d.attr("class", "order-cancel-hover")
        }, function () {
            var d = $(this);
            d.attr("class", "order-cancel")
        })
    }
    a.find(".J-order-cancel").click(function () {
        var h = $(this),
            e = h.parent().parent();
        orderId = h.attr("_oid");
        var f = ["<div class='fk-cancelOrder'>", "<div style='padding:10px;'>", LS.orderCancelMsg, "</div>", "<div style='padding:10px 0 18px 0;'>", "<span class='J-rpt-cancel popupBClose' style='margin-right:20px;'>", LS.cancel, "</span>", "<span class='J-rpt-save con-hover'>" + LS.confirm + "</span>", "</div>", "</div>"];
        var j = parseInt(Math.random() * 10000);
        var d = {
            boxId: j,
            title: "",
            htmlContent: f.join(""),
            width: 360
        };
        var g = Site.popupBox(d);
        var i = "cmd=setStatus&id=" + orderId + "&status=25";
        g.find(".J-rpt-save").on("click", function () {

        })
    })
};
Site.initPdComment = function (b) {
    var a = $("#module" + b);
    a.find(".J-pd-ct").unbind("click").bind("click", function () {
        var e = $(this),
            c = e.attr("_oid"),
            d = a.find(".J-pd-panel" + c),
            f = d.find(".msgImgList");
        if (Fai.isIE6()) {
            f.css("display", "none")
        }
        if (d.is(":visible")) {
            d.hide()
        } else {
            d.show();
            if (Fai.isIE6()) {
                setTimeout(function () {
                    f.css({
                        display: "block"
                    });
                    var g = f.find("td");
                    if (typeof (g) != "undefined" && g != null) {
                        f.find("td").eq(0).find("div").click()
                    }
                }, 20)
            }
        }
    })
};
Site.commMenUpAllImgList = null;
Site.setMenCommUpAllImgList = function (a) {
    Site.commMenUpAllImgList = Fai.fkEval("(" + a + ")");
    if (Fai.isIE6() || Fai.isIE7()) {
        $(".msgBoard_upImg_border").css({
            width: "50px",
            height: "50px"
        })
    }
};
Site.siteMenCommImgFileUpload2 = function (b, e, g, a, d) {
    var f = g.split(",");
    var c = {
        file_post_name: "Filedata",
        upload_url: "/ajax/commUpsiteimg_h.jsp",
        button_placeholder_id: e,
        file_size_limit: b + "MB",
        button_image_type: 3,
        file_queue_limit: a,
        button_width: "50px",
        button_height: "50px",
        button_cursor: SWFUpload.CURSOR.HAND,
        button_image_url: _resRoot + "/image/site/msgUpImg/upload1.jpg",
        requeue_on_error: false,
        post_params: {
            ctrl: "Filedata",
            app: 21,
            type: 0,
            fileUploadLimit: 5,
            isSiteForm: true
        },
        file_types: f.join(";"),
        file_dialog_complete_handler: function (h) {
            this._allSuccess = false;
            this.startUpload()
        }, file_queue_error_handler: function (i, h, j) {
            switch (h) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                    Fai.ing(LS.siteFormSubmitCheckFileSizeErr, true);
                    break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                    Fai.ing(LS.siteFormSubmitFileUploadNotAllow, true);
                    break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadOneTimeNum, a), true);
                    break;
                default:
                    Fai.ing(LS.siteFormSubmitFileUploadReSelect, true);
                    break
            }
        }, upload_success_handler: function (i, h) {
            var j = jQuery.parseJSON(h);
            this._allSuccess = j.success;
            this._sysResult = j.msg;
            if (j.success) {
                Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSucess, Fai.encodeHtml(i.name)), true);
                j.tbNum = d;
                onFileUploadEvent("upload", j)
            } else {
                Fai.ing(LS.siteFormSubmitFileUploadFile + i.name + "   " + j.msg)
            }
        }, upload_error_handler: function (i, h, j) {
            if (h == -280) {
                Fai.ing(LS.siteFormSubmitFileUploadFileCancle, false)
            } else {
                if (h == -270) {
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadFileExist, Fai.encodeHtml(i.name)), true)
                } else {
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSvrBusy, Fai.encodeHtml(i.name)))
                }
            }
        }, upload_complete_handler: function (i) {
            if (i.filestatus == SWFUpload.FILE_STATUS.COMPLETE) {
                if (a == null || typeof (a) == "undefined") {
                    a = 5
                }
                var j = $("#msgBoardAddImgTb" + d).eq(0);
                var h = j.find("td").length;
                if (h >= (a + 1)) {
                    Fai.ing(LS.siteFormSubmitFileUploadOfMax, true);
                    var k = j.find("td").eq(j.find("td").length - 1);
                    k.css("display", "none");
                    return
                }
                if (typeof (swfObjList) == "undefined") {
                    swfObjList = {}
                }
                swfObj = swfObjList[d];
                setTimeout(function () {
                    swfObj.startUpload()
                }, swfObj.upload_delay)
            } else {
                if (i.filestatus == SWFUpload.FILE_STATUS.ERROR) {
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSvrBusy, Fai.encodeHtml(i.name)))
                }
            }
        }, upload_start_handler: function (h) {
            Fai.enablePopupWindowBtn(0, "save", false);
            Fai.ing(LS.siteFormSubmitFileUploadPrepare, false)
        }, view_progress: function (h, k, j, i) {
            Fai.ing(LS.siteFormSubmitFileUploadIng + i + "%", false)
        }
    };
    if (typeof (swfObjList) == "undefined") {
        swfObjList = {}
    }
    swfObjList[d] = SWFUploadCreator.create(c);
    onFileUploadEvent = function (p, m) {
        if (p == "upload") {
            var j = m.id;
            var o = m.name;
            var l = m.size;
            var k = m.path;
            var q = m.pathSmall;
            var i = m.fileId;
            var h = m.width;
            var n = m.height;
            Site.productMenCommImgTableCtrl2(k, o, j, l, a, i, m.tbNum, q)
        }
    }
};
Site.productMenCommImgTableCtrl2 = function (l, a, b, g, c, d, j, k) {
    var h = $("#pdCommTb" + j).eq(0);
    var i = h.find(".J_td").length - 1;
    var e = h.find(".J_td").eq(i);
    e.html((i) + "/" + c);
    var f = [];
    f.push("<td class='J_td'>");
    f.push("<table class='pdCtIconDiv' cellpadding='0' cellspacing='0'>");
    f.push("<tr>");
    f.push("<td>");
    f.push("<img alt='' class='pdCtIcon' src='" + k + "' _name='" + a + "'  _id='" + b + "' _file_size='" + g + "' _file_id='" + d + "' _path='" + l + "'  _smallPath='" + k + "'/>");
    f.push("</td>");
    f.push("</tr>");
    f.push("</table>");
    f.push("<span onclick='Site.productMenCommImgDelete2(this," + j + ")' class='delPicIcon'/>");
    f.push("</td>");
    e.before(f.join(""));
    if (i >= c) {
        h.find(".J_td").eq(0).hide()
    }
};
Site.productMenCommImgDelete2 = function (a, d) {
    var e = $("#pdCommTb" + d).eq(0);
    var b = e.find(".J_td").length;
    for (var c = 0; c < b; c++) {
        if (e.find(".J_td").eq(c).find(".delPicIcon")[0] === a) {
            e.find(".J_td").eq(c).remove();
            break
        }
    }
    b = e.find(".J_td").length - 1;
    var f = e.find(".J_td").eq(b);
    f.html((b - 1) + "/" + f.attr("maxNum"));
    e.find(".J_td").eq(0).show()
};
Site.orderPdCommentAddCom2 = function (o, q, k, m) {
    if (_siteDemo) {
        Fai.ing("当前为“模板网站”，请先“复制网站”再进行评论。");
        return
    }
    var u = $("#oCommentItem" + q),
        s = $("#ocArea" + q),
        d = $.trim(s.val()),
        j = parseInt(s.attr("minlength")),
        e = parseInt(s.attr("maxlength"));
    if (typeof (d) != "string" || "" == d) {
        s.focus();
        Fai.ing(LS.commentNotEmpty, true);
        return
    }
    if (d.length < j) {
        Fai.ing(Fai.format(LS.commentLenTips, Fai.encodeHtml(j)), true);
        return
    }
    if (d.length > e) {
        Fai.ing(Fai.format(LS.commentLenTips, Fai.encodeHtml(e)), true);
        return
    }
    var r = $("#pdCommTb" + k);
    var h = [];
    var l = [];
    if (r != null && typeof (r) != "undefined") {
        var c = r.eq(0);
        var g = c.find("td").length;
        if (g > 1) {
            for (var x = 0; x < (g - 1); x++) {
                var f = c.find(".J_td").eq(x).find(".pdCtIcon");
                if (f != null && typeof (f) != "undefined" && f.length > 0) {
                    var y = {};
                    var b = {};
                    var w = f.attr("_id");
                    var A = f.attr("_name");
                    var v = f.attr("_path");
                    var a = f.attr("_smallpath");
                    var p = f.attr("_file_size");
                    var t = f.attr("_file_id");
                    y.imgId = w;
                    y.imgName = A;
                    y.imgSize = p;
                    y.tempFileId = t;
                    h.push(y);
                    b.path = v;
                    b.smallPath = a;
                    l.push(b)
                }
            }
        }
    }
    var z = $(".submitStarList").attr("star");
    if (!z) {
        z = 5
    }
    var n = {
        oid: o,
        iid: q,
        commImgList: $.toJSON(h),
        comment: d,
        star: z
    };

};
Site.siteMenCommImgFileUpload = function (b, e, g, a, d) {
    var f = g.split(",");
    var c = {
        file_post_name: "Filedata",
        upload_url: "/ajax/commUpsiteimg_h.jsp",
        button_placeholder_id: e,
        file_size_limit: b + "MB",
        button_image_type: 3,
        file_queue_limit: a,
        button_width: "50px",
        button_height: "50px",
        button_cursor: SWFUpload.CURSOR.HAND,
        button_image_url: _resRoot + "/image/site/msgUpImg/upload1.jpg",
        requeue_on_error: false,
        post_params: {
            ctrl: "Filedata",
            app: 21,
            type: 0,
            fileUploadLimit: 5,
            isSiteForm: true
        },
        file_types: f.join(";"),
        file_dialog_complete_handler: function (h) {
            this._allSuccess = false;
            this.startUpload()
        }, file_queue_error_handler: function (i, h, j) {
            switch (h) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                    Fai.ing(LS.siteFormSubmitCheckFileSizeErr, true);
                    break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                    Fai.ing(LS.siteFormSubmitFileUploadNotAllow, true);
                    break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadOneTimeNum, a), true);
                    break;
                default:
                    Fai.ing(LS.siteFormSubmitFileUploadReSelect, true);
                    break
            }
        }, upload_success_handler: function (i, h) {
            var j = jQuery.parseJSON(h);
            this._allSuccess = j.success;
            this._sysResult = j.msg;
            if (j.success) {
                Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSucess, Fai.encodeHtml(i.name)), true);
                j.tbNum = d;
                onFileUploadEvent("upload", j)
            } else {
                Fai.ing(LS.siteFormSubmitFileUploadFile + i.name + "   " + j.msg)
            }
        }, upload_error_handler: function (i, h, j) {
            if (h == -280) {
                Fai.ing(LS.siteFormSubmitFileUploadFileCancle, false)
            } else {
                if (h == -270) {
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadFileExist, Fai.encodeHtml(i.name)), true)
                } else {
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSvrBusy, Fai.encodeHtml(i.name)))
                }
            }
        }, upload_complete_handler: function (i) {
            if (i.filestatus == SWFUpload.FILE_STATUS.COMPLETE) {
                if (a == null || typeof (a) == "undefined") {
                    a = 5
                }
                var j = $("#msgBoardAddImgTb" + d).eq(0);
                var h = j.find("td").length;
                if (h >= (a + 1)) {
                    Fai.ing(LS.siteFormSubmitFileUploadOfMax, true);
                    var k = j.find("td").eq(j.find("td").length - 1);
                    k.css("display", "none");
                    return
                }
                if (typeof (swfObjList) == "undefined") {
                    swfObjList = {}
                }
                swfObj = swfObjList[d];
                setTimeout(function () {
                    swfObj.startUpload()
                }, swfObj.upload_delay)
            } else {
                if (i.filestatus == SWFUpload.FILE_STATUS.ERROR) {
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSvrBusy, Fai.encodeHtml(i.name)))
                }
            }
        }, upload_start_handler: function (h) {
            Fai.ing(LS.siteFormSubmitFileUploadPrepare, false)
        }, view_progress: function (h, k, j, i) {
            Fai.ing(LS.siteFormSubmitFileUploadIng + i + "%", false)
        }
    };
    if (typeof (swfObjList) == "undefined") {
        swfObjList = {}
    }
    swfObjList[d] = SWFUploadCreator.create(c);
    onFileUploadEvent = function (p, m) {
        if (p == "upload") {
            var j = m.id;
            var o = m.name;
            var l = m.size;
            var k = m.path;
            var q = m.pathSmall;
            var i = m.fileId;
            var h = m.width;
            var n = m.height;
            Site.productMenCommImgTableCtrl(k, o, j, l, a, i, m.tbNum, q)
        }
    }
};
Site.productMenCommImgTableCtrl = function (l, a, b, g, c, d, j, k) {
    var h = $("#msgBoardAddImgTb" + j).eq(0);
    var i = h.find("td").length;
    var e = h.find("td").eq(i - 1);
    e.find(".msgBoard_showImgCount").html((i) + "/" + c);
    var f = [];
    if (Fai.isIE6() || Fai.isIE7()) {
        f.push("<td class='msgBoard_upImg_tb_td2' style='border:0px !important;padding-right:3px;'>");
        f.push("<div class='msgBoard_upImg_border' style='width:50px !important;height:50px !important;margin-left:3px;'>")
    } else {
        f.push("<td class='msgBoard_upImg_tb_td2' style='border:0px !important;'>");
        f.push("<div class='msgBoard_upImg_border'>")
    }
    f.push("<span onclick='Site.productMenCommImgDelete(this," + j + ")' class='msgBoard_upImgTop_set'/>");
    if (Fai.isIE6() || Fai.isIE7()) {
        f.push("<div><p><img alt='' class='msgBoard_upImg_set' src='" + k + "' _name='" + a + "'  _id='" + b + "' _file_size='" + g + "' _file_id='" + d + "' _path='" + l + "'  _smallPath='" + k + "'></p></div>")
    } else {
        f.push("<div><p><img alt='' class='msgBoard_upImg_set' src='" + k + "' _name='" + a + "'   _id='" + b + "' _file_size='" + g + "' _file_id='" + d + "'  _path='" + l + "' _smallPath='" + k + "' style='margin-left:-1px;'></p></div>")
    }
    f.push("</div>");
    f.push("</td>");
    e.before(f.join(""))
};
Site.productMenCommImgDelete = function (a, d) {
    var e = $("#msgBoardAddImgTb" + d).eq(0);
    var b = e.find("td").length;
    for (var c = 0; c < b; c++) {
        if (e.find("td").eq(c).find(".msgBoard_upImgTop_set")[0] === a) {
            e.find("td").eq(c).remove();
            break
        }
    }
    b = e.find("td").length;
    var f = e.find("td").eq(b - 1);
    f.find(".msgBoard_showImgCount").html((b - 1) + "/" + f.attr("maxNum"));
    if (b <= f.attr("maxNum")) {
        if (Fai.isIE6() || Fai.isIE7()) {
            f.css({
                display: "block",
                "padding-top": "7px"
            })
        } else {
            if (Fai.isIE()) {
                f.css({
                    display: "block",
                    "padding-top": "8px"
                })
            } else {
                f.css({
                    display: "block",
                    "padding-top": "12px"
                })
            }
        }
    }
};
Site.showMenCommImgList = function (i, l, d, h, c, b) {
    var f = $("#" + d);
    if (f != null && typeof (f) != "undefined") {
        f.remove()
    }
    var k = $("#" + i);
    var g = k.parentsUntil(".J_imgDiv", ".J_imageTable");
    g.attr("chooseTr", h);
    g.attr("chooseTd", c);
    var e;
    if (b) {
        e = g.find(".J_td")
    } else {
        e = g.find("td");
        b = false
    }
    e.find(".show_msg_border_rect").remove();
    var j = "<div class='show_msg_border_rect'><div class='show_msg_triangle_down'></div></div>";
    e.eq(c).prepend(j);
    var a = [];
    a.push("<div id='" + d + "' class='show_msg_outer_div'>");
    if (Fai.isIE6() || Fai.isIE7()) {
        a.push("<span onclick=Site.commShowPicClose('" + d + "','" + i + "') class='msg_close_show_img_icon' style='margin-top:-8px;'/>");
        a.push("<div class='show_msg_bordered_div' style='width:298px !important; margin-top:-8px;'></div>");
        a.push("<div class='show_msg_border_div' style='width:299px !important;margin-top:-8px;'>")
    } else {
        a.push("<span onclick=Site.commShowPicClose('" + d + "','" + i + "') class='msg_close_show_img_icon'/>");
        a.push("<div class='show_msg_bordered_div'  style='width:299px;'></div>");
        a.push("<div class='show_msg_border_div' style='margin-top:-8px;margin-left:1px;'>")
    }
    a.push("<div><p><img alt='' class='msg_up_show_img_set' src='" + l + "'></p></div>");
    a.push("</div>");
    a.push("</div>");
    g.after(a.join(""));
    setTimeout(function () {
        $("#" + d).hover(function () {
            var m = $("#" + d);
            if (m.find("#J_showCommPicMoveSign").attr("class") == null || typeof (m.find("#J_showCommPicMoveSign").attr("class")) == "undefined") {
                var n = [];
                n.push("<div id='J_showCommPicMoveSign'>");
                n.push("<img alt='' class='showCommPicMoveLeftClickArea' onclick=Site.showMenCommImgMove('" + i + "','" + d + "','left'," + b + ")>");
                n.push("<img alt='' src='" + _resRoot + "/image/site/msgUpImg/mLeft.png' onclick=Site.showMenCommImgMove('" + i + "','" + d + "','left'," + b + ") class='showCommPicMoveLeft'>");
                n.push("<img alt='' class='showCommPicMoveRightClickArea' onclick=Site.showMenCommImgMove('" + i + "','" + d + "','right'," + b + ")>");
                n.push("<img alt='' src='" + _resRoot + "/image/site/msgUpImg/mRight.png' onclick=Site.showMenCommImgMove('" + i + "','" + d + "','right'," + b + ") class='showCommPicMoveRight'>");
                n.push("</div>");
                m.prepend(n.join(""))
            }
        }, function () {
            var m = $("#" + d);
            if (Fai.isIE7()) {
                setTimeout(function () {
                    m.find("#J_showCommPicMoveSign").remove()
                }, 500)
            } else {
                m.find("#J_showCommPicMoveSign").remove()
            }
        })
    }, 10)
};
Site.showMenCommImgMove = function (h, b, g, a) {
    if (h == null || g == null) {
        return
    }
    var j = $("#" + h);
    var d = j.parentsUntil(".J_imgDiv", ".J_imageTable");
    currentChooseTr = d.attr("chooseTr");
    currentChooseTd = d.attr("chooseTd");
    if (currentChooseTr == null || currentChooseTd == null) {
        return
    }
    if (Site.commMenUpAllImgList == null) {
        return
    }
    var k = 0;
    var c;
    if (a) {
        c = d.find(".J_td")
    } else {
        c = d.find("td");
        a = false
    }
    var f = parseInt(c.length);
    if (f <= 1) {
        return
    }
    if (g == "left") {
        if (currentChooseTd == "0" || currentChooseTd == 0) {
            k = f - 1
        } else {
            k = parseInt(currentChooseTd) - 1
        }
    } else {
        if (g == "right") {
            k = parseInt(currentChooseTd) + 1;
            if (k >= Site.commMenUpAllImgList[currentChooseTr].data.length) {
                k = 0
            }
        }
    }
    c.eq(currentChooseTd).find(".show_msg_border_rect").remove();
    var i = "<div class='show_msg_border_rect'><div class='show_msg_triangle_down'></div></div>";
    c.eq(k).prepend(i);
    d.attr("chooseTd", k);
    var e = $("#" + b).find(".msg_up_show_img_set").parent();
    $("#" + b).find(".msg_up_show_img_set").remove();
    e.append("<img alt='' class='msg_up_show_img_set' src='" + Site.commMenUpAllImgList[currentChooseTr].data[k].data + "'>")
};
Site.orderPdCommentAddCom = function (n, p, j, l) {
    if (_siteDemo) {
        Fai.ing("当前为“模板网站”，请先“复制网站”再进行评论。");
        return
    }
    var s = $(".J-ct-panel-" + n + "-" + p),
        z = $("#pc_" + n + "_" + p),
        d = $.trim(z.val()),
        h = z.attr("minlength");
    if (typeof (d) != "string" || "" == d) {
        z.focus();
        Fai.ing(LS.commentNotEmpty, true);
        return
    }
    if (d.length < h) {
        Fai.ing(Fai.format(LS.commentLenTips, Fai.encodeHtml(h)), true);
        return
    }
    var q = $("#msgBoardAddImgTb" + j);
    var g = [];
    var k = [];
    if (q != null && typeof (q) != "undefined") {
        var c = q.eq(0);
        var f = c.find("td").length;
        if (f > 1) {
            for (var v = 0; v < (f - 1); v++) {
                var e = c.find("td").eq(v).find(".msgBoard_upImg_set");
                if (e != null && e != "undefined") {
                    var w = {};
                    var b = {};
                    var u = e.attr("_id");
                    var y = e.attr("_name");
                    var t = e.attr("_path");
                    var a = e.attr("_smallpath");
                    var o = e.attr("_file_size");
                    var r = e.attr("_file_id");
                    w.imgId = u;
                    w.imgName = y;
                    w.imgSize = o;
                    w.tempFileId = r;
                    g.push(w);
                    b.path = t;
                    b.smallPath = a;
                    k.push(b)
                }
            }
        }
    }
    var x = $(".submitStarList").attr("star");
    if (!x) {
        x = 5
    }
    var m = {
        oid: n,
        iid: p,
        commImgList: $.toJSON(g),
        comment: d,
        star: x
    };

};
Site.changeIEMsgInputWidth = function () {
    if (isIE = navigator.userAgent.indexOf("MSIE") != -1) {
        $("#orderLeveaMsgIn").css({
            height: "17px",
            "line-height": "17px",
            width: "98%"
        })
    }
};
Site.orderLeveaMsgTip = "";
Site.orderMessageOpen = false;
Site.orderMessageMaxNum = 0;
Site.setLisMsgInput = function (c, a, b) {
    Site.orderMessageOpen = a;
    Site.orderLeveaMsgTip = c;
    Site.orderMessageMaxNum = b;
    $(function () {
        $("#orderLeveaMsgIn").focusin(function () {
            if ($(this).val() === Site.orderLeveaMsgTip) {
                $(this).val("")
            }
            $(this).css("color", "#333")
        });
        $("#orderLeveaMsgIn").focusout(function () {
            $(this).css("color", "black");
            if ($(this).val() == "") {
                $(this).val(Site.orderLeveaMsgTip);
                $(this).css("color", "#b8b8b8")
            }
        })
    })
};
Site.setLisMsgInputInit = function (a) {
    $(function () {
        $("#orderLeveaMsgIn").val(a);
        $("#orderLeveaMsgIn").css("color", "#b8b8b8")
    })
};
(function (m) {
    m.cusAreaList = [];
    m.isHideCN = false;
    m.isHideOS = false;
    m.initMstlDomEvent = function (z, B, J, G) {
        m.cusAreaList = B;
        m.isHideCN = J;
        m.isHideOS = G;
        var H = z.moduleId,
            u = z.sessionMid,
            t = z.memberId,
            v = z.addrInfoList,
            D = z.orderId,
            x = z.unCheckeditemIdList,
            w = z.unCheckedItemList,
            E = z.isFirstTime,
            A = z.memberName,
            I = z.imme,
            s = z.newPropList,
            C = z.mobileCtNameList,
            y = z.operaKey,
            F = {};
        F.addrInfoList = v;
        $(".addrListWrap").off("click.mstl").on("click.mstl", ".addrMsg", function (N) {
            var L = $(N.currentTarget),
                K = parseInt(L.attr("_item")),
                M = $(N.target || N.srcElement),
                K;
            if (M.hasClass("editAddrBtn")) {
                h(K, u, v, t, s, C);
                c(K, v, s);
                N.stopPropagation();
                return
            }
            if (L.hasClass("j_addrMsg") && !L.hasClass("selectedMsg")) {
                $(".selectedMsg").removeClass("selectedMsg mstl_border");
                L.addClass("selectedMsg mstl_border");
                n(K, v);
                return
            }
            if (L.hasClass("addAddrMsgPanel")) {
                h(-1, u, v, t, s, C);
                return
            }
        });
        $(".delAddrBtn").click(function (Q) {
            var K = $(this).parent().parent().attr("_item");
            var M = ["<div class='fk-cancelOrder'>", "<div style='padding:10px;'>", LS.conCancelAddrInfo, "</div>", "<div style='padding:10px 0 18px 0;'>", "<span class='J-rpt-cancel popupBClose' style='margin-right:20px;'>", LS.cancel, "</span>", "<span class='J-rpt-save con-hover'>" + LS.confirm + "</span>", "</div>", "</div>"];
            var P = parseInt(Math.random() * 10000);
            var L = {
                boxId: P,
                title: "",
                htmlContent: M.join(""),
                width: 300
            };
            var N = m.popupBox(L);
            var O = "ajax/memberAdm_h.jsp?cmd=set&id=" + u;
            N.find(".J-rpt-save").on("click", function () {
                v.splice(K, 1);
                $.ajax({
                    type: "post",
                    url: O,
                    data: "info=" + Fai.encodeUrl($.toJSON(F)),
                    error: function () {
                        Fai.ing(LS.systemError, false)
                    }, success: function (R) {
                        var S = $.parseJSON(R);
                        if (S.success) {
                            var T = document.location.search.search(/imme/) > -1 ? "?imme" : "";
                            document.location.href = "mstl.jsp" + T
                        } else {
                            Fai.ing(S.msg, true)
                        }
                    }
                })
            });
            Q.stopPropagation()
        });
        $(".setDefaultBtn").click(function (M) {
            var L = $(this).parent().parent().attr("_item");
            var K = "ajax/memberAdm_h.jsp?cmd=set&id=" + u;
            for (index in v) {
                v[index].isDefault = 0
            }
            v[L].isDefault = 1;
            $.ajax({
                type: "post",
                url: K,
                data: "info=" + Fai.encodeUrl($.toJSON(F)),
                error: function () {
                    Fai.ing(LS.systemError, false)
                }, success: function (N) {
                    var O = $.parseJSON(N);
                    if (O.success) {
                        var P = document.location.search.search(/imme/) > -1 ? "?imme" : "";
                        document.location.href = "mstl.jsp" + P
                    } else {
                        Fai.ing(O.msg, true)
                    }
                }
            });
            M.stopPropagation()
        });
        $(".mallShipSelect").off("change.mstl").on("change.mstl", function (N) {
            var L = $(this).find("option:selected"),
                M = $(".shippingPay"),
                O = $("#shippingMoneyVal"),
                K = parseFloat(L.attr("price")).toFixed(2);
            M.text(K).attr("_shipmoney", K);
            O.text(K).attr("_shipmoney", K);
            p()
        }).trigger("change.mstl");
        $(".payListWrap").off("click.mstl").on("click.mstl", ".payItemBox", function (L) {
            var K = $(L.currentTarget);
            if (!K.hasClass("payChecked")) {
                $(".payChecked").removeClass("payChecked mstl_border mstl_payChecked");
                K.addClass("payChecked mstl_border mstl_payChecked");
                if (K.hasClass("payItemBox2")) {
                    $(".banksMsgWrap").addClass("banksMsgWrapShow")
                } else {
                    $(".banksMsgWrap").removeClass("banksMsgWrapShow")
                }
            }
        });
        if ($(".payChecked ").hasClass("payItemBox2")) {
            $(".banksMsgWrap").addClass("banksMsgWrapShow")
        }
        $(".payItemBox1, .payItemBox2").off("mouseenter.mstl").on("mouseenter.mstl", function () {
            var L = $(this),
                K = L.find(".payMethod").attr("tips");
            if (!K) {
                return
            }
            var M = "<div class='payTipsPanel'>";
            M += "<div class='panelTriOut'>";
            M += "<div class='panelTriIn'></div>";
            M += "</div>";
            M += K;
            M += "</div>";
            L.append(M)
        }).off("mouseleave.mstl").on("mouseleave.mstl", function () {
            var K = $(this),
                L = K.find(".payTipsPanel");
            if (L.length > 0) {
                L.remove()
            }
        });
        k();
        f();
        $(".mstlSublimeBtn").off("click.mstl").on("click.mstl", function () {
            var K = false;
            var O = $(".addrListWrap .selectedMsg").attr("_item");
            if (v.length > 0 && O != null) {
                for (var P = 0; P < s.length; P++) {
                    var S = s[P].fieldKey;
                    var L = s[P].name;
                    var R = s[P].required;
                    if (S == "addr") {
                        K = true
                    }
                    if (!R) {
                        continue
                    }
                    if (v[O][S] == null || v[O][S] == "") {
                        Fai.ing(LS.addrInfoInputError + L, 1);
                        return
                    }
                }
                if (K) {
                    var M = v[O]["addr_info"].isCus || "";
                    var T = v[O]["addr_info"].provinceCode || "";
                    var Q = v[O]["addr_info"].cityCode || "";
                    var N = v[O]["addr_info"].countyCode || "";
                    if (T != "" && M) {
                        if (e(T) == "") {
                            Fai.ing("请输入正确的地址", 1);
                            return
                        }
                    }
                    if (Q != "" && M) {
                        if (e(Q) == "") {
                            Fai.ing("请输入正确的地址", 1);
                            return
                        }
                    }
                    if (N != "" && M) {
                        if (e(N) == "") {
                            Fai.ing("请输入正确的地址", 1);
                            return
                        }
                    }
                }
            } else {
                Fai.ing("请输入收货人信息", 1);
                return
            }
            q(H, D, x, w, t, E, A, v, I, s)
        });
        if (y == 7) {
            $(".addrMsg").each(function () {
                if ($(this).attr("_item") == (v.length - 1)) {
                    $(this).click()
                }
            })
        } else {
            if (y != 6) {
                $(".addrMsg").each(function () {
                    if ($(this).attr("_item") == y) {
                        $(this).click()
                    }
                })
            }
        } if ($(".selectedMsg").length > 0) {
            n(parseInt($(".selectedMsg").attr("_item")), v)
        }
        m.placeholder($(".msgforSeller, .integralValInput"))
    };

    function c(z, t, s) {
        var M = t[z],
            F = $(".addAddrPopPanel"),
            y = $("#addrDetail"),
            I = Fai.top._lcid,
            H, w, D, E, u = false,
            G;
        for (var K = 0; K < s.length; K++) {
            G = s[K];
            if (G.fieldKey == "addr") {
                var C = M.addr_info.isCus;
                if (!C) {
                    var B = "";
                    var x = "";
                    var v = "";
                    if (I == 2052 || I == 1028) {
                        B = site_cityUtil.getInfo(M.addr_info.countyCode).name;
                        x = site_cityUtil.getInfo(M.addr_info.cityCode).name;
                        v = site_cityUtil.getInfo(M.addr_info.provinceCode).name
                    } else {
                        B = site_cityUtil.getInfoEn(M.addr_info.countyCode).name;
                        x = site_cityUtil.getInfoEn(M.addr_info.cityCode).name;
                        v = site_cityUtil.getInfoEn(M.addr_info.provinceCode).name
                    } if (M.addr_info.provinceCode == 990000) {
                        $("#areaBoxInput").attr("isOs", 1);
                        $("#allArea").val("os");
                        $("#allArea").change()
                    } else {
                        $("#areaBoxInput").attr("isCn", 1);
                        $("#allArea").val("cn");
                        $("#allArea").change()
                    }
                    $("#areaBoxInput").attr("area1", M.addr_info.provinceCode);
                    $("#areaBoxInput").attr("area2", M.addr_info.cityCode);
                    $("#areaBoxInput").attr("area3", M.addr_info.countyCode);
                    y.val(M.addr_info.streetAddr || "");
                    $("#areaBoxInput").attr("lastArea", "-" + B);
                    $("#areaBoxInput").attr("lastAreaType", "county");
                    setTimeout(function () {
                        $("#areaBox1 .group_item[pid='" + M.addr_info.provinceCode + "']").click();
                        setTimeout(function () {
                            $("#areaBox1 .group_item[cid='" + M.addr_info.cityCode + "']").click();
                            setTimeout(function () {
                                $("#areaBox1 .group_item[cid='" + M.addr_info.countyCode + "']").click()
                            }, 0)
                        }, 0)
                    }, 0);
                    $("#areaBox1").hide()
                } else {
                    var L = e(M.addr_info.countyCode);
                    var J = e(M.addr_info.cityCode);
                    var A = e(M.addr_info.provinceCode);
                    $("#allArea").val(M.addr_info.provinceCode);
                    $("#allArea").change();
                    $("#areaBoxInput").attr("lastArea", "-" + L);
                    $("#areaBoxInput").attr("lastAreaType", "thd");
                    $("#areaBoxInput").val(A + "-" + J + "-" + L);
                    $("#areaBoxInput").attr("isCus", 1);
                    $("#areaBoxInput").attr("area1", M.addr_info.provinceCode);
                    $("#areaBoxInput").attr("area2", M.addr_info.cityCode);
                    $("#areaBoxInput").attr("area3", M.addr_info.countyCode);
                    $("#addrDetail").val(M.addr_info.streetAddr)
                }
                u = true;
                continue
            }
            E = F.find("#" + G.fieldKey);
            if (E.length > 0 && M[G.fieldKey]) {
                E.val(M[G.fieldKey] || "");
                if (G.fieldKey == "mobile") {
                    $("#mobileCt").val(M.mobileCt)
                }
            }
        }
        if (!u && $("#mallShipTemplate_province").length === 1) {
            if (I == 2052 || I == 1028) {
                H = $("#addrInfo_county"), w = $("#addrInfo_city"), D = $("#addrInfo_province");
                D.val(M.addr_info.provinceCode);
                D.trigger("change");
                w.val(M.addr_info.cityCode);
                w.trigger("change");
                H.val(M.addr_info.countyCode)
            }
            y.val(M.addr_info.streetAddr || "")
        }
    }

    function h(z, u, w, t, s, A) {
        var L = [],
            D, O, G, K, R, F, M, y, C = "",
            H = Fai.top._lcid;
        var N = {};
        N.addrInfoList = w;
        var Q = {};
        $.each(m.cusAreaList, function (T, U) {
            if (U.parentId == null || U.parentId == "" || U.parentId === 0) {
                Q[U.id] = U
            }
        });
        if (H == 2052 || H == 1028) {
            M = site_cityUtil.getProvince();
            site_cityUtil.simpleProvinceName(M)
        }
        y = {};
        y.width = 942;
        var P = parseInt($(".mallStlNew").attr("themecolor"));
        var v = isNaN(P) ? "" : ("mstlColor" + P);
        y.extClass = "addAddrPopPanel " + v;
        y.title = "<div class='addAddrPanelTitle'>" + LS.shippingAddress + "</div>";
        C += "<div class='addAddrPanelContent'>";
        var x = false;
        var E = {};
        for (var J = 0; J < s.length; J++) {
            E = s[J];
            if (E.fieldKey == "addr") {
                C += "<div class='newAddrLine'><label class='itemLabel'>所在地区<i class='mustWrite'>*</i></label>";
                C += "<select id='allArea' class='allArea addrSelectInput'>";
                C += "<option value=''>请选择</option>";
                if (!m.isHideCN) {
                    C += "<option value='cn'>中国</option>"
                }
                if (!m.isHideOS) {
                    C += "<option value='os'>海外</option>"
                }
                $.each(Q, function (T, U) {
                    C += "<option value='" + Q[T].id + "'>" + Fai.encodeHtml(Q[T].name) + "</option>"
                });
                C += "</select>";
                C += "<input type='text' id='areaBoxInput' class='areaBoxInput' class='itemValInput' style='width:295px;' placeholder='请选择' readOnly='true' isCn isOs isCus area1 area2 area3/>";
                C += "<div id='areaBox1' class='areaBox1 areaBox1New' style='display:none;'>";
                C += "<div id='province_box' class='province_box'>";
                C += "<div class='pv_head J_areaHead'>";
                C += "<div class='pv_pv pv'>省份</div>";
                C += "<div class='pv_city city'>城市</div>";
                C += "<div class='pv_county county'>县/区/镇</div>";
                C += "</div>";
                C += "<div class='pv_content'>";
                C += "<div class='spaceLine'></div>";
                $.each(site_cityUtil.getAreaGroupsPinYin(), function (T, U) {
                    C += "<div class='pv_group' style='" + (U[0] == "OS" ? "display:none;" : "") + "'>";
                    C += "<div class='group_head'>" + U[0] + "</div>";
                    C += "<div class='group_content'>";
                    $.each(U[1], function (W, V) {
                        if (H == 2052 || H == 1028) {
                            C += "<div class='group_item' pid='" + V + "' pname='" + site_cityUtil.getInfo(V).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(V).name) + "</div>"
                        } else {
                            C += "<div class='group_item' pid='" + V + "' pname='" + site_cityUtil.getInfoEn(V).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(V).name) + "</div>"
                        }
                    });
                    C += "</div>";
                    C += "</div>";
                    C += "<div class='spaceLine'></div>"
                });
                C += "</div>";
                C += "</div>";
                C += "<div id='city_box' class='city_box' style='display:none;'>";
                C += "<div class='city_head J_areaHead'>";
                C += "<div class='city_pv pv'>省份</div>";
                C += "<div class='city_city city'>城市</div>";
                C += "<div class='city_county county'>县/区/镇</div>";
                C += "</div>";
                C += "</div>";
                C += "<div id='county_box' class='county_box' style='display:none;'>";
                C += "<div class='county_head J_areaHead'>";
                C += "<div class='county_pv pv'>省份</div>";
                C += "<div class='county_city city'>城市</div>";
                C += "<div class='county_county county'>县/区/镇</div>";
                C += "</div>";
                C += "</div>";
                C += "</div>";
                C += "<div id='areaBox2' class='areaBox2 areaBox2New' style='display:none;'>";
                C += "<div id='sec_box' class='sec_box'>";
                C += "<div class='sec_head J_areaHead2'>";
                C += "<div class='sec_sec sec'>一级行政区</div>";
                C += "<div class='sec_thd thd'>二级行政区</div>";
                C += "</div>";
                C += "<div class='sec_content'></div>";
                C += "</div>";
                C += "<div id='thd_box' class='thd_box' style='display:none;'>";
                C += "<div class='thd_head J_areaHead2'>";
                C += "<div class='thd_sec sec'>一级行政区</div>";
                C += "<div class='thd_thd thd'>二级行政区</div>";
                C += "</div>";
                C += "<div class='thd_content'></div>";
                C += "</div>";
                C += "</div>";
                C += "</div>";
                C += "<p class='newAddrLine'><label class='itemLabel'>详细地址<i class='mustWrite'>" + (E.required ? "*" : "&nbsp;") + "</i></label>";
                C += "<input id='addrDetail' class='addrDetail itemValInput' placeholder='" + LS.addrDetail + "' maxLength='100'></p>";
                x = true;
                continue
            }
            C += "<p class='newAddrLine j_newAddrLine'>";
            C += "<label class='itemLabel'>";
            C += E.name;
            C += "<i class='mustWrite'>" + (E.required ? "*" : "&nbsp;") + "</i>";
            C += "</label>";
            if (E.fieldKey == "mobile") {
                C += "<select id='mobileCt' name='mobileCt' class='mobileCt'>";
                if (A != null && A.length > 0) {
                    for (var I = 0; I < A.length; I++) {
                        var S = A[I]["ctCode"];
                        C += "<option value='" + A[I]["ctName"] + "'>" + A[I]["ctShowName"] + S + "</option>"
                    }
                }
                C += "</select>"
            }
            C += "<input id='" + E.fieldKey + "' class='itemValInput " + E.fieldKey + "' maxLength='50'>";
            C += "</p>"
        }
        if (!x && $("#mallShipTemplate_province").length === 1) {
            C += "<div class='newAddrLine'><label class='itemLabel'>所在地区<i class='mustWrite'>*</i></label>";
            C += "<select id='allArea' class='allArea addrSelectInput'>";
            C += "<option value=''>请选择</option>";
            if (!m.isHideCN) {
                C += "<option value='cn'>中国</option>"
            }
            if (!m.isHideOS) {
                C += "<option value='os'>海外</option>"
            }
            $.each(Q, function (T, U) {
                C += "<option value='" + Q[T].id + "'>" + Fai.encodeHtml(Q[T].name) + "</option>"
            });
            C += "</select>";
            C += "<input type='text' id='areaBoxInput' class='itemValInput areaBoxInput' style='width:295px;' placeholder='请选择' readOnly='true' isCn isOs isCus area1 area2 area3/>";
            C += "<div id='areaBox1' class='areaBox1 areaBox1New' style='display:none;'>";
            C += "<div id='province_box' class='province_box'>";
            C += "<div class='pv_head J_areaHead'>";
            C += "<div class='pv_pv pv'>省份</div>";
            C += "<div class='pv_city city'>城市</div>";
            C += "<div class='pv_county county'>县/区/镇</div>";
            C += "</div>";
            C += "<div class='pv_content'>";
            C += "<div class='spaceLine'></div>";
            $.each(site_cityUtil.getAreaGroupsPinYin(), function (T, U) {
                C += "<div class='pv_group' style='" + (U[0] == "OS" ? "display:none;" : "") + "'>";
                C += "<div class='group_head'>" + U[0] + "</div>";
                C += "<div class='group_content'>";
                $.each(U[1], function (W, V) {
                    if (H == 2052 || H == 1028) {
                        C += "<div class='group_item' pid='" + V + "' pname='" + site_cityUtil.getInfo(V).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(V).name) + "</div>"
                    } else {
                        C += "<div class='group_item' pid='" + V + "' pname='" + site_cityUtil.getInfoEn(V).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(V).name) + "</div>"
                    }
                });
                C += "</div>";
                C += "</div>";
                C += "<div class='spaceLine'></div>"
            });
            C += "</div>";
            C += "</div>";
            C += "<div id='city_box' class='city_box' style='display:none;'>";
            C += "<div class='city_head J_areaHead'>";
            C += "<div class='city_pv pv'>省份</div>";
            C += "<div class='city_city city'>城市</div>";
            C += "<div class='city_county county'>县/区/镇</div>";
            C += "</div>";
            C += "</div>";
            C += "<div id='county_box' class='county_box' style='display:none;'>";
            C += "<div class='county_head J_areaHead'>";
            C += "<div class='county_pv pv'>省份</div>";
            C += "<div class='county_city city'>城市</div>";
            C += "<div class='county_county county'>县/区/镇</div>";
            C += "</div>";
            C += "</div>";
            C += "</div>";
            C += "<div id='areaBox2' class='areaBox2 areaBox2New' style='display:none;'>";
            C += "<div id='sec_box' class='sec_box'>";
            C += "<div class='sec_head J_areaHead2'>";
            C += "<div class='sec_sec sec'>一级行政区</div>";
            C += "<div class='sec_thd thd'>二级行政区</div>";
            C += "</div>";
            C += "<div class='sec_content'></div>";
            C += "</div>";
            C += "<div id='thd_box' class='thd_box' style='display:none;'>";
            C += "<div class='thd_head J_areaHead2'>";
            C += "<div class='thd_sec sec'>一级行政区</div>";
            C += "<div class='thd_thd thd'>二级行政区</div>";
            C += "</div>";
            C += "<div class='thd_content'></div>";
            C += "</div>";
            C += "</div>";
            C += "</div>";
            C += "<p class='newAddrLine'><label class='itemLabel'></label>";
            C += "<input id='addrDetail' class='addrDetail itemValInput' placeholder='" + LS.addrDetail + "' maxLength='100'></p>"
        }
        C += "<p class='newAddrLine'><label class='itemLabel'></label><span id='sublimeNewAddr' class='sublimeNewAddr addAddrBtn mstl_bg'>" + LS.confirm + "</span><span id='cancelNewAddr' class='cancelNewAddr addAddrBtn'>" + LS.cancel + "</span></p>";
        C += "</div>";
        y.htmlContent = C;
        m.popupBox(y);
        if ($("#areaBoxInput").length > 0) {
            $("#areaBox1,#areaBox2").css("left", $("#areaBoxInput").position().left)
        }
        $("#areaBoxInput").hide();
        $(document).unbind("click.forAreaBox").bind("click.forAreaBox", function () {
            $("#areaBox1").hide();
            $("#areaBox2").hide()
        });
        $("#areaBox1,#areaBox2").unbind("click.forAreaBox").bind("click.forAreaBox", function (T) {
            B(T)
        });

        function B(T) {
            if (T.stopPropagation) {
                T.stopPropagation()
            } else {
                T.cancelBubble = true
            }
        }
        $("#allArea").change(function () {
            if ($("#allArea").val() == null || $("#allArea").val() == "" || $("#allArea").val() == "os") {
                $("#areaBoxInput").hide()
            } else {
                $("#areaBoxInput").show()
            }
            $("#areaBox1").hide();
            $("#areaBox2").hide();
            if ($("#allArea").val() == null || $("#allArea").val() == "") {
                return
            }
            $("#areaBoxInput").attr("isCn", 0);
            $("#areaBoxInput").attr("isCus", 0);
            $("#areaBoxInput").attr("isOs", 0);
            $("#areaBoxInput").attr("area1", "");
            $("#areaBoxInput").attr("area2", "");
            $("#areaBoxInput").attr("area3", "");
            if ($("#allArea").val() == "cn") {
                $("#areaBoxInput").attr("isCn", 1);
                $("#areaBox1 .pv").click();
                $("#areaBox1 .city_content").remove();
                $("#areaBox1 .county_content").remove();
                $("#areaBox1").show()
            } else {
                if ($("#allArea").val() == "os") {
                    $("#areaBoxInput").attr("isOs", 1);
                    $("#areaBoxInput").attr("area1", 990000);
                    $("#areaBoxInput").attr("area2", 990100)
                } else {
                    $("#areaBoxInput").attr("isCus", 1);
                    $("#areaBoxInput").attr("area1", $("#allArea").val());
                    $("#areaBox2 .sec_content").html("");
                    $("#areaBox2 .thd_content").html("");
                    $("#areaBox2").show()
                }
            }
            $("#areaBoxInput").val("");
            if ($("#allArea").val() == "cn" || $("#allArea").val() == "os") {
                return
            }
            var T = b($("#allArea").val());
            $("#sec_box .sec_content").append(T);
            $("#areaBoxInput").val($("#areaBoxInput").val() + $("#allArea option[value='" + $("#allArea").val() + "']").text())
        });
        $("#areaBoxInput").unbind("click").bind("click", function (T) {
            if ($("#allArea").val() == "cn") {
                $("#areaBox1").toggle();
                $("#areaBox2").hide();
                $("#province_box").show();
                $("#city_box").hide();
                $("#county_box").hide()
            } else {
                if ($("#allArea").val() == null || $("#allArea").val() == "os") {} else {
                    $("#areaBox2").toggle();
                    $("#areaBox1").hide();
                    $("#sec_box").show();
                    $("#thd_box").hide()
                }
            }
            B(T)
        });
        $("#areaBox1 .J_areaHead .pv").click(function () {
            $("#province_box").show();
            $("#city_box").hide();
            $("#county_box").hide()
        });
        $("#areaBox1 .J_areaHead .city").click(function () {
            $("#province_box").hide();
            $("#city_box").show();
            $("#county_box").hide()
        });
        $("#areaBox1 .J_areaHead .county").click(function () {
            $("#province_box").hide();
            $("#city_box").hide();
            $("#county_box").show()
        });
        $(".J_areaHead2 .sec").click(function () {
            $("#sec_box").show();
            $("#thd_box").hide()
        });
        $(".J_areaHead2 .thd").click(function () {
            $("#sec_box").hide();
            $("#thd_box").show()
        });
        $("#province_box .group_item").bind("click", function () {
            $("#areaBox1 .city_content").remove();
            $("#areaBox1 .county_content").remove();
            var T = $(this).attr("pname");
            var U = $(this).attr("pid");
            $("#areaBox1 .J_areaHead .city").click();
            $("#areaBoxInput").val("");
            $("#areaBoxInput").val($("#areaBoxInput").val() + T);
            $("#areaBoxInput").removeAttr("lastArea");
            $("#areaBoxInput").removeAttr("lastAreaType");
            $("#areaBoxInput").attr("area1", U);
            $("#areaBoxInput").attr("area2", "");
            $("#areaBoxInput").attr("area3", "");
            $(".city_content").remove();
            var V = j(site_cityUtil.getCities(U));
            $("#city_box").append(V)
        });
        $("#city_box").delegate(".group_item", "click", function () {
            $("#areaBox1 .county_content").remove();
            var T = $(this).attr("cname");
            var V = $(this).attr("cid");
            $("#areaBox1 .J_areaHead .county").click();
            var X = $("#areaBoxInput").attr("lastArea");
            var U = $("#areaBoxInput").attr("lastAreaType");
            if (U != null && U != "") {
                $("#areaBoxInput").val($("#areaBoxInput").val().substring(0, $("#areaBoxInput").val().indexOf("-")))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + T);
            $("#areaBoxInput").attr("lastArea", "-" + T);
            $("#areaBoxInput").attr("lastAreaType", "city");
            $("#areaBoxInput").attr("area2", V);
            $("#areaBoxInput").attr("area3", "");
            $(".county_content").remove();
            var W = g(site_cityUtil.getCounty(V));
            $("#county_box").append(W)
        });
        $("#county_box").delegate(".group_item", "click", function () {
            var T = $(this).attr("cname");
            var V = $(this).attr("cid");
            var W = $("#areaBoxInput").attr("lastArea");
            var U = $("#areaBoxInput").attr("lastAreaType");
            if (U != null && U == "county") {
                $("#areaBoxInput").val($("#areaBoxInput").val().replace(W, ""))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + T);
            $("#areaBoxInput").attr("lastArea", "-" + T);
            $("#areaBoxInput").attr("lastAreaType", "county");
            $("#areaBoxInput").attr("area3", V);
            $("#areaBox1").hide()
        });
        $("#sec_box").delegate(".group_item", "click", function () {
            $("#areaBox2 .thd_content").html("");
            var T = $(this).attr("cname");
            var V = $(this).attr("cid");
            $(".J_areaHead2 .thd").click();
            var X = $("#areaBoxInput").attr("lastArea");
            var U = $("#areaBoxInput").attr("lastAreaType");
            if (U != null && U != "" && $("#areaBoxInput").val().indexOf("-") != -1) {
                $("#areaBoxInput").val($("#areaBoxInput").val().substring(0, $("#areaBoxInput").val().indexOf("-")))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + T);
            $("#areaBoxInput").attr("lastArea", "-" + T);
            $("#areaBoxInput").attr("lastAreaType", "sec");
            $("#areaBoxInput").attr("area2", V);
            $("#areaBoxInput").attr("area3", "");
            var W = b(V);
            $("#thd_box .thd_content").append(W)
        });
        $("#thd_box").delegate(".group_item", "click", function () {
            var T = $(this).attr("cname");
            var V = $(this).attr("cid");
            var W = $("#areaBoxInput").attr("lastArea");
            var U = $("#areaBoxInput").attr("lastAreaType");
            if (U != null && U == "thd") {
                $("#areaBoxInput").val($("#areaBoxInput").val().replace(W, ""))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + T);
            $("#areaBoxInput").attr("lastArea", "-" + T);
            $("#areaBoxInput").attr("lastAreaType", "thd");
            $("#areaBoxInput").attr("area3", V);
            $("#areaBox2").hide()
        });
        $(".sublimeNewAddr").off("click.mstl").on("click.mstl", function () {
            i(z, N, u, t, s)
        });
        $(".cancelNewAddr").off("click.mstl").on("click.mstl", function () {
            $(".popupBClose").click()
        })
    }

    function j(t) {
        var s = "";
        s += "<div class='city_content'>";
        $.each(t, function (u, v) {
            if (Fai.top._lcid == 2052 || Fai.top._lcid == 1028) {
                s += "<div class='group_item' cid='" + v.id + "' cname='" + site_cityUtil.getInfo(v.id).name + "'>" + site_cityUtil.simpleCityNameStr(site_cityUtil.getInfo(v.id).name) + "</div>"
            } else {
                s += "<div class='group_item' cid='" + v.id + "' cname='" + site_cityUtil.getInfoEn(v.id).name + "'>" + site_cityUtil.simpleCityNameStrEn(site_cityUtil.getInfoEn(v.id).name) + "</div>"
            }
        });
        s += "</div>";
        return s
    }

    function g(t) {
        var s = "";
        s += "<div class='county_content'>";
        $.each(t, function (u, v) {
            if (Fai.top._lcid == 2052 || Fai.top._lcid == 1028) {
                s += "<div class='group_item' cid='" + v.id + "' cname='" + site_cityUtil.getInfo(v.id).name + "'>" + site_cityUtil.getInfo(v.id).name + "</div>"
            } else {
                s += "<div class='group_item' cid='" + v.id + "' cname='" + site_cityUtil.getInfoEn(v.id).name + "'>" + site_cityUtil.getInfoEn(v.id).name + "</div>"
            }
        });
        s += "</div>";
        return s
    }

    function e(t) {
        var s = "";
        var u = false;
        $.each(m.cusAreaList, function (v, w) {
            if (u) {
                return
            }
            if (w.id == t) {
                s = w.name;
                u = true
            }
        });
        return s
    }

    function o(t) {
        var s = [];
        $.each(m.cusAreaList, function (u, v) {
            if (v.parentId == t) {
                s.push(v)
            }
        });
        return s
    }

    function b(s) {
        if (isNaN(s)) {
            return ""
        }
        var u = parseInt(s);
        var t = "";
        $.each(o(u), function (v, w) {
            t += "<div class='group_item' cid='" + w.id + "' cname='" + w.name + "'>" + w.name + "</div>"
        });
        return t
    }

    function i(C, O, v, u, s) {
        var w = O.addrInfoList;
        var D = {};
        var y = C == -1 ? {} : w[C];
        var H = $(".addAddrPopPanel"),
            K = Fai.top._lcid,
            J, A, F, G, I, E = false,
            z = false,
            M, x = false,
            Q = "";
        for (var N = 0; N < s.length; N++) {
            I = s[N];
            E = I.required;
            if (I.fieldKey == "addr") {
                x = E;
                var P = $("#allArea").val();
                if (P == null || P == "") {
                    Fai.ing("请选择地区");
                    return
                } else {
                    if (P == "cn" || P == "os") {
                        D.isCus = false
                    } else {
                        D.isCus = true
                    }
                }
                J = $("#areaBoxInput").attr("area3");
                A = $("#areaBoxInput").attr("area2");
                F = $("#areaBoxInput").attr("area1");
                if (A == null) {
                    A = -1
                }
                if (J == null) {
                    J = -1
                }
                if (F == "" && x) {
                    Fai.ing(LS.mallStlSubmitAddrErr, 1);
                    return
                }
                if (A == "" && x && !D.isCus) {
                    Fai.ing(LS.mallStlSubmitAddrErr, 1);
                    return
                }
                D.provinceCode = parseInt(F);
                D.cityCode = parseInt(A);
                D.countyCode = parseInt(J);
                M = $("#areaBoxInput").val().replace(/-/g, "");
                var B = $("#addrDetail");
                if (B.val() == "" && x) {
                    Fai.ing(LS.editStreetAddr, 1);
                    return
                }
                D.streetAddr = B.val();
                y.addr_info = D;
                y.addr = (M || "") + B.val();
                if (E && !y.addr) {
                    return Fai.ing(LS.addrInfoInputError + I.name, 1)
                }
                z = true;
                continue
            }
            G = H.find("#" + I.fieldKey);
            if (G.length > 0) {
                Q = G.val();
                if (E && Q == "") {
                    return Fai.ing(LS.addrInfoInputError + I.name, 1)
                }
                if (I.fieldKey == "email" && !Fai.isEmail(Q) && E) {
                    Fai.ing(LS.addrInfoInputError + I.name, 1);
                    return
                }
                if (I.fieldKey == "phone" && !Fai.isPhone(Q) && E) {
                    Fai.ing(LS.addrInfoInputError + I.name, 1);
                    return
                }
                if (I.fieldKey == "mobile") {
                    y.mobileCt = $("#mobileCt").val();
                    if (!Fai.isNationMobile(Q)) {
                        return Fai.ing(LS.mobileNumRegular)
                    }
                }
                y[I.fieldKey] = G.val()
            }
        }
        if (!z && $("#mallShipTemplate_province").length === 1) {
            var t = $("#allArea").val();
            if (t == null || t == "") {
                Fai.ing("请选择地区");
                return
            } else {
                if (t == "cn" || t == "os") {
                    D.isCus = false
                } else {
                    D.isCus = true
                }
            }
            J = $("#areaBoxInput").attr("area3");
            A = $("#areaBoxInput").attr("area2");
            F = $("#areaBoxInput").attr("area1");
            if (F == null || F == "") {
                Fai.ing(LS.mallStlSubmitAddrErr, 1);
                return
            }
            if ((A == null || A == "") && !D.isCus) {
                Fai.ing(LS.mallStlSubmitAddrErr, 1);
                return
            }
            D.provinceCode = parseInt(F);
            D.cityCode = parseInt(A);
            D.countyCode = parseInt(J);
            M = $("#areaBoxInput").val().replace(/-/g, "");
            var B = $("#addrDetail");
            if (B.val() == "" && x) {
                Fai.ing(LS.editStreetAddr, 1);
                return
            }
            D.streetAddr = B.val();
            y.addr_info = D;
            y.addr = (M || "") + B.val();
            if (!y.addr) {
                return Fai.ing(LS.addrInfoInputError + I.name, 1)
            }
        }
        if (C == -1) {
            if (u == 0) {
                y.isDefault = 1
            }
            w.push(y);
            var L = "ajax/memberAdm_h.jsp?cmd=set&opera=addAddr&id=" + v
        } else {
            L = "ajax/memberAdm_h.jsp?cmd=set&opera=editAddr&editItem=" + C + "&id=" + v;
            y = w[C]
        } if (!!u) {
            $(".sublimeNewAddr").off("click.mstl");
            $.ajax({
                type: "post",
                url: L,
                data: "info=" + Fai.encodeUrl($.toJSON(O)),
                success: function (Z) {
                    var T = $.parseJSON(Z);
                    if (T.success) {
                        var U = document.location.search.search(/imme/) > -1 ? "?imme&" : "?";
                        if (C == -1) {
                            document.location.href = "mstl.jsp" + U + "opera=add"
                        } else {
                            var R = O.addrInfoList[C];
                            var S = $(".j_addrMsg[_item='" + C + "']");
                            S.find(".addrName span").text(R.name);
                            S.find(".addrPhone span").text(R.phone);
                            S.find(".msgAddrText").text(R.addr);
                            if (R.phone == null || R.phone == "") {
                                S.find(".addrPhone span").text(R.mobile)
                            }
                            if ((R.addr_info != null || R.addr_info != "") && S.hasClass("selectedMsg")) {
                                var W = R.addr_info.isCus;
                                if (!W) {
                                    var Y = "";
                                    var X = "";
                                    var V = "";
                                    if (K == 2052 || K == 1028) {
                                        Y = site_cityUtil.getInfo(R.addr_info.countyCode).name;
                                        X = site_cityUtil.getInfo(R.addr_info.cityCode).name;
                                        V = site_cityUtil.getInfo(R.addr_info.provinceCode).name
                                    } else {
                                        Y = site_cityUtil.getInfoEn(R.addr_info.countyCode).name;
                                        X = site_cityUtil.getInfoEn(R.addr_info.cityCode).name;
                                        V = site_cityUtil.getInfoEn(R.addr_info.provinceCode).name
                                    } if (R.addr_info.provinceCode == 990000) {
                                        $("#mallShipTemplate_areaBoxInput").attr("isOs", 1);
                                        $("#mallShipTemplate_allArea").val("os");
                                        $("#mallShipTemplate_allArea").change()
                                    } else {
                                        $("#mallShipTemplate_areaBoxInput").attr("isCn", 1);
                                        $("#mallShipTemplate_allArea").val("cn");
                                        $("#mallShipTemplate_allArea").change()
                                    }
                                    $("#mallShipTemplate_areaBoxInput").attr("area1", R.addr_info.provinceCode);
                                    $("#mallShipTemplate_areaBoxInput").attr("area2", R.addr_info.cityCode);
                                    $("#mallShipTemplate_areaBoxInput").attr("area3", R.addr_info.countyCode);
                                    $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + Y);
                                    $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "county");
                                    setTimeout(function () {
                                        $("#mallShipTemplate_areaBox1 .group_item[pid='" + R.addr_info.provinceCode + "']").click();
                                        setTimeout(function () {
                                            $("#mallShipTemplate_areaBox1 .group_item[cid='" + R.addr_info.cityCode + "']").click();
                                            setTimeout(function () {
                                                $("#mallShipTemplate_areaBox1 .group_item[cid='" + R.addr_info.countyCode + "']").click()
                                            }, 0)
                                        }, 0)
                                    }, 0);
                                    $("#streetAddress").val(R.addr_info.streetAddr)
                                } else {
                                    setTimeout(function () {
                                        $("#mallShipTemplate_allArea").val(R.addr_info.provinceCode);
                                        $("#mallShipTemplate_allArea").change();
                                        setTimeout(function () {
                                            $("#mallShipTemplate_areaBox2 .group_item[cid='" + R.addr_info.cityCode + "']").click();
                                            setTimeout(function () {
                                                $("#mallShipTemplate_areaBox2 .group_item[cid='" + R.addr_info.countyCode + "']").click()
                                            }, 0)
                                        }, 0)
                                    }, 0);
                                    $("#streetAddress").val(R.addr_info.streetAddr)
                                }
                            }
                            $(".addAddrPanelContent").parents(".formMSG").next(".popupBClose").click()
                        }
                    } else {
                        Fai.ing(T.msg)
                    }
                }, error: function () {
                    Fai.ing(LS.systemError)
                }
            })
        } else {
            l(O)
        }
    }

    function l(u) {
        var s = [],
            t = u.addrInfoList[0];
        s.push("<div class='addrMsg j_addrMsg selectedMsg mstl_border' _item='0'>");
        s.push("<div class='headerBg'></div>");
        s.push("<div class='dealAddrHandler'>");
        s.push("<div class='delAddrBtn vDelAddrBtn mstl_deleteBtn'></div>");
        s.push("<div class='editAddrBtn mstl_editBtn'></div>");
        s.push("<div class='setDefaultBtn  vSetDefaultBtn mstl_color'>设为默认</div>");
        s.push("</div>");
        s.push("<div class='addrItem addrName'><i class='msgIcon msgIconName'></i>" + (t.name || "") + "</div>");
        s.push("<div class='addrItem addrPhone'><i class='msgIcon msgIconPhone'></i>" + (t.phone || t.mobile || "") + "</div>");
        s.push("<div class='addrItem addrDetial'><i class='msgIcon msgIconAddr'></i><span class='msgAddrText'>" + (t.addr || "") + "</span></div>");
        s.push("<div class='bottomSelected mstl_selectFlag'></div>");
        s.push("</div>");
        $(".addrListWrap").html("").append(s.join(""));
        n(0, u.addrInfoList);
        $(".popupBClose").click()
    }

    function k() {
        var s = $("#useItg");
        if (s.length < 1) {
            return
        }
        if (parseInt(s.attr("_currentitg")) == 0) {
            s.prop("disabled", true);
            return
        }
        $(".integralTitle").off("click.mstl").on("click.mstl", function (u) {
            var t = $(this);
            if (t.hasClass("discountChecked")) {
                t.removeClass("discountChecked");
                t.next().val("").trigger("blur").attr("disabled", "true")
            } else {
                t.addClass("discountChecked");
                t.next().removeAttr("disabled")
            }
        });
        s.bind("blur", function () {
            var z = parseInt(s.attr("_needitg"));
            var x = parseInt(s.val());
            var C = s.attr("_itgname");
            var B = parseInt(s.attr("_maxuse"));
            var t = 0;
            if (isNaN(x)) {
                x = 0
            }
            var u = $(this).attr("moduleId");
            var v = Fai.top.$("#module" + u);
            var y = parseFloat(v.find(".calTotalItem").attr("pay_price"));
            if (isNaN(y)) {
                return
            }
            if ($("#couponCheckBox").length > 0 && $("#couponCheckBox").prop("checked")) {
                var A = 0;
                if ($("#couponOffsetMoney").length > 0) {
                    var D = $("#couponOffsetMoney").attr("_offsetmoney");
                    if (!isNaN(D)) {
                        A = parseInt(D);
                        var E = Math.floor((y - A) * z);
                        if (E < B) {
                            B = E
                        }
                    }
                }
            }
            if (x > B) {
                Fai.ing(Fai.format(LS.integral_maxUse, B, Fai.encodeHtml(C)), true);
                s.val(B);
                var w = (B / z).toFixed(2);
                $("#offsetMoney").text(w);
                $("#offsetMoney").attr("_offsetmoney", w);
                a();
                p();
                return
            }
            if (x > parseInt(s.attr("_currentItg"))) {
                Fai.ing(Fai.format(LS.integral_notOverCurrent, Fai.encodeHtml(C), Fai.encodeHtml(C)));
                s.focus();
                return
            }
            if (x < 0) {
                Fai.ing(LS.integral_inputInteger);
                s.focus();
                return
            }
            var w = (x / z).toFixed(2);
            $("#offsetMoney").text(w);
            $("#offsetMoney").attr("_offsetmoney", w);
            if ($("#couponCheckBox").length > 0) {
                $(".couponShowList option").each(function () {
                    var F = parseInt($(this).attr("_minPrice"));
                    if (y - w < F) {
                        $(this).hide();
                        if ($(this).prop("checked")) {
                            $("#couponOffsetMoney").text("0.00");
                            $("#couponOffsetMoney").attr("_offsetmoney", "0.00")
                        }
                        $(".couponShowList").val(-1)
                    } else {
                        $(this).show()
                    }
                })
            }
            a();
            p()
        })
    }

    function f() {
        var s = $("#couponCheckBox"),
            t = $(".couponShowList");
        if (s.length < 1) {
            return
        }
        if (t.find("option").length == 1) {
            s.prop("disabled", true);
            return
        }
        $(".couponTitle").off("click.mstl").on("click.mstl", function (v) {
            var u = $(this);
            if (u.hasClass("discountChecked")) {
                u.removeClass("discountChecked");
                u.next().val(-1).trigger("change").attr("disabled", "true")
            } else {
                u.addClass("discountChecked");
                u.next().removeAttr("disabled")
            }
        });
        t.off("change.mstl").on("change.mstl", function (y) {
            var v = $(this),
                w = v.find("option:selected");
            var x = $(this).find("input:checkbox").is(":checked");
            var u = 0;
            if (v.val() != -1) {
                u = parseFloat(w.attr("data_saveprice"))
            }
            $("#couponOffsetMoney").text(u.toFixed(2));
            $("#couponOffsetMoney").attr("_offsetmoney", u);
            a();
            p()
        })
    }

    function a() {
        var t = parseFloat($("#offsetMoney").attr("_offsetmoney")).toFixed(2) * 100 || 0,
            s = parseFloat($("#couponOffsetMoney").attr("_offsetmoney")).toFixed(2) * 100 || 0,
            u = ((t + s) / 100).toFixed(2);
        $("#offsetTotalMoney").text(u)
    }

    function p() {
        var w = parseFloat($(".calTotalItem").attr("pay_price")).toFixed(2) * 100 || 0,
            t = parseFloat($("#offsetMoney").attr("_offsetmoney")).toFixed(2) * 100 || 0,
            s = parseFloat($("#couponOffsetMoney").attr("_offsetmoney")).toFixed(2) * 100 || 0,
            x = parseFloat($("#shippingMoneyVal").attr("_shipmoney")).toFixed(2) * 100 || 0,
            v = $("#finalPay"),
            u = ((w + x - t - s) / 100).toFixed(2);
        v.text(u)
    }

    function r() {
        var t = $(".mallShipSelect").find("option:selected");
        shippingMoneytext = $(".shippingPay"), culshippingMoneyVal = $("#shippingMoneyVal"), price = parseFloat(t.attr("price")).toFixed(2);
        shippingMoneytext.text(price).attr("_shipmoney", price);
        culshippingMoneyVal.text(price).attr("_shipmoney", price);
        if ($("#mallShipTemplate_province").length > 0) {
            var s = $(".mallShipSelect option:selected");
            s.attr("provinceCode", $.trim($("#mallShipTemplate_areaBoxInput").attr("area1")));
            s.attr("cityCode", $.trim($("#mallShipTemplate_areaBoxInput").attr("area2")));
            s.attr("countyCode", $.trim($("#mallShipTemplate_areaBoxInput").attr("area3")))
        }
        p()
    }
    m.initModuleMallShipTemplateNew = function (K, L, t, N, B, u, s, F) {
        var y = N.vType || 1,
            G = N.sco || 0,
            v = N.openItemList;
        var E = "-----------",
            J = [],
            z, M, D, H, O, C, I;
        var x = true;
        var A = "";
        A += "<div class='spaceLine'></div>";
        $.each(site_cityUtil.getAreaGroupsPinYin(), function (P, Q) {
            A += "<div class='pv_group' style='" + (Q[0] == "OS" ? "display:none;" : "") + "'>";
            A += "<div class='group_head'>" + Q[0] + "</div>";
            A += "<div class='group_content'>";
            $.each(Q[1], function (S, R) {
                if (F == 2052 || F == 1028) {
                    A += "<div class='group_item' pid='" + R + "' pname='" + site_cityUtil.getInfo(R).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(R).name) + "</div>"
                } else {
                    A += "<div class='group_item' pid='" + R + "' pname='" + site_cityUtil.getInfoEn(R).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(R).name) + "</div>"
                }
            });
            A += "</div>";
            A += "</div>";
            A += "<div class='spaceLine'></div>"
        });
        $("#mallShipTemplate_areaBox1 .pv_content").html("").append(A);
        $(document).unbind("click.forAreaBox2").bind("click.forAreaBox2", function () {
            $("#mallShipTemplate_areaBox1").hide();
            $("#mallShipTemplate_areaBox2").hide()
        });
        $("#mallShipTemplate_areaBox1,#mallShipTemplate_areaBox2").unbind("click.forAreaBox").bind("click.forAreaBox", function (P) {
            w(P)
        });

        function w(P) {
            if (P.stopPropagation) {
                P.stopPropagation()
            } else {
                P.cancelBubble = true
            }
        }
        $("#mallShipTemplate_allArea").change(function () {
            if ($("#mallShipTemplate_allArea").val() == null || $("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "os") {
                $("#mallShipTemplate_areaBoxInput").hide();
                $("#mallShipTemplate_areaBox1").hide();
                $("#mallShipTemplate_areaBox2").hide()
            } else {
                $("#mallShipTemplate_areaBoxInput").show()
            } if ($("#mallShipTemplate_allArea").val() == null || $("#mallShipTemplate_allArea").val() == "") {
                return
            }
            $("#mallShipTemplate_areaBoxInput").attr("isCn", 0);
            $("#mallShipTemplate_areaBoxInput").attr("isCus", 0);
            $("#mallShipTemplate_areaBoxInput").attr("isOs", 0);
            $("#mallShipTemplate_areaBoxInput").attr("area1", "");
            $("#mallShipTemplate_areaBoxInput").attr("area2", "");
            $("#mallShipTemplate_areaBoxInput").attr("area3", "");
            if ($("#mallShipTemplate_allArea").val() == "cn") {
                $("#mallShipTemplate_areaBoxInput").attr("isCn", 1);
                $("#mallShipTemplate_areaBox1 .pv").click();
                $("#mallShipTemplate_areaBox1 .city_content").remove();
                $("#mallShipTemplate_areaBox1 .county_content").remove()
            } else {
                if ($("#mallShipTemplate_allArea").val() == "os") {
                    $("#mallShipTemplate_areaBoxInput").attr("isOs", 1);
                    $("#mallShipTemplate_areaBoxInput").attr("area1", 990000);
                    $("#mallShipTemplate_areaBoxInput").attr("area2", 990100)
                } else {
                    $("#mallShipTemplate_areaBoxInput").attr("isCus", 1);
                    $("#mallShipTemplate_areaBoxInput").attr("area1", $("#mallShipTemplate_allArea").val());
                    $("#mallShipTemplate_areaBox2 .sec_content").html("");
                    $("#mallShipTemplate_areaBox2 .thd_content").html("")
                }
            }
            $("#mallShipTemplate_areaBoxInput").val("");
            if ($("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
                return
            }
            var P = b($("#mallShipTemplate_allArea").val());
            $("#mallShipTemplate_sec_box .sec_content").append(P);
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + $("#mallShipTemplate_allArea option[value='" + $("#mallShipTemplate_allArea").val() + "']").text());
            var Q = $("#mallShipTemplate_allArea").val();
            x = false;
            if (L === 0) {
                r();
                return
            }
            $.each(v, function (S, U) {
                if (G) {
                    var T = false,
                        R = N.scrl || [];
                    $.each(R, function (W, V) {
                        if (V.st === U.type) {
                            var X = false;
                            if (x) {
                                X = $.inArray(parseInt(Q), V.arl) > -1
                            } else {
                                X = $.inArray(parseInt(Q), V.carl) > -1
                            } if (X) {
                                if (V.fc === 1) {
                                    if (y === 1) {
                                        if (L >= V.d1) {
                                            T = true;
                                            return false
                                        }
                                    } else {
                                        if (L <= V.d1) {
                                            T = true;
                                            return false
                                        }
                                    }
                                }
                                if (V.fc === 2) {
                                    if (t >= V.d2) {
                                        T = true;
                                        return false
                                    }
                                }
                                if (V.fc === 3) {
                                    if (y === 1) {
                                        if (L >= V.d1 && t >= V.d2) {
                                            T = true;
                                            return false
                                        }
                                    } else {
                                        if (L <= V.d1 && t >= V.d2) {
                                            T = true;
                                            return false
                                        }
                                    }
                                }
                                if (V.fc === 4) {
                                    if (y === 1) {
                                        if (L >= V.d1 || t >= V.d2) {
                                            T = true;
                                            return false
                                        }
                                    } else {
                                        if (L <= V.d1 || t >= V.d2) {
                                            T = true;
                                            return false
                                        }
                                    }
                                }
                            }
                        }
                    });
                    if (T) {
                        $("#template_item_" + U.type).attr("price", 0);
                        return
                    }
                }
                if (!U.regionList || U.regionList.length <= 0) {
                    $("#template_item_" + U.type).attr("price", U.defaultPrice.toFixed(1));
                    return true
                }
                $.each(U.regionList, function (ab, ae) {
                    var W = false;
                    if (x) {
                        W = $.inArray(parseInt(Q), ae.areaList) < 0
                    } else {
                        W = $.inArray(parseInt(Q), ae.cusAreaList) < 0
                    } if (W) {
                        $("#template_item_" + U.type).attr("price", U.defaultPrice.toFixed(1));
                        return true
                    }
                    var aa = 0,
                        X = ae.price,
                        ac = ae.rha == null ? 1 : ae.rha,
                        ad = ae.ria == null ? 1 : ae.ria,
                        Y = ae.rip || 0;
                    var Z = L;
                    if (ac > 0) {
                        aa = X;
                        Z -= ac
                    }
                    if (ad > 0 && Z > 0) {
                        var V = (Z / ad).toFixed(1);
                        V = Math.ceil(V);
                        aa += Y * V
                    }
                    $("#template_item_" + U.type).attr("price", aa.toFixed(1));
                    return false
                })
            });
            r()
        });
        $("#mallShipTemplate_areaBoxInput").unbind("click").bind("click", function (P) {
            if ($("#mallShipTemplate_allArea").val() == "cn") {
                $("#mallShipTemplate_areaBox1").toggle();
                $("#mallShipTemplate_areaBox2").hide();
                $("#mallShipTemplate_province_box").show();
                $("#mallShipTemplate_city_box").hide();
                $("#mallShipTemplate_county_box").hide()
            } else {
                if ($("#mallShipTemplate_allArea").val() == null || $("#mallShipTemplate_allArea").val() == "os") {} else {
                    $("#mallShipTemplate_areaBox2").toggle();
                    $("#mallShipTemplate_areaBox1").hide();
                    $("#mallShipTemplate_sec_box").show();
                    $("#mallShipTemplate_thd_box").hide()
                }
            }
            w(P)
        });
        $("#mallShipTemplate_areaBox1 .J_areaHead .pv").click(function () {
            $("#mallShipTemplate_province_box").show();
            $("#mallShipTemplate_city_box").hide();
            $("#mallShipTemplate_county_box").hide()
        });
        $("#mallShipTemplate_areaBox1 .J_areaHead .city").click(function () {
            $("#mallShipTemplate_province_box").hide();
            $("#mallShipTemplate_city_box").show();
            $("#mallShipTemplate_county_box").hide()
        });
        $("#mallShipTemplate_areaBox1 .J_areaHead .county").click(function () {
            $("#mallShipTemplate_province_box").hide();
            $("#mallShipTemplate_city_box").hide();
            $("#mallShipTemplate_county_box").show()
        });
        $("#mallShipTemplate_areaBox2 .J_areaHead2 .sec").click(function () {
            $("#mallShipTemplate_sec_box").show();
            $("#mallShipTemplate_thd_box").hide()
        });
        $("#mallShipTemplate_areaBox2 .J_areaHead2 .thd").click(function () {
            $("#mallShipTemplate_sec_box").hide();
            $("#mallShipTemplate_thd_box").show()
        });
        $("#mallShipTemplate_province_box .group_item").bind("click", function () {
            $("#mallShipTemplate_areaBox1 .city_content").remove();
            $("#mallShipTemplate_areaBox1 .county_content").remove();
            var P = $(this).attr("pname");
            var Q = $(this).attr("pid");
            $("#mallShipTemplate_areaBox1 .J_areaHead .city").click();
            $("#mallShipTemplate_areaBoxInput").val("");
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + P);
            $("#mallShipTemplate_areaBoxInput").removeAttr("lastArea");
            $("#mallShipTemplate_areaBoxInput").removeAttr("lastAreaType");
            $("#mallShipTemplate_areaBoxInput").attr("area1", Q);
            $("#mallShipTemplate_areaBoxInput").attr("area2", "");
            $("#mallShipTemplate_areaBoxInput").attr("area3", "");
            $("#mallShipTemplate_areaBox1 .city_content").remove();
            var R = j(site_cityUtil.getCities(Q));
            $("#mallShipTemplate_city_box").append(R);
            $.each(v, function (S, T) {
                $("#template_item_" + T.type).attr("price", T.defaultPrice.toFixed(1))
            });
            r()
        });
        $("#mallShipTemplate_city_box").delegate(".group_item", "click", function () {
            if ($("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
                x = true
            } else {
                x = false
            }
            $("#mallShipTemplate_areaBox1 .county_content").remove();
            var P = $(this).attr("cname");
            var R = $(this).attr("cid");
            $("#mallShipTemplate_areaBox1 .J_areaHead .county").click();
            var T = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
            var Q = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
            if (Q != null && Q != "") {
                $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().substring(0, $("#mallShipTemplate_areaBoxInput").val().indexOf("-")))
            }
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + P);
            $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + P);
            $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "city");
            $("#mallShipTemplate_areaBoxInput").attr("area2", R);
            $("#mallShipTemplate_areaBoxInput").attr("area3", "");
            $("#mallShipTemplate_areaBox1 .county_content").remove();
            var S = g(site_cityUtil.getCounty(R));
            $("#mallShipTemplate_county_box").append(S);
            if (L === 0) {
                r();
                return
            }
            $.each(v, function (V, X) {
                if (G) {
                    var W = false,
                        U = N.scrl || [];
                    $.each(U, function (Z, Y) {
                        if (Y.st === X.type) {
                            var aa = false;
                            if (x) {
                                aa = $.inArray(parseInt(R), Y.arl) > -1
                            } else {
                                aa = $.inArray(parseInt(R), Y.carl) > -1
                            } if (aa) {
                                if (Y.fc === 1) {
                                    if (y === 1) {
                                        if (L >= Y.d1) {
                                            W = true;
                                            return false
                                        }
                                    } else {
                                        if (L <= Y.d1) {
                                            W = true;
                                            return false
                                        }
                                    }
                                }
                                if (Y.fc === 2) {
                                    if (t >= Y.d2) {
                                        W = true;
                                        return false
                                    }
                                }
                                if (Y.fc === 3) {
                                    if (y === 1) {
                                        if (L >= Y.d1 && t >= Y.d2) {
                                            W = true;
                                            return false
                                        }
                                    } else {
                                        if (L <= Y.d1 && t >= Y.d2) {
                                            W = true;
                                            return false
                                        }
                                    }
                                }
                                if (Y.fc === 4) {
                                    if (y === 1) {
                                        if (L >= Y.d1 || t >= Y.d2) {
                                            W = true;
                                            return false
                                        }
                                    } else {
                                        if (L <= Y.d1 || t >= Y.d2) {
                                            W = true;
                                            return false
                                        }
                                    }
                                }
                            }
                        }
                    });
                    if (W) {
                        $("#template_item_" + X.type).attr("price", 0);
                        return
                    }
                }
                if (!X.regionList || X.regionList.length <= 0) {
                    $("#template_item_" + X.type).attr("price", X.defaultPrice.toFixed(1));
                    return true
                }
                $.each(X.regionList, function (ae, ah) {
                    var Z = false;
                    if (x) {
                        Z = $.inArray(parseInt(R), ah.areaList) < 0
                    } else {
                        Z = $.inArray(parseInt(R), ah.cusAreaList) < 0
                    } if (Z) {
                        $("#template_item_" + X.type).attr("price", X.defaultPrice.toFixed(1));
                        return true
                    }
                    var ad = 0,
                        aa = ah.price,
                        af = ah.rha == null ? 1 : ah.rha,
                        ag = ah.ria == null ? 1 : ah.ria,
                        ab = ah.rip || 0;
                    var ac = L;
                    if (af > 0) {
                        ad = aa;
                        ac -= af
                    }
                    if (ag > 0 && ac > 0) {
                        var Y = (ac / ag).toFixed(1);
                        Y = Math.ceil(Y);
                        ad += ab * Y
                    }
                    $("#template_item_" + X.type).attr("price", ad.toFixed(1));
                    return false
                })
            });
            r()
        });
        $("#mallShipTemplate_county_box").delegate(".group_item", "click", function () {
            var P = $(this).attr("cname");
            var R = $(this).attr("cid");
            var S = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
            var Q = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
            if (Q != null && Q == "county") {
                $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().replace(S, ""))
            }
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + P);
            $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + P);
            $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "county");
            $("#mallShipTemplate_areaBoxInput").attr("area3", R);
            $("#mallShipTemplate_areaBox1").hide();
            r()
        });
        $("#mallShipTemplate_sec_box").delegate(".group_item", "click", function () {
            if ($("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
                x = true
            } else {
                x = false
            }
            $("#mallShipTemplate_areaBox2 .thd_content").html("");
            var P = $(this).attr("cname");
            var R = $(this).attr("cid");
            $("#mallShipTemplate_areaBox2 .J_areaHead2 .thd").click();
            var T = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
            var Q = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
            if (Q != null && Q != "" && $("#mallShipTemplate_areaBoxInput").val().indexOf("-") != -1) {
                $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().substring(0, $("#mallShipTemplate_areaBoxInput").val().indexOf("-")))
            }
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + P);
            $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + P);
            $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "sec");
            $("#mallShipTemplate_areaBoxInput").attr("area2", R);
            $("#mallShipTemplate_areaBoxInput").attr("area3", "");
            var S = b(R);
            $("#mallShipTemplate_thd_box .thd_content").append(S);
            if (L === 0) {
                r();
                return
            }
            $.each(v, function (V, X) {
                if (G) {
                    var W = false,
                        U = N.scrl || [];
                    $.each(U, function (Z, Y) {
                        if (Y.st === X.type) {
                            var aa = false;
                            if (x) {
                                aa = $.inArray(parseInt(R), Y.arl) > -1
                            } else {
                                aa = $.inArray(parseInt(R), Y.carl) > -1
                            } if (aa) {
                                if (Y.fc === 1) {
                                    if (y === 1) {
                                        if (L >= Y.d1) {
                                            W = true;
                                            return false
                                        }
                                    } else {
                                        if (L <= Y.d1) {
                                            W = true;
                                            return false
                                        }
                                    }
                                }
                                if (Y.fc === 2) {
                                    if (t >= Y.d2) {
                                        W = true;
                                        return false
                                    }
                                }
                                if (Y.fc === 3) {
                                    if (y === 1) {
                                        if (L >= Y.d1 && t >= Y.d2) {
                                            W = true;
                                            return false
                                        }
                                    } else {
                                        if (L <= Y.d1 && t >= Y.d2) {
                                            W = true;
                                            return false
                                        }
                                    }
                                }
                                if (Y.fc === 4) {
                                    if (y === 1) {
                                        if (L >= Y.d1 || t >= Y.d2) {
                                            W = true;
                                            return false
                                        }
                                    } else {
                                        if (L <= Y.d1 || t >= Y.d2) {
                                            W = true;
                                            return false
                                        }
                                    }
                                }
                            }
                        }
                    });
                    if (W) {
                        $("#template_item_" + X.type).attr("price", 0);
                        return
                    }
                }
                if (!X.regionList || X.regionList.length <= 0) {
                    $("#template_item_" + X.type).attr("price", X.defaultPrice.toFixed(1));
                    return true
                }
                $.each(X.regionList, function (ae, ah) {
                    var Z = false;
                    if (x) {
                        Z = $.inArray(parseInt(R), ah.areaList) < 0
                    } else {
                        Z = $.inArray(parseInt(R), ah.cusAreaList) < 0
                    } if (Z) {
                        $("#template_item_" + X.type).attr("price", X.defaultPrice.toFixed(1));
                        return true
                    }
                    var ad = 0,
                        aa = ah.price,
                        af = ah.rha == null ? 1 : ah.rha,
                        ag = ah.ria == null ? 1 : ah.ria,
                        ab = ah.rip || 0;
                    var ac = L;
                    if (af > 0) {
                        ad = aa;
                        ac -= af
                    }
                    if (ag > 0 && ac > 0) {
                        var Y = (ac / ag).toFixed(1);
                        Y = Math.ceil(Y);
                        ad += ab * Y
                    }
                    $("#template_item_" + X.type).attr("price", ad.toFixed(1));
                    return false
                })
            });
            r()
        });
        $("#mallShipTemplate_thd_box").delegate(".group_item", "click", function () {
            if ($("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
                x = true
            } else {
                x = false
            }
            var P = $(this).attr("cname");
            var R = $(this).attr("cid");
            var S = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
            var Q = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
            if (Q != null && Q == "thd") {
                $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().replace(S, ""))
            }
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + P);
            $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + P);
            $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "thd");
            $("#mallShipTemplate_areaBoxInput").attr("area3", R);
            $("#mallShipTemplate_areaBox2").hide();
            if (L === 0) {
                r();
                return
            }
            $.each(v, function (U, W) {
                if (G) {
                    var V = false,
                        T = N.scrl || [];
                    $.each(T, function (Y, X) {
                        if (X.st === W.type) {
                            var Z = false;
                            if (x) {
                                Z = $.inArray(parseInt(R), X.arl) > -1
                            } else {
                                Z = $.inArray(parseInt(R), X.carl) > -1
                            } if (Z) {
                                if (X.fc === 1) {
                                    if (y === 1) {
                                        if (L >= X.d1) {
                                            V = true;
                                            return false
                                        }
                                    } else {
                                        if (L <= X.d1) {
                                            V = true;
                                            return false
                                        }
                                    }
                                }
                                if (X.fc === 2) {
                                    if (t >= X.d2) {
                                        V = true;
                                        return false
                                    }
                                }
                                if (X.fc === 3) {
                                    if (y === 1) {
                                        if (L >= X.d1 && t >= X.d2) {
                                            V = true;
                                            return false
                                        }
                                    } else {
                                        if (L <= X.d1 && t >= X.d2) {
                                            V = true;
                                            return false
                                        }
                                    }
                                }
                                if (X.fc === 4) {
                                    if (y === 1) {
                                        if (L >= X.d1 || t >= X.d2) {
                                            V = true;
                                            return false
                                        }
                                    } else {
                                        if (L <= X.d1 || t >= X.d2) {
                                            V = true;
                                            return false
                                        }
                                    }
                                }
                            }
                        }
                    });
                    if (V) {
                        $("#template_item_" + W.type).attr("price", 0);
                        return
                    }
                }
                if (!W.regionList || W.regionList.length <= 0) {
                    $("#template_item_" + W.type).attr("price", W.defaultPrice.toFixed(1));
                    return true
                }
                $.each(W.regionList, function (ad, ag) {
                    var Y = false;
                    if (x) {
                        Y = $.inArray(parseInt(R), ag.areaList) < 0
                    } else {
                        Y = $.inArray(parseInt(R), ag.cusAreaList) < 0
                    } if (Y) {
                        $("#template_item_" + W.type).attr("price", W.defaultPrice.toFixed(1));
                        return true
                    }
                    var ac = 0,
                        Z = ag.price,
                        ae = ag.rha == null ? 1 : ag.rha,
                        af = ag.ria == null ? 1 : ag.ria,
                        aa = ag.rip || 0;
                    var ab = L;
                    if (ae > 0) {
                        ac = Z;
                        ab -= ae
                    }
                    if (af > 0 && ab > 0) {
                        var X = (ab / af).toFixed(1);
                        X = Math.ceil(X);
                        ac += aa * X
                    }
                    $("#template_item_" + W.type).attr("price", ac.toFixed(1));
                    return false
                })
            });
            r()
        });
        $("#template_item_" + u.type).click()
    };

    function n(y, z) {
        var s = z[y] || (z[0] = {}),
            u = Fai.top._lcid;
        if ($("#mallShipTemplate_province").length < 1) {
            return
        }
        if (s.addr_info != null) {
            var w = s.addr_info["isCus"];
            if (!w) {
                var x = "";
                var v = "";
                var t = "";
                if (u == 2052 || u == 1028) {
                    x = site_cityUtil.getInfo(s.addr_info.countyCode).name;
                    v = site_cityUtil.getInfo(s.addr_info.cityCode).name;
                    t = site_cityUtil.getInfo(s.addr_info.provinceCode).name
                } else {
                    x = site_cityUtil.getInfoEn(s.addr_info.countyCode).name;
                    v = site_cityUtil.getInfoEn(s.addr_info.cityCode).name;
                    t = site_cityUtil.getInfoEn(s.addr_info.provinceCode).name
                } if (s.addr_info.provinceCode == 990000) {
                    $("#mallShipTemplate_areaBoxInput").attr("isOs", 1);
                    $("#mallShipTemplate_allArea").val("os");
                    $("#mallShipTemplate_allArea").change()
                } else {
                    $("#mallShipTemplate_areaBoxInput").attr("isCn", 1);
                    $("#mallShipTemplate_allArea").val("cn");
                    $("#mallShipTemplate_allArea").change()
                }
                $("#mallShipTemplate_areaBoxInput").attr("area1", s.addr_info.provinceCode);
                $("#mallShipTemplate_areaBoxInput").attr("area2", s.addr_info.cityCode);
                $("#mallShipTemplate_areaBoxInput").attr("area3", s.addr_info.countyCode);
                $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + x);
                $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "county");
                setTimeout(function () {
                    $("#mallShipTemplate_areaBox1 .group_item[pid='" + s.addr_info.provinceCode + "']").click();
                    setTimeout(function () {
                        $("#mallShipTemplate_areaBox1 .group_item[cid='" + s.addr_info.cityCode + "']").click();
                        setTimeout(function () {
                            $("#mallShipTemplate_areaBox1 .group_item[cid='" + s.addr_info.countyCode + "']").click()
                        }, 0)
                    }, 0)
                }, 0);
                $("#streetAddress").val(s.addr_info.streetAddr)
            } else {
                setTimeout(function () {
                    $("#mallShipTemplate_allArea").val(s.addr_info["provinceCode"]);
                    $("#mallShipTemplate_allArea").change();
                    setTimeout(function () {
                        $("#mallShipTemplate_areaBox2 .group_item[cid='" + s.addr_info.cityCode + "']").click();
                        setTimeout(function () {
                            $("#mallShipTemplate_areaBox2 .group_item[cid='" + s.addr_info.countyCode + "']").click()
                        }, 0)
                    }, 0)
                }, 0);
                $("#streetAddress").val(s.addr_info.streetAddr)
            }
        }
    }

    function d(ab, Z, W, E, A) {
        var N = $(".selectedMsg"),
            O = parseInt(N.attr("_item")),
            D = W[O] || {},
            w = D.addr_info,
            G = Fai.top._lcid,
            I = {},
            F = {},
            V = "";
        var B, ac, v = false;
        for (var Y = 0; Y < A.length; Y++) {
            B = A[Y];
            ac = B.fieldKey;
            if (ac == "addr") {
                if (!w) {
                    V = LS.mallStlSubmitAddrErr;
                    return V
                }
                F.isCus = w.isCus;
                F.provinceCode = parseInt(w.provinceCode);
                F.cityCode = parseInt(w.cityCode);
                F.countyCode = parseInt(w.countyCode);
                F.streetAddr = w.streetAddr;
                if (isNaN(F.cityCode)) {
                    F.cityCode = -1
                }
                if (isNaN(F.countyCode)) {
                    F.countyCode = -1
                }
                if (E) {
                    Z.addr_info = F;
                    Z.addr = F.streetAddr;
                    Z.isDefault = 1;
                    Z.name = w.name;
                    Z.email = w.email;
                    Z.phone = w.phone;
                    Z.zip = w.zip
                }
                ab.addr_info = F;
                ab.addr = F.streetAddr;
                ab.addr = "";
                if (!F.isCus) {
                    if (site_cityUtil.isValidProvince(F.provinceCode)) {
                        ab.addr += site_cityUtil.getInfo(F.provinceCode).name
                    }
                    if (site_cityUtil.isValidCity(F.cityCode)) {
                        ab.addr += site_cityUtil.getInfo(F.cityCode).name
                    }
                    ab.addr += site_cityUtil.getInfo(F.countyCode).name;
                    ab.addr += F.streetAddr
                } else {
                    ab.addr = D.addr
                } if (typeof F.provinceCode != "number" || typeof F.cityCode != "number") {
                    V = LS.mallStlSubmitAddrErr;
                    return V
                }
                if (typeof F.countyCode != "number") {
                    delete F.countyCode
                }
                v = true;
                continue
            }
            if (ac == "mobile") {
                ab.mobileCt = D.mobileCt
            }
            ab[ac] = D[ac]
        }
        if (!v && $("#mallShipTemplate_province").length === 1) {
            if (!w) {
                V = LS.mallStlSubmitAddrErr;
                return V
            }
            F.isCus = w.isCus;
            F.provinceCode = parseInt(w.provinceCode);
            F.cityCode = parseInt(w.cityCode);
            F.countyCode = parseInt(w.countyCode);
            F.streetAddr = w.streetAddr;
            if (isNaN(F.cityCode)) {
                F.cityCode = -1
            }
            if (isNaN(F.countyCode)) {
                F.countyCode = -1
            }
            if (E) {
                Z.addr_info = F;
                Z.addr = F.streetAddr;
                Z.isDefault = 1;
                Z.name = w.name;
                Z.email = w.email;
                Z.phone = w.phone;
                Z.zip = w.zip
            }
            ab.addr_info = F;
            ab.addr = F.streetAddr;
            ab.addr = "";
            if (!F.isCus) {
                if (site_cityUtil.isValidProvince(F.provinceCode)) {
                    ab.addr += site_cityUtil.getInfo(F.provinceCode).name
                }
                if (site_cityUtil.isValidCity(F.cityCode)) {
                    ab.addr += site_cityUtil.getInfo(F.cityCode).name
                }
                ab.addr += site_cityUtil.getInfo(F.countyCode).name;
                ab.addr += F.streetAddr
            } else {
                ab.addr = D.addr
            } if (typeof F.provinceCode != "number" || typeof F.cityCode != "number") {
                V = LS.mallStlSubmitAddrErr;
                return V
            }
            if (typeof F.countyCode != "number") {
                delete F.countyCode
            }
        }
        var y = $(".mallShipSelect"),
            U = y.find("option:checked");
        if ($("#mallShipTemplate_province").length === 1 && U.length === 1) {
            var H = F.provinceCode,
                T = F.cityCode,
                K = F.countyCode,
                R = $.trim(F.streetAddr);
            if (!F.isCus) {
                if (!H || isNaN(H) || !site_cityUtil.isValidProvince(H)) {
                    V = LS.mallStlSubmitAddrErr;
                    return V
                }
                if (!T || isNaN(T) || !site_cityUtil.isValidCity(T, H)) {
                    V = LS.mallStlSubmitAddrErr;
                    return V
                }
            } else {
                if (!H || isNaN(H)) {
                    V = LS.mallStlSubmitAddrErr;
                    return V
                }
                if (!T || isNaN(T)) {
                    V = LS.mallStlSubmitAddrErr;
                    return V
                }
            }
            var C = {
                type: parseInt(U.attr("value")),
                templateId: parseInt(U.attr("templateId")),
                streetAddr: R
            };
            C.provinceCode = H;
            C.cityCode = T;
            C.countyCode = K;
            C.isCus = F.isCus;
            ab.shipType = C
        } else {
            if (U.length === 1) {
                ab.shipType = parseInt(U.attr("value"))
            }
        }
        var u = $(".payChecked");
        if (u.length == 1) {
            ab.payMode = parseInt(u.attr("_paymode"))
        }
        var Q = $(".msgforSeller");
        if (Q.length > 0) {
            var aa = Fai.decodeHtml(Q.val());
            var S = parseInt(Q.attr("maxlength"));
            if (aa.length > S) {
                aa = aa.substring(0, S)
            }
            var J = Q.attr("plcaeholder");
            if (aa !== J) {
                ab.msg = aa
            } else {
                ab.msg = ""
            }
        } else {
            ab.msg = ""
        }
        var s = $("#useItg"),
            M = $("#integralCheckBox");
        if (M.length > 0 && M.prop("checked")) {
            var ae = s.val();
            if (Fai.isInteger(ae)) {
                var L = parseInt(s.attr("_maxUse")),
                    X = parseInt(s.attr("_currentitg")),
                    t = s.attr("_itgname");
                if (ae > X) {
                    V = Fai.format(LS.integral_notOverCurrent, Fai.encodeHtml(t), Fai.encodeHtml(t));
                    return V
                }
                if (ae > L) {
                    V = Fai.format(LS.integral_notOver, Fai.encodeHtml(t), L);
                    return V
                }
                if (ae < 0) {
                    V = LS.integral_inputInteger;
                    return V
                }
                ab.useItg = parseInt(ae)
            } else {
                if (ae.length != 0) {
                    V = LS.integral_inputInteger;
                    return V
                }
            }
        }
        if ($("#presentItgShow").length > 0) {
            ab.presentItg = true
        }
        var z = $("#couponCheckBox"),
            P = $(".couponShowList"),
            ad;
        if (P.length > 0 && parseInt(P.val()) != -1) {
            ad = P.find("option:selected");
            var x = ad.attr("data_id");
            ab.cdId = Number(x)
        }
        return V
    }

    function q(w, G, z, y, v, H, A, x, J, t) {
        if (!J && G == 0) {
            Fai.top.location.href = "mdetail.jsp";
            return
        }
        var K = {},
            I = {},
            w = Fai.top.$("#module" + w),
            D = w.find(".stlMsg");
        var C = d(K, I, x, H, t);
        if (C != "") {
            D.show();
            D.html(C);
            m.scrollToDiv(w);
            return
        }
        var E = w.find(".mallStlOpt input");
        E.attr("disabled", true);
        D.show();
        D.html(LS.mallStlSubmitting);
        m.scrollToDiv(w);
        if (v != 0 && H) {
            var s = {},
                x = [];
            x.push(I);
            s.addrInfoList = x;
            $.ajax({
                type: "post",
                url: action = "ajax/memberAdm_h.jsp?cmd=set&opera=addAddr&id=" + v,
                data: "info=" + Fai.encodeUrl($.toJSON(s)),
                success: function (L) {}, error: function () {}
            })
        }
        if (K.payMode == 5) {
            var F = K.name;
            var B = new RegExp("[\\u4E00-\\u9FFF]+", "g");
            if (F) {
                if (F.length < 2) {
                    if (!B.test(F)) {
                        D.hide();
                        m.scrollToDiv(w);
                        Fai.ing(LS.orderValidRecvName);
                        E.attr("disabled", false);
                        return
                    }
                }
            } else {
                if (v != 0 && A) {
                    var u = "";
                    if (A.length < 2) {
                        if (!B.test(F)) {
                            u = "会员"
                        }
                    }
                    K.name = u + A
                } else {
                    K.name = "游客"
                }
            }
        }
        if (J) {

        } else {

        }
    }
})(Site);
Site.placeholder = function (b) {
    var a = "placeholder" in document.createElement("input");
    if (!a) {
        b.each(function (g, c) {
            var f = $(this),
                d = f.attr("placeholder"),
                j = f.position(),
                e = f.outerHeight(true),
                k = f.outerWidth(true),
                m = f.css("padding-left"),
                l = f.css("padding-top"),
                i = $("<span class='J_wrap-placeholder'></span>").text(d).css({
                    display: "inline-block",
                    height: e,
                    "line-height": e + "px",
                    position: "absolute",
                    left: j.left,
                    top: j.top,
                    paddingLeft: 8,
                    paddingTop: l,
                    color: "#aaa"
                });
            i.appendTo(f.parent());
            f.on("focusin keyup", function () {
                f.val() != "" ? i.hide() : i.show()
            });
            i.on("click", function () {
                f.focus()
            });
            f.siblings(".fk_lowIEPlaceholderStyle").remove()
        })
    }
};
Site.mCartsaleItemCk = function (e) {
    var input = $(e).prev();
    if (input.prop("checked")) {
        input.prop("checked", false)
    } else {
        input.prop("checked", true)
    }
    eval($(e).prev().attr("onclick"))
};
Site.setCheckBoxToFalgDiv = function (b) {
    if (b.find(".J_mallCart").hasClass("mallCartNew")) {
        var a = b.find(".mCartCheckDiv");
        a.each(function () {
            var c = $(this).prev();
            if (c.prop("checked")) {
                $(this).addClass("itemLabelChecked mCart_checked")
            } else {
                $(this).removeClass("itemLabelChecked mCart_checked")
            }
        })
    }
};
Site.initOrderList = function (d) {
    var b = $("#module" + d);
    var a = b.find(".J_showMorePd");
    a.on("click.showOrderItem", function () {
        var e = $(this).attr("_oid");
        if ($(this).hasClass("J_showing")) {
            $("#hidePdItem" + e).slideUp();
            $(this).removeClass("J_showing").addClass("J_hidden")
        } else {
            $("#hidePdItem" + e).slideDown();
            $(this).addClass("J_showing").removeClass("J_hidden")
        }
        $("#hidePdItem" + e).css("zoom", 1)
    });
    var c = b.find(".J_pdName");
    c.hover(function () {
        $(this).addClass("g_selected")
    }, function () {
        $(this).removeClass("g_selected")
    })
};
Site.showTopBar = function () {
    if (Fai.top.$("#arrow").hasClass("g_arrow_up")) {
        Fai.top.$("#arrow").removeClass("g_arrow_up");
        Fai.top.$("#topBar").hide()
    } else {
        Fai.top.$("#arrow").addClass("g_arrow_up");
        Fai.top.$("#topBar").show()
    }
    Site.resetGmainPos()
};
Site.showOrHideMailBox = function () {
    $.ajax({
        url: "../ajax/mail_h.jsp?cmd=showOrHideMailBox",
        data: "",
        success: function (a) {
            var b = $.parseJSON(a);
            if (b.success) {
                var c = ['<div id="mailInfo" title="进入企业邮箱" class="mailInfo" >', '<a href="' + b.linkAdd + '" target="_blank" onclick="Site.logDog(100038, 14);">', '<div class="mailIco"></div>', "</a>", "</div>"];
                $(".J_beforeMailBox.line").after(c.join(""));
                $(".J_beforeMailBox.line").css("display", "block")
            }
        }, error: function () {
            Fai.ing("系统异常，请稍后重试", true)
        }
    })
};
Site.copyWebSite = function (b) {
    var a = $.browser.msie;
    if (a) {
        clipboardData.setData("Text", b)
    } else {
        prompt(LS.shareTips, b)
    }
};
Site.initModuleFileList = function (a, b) {
    $("#module" + a + " .line table").mouseover(function () {
        $(this).addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_hover")
    });
    Site.initContentSplitLine(a, b)
};
Site.richMarquee = function (c) {
    var t = {
        direction: "up",
        speed: "normal",
        loop: "infinite",
        moveout: false,
        isScrolling: false
    };
    $.extend(t, c);
    if (t.speed == "normal") {
        $.extend(t, {
            speed: 28
        })
    } else {
        if (t.speed == "slow") {
            $.extend(t, {
                speed: 60
            })
        } else {
            $.extend(t, {
                speed: 13
            })
        }
    } if (!t.id) {
        return
    }
    if ($("#module" + t.id).data("restart")) {
        var j = t.id;
        Fai.top.$("#richmarqueeNewParent" + j).after($("#module" + t.id).data("content"));
        Fai.top.$("#richmarqueeNewParent" + j).remove()
    }
    if (!$("#module" + t.id).data("content")) {
        var n = Fai.top.$(".formMiddleContent" + t.id).html();
        $("#module" + t.id).data("content", n)
    }
    if ($("#module" + t.id).data("_intab") !== 0) {
        Fai.top["richMarqueeInTab" + t.id] = t
    }
    var j = t.id,
        r = $("#richMarquee" + j),
        f = r.outerHeight(true),
        d = r.outerWidth(true),
        i = (d > a()) ? d : a(),
        e = g(),
        i = e > i ? e : i,
        x = t.direction,
        u = 0,
        h = "top",
        p = t.speed,
        v = (t.loop != "infinite" || t.loop <= 0) ? 1 : t.loop,
        l = t.moveout,
        y = t.isScrolling,
        w = 20,
        s = $("<div id='richMarqueeCopy" + j + "' class='richMarquee' style='position:absolute; overflow:hidden; width:" + i + "px; height:" + r.height() + "px ' ></div>"),
        m = $("<div id='richmarqueeNewParent" + j + "' style='overflow:hidden;width:" + i * 2 + "'></div>");

    function o() {
        Fai.stopInterval("rm" + j);
        if ($("#richmarqueeNewParent" + j).length < 1) {
            m.appendTo(r.parent());
            r.appendTo(m);
            s.appendTo(m);
            if (!y && !l) {} else {
                $(r.html()).appendTo(s)
            }
        } else {
            m = $("#richmarqueeNewParent" + j);
            r = $("#richMarquee" + j);
            s = $("richMarqueeCopy" + j)
        } if (x == "up") {
            u = f;
            h = "top"
        } else {
            if (x == "down") {
                u = 0 - f;
                if (y && !l) {
                    u = 0
                }
                h = "top"
            } else {
                if (x == "left") {
                    u = f;
                    h = "left"
                } else {
                    u = 0 - i;
                    if (y && !l) {
                        u = 0
                    }
                    if (y && l) {
                        u = -i
                    }
                    h = "left"
                }
            }
        } if (l) {
            r.css(h, 0)
        } else {
            r.css(h, u)
        } if (x == "up" || x == "down") {
            r.css("left", 0)
        }
        if (x == "left" || x == "right") {
            r.css("top", 0)
        }
        $("#richmarqueeNewParent" + j).mouseover(function () {
            Fai.stopInterval("rm" + j)
        }).mouseout(function () {
            if (v == "infinite" || v > 0) {
                Fai.startInterval("rm" + j)
            }
        });
        b();
        k(x)
    }

    function a() {
        var z = r.find("img");
        if (z.length > 0) {
            var B = z[0].width;
            for (var A = 0; A < z.length; A++) {
                if (B < z[A].width) {
                    B = z[A].width
                }
            }
            return B
        }
        return 0
    }

    function g() {
        var E = r.children(".richContent"),
            D = E.children(),
            B = D.length,
            A = 0,
            z = 0,
            C;
        for (C = B - 1; C >= 0; C--) {
            z = D.eq(C).outerWidth();
            if (z > A) {
                A = z
            }
        }
        return A
    }

    function b() {
        var z = r.find("img");
        $(z).load(function () {
            var A = r.height();
            if (f != A) {
                f = A;
                k(x)
            }
        })
    }

    function k(z) {
        if (z == "left" || z == "right") {
            m.css("position", "relative");
            m.css("width", i);
            s.css("top", 0);
            if (f != 0) {
                m.css("height", f)
            }
            if (z == "left") {
                s.css("margin-left", w);
                if (y && !l) {
                    r.css("left", i);
                    s.css("left", i * 2)
                }
                if (y && l) {
                    s.css("left", i)
                }
                if (!y && !l) {
                    r.css("left", d);
                    s.css("left", i + d)
                }
                if (!y && l) {
                    s.css("left", i + d)
                }
            } else {
                s.css("left", 0);
                r.css("margin-left", w);
                r.css("width", (i) + "px");
                if (y && !l) {
                    r.css("padding-left", i);
                    r.css("padding-right", i);
                    m.scrollLeft(i * 2 + w)
                }
                if (y && l) {
                    r.css("padding-left", i);
                    m.scrollLeft(i * 2)
                }
                if (!y && !l) {
                    r.css("padding-right", i + d);
                    r.css("padding-left", i + d);
                    m.scrollLeft(i + d + w)
                }
                if (!y && l) {
                    r.css("padding-right", i + d);
                    r.css("padding-left", i + d);
                    m.scrollLeft(i + d + w)
                }
            }
        }
        if (z == "up" || z == "down") {
            m.css("position", "relative");
            if (f != 0) {
                m.css("height", f)
            }
            m.css("width", i);
            s.css("left", 0);
            s.css("height", f);
            r.css("width", i);
            if (z == "up") {
                s.css("top", f * 2);
                s.css("margin-top", w);
                if (y && !l) {
                    m.scrollTop(0)
                }
                if (y && l) {
                    s.css("top", f);
                    m.scrollTop(0)
                }
                if (!y && !l) {
                    m.scrollTop(0)
                }
                if (!y && l) {
                    m.scrollTop(0)
                }
            } else {
                r.css("height", f);
                s.css("top", 0);
                r.css("margin-top", w);
                if (y && !l) {
                    r.css("padding-top", f);
                    r.css("padding-bottom", f);
                    m.scrollTop(f * 2 + w)
                }
                if (y && l) {
                    r.css("padding-top", f);
                    m.scrollTop(f * 2)
                }
                if (!y && !l) {
                    r.css("padding-top", f * 2);
                    r.css("padding-bottom", f * 2);
                    m.scrollTop(f * 2 + w)
                }
                if (!y && l) {
                    r.css("padding-top", f * 2);
                    r.css("padding-bottom", f * 2);
                    m.scrollTop(f * 2 + w)
                }
            }
        }
    }

    function q() {
        if (x == "left") {
            var z = m.scrollLeft();
            z++;
            if (y && !l) {
                if (z == i * 2 + w) {
                    m.scrollLeft(i)
                } else {
                    m.scrollLeft(z)
                }
            }
            if (y && l) {
                if (z == i + w) {
                    m.scrollLeft(0)
                } else {
                    m.scrollLeft(z)
                }
            }
            if (!y && !l) {
                if (z == (i + d) + w) {
                    m.scrollLeft(0)
                } else {
                    m.scrollLeft(z)
                }
            }
            if (!y && l) {
                if (z == i + d + w) {
                    m.scrollLeft(0)
                } else {
                    m.scrollLeft(z)
                }
            }
        } else {
            if (x == "right") {
                var z = m.scrollLeft();
                z--;
                if (y && !l) {
                    if (z == 0) {
                        m.scrollLeft(i + w)
                    } else {
                        m.scrollLeft(z)
                    }
                }
                if (y && l) {
                    if (z == 0) {
                        m.scrollLeft(i + w)
                    } else {
                        m.scrollLeft(z)
                    }
                }
                if (!y && !l) {
                    if (z == 0) {
                        m.scrollLeft(i + d + w)
                    } else {
                        m.scrollLeft(z)
                    }
                }
                if (!y && l) {
                    if (z == 0) {
                        m.scrollLeft(i + d + w)
                    } else {
                        m.scrollLeft(z)
                    }
                }
            } else {
                if (x == "up") {
                    var z = m.scrollTop();
                    z++;
                    if (y && !l) {
                        if (z == m.height() * 2 + w) {
                            m.scrollTop(f)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                    if (y && l) {
                        if (z == m.height() + w) {
                            m.scrollTop(0)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                    if (!y && !l) {
                        if (z == m.height() * 2) {
                            m.scrollTop(0)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                    if (!y && l) {
                        if (z == m.height() * 2 + w) {
                            m.scrollTop(0)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                } else {
                    var z = m.scrollTop();
                    z--;
                    if (y && !l) {
                        if (z == 0) {
                            m.scrollTop(f + w)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                    if (y && l) {
                        if (z == 0) {
                            m.scrollTop(f + w)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                    if (!y && !l) {
                        if (z == 0) {
                            m.scrollTop(f * 2 + w)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                    if (!y && l) {
                        if (z == 0) {
                            m.scrollTop(f * 2 + w)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                }
            }
        }
    }
    o();
    Fai.stopInterval("rm" + j);
    Fai.addInterval("rm" + j, q, p);
    Fai.startInterval("rm" + j);
    if (!$("#module" + t.id).data("first1")) {
        $("#module" + t.id).data("first1", true);
        $("#module" + t.id).data("options", t)
    }
    Site.restartRichMarquee(t)
};
Site.restartRichMarquee = function (a) {
    if (!a) {
        return
    }
    var b = $("#module" + a.id);
    if (!b.data("first2")) {
        b.data("first2", true);
        if (a.speed == 28) {
            a.speed = "normal"
        } else {
            if (a.speed == 60) {
                a.speed = "slow"
            } else {
                a.speed = "fast"
            }
        }
        b.on("Fai_onModuleSizeChange", function () {
            Fai.stopInterval("rm" + a.id);
            b.data("restart", true);
            Site.richMarquee(a)
        });
        b.on("Fai_onModuleLayoutChange", function () {
            Fai.stopInterval("rm" + a.id);
            b.data("restart", true);
            Site.richMarquee(a)
        })
    }
};
Site.productScroll = function (k) {
    var f = {
        pauseDuration: 3000,
        showDuration: 600,
        scrollMode: "up"
    };
    var c = $.extend({}, f, k);
    var d = $("#module" + c.moduleId),
        b = d.find(".J_productTextList"),
        g = b.parent(),
        j = b.find(".productTextListTable"),
        h = j.outerHeight(),
        a = "proScroll" + c.moduleId;
    if (j.length < 2) {
        return
    }
    b.css({
        position: "relative",
        height: b.height() + "px"
    });
    g.css({
        overflow: "hidden"
    });
    b.mouseover(function () {
        Fai.stopInterval(a)
    }).mouseout(function () {
        Fai.startInterval(a)
    });

    function i() {
        function l() {
            if (c.scrollMode == "up") {
                b.animate({
                    top: "-=" + h
                }, c.showDuration, function () {
                    var m = b.find(".productTextListTable:first");
                    m.appendTo(b).end().hide().fadeIn(400);
                    b.css({
                        top: 0
                    });
                    e()
                })
            } else {
                b.animate({
                    top: "+=" + h
                }, c.showDuration, function () {
                    var m = b.find(".productTextListTable:last");
                    m.insertBefore(b.find(".productTextListTable:first")).end().hide().fadeIn(400);
                    b.css({
                        top: 0
                    });
                    e()
                })
            }
        }
        Fai.addTimeout(a, l, c.pauseDuration);
        Fai.startInterval(a)
    }

    function e() {
        i()
    }
    i()
};
Site.loadProductMarquee = function (w, I, D, u) {
    var f = Fai.top["Product" + w].ieOpt,
        h = Fai.top["Product" + w].tgOpt,
        m = Fai.top["Product" + w].paramLayoutType,
        p = Fai.top["Product" + w].callbackArgs;
    var c = Fai.top.$("#module" + w);
    if (Fai.isNull(c)) {
        return
    }
    c.find(".demo0>div").each(function () {
        if ($(this).attr("cloneDiv")) {
            $(this).remove()
        }
    });
    var t = c.find(".productMarqueeForm");
    var x = 0;
    if (Fai.isIE6() || Fai.isIE7()) {
        t.each(function () {
            var J = $(this).find(".imgDiv").width();
            $(this).css({
                width: +J + "px"
            })
        })
    }
    if (!D && m != 6) {
        if (t.length >= 1) {
            var i = t.first().find(".imgDiv");
            var F = i.width();
            var y = i.height();
            t.each(function () {
                var K = $(this).attr("faiWidth");
                var J = $(this).attr("faiHeight");
                if (Fai.isNull(J)) {
                    return
                }
                var L = Fai.Img.calcSize(K, J, F, y, Fai.Img.MODE_SCALE_FILL);
                if (L.height > x) {
                    x = L.height
                }
            })
        }
    }
    if (f.effType >= 4 && f.effType < 6) {
        if (m == 6) {
            Site.clearImageEffectContent_product(w, "sixth_ProductPanel")
        }
        if (m == 8) {
            Site.clearImageEffectContent_product(w, "eighth_ProductPanel")
        }
        Site.clearImageEffectContent_product(w, "propDiv")
    }
    var e = 0;
    var g = 0;
    var C = 0;
    var E = 0;
    var o = 0;
    var H = Site.getFormMiddleContentHeight(c, w);
    t.each(function () {
        var L = $(this);
        var N = c.find(".productMarqueeForms").attr("_bordertype");
        var M = parseInt(c.find(".productMarqueeForms").attr("_borderwidth"));
        var O = c.find(".productMarqueeForms").attr("_bgtype");
        var Z = L.attr("faiHeight");
        if (Fai.isNull(Z)) {
            return
        }
        var U = L.attr("faiWidth");
        var P = L.find(".imgDiv");
        var Y = P.width();
        if (D || m == 6) {
            x = P.height()
        }
        var K = {
            width: Y,
            height: x
        };
        if (I) {
            if (D) {
                K = Fai.Img.calcSize(U, Z, Y, x, Fai.Img.MODE_SCALE_FILL)
            } else {
                K = Fai.Img.calcSize(U, Z, Y, x, Fai.Img.MODE_SCALE_DEFLATE_HEIGHT)
            }
        }
        var J = P.width();
        if (J < K.width) {
            J = K.width
        }
        var aa = P.find("img");
        aa.css("width", K.width + "px");
        aa.css("height", K.height + "px");
        if (Fai.top._manageMode) {
            aa.data("realWidth", K.width);
            aa.data("realHeight", K.height)
        }
        if (L.find(".propWordWrapDiv").length > 0) {
            if (m == 6) {
                L.find(".propWordWrapDiv").width(J * 0.8)
            } else {
                L.find(".propWordWrapDiv").width(J)
            }
            L.find(".propWordWrapDiv").height("auto")
        } else {
            if (L.find(".first_ProductName,.second_ProductName,.third_ProductName,.fourth_ProductName,.fifth_ProductName,.sixth_ProductName").length > 0) {
                if (m == 6) {
                    L.find(".productName").width(J * 0.8)
                } else {
                    L.find(".productName").width(J)
                }
                L.find(".productName").height("auto")
            } else {
                var T = 0;
                L.find(".productName > a").each(function () {
                    if ($(this).width() > T) {
                        T = $(this).width()
                    }
                });
                if (T > J) {
                    J = T
                }
            }
        }
        var X = L.find(".propDiv");
        if (m == 6) {
            X.css("width", J * 0.8 + "px");
            L.find(".sixth_ProductName").css("width", "80%")
        } else {
            X.css("width", J + "px")
        } if (P.width() != J) {
            P.css("width", J + "px")
        }
        if (P.height() != x) {
            P.css("height", x + "px");
            if ($.browser.msie && $.browser.version == 6) {
                P.addClass("wocaie6").removeClass("wocaie6")
            }
        }
        if ($(".propWordWrapDiv").length > 0) {
            Site.unifiedAttrVal(c, ".propWordWrapDiv", "height")
        }
        if (m == 6) {
            L.find(".sixth_ProductPanel").css({
                top: "-" + (L.find(".sixth_ProductPanel").height() - 12) + "px",
                "max-height": x / 2 + 10
            })
        }
        if (L.outerHeight() > g && (u == 0 || u == 1)) {
            g = L.outerHeight()
        }
        if (H > g && (u == 2 || u == 3)) {
            g = H
        }
        var W = L.outerWidth(true);
        var V = L.outerHeight(true);
        if (W > C) {
            C = W
        }
        e += W;
        var R = $(this).find(".eighth_ProductPanel");
        var Q = R.find(".eighth_Pricepanel");
        var S = R.find(".fk_rightPiecePanel");
        if (!!R.length) {
            if (N == 1) {
                Q.css("left", "4px");
                S.css("right", "16px")
            } else {
                if (N == 2) {
                    Q.css("left", (4 + M) + "px");
                    S.css("right", (16 + M) + "px");
                    R.css("bottom", (84 + M) + "px")
                }
            }
        }
    });
    if (t.length >= 1) {
        t.each(function () {
            if ($(this).find(".fifth_mallBuy").length > 0) {
                var J = parseInt($(this).find(".fifth_mallBuy").width()) - 1;
                $(this).find(".fifth_mallBuy").css({
                    "line-height": J + "px"
                })
            }
        })
    }
    tmpTotalWidth = e;
    var n = c.find(".demo");
    var B = c.find(".demo0");
    E = B.height();
    if (g > 0) {
        if (m == 6) {
            n.css("height", (g + 50) + "px")
        } else {
            n.css("height", g + "px")
        }
    }
    if (u == 0 || u == 1) {
        B.css("width", e + "px");
        if (t.length == 0) {
            return
        }
        var a = n.width(),
            A = B.width();
        if (A <= a) {
            jzUtils.run({
                name: "ImageEffect.FUNC.BASIC.Init",
                callMethod: true
            }, {
                moduleId: w,
                imgEffOption: f,
                tagetOption: h,
                callback: Site.createImageEffectContent_product,
                callbackArgs: p
            });
            return
        }
    }
    if (u == 2 || u == 3) {
        var g = n.height(),
            j = B.height();
        if (j <= g) {
            jzUtils.run({
                name: "ImageEffect.FUNC.BASIC.Init",
                callMethod: true
            }, {
                moduleId: w,
                imgEffOption: f,
                tagetOption: h,
                callback: Site.createImageEffectContent_product,
                callbackArgs: p
            });
            return
        }
    }
    var l = t.first().outerWidth(true);
    if (l == 0) {
        return
    }
    var G = Fai.top.productMarqueelist;
    var s = 0,
        d = t.length - 1;
    t.each(function (K, M) {
        if (s > a) {
            return false
        }
        var J = $(M).clone().attr("cloneDiv", "true"),
            N = J.children("div.imgDiv").attr("id");
        J.children("div.imgDiv").attr("id", N + "_clone");
        B.append(J);
        s += J.outerWidth(true);
        if (0 === K && (u == 2 || u == 3)) {
            $(M).css("clear", "both");
            J.css("clear", "both")
        }
        if (Fai.isIE6() || Fai.isIE7()) {
            if (K === d) {
                $(t[K]).after('<div style="clear:both;"></div>');
                J.after('<div style="clear:both;"></div>')
            }
        }
        if (typeof G != "undefined") {
            for (var K = 0; K < G.length; K++) {
                var L = G[K];
                if (L.cloneflag && L.cloneflag == N) {
                    $("#" + L.cloneflag + "_clone").mouseover(function () {
                        var O = Site.addEditLayer(this, L, 6);
                        if (!O) {
                            return
                        }
                        O.mouseover(function () {
                            Fai.stopInterval("marquee" + w)
                        }).mouseout(function () {
                            Fai.startInterval("marquee" + w)
                        })
                    }).mouseleave(function () {
                        Site.removeEditLayer(this)
                    });
                    break
                }
            }
        }
    });
    var r = e + s;
    if (u == 0 || u == 1) {
        B.css("width", r + "px")
    }

    function q() {
        var J = n.scrollLeft();
        J++;
        n.scrollLeft(J);
        if (J == e) {
            n.scrollLeft(0)
        }
    }

    function b() {
        e--;
        n.scrollLeft(e);
        if (e == 0) {
            n.scrollLeft(tmpTotalWidth);
            e = tmpTotalWidth
        }
    }

    function z() {
        var J = n.scrollTop();
        J--;
        n.scrollTop(J);
        if (J == 0) {
            n.scrollTop(E)
        }
    }

    function v() {
        var J = n.scrollTop();
        J++;
        n.scrollTop(J);
        if (J == E) {
            n.scrollTop(0)
        }
    }
    if (u == 0) {
        n.scrollLeft(2 * e);
        Fai.addInterval("marquee" + w, b, 35)
    } else {
        if (u == 1) {
            Fai.addInterval("marquee" + w, q, 35)
        } else {
            if (u == 2) {
                n.scrollTop(2 * E);
                Fai.addInterval("marquee" + w, z, 35)
            } else {
                if (u == 3) {
                    Fai.addInterval("marquee" + w, v, 35)
                }
            }
        }
    }
    n.mouseover(function () {
        Fai.stopInterval("marquee" + w)
    }).mouseleave(function () {
        Fai.startInterval("marquee" + w)
    });
    setTimeout(function () {
        Fai.startInterval("marquee" + w)
    }, 100);
    if (!c.data("first1")) {
        c.data("first1", true);
        c.data("options", {
            id: w,
            scale: I,
            fixHeight: D,
            proMarqueeDirection: u,
            ieOpt: f,
            tgOpt: h,
            callback: Site.createImageEffectContent_product,
            callbackArgs: p
        })
    }
    if (c.data("first2") && Fai.top._manageMode) {
        var k = c.data("productOptions");
        Site.initModuleProductListItemManage(k)
    }
    jzUtils.run({
        name: "ImageEffect.FUNC.BASIC.Init",
        callMethod: true
    }, {
        moduleId: w,
        imgEffOption: f,
        tagetOption: h,
        callback: Site.createImageEffectContent_product,
        callbackArgs: p
    });
    Site.restartProductMarquee(c)
};
Site.restartProductMarquee = function (a) {
    if (!a.data("first2")) {
        a.data("first2", true);
        a.on("Fai_onModuleSizeChange", function () {
            var b = a.data("options");
            Fai.stopInterval("marquee" + b.id);
            Site.loadProductMarquee(b.id, b.scale, b.fixHeight, b.proMarqueeDirection, b.ieOpt, b.tgOpt, b.callback, b.callbackArgs)
        });
        a.on("Fai_onModuleLayoutChange", function () {
            var b = a.data("options");
            Fai.stopInterval("marquee" + b.id);
            Site.loadProductMarquee(b.id, b.scale, b.fixHeight, b.proMarqueeDirection, b.ieOpt, b.tgOpt, b.callback, b.callbackArgs)
        })
    }
};
Site.initModuleProductFilter = function (c, b) {
    $("#module" + c + " .productFilterValue").mouseover(function () {
        $(this).addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_hover")
    });
    if (b) {
        var a = $("#module" + c).find(".formMiddle" + c).find("table.productFilterContent").find(".productFilterContentCenter");
        var d = a.find(".productFilterName");
        $.each(d, function (e, g) {
            var f = $(g);
            f.css("cursor", "pointer");
            f.click(function () {
                var h = $(this).next();
                if (h.is(":visible")) {
                    f.removeClass("productFilterUnfold").addClass("productFilterFold");
                    h.hide()
                } else {
                    f.removeClass("productFilterFold").addClass("productFilterUnfold");
                    h.show()
                }
            })
        })
    }
};
Site.initModuleProductCatalog = function (c, a) {
    $("#module" + c + " .productFilterValue").mouseover(function () {
        $(this).addClass("g_tableHover");
        $(this).find(".productFilterValueCenter").addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_tableHover");
        $(this).find(".productFilterValueCenter").removeClass("g_hover")
    });
    if (a) {
        var d = $("#module" + c).find(".formMiddle" + c).find("table .parentClickedTd");
        var b = $("#module" + c).find(".formMiddle" + c).find("table .parentCatalog a");
        $.each(d, function (e, g) {
            var f = $(g);
            f.css("cursor", "pointer");
            f.click(function () {
                var i = parseInt($(this).attr("prodId"));
                var h = $("#prodDiv" + i);
                if (h.is(":visible")) {
                    $(this).removeClass("productFilterUnfold").addClass("productFilterFold");
                    h.hide()
                } else {
                    $(this).removeClass("productFilterFold").addClass("productFilterUnfold");
                    h.show()
                }
            })
        });
        $.each(b, function (e, g) {
            var f = $(g);
            f.click(function (l) {
                l.preventDefault();
                var i = parseInt($(this).attr("prodId"));
                var h = $("#prodDiv" + i);
                var k = $("#provId" + i);
                var j = $(this).parent().find(".parentClickedTd");
                if (h.is(":visible")) {
                    h.hide();
                    k.removeClass("productFilterUnfold").addClass("productFilterFold")
                } else {
                    k.removeClass("productFilterFold").addClass("productFilterUnfold");
                    h.show()
                }
            })
        })
    }
};
Site.loadProductTextList = function (b) {
    var a = $("#module" + b);
    if (Fai.isNull(a)) {
        return
    }
    if (!_manageMode) {
        a.find(".productTextListTable").on("mouseenter.manage", function () {
            $(this).addClass("g_hover")
        }).on("mouseleave.manage", function () {
            $(this).removeClass("g_hover")
        })
    }
};
Site.loadProductTile = function (b, h, i, k, j, g) {
    var f = $("#module" + b);
    if (Fai.isNull(f)) {
        return
    }
    var m = 0;
    var e = f.find(".productList").attr("_bordertype");
    var a = parseInt(f.find(".productList").attr("_borderwidth"));
    var l = f.find(".productList").attr("_bgtype");
    if (!i && g != 6 && g != 8) {
        f.find(".productTileForm").each(function () {
            var p = $(this).attr("faiWidth");
            var n = $(this).attr("faiHeight");
            if (Fai.isNull(n)) {
                return
            }
            var u = $(this).find(".imgDiv");
            var t = u.width();
            var q = u.height();
            var r = $(this).attr("faiWidthOr");
            var o = $(this).attr("faiHeightOr");
            var s = Fai.Img.calcSize(r, o, t, q, Fai.Img.MODE_SCALE_FILL);
            if (s.height > m) {
                m = s.height
            }
        })
    }
    f.find(".productTileForm").each(function () {
        var x = $(this).attr("faiHeight");
        if (Fai.isNull(x)) {
            return
        }
        var u = $(this).attr("faiWidth");
        var p = $(this).attr("faiWidthOr");
        var v = $(this).attr("faiHeightOr");
        var z = $(this).find(".imgDiv");
        var y = z.width();
        var n = $(this).find(".eighth_ProductPanel");
        var w = n.find(".eighth_Pricepanel");
        var o = n.find(".fk_rightPiecePanel");
        if (i || g == 6 || g == 8) {
            m = z.height()
        }
        var t = {
            width: y,
            height: m
        };
        if (h) {
            t = Fai.Img.calcSize(p, v, y, m, Fai.Img.MODE_SCALE_FILL)
        }
        var q = z.find("img");
        q.css("width", t.width + "px");
        q.css("height", t.height + "px");
        z.css("height", m + "px");
        if (Fai.top._manageMode) {
            q.data("realWidth", t.width);
            q.data("realHeight", t.height)
        }
        if (g == 4 || g == 5 || g == 9) {
            var s = $(this).find(".fifth_mallBuy");
            var r = s.width();
            s.css("line-height", r + "px")
        }
        if (g == 6) {
            $(this).css({
                "margin-bottom": "54px",
                overflow: "visible"
            })
        }
        if (!!n.length) {
            if (e == 0) {
                if (l == 1) {
                    w.css("left", "15px");
                    o.css("right", "33px");
                    n.css("bottom", "36px")
                }
            } else {
                if (e == 1) {
                    w.css("left", "14px");
                    o.css("right", "34px");
                    n.css("bottom", "36px")
                } else {
                    if (e == 2) {
                        $(this).width(z.outerWidth());
                        $(this).height(z.outerHeight());
                        if (l == 1) {
                            w.css("left", (14 + a) + "px");
                            o.css("right", (36 + a) + "px");
                            n.css("bottom", (36 + a) + "px")
                        } else {
                            w.css("left", (4 + a) + "px");
                            o.css("right", (26 + a) + "px");
                            n.css("bottom", (25 + a) + "px")
                        }
                    }
                }
            }
        }
        if (g < 6) {
            $(this).width(z.outerWidth(true))
        }
    });
    if (j >= 4 && j < 6) {
        Site.clearImageEffectContent_product(b, "propList");
        return
    }
    if (k == -1 && f.find(".productNameWordWrap").length == 0) {
        Site.unifiedAttrVal(f, ".productTileForm", "height")
    }
    if (f.find(".productNameWordWrap").length > 0) {
        f.find(".productNameWordWrap").attr("paramLayoutType", g);
        if (g == 3) {
            var d = f.find(".productNameWordWrap");
            var c = 0;
            d.each(function () {
                var n = $(this).outerHeight();
                n = parseInt(n);
                if (n > c) {
                    c = n
                }
            });
            d.each(function () {
                $(this).css("height", c + "px")
            })
        } else {
            Site.unifiedAttrVal(f, ".productNameWordWrap", "height")
        }
        Site.unifiedAttrVal(f, ".productTileForm", "height")
    }
};
Site.initProductRestrict = function (a, h, f, e, c) {
    if (h) {
        var g = 0;
        if (c.count != null) {
            g = c.count
        }
        var i = 0;
        i = e - g;
        if (Fai.fkEval(i) < 0) {
            i = -1
        }
        var b = 1,
            d = -1;
        if (f > 1 && e != 0) {
            $("#limitAmountDiv").text("( " + LS.minAmount + " : " + f + " ; " + LS.maxAmount + " : " + i + " )");
            b = f;
            d = i
        } else {
            if (f == 1 && e != 0) {
                $("#limitAmountDiv").text("( " + LS.maxAmount + " : " + i + " )");
                d = i
            } else {
                if (f > 1 && e == 0) {
                    $("#limitAmountDiv").text("( " + LS.minAmount + " : " + f + " )");
                    b = f
                }
            }
        }
        $("#cartbuyCount" + a).unbind("change");
        $("#cartbuyCount" + a).val(b);
        $("#cartbuyCount" + a).change(function () {
            var j = $("#cartbuyCount" + a).val();
            var k = 1;
            if (Fai.isInteger(j)) {
                k = parseInt(j)
            }
            if (k < b || k == b) {
                k = b;
                $("#buyCountDes" + a).addClass("disableMallJian");
                $("#buyCountInc" + a).removeClass("disableMallJia");
                if ((b > d || b == d) && d != -1) {
                    $("#buyCountInc" + a).addClass("disableMallJia")
                }
            } else {
                if (d != -1 && (k > d || k == d)) {
                    k = d;
                    $("#buyCountInc" + a).addClass("disableMallJia");
                    $("#buyCountDes" + a).removeClass("disableMallJian")
                } else {
                    if (k > 9999998) {
                        k = 9999999;
                        $("#buyCountDes" + a).removeClass("disableMallJian");
                        $("#buyCountInc" + a).addClass("disableMallJia")
                    } else {
                        $("#buyCountDes" + a).removeClass("disableMallJian");
                        $("#buyCountInc" + a).removeClass("disableMallJia")
                    }
                }
            }
            $("#cartbuyCount" + a).val(k)
        });
        $("#cartbuyCount" + a).change();
        $("#buyCountDes" + a).click(function () {
            var j = $("#cartbuyCount" + a).val();
            var k = 1;
            if (Fai.isInteger(j)) {
                k = parseInt(j)
            }
            if (k < b + 1) {
                $("#cartbuyCount" + a).val(b);
                $("#buyCountDes" + a).addClass("disableMallJian")
            } else {
                $("#buyCountInc" + a).removeClass("disableMallJia")
            }
        });
        $("#buyCountInc" + a).click(function () {
            var j = $("#cartbuyCount" + a).val();
            var k = 1;
            if (Fai.isInteger(j)) {
                k = parseInt(j)
            }
            if (k > d - 1 && d != -1) {
                if (d > b) {
                    $("#cartbuyCount" + a).val(d);
                    $("#buyCountInc" + a).addClass("disableMallJia")
                } else {
                    $("#cartbuyCount" + a).val(b);
                    $("#buyCountInc" + a).addClass("disableMallJia")
                }
            } else {
                $("#buyCountDes" + a).removeClass("disableMallJian")
            }
        })
    }
};
Site.wipeOffRunOne = true;
Site.initProductOptions = function (r, k, z, c, t, n, C, o) {
    var b;
    if (r === "PdSlide") {
        b = $("#fk-productSlideContent")
    } else {
        b = $("#module" + r)
    } if (Fai.isNull(b)) {
        return
    }
    var v = b.find(".optionItemWrap");
    var s = [];
    var m = b.find("#realMallAmount").html();
    var p = b.find("#mallAmount").html();
    var d = b.find("#mallWeight").html();
    if (!z) {
        $.each(k, function (j, D) {
            if (typeof D.oAmount != "undefined") {
                delete D.oAmount
            }
        })
    }
    if (p <= 0) {
        B(v.find(".J-item"))
    } else {
        $.each(k, function (j, E) {
            if (E.oAmount <= 0 && v.length <= 1) {
                var D = v.find(".J-item").get(j);
                B(D)
            } else {
                if (E.oAmount <= 0 && v.length > 1) {
                    s.push(E.t2)
                }
            }
        })
    }
    v.find(".J-item").hover(function () {
        if ($(this).attr("isEmptyAmount") == "1") {
            return
        }
        $(this).addClass("g_borderSelected fk-mainBorderColor fk-mainFontColor")
    }, function () {
        if ($(this).attr("isEmptyAmount") == "1") {
            return
        }
        if (!$(this).hasClass("optionItemHover")) {
            $(this).removeClass("g_borderSelected fk-mainBorderColor fk-mainFontColor")
        }
    });
    v.find(".optionItem img").hover(function () {
        if ($(this).attr("isEmptyAmount") == "1") {
            return
        }
        var D = $(this).parent();
        if (D.find("img").length === 0) {
            return false
        }
        var i = D.find(".J-img-tip");
        if (i.length > 0) {
            i.stop(true, true).fadeIn();
            return false
        }
        var j = D.find("span").text();
        i = ["<div class='img-tip J-img-tip'>", "<div>", j, "</div>", "<div class='tip-ico J-ico'></div>", "</div>"];
        i = $(i.join(""));
        D.append(i);
        i.find(".J-ico").css("left", (i.outerWidth() - 11) / 2);
        i.css("left", -((i.outerWidth() - 38) / 2));
        i.fadeIn()
    }, function () {
        if ($(this).attr("isEmptyAmount") == "1") {
            return
        }
        $(this).parent().find(".J-img-tip").fadeOut()
    });
    var g = $("#cartbuyCount" + r).val();
    var f = $("#imgDiv" + r);
    var l = "<div class='J-img-tri img-selected g_borderSelected'></div><div class='J-img-tri op-selected-ico'></div>";
    var A = [],
        e = [],
        u = [],
        a = true,
        x = [];
    if (C != "null") {
        A = o.split("_");
        e = C.split("_");
        for (var y = 0; y < e.length; y++) {
            for (var w = 0; w < A.length; w++) {
                if (e[y] == A[w]) {
                    x.push(w);
                    a = false
                }
            }
            if (a) {
                u.push(y)
            }
        }
    }
    v.find(".optionItem").bind("click", function () {
        if ($(this).find(".J-item").attr("isEmptyAmount") == "1") {
            return
        }
        var ae = $(this),
            af = ae.siblings(),
            W = ae.find(".J-item");
        if (W.hasClass("J-isSelected")) {
            W.removeClass("optionItemHover g_borderSelected fk-mainBorderColor fk-mainFontColor J-isSelected");
            W.parent().find(".J-img-tri").remove();
            b.find("#realMallAmount").html(m);
            b.find("#mallAmount").html(p);
            b.find("#mallWeight").html(d);
            if (t) {
                $("#limitAmountDiv").text("");
                $("#buyCountInc" + r).removeClass("disableMallJia");
                $("#buyCountDes" + r).removeClass("disableMallJian");
                $("#buyCountInc" + r).unbind("click");
                $("#buyCountDes" + r).unbind("click")
            }
            v.find(".optionItem").show();
            v.find(".J-item.g_borderSelected :first").parent().click().click()
        } else {
            W.addClass("optionItemHover g_borderSelected fk-mainBorderColor fk-mainFontColor J-isSelected");
            af.find(".J-item").removeClass("optionItemHover g_borderSelected fk-mainBorderColor fk-mainFontColor J-isSelected");
            af.find(".J-img-tri").remove();
            if (W.hasClass("J-item-img")) {
                ae.append(l)
            }
        }
        var M = W.attr("_fk-org");
        if (f.length > 0 && M) {
            f.find("img").attr("src", M);
            var I = f.find(".cloud-zoom");
            if (I.length > 0) {
                f.attr("faihref", M);
                I.attr("href", M).data("zoom").destroy();
                I.CloudZoom({
                    imageWidth: parseInt(W.attr("faiwidth")),
                    imageHeight: parseInt(W.attr("faiheight"))
                })
            }
        }
        var O = v.length;
        var R = v.find(".J-item.g_borderSelected");
        if (O == R.length) {
            var H = "",
                Y, J, D, L, P;
            $.each(R, function (j, aj) {
                H += $(aj).attr("data") + "_"
            });
            $.each(k, function (an, aq) {
                var ao = aq.t2;
                if (C != "null") {
                    var ak = aq.t2.split("_"),
                        ap = [],
                        am = "";
                    for (var al = 0; al < x.length; al++) {
                        for (var aj = 0; aj < A.length; aj++) {
                            if (aj == x[al]) {
                                ap[aj] = ak[al]
                            }
                        }
                    }
                    for (var al = 0; al < ap.length; al++) {
                        if (ap[al] != null) {
                            am += ap[al] + "_"
                        }
                    }
                    ao = am.substring(0, am.length - 1)
                }
                if ((ao + "_") == H) {
                    Y = aq.oPrice;
                    J = aq.oAmount;
                    D = aq.minAmount;
                    L = aq.maxAmount;
                    P = aq.w
                }
                if (C != "null" && x.length != e.length) {
                    J = 0
                }
            });
            if (t) {
                $("#limitAmountDiv").text("");
                var E = 0;
                var ai = n.optionsCount;
                if (ai != null && ai.d != null) {
                    for (var ac = 0; ac < ai.d.length; ac++) {
                        if ((ai.d[ac].t + "_") == H) {
                            E = ai.d[ac].c
                        }
                    }
                }
                var K = 0;
                K = L - E;
                if (Fai.fkEval(K) < 0) {
                    K = -1
                }
                var X = 1;
                var ab = -1;
                if (D > 1 && L != 0) {
                    $("#limitAmountDiv").text("( " + LS.minAmount + " : " + D + " ; " + LS.maxAmount + " : " + K + " )");
                    X = D;
                    ab = K
                } else {
                    if (D == 1 && L != 0) {
                        $("#limitAmountDiv").text("( " + LS.maxAmount + " : " + K + " )");
                        ab = K
                    } else {
                        if (D > 1 && L == 0) {
                            $("#limitAmountDiv").text("( " + LS.minAmount + " : " + D + " )");
                            X = D
                        }
                    }
                }
                $("#cartbuyCount" + r).val(X);
                $("#cartbuyCount" + r).unbind("change");
                $("#cartbuyCount" + r).bind("change");
                $("#cartbuyCount" + r).change(function () {
                    var i = $("#cartbuyCount" + r).val();
                    var j = 1;
                    if (Fai.isInteger(i)) {
                        j = parseInt(i)
                    }
                    if (j < X || j == X) {
                        j = X;
                        $("#buyCountDes" + r).addClass("disableMallJian");
                        $("#buyCountInc" + r).removeClass("disableMallJia");
                        if ((X > ab || X == ab) && ab != -1) {
                            $("#buyCountInc" + r).addClass("disableMallJia")
                        }
                    } else {
                        if (ab != -1 && (j > ab || j == ab)) {
                            j = ab;
                            $("#buyCountInc" + r).addClass("disableMallJia");
                            $("#buyCountDes" + r).removeClass("disableMallJian")
                        } else {
                            if (j > 9999998) {
                                j = 9999999;
                                $("#buyCountDes" + r).removeClass("disableMallJian");
                                $("#buyCountInc" + r).addClass("disableMallJia")
                            } else {
                                $("#buyCountDes" + r).removeClass("disableMallJian");
                                $("#buyCountInc" + r).removeClass("disableMallJia")
                            }
                        }
                    }
                    $("#cartbuyCount" + r).val(j)
                });
                $("#cartbuyCount" + r).change();
                $("#buyCountDes" + r).unbind("click");
                $("#buyCountInc" + r).unbind("click");
                $("#buyCountDes" + r).click(function () {
                    var i = $("#cartbuyCount" + r).val();
                    var j = 1;
                    if (Fai.isInteger(i)) {
                        j = parseInt(i)
                    }
                    if (j < X + 1) {
                        $("#cartbuyCount" + r).val(X);
                        $("#buyCountDes" + r).addClass("disableMallJian")
                    } else {
                        $("#buyCountInc" + r).removeClass("disableMallJia")
                    }
                });
                $("#buyCountInc" + r).click(function () {
                    var i = $("#cartbuyCount" + r).val();
                    var j = 1;
                    if (Fai.isInteger(i)) {
                        j = parseInt(i)
                    }
                    if (j > ab - 1 && ab != -1) {
                        if (ab > X) {
                            $("#cartbuyCount" + r).val(ab);
                            $("#buyCountInc" + r).addClass("disableMallJia")
                        } else {
                            $("#cartbuyCount" + r).val(X);
                            $("#buyCountInc" + r).addClass("disableMallJia")
                        }
                    } else {
                        $("#buyCountDes" + r).removeClass("disableMallJian")
                    }
                })
            }
            if (z) {
                $("#mallAmount").text(J)
            }
            if (Y == null) {
                $("#realMallAmount").text(c);
                Site.onlyChangeSalePrice(c)
            } else {
                $("#realMallAmount").text(Y);
                Site.onlyChangeSalePrice(Y);
                if (Fai.isIE10()) {
                    if (Site.wipeOffRunOne) {
                        $(".pd_J .pd_propTable .propName").each(function (i, j) {
                            $(j).removeClass("propName");
                            setTimeout(function () {
                                $(j).addClass("propName")
                            }, 0)
                        })
                    }
                    Site.wipeOffRunOne = false
                }
            } if (P != null) {
                $("#mallWeight").text(P)
            }
        }
        if (O != R.length && O != 1) {
            q()
        }
        if ((O - 1) <= R.length && O != 1) {
            var V = "";
            $.each(v, function (j, aj) {
                if ($(v[j]).find(".J-item.g_borderSelected").length <= 0) {
                    V += "x_"
                } else {
                    V += $(v[j]).find(".J-item.g_borderSelected").attr("data") + "_"
                }
            });
            if (V != "") {
                V = V.substring(0, V.length - 1)
            }
            var N = "";
            $.each(v, function (j, ak) {
                var aj = $(v[j]).find(".J-item.g_borderSelected");
                if (aj.length <= 0) {
                    N = $(v[j])
                }
            });
            if (N != "") {
                var ag = N.find(".J-item");
                $.each(ag, function (j, ak) {
                    var aj = V.replace("x", $(ag[j]).attr("data"));
                    if ($.inArray(aj, s) >= 0) {
                        B(ag[j])
                    } else {
                        h(ag[j])
                    }
                })
            } else {
                $.each(v, function (j, ak) {
                    var aj = $(v[j]).find(".J-item");
                    $.each(aj, function (am, al) {
                        if ($(aj[am]).hasClass("g_borderSelected")) {
                            return
                        }
                        var i = V.split("_");
                        i[j] = $(aj[am]).attr("data");
                        var an = i.join("_");
                        if ($.inArray(an, s) >= 0) {
                            B(aj[am])
                        } else {
                            h(aj[am])
                        }
                    })
                })
            }
        }
        var ad = [],
            aa = false;
        for (var ac = 0; ac < v.length; ac++) {
            var Q = v.eq("" + ac + "");
            if (Q.find(".J-item").hasClass("g_borderSelected")) {
                ad.push(Q.find(".J-item.g_borderSelected").attr("data"))
            } else {
                break
            }
        }
        if (ad.length <= v.length && ad.length > 1) {
            var T = ad.length;
            for (var ac = 0; ac < T; ac++) {
                $.each(k, function (al, ap) {
                    var an = ap.t2;
                    if (C != "null") {
                        var aj = ap.t2.split("_"),
                            ao = [],
                            am = "";
                        for (var i = 0; i < u.length; i++) {
                            aj.splice(u[i], 1)
                        }
                        for (var i = 0; i < x.length; i++) {
                            for (var al = 0; al < A.length; al++) {
                                if (al == x[i]) {
                                    ao[al] = aj[i]
                                }
                            }
                        }
                        for (var i = 0; i < ao.length; i++) {
                            if (ao[i] != null) {
                                am += ao[i] + "_"
                            }
                        }
                        an = am.substring(0, am.length - 1)
                    }
                    var ak = an.split("_");
                    if (ap.flag == undefined) {
                        ap.flag = 1
                    }
                    if (ap.flag == 1 && arrHasSameBegin(ak, ad)) {
                        aa = true;
                        return false
                    }
                });
                if (!aa) {
                    var U = v.eq(ad.length - 1).find(".J-item");
                    var S = ad.pop();
                    U.each(function () {
                        if ($(this).attr("data") == S) {
                            var i = $(this).parent();
                            i.hide()
                        }
                    });
                    U.parent().find(".J-img-tri").remove();
                    U.removeClass("g_borderSelected fk-mainBorderColor fk-mainFontColor optionItemHover J-isSelected")
                } else {
                    break
                }
            }
        }
        var ah = v.index(ae.parent());
        for (var Z = ah; Z < ad.length; Z++) {
            var F = ad.slice(0, Z + 1);
            aa = false;
            for (var ac = F.length; ac < v.length; ac++) {
                var G = v.eq("" + ac + "");
                G.find(".optionItem").each(function () {
                    var i = $(this).find(".J-item").attr("data");
                    aa = false;
                    $.each(k, function (am, aj) {
                        var an = aj.t2;
                        if (C != "null") {
                            var aq = aj.t2.split("_"),
                                ar = [],
                                an = "",
                                ap = "";
                            for (var ak = 0; ak < u.length; ak++) {
                                aq.splice(u[ak], 1)
                            }
                            for (var ak = 0; ak < x.length; ak++) {
                                for (var ao = 0; ao < A.length; ao++) {
                                    if (ao == x[ak]) {
                                        ar[ao] = aq[ak]
                                    }
                                }
                            }
                            for (var ak = 0; ak < ar.length; ak++) {
                                if (ar[ak] != null) {
                                    ap += ar[ak] + "_"
                                }
                            }
                            an = ap.substring(0, ap.length - 1)
                        }
                        var al = an.split("_");
                        if (aj.flag == undefined) {
                            aj.flag = 1
                        }
                        if (i == al[ac] && aj.flag == 1 && arrHasSameBegin(al, F)) {
                            aa = true;
                            return false
                        }
                    });
                    if (!aa) {
                        $(this).hide()
                    } else {
                        $(this).show()
                    }
                })
            }
        }
    });

    function B(i) {
        $(i).css({
            "border-style": "dashed",
            color: "#CDCDCD",
            cursor: "not-allowed"
        });
        $(i).attr("isEmptyAmount", "1")
    }

    function h(i) {
        $(i).css({
            "border-style": "",
            color: "",
            cursor: ""
        });
        $(i).attr("isEmptyAmount", "")
    }

    function q() {
        $(".optionItemWrap .J-item").css({
            "border-style": "",
            color: "",
            cursor: ""
        });
        $(".optionItemWrap .J-item").attr("isEmptyAmount", "")
    }
};

function arrHasSameBegin(b, d) {
    var a = true;
    for (var c = 0; c < d.length; c++) {
        if (d[c] != b[c]) {
            a = false
        }
    }
    return a
}
Site.initMbPdCollection = {};
(function (e, g, f) {
    g.init = function (l, j, h, i, k) {
        g.sessionMid = l;
        g.collectionList = j == null ? [] : j;
        g.pid = h;
        g._manageMode = i;
        a(k);
        c();
        if (e("#_TOKEN").length != 0 && !i && Fai.Cookie.get("collectId") == h && !e("#pdCollection .collectionIcon").hasClass("collectionIconSelect")) {
            e("#pdCollection").click()
        }
        Fai.Cookie.clear("collectId")
    };

    function b(h) {
        var i = {};
        i.productCollections = g.collectionList + "";
        e.post("ajax/member_h.jsp", {
            cmd: "set",
            id: g.sessionMid,
            info: e.toJSON(i)
        }, function (j) {
            if (j.success) {
                d(h)
            }
        }, "json")
    }

    function d(i) {
        var j = {
            height: 72
        };
        if (i == "suc") {
            j.width = 183;
            j.htmlContent = '<div class="suc-ico addItemTextTips" style="font-size:14px; color:#636363 ;margin-left: 29px; padding-left: 39px;">' + LS.sucCollection + "</div>"
        } else {
            if (i == "warn") {
                j.width = 210;
                j.htmlContent = '<div class="warn-ico addItemTextTips" style="font-size:14px; color:#636363 ;margin-left: 29px; padding-left: 39px;">' + LS.cancelCollection + "</div>"
            } else {
                if (i == "err") {
                    j.height = 90;
                    j.width = 280;
                    j.htmlContent = '<div class="resultFailIcon addItemTextTips" style="font-size:14px; color:#636363 ;margin-left: 39px; padding-left: 35px;">';
                    j.htmlContent += LS.isManagefailCollection + "</div>"
                }
            }
        }
        var h = Site.popupBox(j);
        h.find(".popupBClose").css({
            "margin-top": "9px",
            right: "9px",
            width: "12px",
            height: "12px",
            "background-position": "-1665px -110px"
        });
        if (i != "err") {
            setTimeout(function () {
                h.find(".popupBClose").click()
            }, 3000)
        }
    }

    function c() {
        e("#pdCollection").on("click", function () {
            if (g.sessionMid == 0) {
                if (g._manageMode) {
                    d("err")
                } else {
                    window.location.href = "login.jsp?url=" + Fai.encodeUrl(window.location.href);
                    Fai.Cookie.set("collectId", g.pid)
                }
            } else {
                if (e.inArray(g.pid, g.collectionList) == -1) {
                    g.collectionList.push(g.pid);
                    e("#pdCollection .collectionIcon").addClass("collectionIconSelect");
                    b("suc")
                } else {
                    if (e.inArray(g.pid, g.collectionList) != -1) {
                        g.collectionList.splice(e.inArray(g.pid, g.collectionList), 1);
                        e("#pdCollection .collectionIcon").removeClass("collectionIconSelect");
                        b("warn")
                    }
                }
            }
        })
    }

    function a(h) {
        if (g.sessionMid != 0 && e.inArray(g.pid, g.collectionList) != -1) {
            e("#pdCollection .collectionIcon").addClass("collectionIconSelect")
        }
        if (!!h) {
            return
        }
        if (e(".shareInfo_J").length > 0) {
            e(".shareInfo_J").css({
                left: e("#pdShare").offset().left - e("#pdShare").parent().offset().left + "px"
            })
        }
    }
})(jQuery, Site.initMbPdCollection);
Site.getQueryString = function (a) {
    var b = new RegExp("(^|&)" + a + "=([^&]*)(&|$)");
    var c = window.location.search.substr(1).match(b);
    if (c != null) {
        return unescape(c[2])
    }
    return null
};
Site.loadProductDetail = function (n, q, k, i) {
    var c = $("#module" + n),
        u = i == 5 ? "vertical" : "horizontal",
        v = "leftIcon" + n,
        f = "rightIcon" + n,
        h, d;
    if (i == 5) {
        u = "vertical";
        v = "prePdIcon" + n;
        f = "nextPdIcon" + n
    }
    if (Fai.isNull(c)) {
        return
    }
    var j = c.find(".imgDiv");
    var l = j.attr("faiWidth");
    var s = j.attr("faiHeight");
    if (Fai.isNull(s)) {
        return
    }
    if (q == null && k == null) {
        var w = j.width();
        var p = j.height()
    } else {
        var w = q;
        var p = k
    }
    var b = Fai.Img.calcSize(l, s, w, p, Fai.Img.MODE_SCALE_DEFLATE_FILL);
    var o = b.height;
    var r = b.width;
    d = $("#imgGroup" + n);
    if (i == 5) {
        thumbList = d.find(".imgGroupDiv");
        if (q == null && k == null) {
            d.height(p)
        }
        if ((thumbList.length * thumbList.outerHeight(true)) <= p) {
            c.find("#prePdIcon" + n).hide();
            c.find("#nextPdIcon" + n).hide();
            d.find(".J_imgDivsStyle5").css({
                position: "absolute",
                top: "-8px",
                left: "0",
                height: p + "px"
            })
        } else {
            d.find(".J_imgDivsStyle5").height(p - 2 * d.find("#nextPdIcon" + n).width())
        }
    }
    var x = c.find(".imgGroupDiv");
    x.each(function () {
        var D = $(this).attr("faiWidth");
        var G = $(this).attr("faiHeight");
        if (Fai.isNull(G)) {
            return
        }
        var C = Fai.Img.calcSize(D, G, w, p, Fai.Img.MODE_SCALE_DEFLATE_FILL);
        if (C.height > o) {
            o = C.height
        }
        if (C.width > r) {
            r = C.width
        }
        var B = $(this).find("img");
        var F = B.width();
        var H = B.height();
        D = B.attr("faiWidth");
        G = B.attr("faiHeight");
        var E = Fai.Img.MODE_SCALE_FILL;
        if (F == 1 && H == 1) {
            var A = new Image();
            A.src = B.data("original");
            $(A).on("load", function () {
                F = A.width;
                H = A.height;
                C = Fai.Img.calcSize(F, H, D, G, E);
                B.css("width", C.width + "px");
                B.css("height", C.height + "px");
                if (B.attr("src") != B.data("original")) {
                    B.attr("src", B.data("original"))
                }
                B.css("display", "block")
            })
        } else {
            C = Fai.Img.calcSize(F, H, D, G, E);
            if (C.width == 1) {
                C.width = D
            }
            if (C.height == 1) {
                C.height = G
            }
            B.css("width", C.width + "px");
            B.css("height", C.height + "px");
            B.css("display", "block")
        }
    });
    var z = j.find("img");
    if (i != 5) {
        z.css("width", b.width + "px");
        z.css("height", b.height + "px")
    }
    z.css("display", "block");
    j.data("divWidth", w);
    j.data("divHeight", p);
    if (q != null && k != null) {
        j.css("height", k + "px");
        j.css("width", q + "px")
    }
    if (i == 2) {
        $(".pd_J .imgContainer_J").css("margin", "0px auto");
        $(".pd_J .imgContainer_J").css("float", "none");
        $(".pd_J .imgContainer_J").parent().css("width", "100%")
    }
    var a = j.find(".cloud-zoom");
    if (a.length == 1) {
        a.attr("rel", "adjustX:-4, adjustY:-4, maxWidth:" + w + ", maxHeight:" + o + ',position:"inside"');
        a.CloudZoom({
            imageHeight: s,
            imageWidth: l
        })
    }
    if (x.length > 1) {
        if (i != 5) {
            h = d.width() - $("#leftIcon" + n).outerWidth(true) - $("#rightIcon" + n).outerWidth(true)
        }
        $("#imgDivs" + n).width(h);
        var y = (a.length == 1) ? "true" : "false";
        Site.multiPhoto($("#imgDivs" + n), $("#imgDiv" + n), {
            leftIconID: v,
            rightIconID: f,
            zoom: y,
            direction: u
        })
    }
    var e = c.find(".pd_J").width(),
        g = c.find(".imgContainer_J").width(),
        t = c.find(".pdLayoutR_J"),
        m = c.find(".pdAppendLayout_J");
    if ((e - g) < 200) {
        t.appendTo(m)
    }
};
Site.productBigPicResponsive = function (a, c, d, f, g) {
    var b = $("#module" + a),
        l, i, k, j, e, h;
    if (d || b.length < 1) {
        return
    }
    i = b.width();
    if (c) {
        j = (i - 260) / 2
    } else {
        j = (i + 300) / 3
    }
    k = Fai.Img.calcSize(f, g, j, j, Fai.Img.MODE_SCALE_FILL);
    l = b.find("#imgDiv" + a);
    l.css({
        width: j + "px",
        height: j + "px"
    });
    l.find("img").css({
        width: k.width + "px",
        height: k.height + "px"
    });
    if (c) {
        b.find(".imgContainer_J").width(j + 130)
    } else {
        b.find(".imgContainer_J").width(j)
    }
    e = b.find("#imgGroup" + a);
    e.height(k.height)
};
Site.initPdCommentSwitch = function () {
    var a = 0;
    if (document.cookie.length > 0) {
        cStart = document.cookie.indexOf("tabSwitch=");
        if (-1 != cStart) {
            cStart = cStart + 10;
            cEnd = document.cookie.indexOf(";", cStart);
            if (-1 == cEnd) {
                cEnd = document.cookie.length
            }
            a = unescape(document.cookie.substring(cStart, cEnd))
        }
    }
    $(".tabSwitch").eq(a).click()
};
Site.pdSaleRecordPagenation = function (b, a) {
    $("#saleRecordSwitch").on("click", function () {
        if ($("#saleRecordPanel .tableBody").children().length == 0) {
            Site.loadSaleRecord(b, a, 1)
        }
    });
    $("body").on({
        hover: function () {
            $(this).addClass("g_hover")
        }, mouseleave: function () {
            $(this).removeClass("g_hover")
        }, click: function () {
            var d = $("#saleRecordPanel .pagenation .pageNo").not(":has('.g_border')").text();
            var c = 1;
            if ($(this).parent().hasClass("pagePrev")) {
                c = Number(d) - 1
            } else {
                if ($(this).parent().hasClass("pageNext")) {
                    c = Number(d) + 1
                } else {
                    c = Number($(this).text())
                }
            }
            Site.loadSaleRecord(b, a, c)
        }
    }, "#saleRecordPanel .pagenation .g_border")
};
Site.loadSaleRecord = function (c, a, b) {
    $.ajax({
        url: "ajax/product_h.jsp?cmd=getSaleRecordList",
        data: "pid=" + c + "&pno=" + b,
        type: "post",
        dataType: "json",
        success: function (e) {
            if (e.success) {
                $(".saleRecordBody tr").remove();
                var g = [];
                $.each(e.list, function (i, h) {
                    g.push("<tr class='b_li'>");
                    g.push("<td class='b_creator'><span class='msgBoard_msgUser_level' style='margin-right:12px;'></span>" + h.createName + "</td>");
                    if (a) {
                        g.push("<td class='b_optionType'>" + h.optionType + "</td>")
                    }
                    g.push("<td class='b_amount'>" + h.amount + "</td>");
                    var j = new Date(h.paidTime);
                    g.push("<td class='b_paidTime'><span>" + $.format.date(j, "yyyy-MM-dd") + "</span><br><span>" + $.format.date(j, "HH:mm:ss") + "</span></td>");
                    g.push("</tr>")
                });
                $(".saleRecordBody .tableBody").html(g.join(""));
                if ($(".saleRecordFooter .pagenation").length != 0) {
                    var d = [];
                    d.push("<div class='pagePrev'>");
                    if (b == 1) {
                        d.push("<span>" + LS.prevPager + "</span>")
                    } else {
                        d.push("<a hidefocus='true' class='g_border' href='javascript:;'><span>" + LS.prevPager + "</span></a>")
                    }
                    d.push("</div>");
                    if (b == 1) {
                        d.push("<div class='pageNo'><span>1</span></div>")
                    } else {
                        d.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>1</span></a></div>")
                    } if (b - 2 > 2) {
                        d.push("<div class='pageEllipsis'><span>...</span></div>");
                        for (var f = b - 2; f < b; f++) {
                            d.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + f + "</span></a></div>")
                        }
                    } else {
                        for (var f = 2; f < b; f++) {
                            d.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + f + "</span></a></div>")
                        }
                    } if (b != 1 && b != e.totalPage) {
                        d.push("<div class='pageNo'><span>" + b + "</span></div>")
                    }
                    if (b + 2 < e.totalPage - 1) {
                        for (var f = b + 1; f <= b + 2; f++) {
                            d.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + f + "</span></a></div>")
                        }
                        d.push("<div class='pageEllipsis'><span>...</span></div>")
                    } else {
                        for (var f = b + 1; f <= e.totalPage - 1; f++) {
                            d.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + f + "</span></a></div>")
                        }
                    } if (b == e.totalPage) {
                        d.push("<div class='pageNo'><span>" + e.totalPage + "</span></div>")
                    } else {
                        d.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + e.totalPage + "</span></a></div>")
                    }
                    d.push("<div class='pageNext'>");
                    if (b == e.totalPage) {
                        d.push("<span>" + LS.nextPager + "</span>")
                    } else {
                        d.push("<a hidefocus='true' class='g_border' href='javascript:;'><span>" + LS.nextPager + "</span></a>")
                    }
                    d.push("</div>");
                    $(".saleRecordFooter .pagenation").children().remove();
                    $(".saleRecordFooter .pagenation").html(d.join(""))
                }
            }
        }, error: function () {
            Fai.ing(LS.systemError)
        }
    })
};
Site.loadPdShareMore = function () {
    $("body").on({
        hover: function () {
            $("#pdShare").addClass("pdShareHover");
            $("#pdShare").css({
                "z-index": "999"
            });
            $(".shareInfo_J").css({
                "z-index": "998"
            });
            $(".productOpera .shareInfo").show();
            $(".shareDown").addClass("shareUp");
            $(".share").addClass("operaTextHover")
        }, mouseleave: function () {
            $("#pdShare").removeClass("pdShareHover");
            $("#pdShare").css({
                "z-index": ""
            });
            $(".shareInfo_J").css({
                "z-index": ""
            });
            $(".productOpera .shareInfo").hide();
            $(".shareDown").removeClass("shareUp");
            $(".share").removeClass("operaTextHover")
        }
    }, ".productOpera .pdShare,.productOpera .shareInfo");
    var c = $(".pd_J .pd_t_l_left_J"),
        b = c.find(".imgContainer_J"),
        a = c.find(".shareContainer_J"),
        d = a.find(".shareInfo_J");
    if (Fai.isIE6() || Fai.isIE7()) {
        c.width(b.width())
    }
    setTimeout(function () {
        var f = a.height(),
            g = d.height(),
            e = d.find(".shareMore_J");
        if (g > f + 5) {
            $(e).click(function () {
                if (a.hasClass("s_expand")) {
                    a.removeClass("s_expand");
                    e.find("div").removeClass("s_more_up")
                } else {
                    a.addClass("s_expand");
                    e.find("div").addClass("s_more_up")
                }
            })
        } else {
            e.remove()
        }
    }, 0)
};
Site.loadProductSlide = function (a) {
    var b = $(".slide");
    if (Fai.isNull(b)) {
        return
    }
    var l = b.find(".imgDiv");
    var i = l.attr("faiWidth");
    var j = l.attr("faiHeight");
    var g = l.width();
    var d = l.height();
    var c = b.find(".imgGroupDiv");
    c.each(function () {
        var p = $(this).width();
        var r = $(this).height();
        var m = $(this).find("img");
        var o = m.attr("faiWidth");
        var q = m.attr("faiHeight");
        var n = Fai.Img.calcSize(o, q, p, r, Fai.Img.MODE_SCALE_FILL);
        m.css("width", n.width + "px");
        m.css("height", n.height + "px");
        m.css("display", "block")
    });
    var h = Fai.Img.calcSize(i, j, g, d, Fai.Img.MODE_SCALE_DEFLATE_FILL);
    var e = l.find("img");
    e.css("width", h.width + "px");
    e.css("height", h.height + "px");
    e.css("display", "block");
    var k = l.find(".cloud-zoom");
    if (k.length == 1) {
        k.attr("rel", "adjustX:-4, adjustY:-4, maxWidth:" + g + ", maxHeight:" + d + ',position:"inside"');
        k.CloudZoom({
            imageHeight: j,
            imageWidth: i
        })
    }
    if (c.length > 1) {
        var f = (k.length == 1) ? "true" : "false";
        Site.multiPhoto($("#imgDivs" + a), $("#imgDiv" + a), {
            leftIconID: "leftIcon" + a,
            rightIconID: "rightIcon" + a,
            zoom: f
        })
    }
};
Site.loadProductPicList = function (f, d, c, e, a) {
    var b = $("#module" + f);
    if (Fai.isNull(b)) {
        return
    }
    b.find(".productPicListForm").each(function () {
        var n = $(this).attr("faiHeight");
        if (Fai.isNull(n)) {
            return
        }
        var m = $(this).attr("faiWidth"),
            i = $(this).attr("faiWidthOr"),
            h = $(this).attr("faiHeightOr"),
            q = $(this).find(".imgDiv"),
            o = q.width(),
            p = q.height();
        if (c) {
            o = m;
            p = n
        }
        var l = {
            width: o,
            height: p
        };
        if (d) {
            l = Fai.Img.calcSize(i, h, o, p, Fai.Img.MODE_SCALE_FILL)
        }
        var g = q.find("img");
        g.css("width", l.width + "px");
        g.css("height", l.height + "px");
        q.css("height", l.height + "px");
        if (a == 4 || a == 5 || a == 9) {
            if ($(this).find(".fifth_mallBuy").length > 0) {
                var k = $(this).find(".fifth_mallBuy");
                var j = $(this).find(".fifth_mallBuy").width();
                k.css({
                    "line-height": j + "px",
                    height: j + "px",
                    width: j + "px"
                })
            }
        }
    });
    Site.initContentSplitLine(f, e)
};
Site.loadProductDoublePicList = function (g, f, d, a) {
    var c = $("#module" + g);
    if (Fai.isNull(c)) {
        return
    }
    var e = 0;
    var b = 0;
    c.find(".doubleProduct").each(function () {
        $(this).find(".productDoublePicListForm").each(function () {
            var o = $(this).attr("faiHeight");
            if (Fai.isNull(o)) {
                return
            }
            var n = $(this).attr("faiWidth"),
                r = $(this).find(".imgDiv"),
                j = r.find("img"),
                s = $(this).find(".propList");
            j.css("width", 0);
            j.css("height", 0);
            var p = r.width(),
                q = r.height();
            if (d) {
                var i = $(this).attr("newWidth");
                var h = $(this).attr("newHeight");
                if (i && h) {
                    p = i;
                    q = h
                } else {
                    p = n;
                    q = o
                }
            }
            var m = {
                width: p,
                height: q
            };
            if (f) {
                m = Fai.Img.calcSize($(this).attr("faiWidthOr"), $(this).attr("faiHeightOr"), p, q, Fai.Img.MODE_SCALE_FILL)
            }
            j.css("width", m.width + "px");
            j.css("height", m.height + "px");
            r.css("height", q + "px");
            if (Number(q) > Number(b)) {
                if (Number(q) > Number(s.height())) {
                    b = q
                } else {
                    b = s.height()
                }
                e = Number(b) + 20 + Number($(this).css("margin-top").replace("px", "")) + Number($(this).css("margin-bottom").replace("px", ""));
                $(this).parent().css("height", (e) + "px")
            }
            if (a == 4 || a == 5 || a == 9) {
                if ($(this).find(".fifth_mallBuy").length > 0) {
                    var l = $(this).find(".fifth_mallBuy");
                    var k = $(this).find(".fifth_mallBuy").width();
                    l.css({
                        "line-height": k + "px",
                        width: k + "px",
                        height: k + "px"
                    })
                }
            }
        });
        e = 0;
        b = 0
    })
};
Site.loadProductHotTextList = function (e, d, c, a) {
    var b = $("#module" + e);
    if (Fai.isNull(b)) {
        return
    }
    b.find(".productHotTextListHot").each(function () {
        var k = $(this).attr("faiHeight");
        if (Fai.isNull(k)) {
            return
        }
        var j = $(this).attr("faiWidth");
        var n = $(this).find(".imgDiv");
        var l = n.width();
        var m = n.height();
        if (c) {
            l = j;
            m = k
        }
        var h = {
            width: l,
            height: m
        };
        if (d) {
            h = Fai.Img.calcSize($(this).attr("faiWidthOr"), $(this).attr("faiHeightOr"), l, m, Fai.Img.MODE_SCALE_FILL)
        }
        var f = n.find("img");
        f.css("width", h.width + "px");
        f.css("height", h.height + "px");
        n.css("height", h.height + "px");
        if (a == 4 || a == 5 || a == 9) {
            if ($(this).find(".fifth_mallBuy").length > 0) {
                var i = $(this).find(".fifth_mallBuy");
                var g = $(this).find(".fifth_mallBuy").width();
                i.css({
                    "line-height": g + "px",
                    height: g + "px",
                    width: g + "px"
                })
            }
        }
    });
    b.find(".productHotTextListTable").each(function () {
        var k = $(this).find("tr");
        for (var j = 0; j < k.length; ++j) {
            var o = k[j];
            var h = $(o).find("td");
            $(h[1]).css("width", "30%");
            var g = h.length;
            var p = 100;
            p -= 30;
            for (var f = 2; f < g; ++f) {
                if (f == h.length - 1) {
                    var m = $(h[f]).attr("buybtn");
                    if (m) {
                        $(h[f]).css("width", "15%");
                        p -= 15;
                        break
                    }
                }
                var l = parseInt(p / g);
                $(h[f]).css("width", l + "%")
            }
        }
        $(this).mouseover(function () {
            $(this).addClass("g_hover")
        }).mouseleave(function () {
            $(this).removeClass("g_hover")
        })
    });
    b.find(".productHotTextListProp").each(function () {
        var k = $(this).find("tr");
        for (var j = 0; j < k.length; ++j) {
            var o = k[j];
            var h = $(o).find("td");
            $(h[1]).css({
                width: "30%",
                "margin-left": "5px"
            });
            var g = h.length;
            var p = 100;
            p -= 30;
            for (var f = 2; f < g; ++f) {
                if (f == h.length - 1) {
                    var m = $(h[f]).attr("buybtn");
                    if (m) {
                        $(h[f]).css({
                            width: "15%",
                            "margin-right": "5px"
                        });
                        p -= 15;
                        break
                    }
                }
                var l = parseInt(p / g);
                $(h[f]).css("width", l + "%")
            }
        }
    })
};
Site.unifiedAttrVal = function (b, d, a) {
    var c = b.find(d);
    var e = 0;
    c.each(function () {
        var f = $(this).css(a);
        f = parseInt(f);
        if (f > e) {
            e = f
        }
    });
    c.each(function () {
        $(this).css(a, e + "px")
    })
};
Site.loadProductGallery = function (E) {
    var F = new Date().getMilliseconds();
    var W = E.id,
        T = E.scale,
        g = E.cus,
        y = E.paramLayoutType || "";
    var c = $("#module" + W),
        C = c.find("div.product-container");
    var U = c.find(".product-gallery").attr("_bordertype");
    var e = parseInt(c.find(".product-gallery").attr("_borderwidth"));
    var ac = c.find(".product-gallery").attr("_bgtype");
    var o, d;
    if (E.effType >= 4 && E.effType < 6) {
        if (y == 6) {
            Site.clearImageEffectContent_product(W, "sixth_ProductPanel")
        }
        if (y == 8) {
            Site.clearImageEffectContent_product(W, "eighth_ProductPanel")
        }
        Site.clearImageEffectContent_product(E.id, "prop-container")
    }
    if (C.length != 0) {
        var ah = $(C[0]).children("div.img-container"),
            p = ah.width(),
            R = ah.height();
        for (var aj = 0; aj < C.length; aj++) {
            ah = $(C[aj]).children("div.img-container");
            var n = ah.find("img"),
                M = n.attr("fHeight"),
                J = n.attr("fWidth");
            if (T) {
                var m = Fai.Img.calcSize(J, M, p, R, Fai.Img.MODE_SCALE_FILL);
                n.width(m.width);
                n.height(m.height);
                o = m.width;
                d = m.height
            } else {
                n.width(p);
                n.height(R);
                o = p;
                d = R
            } if (Fai.top._manageMode) {
                n.data("realWidth", o);
                n.data("realHeight", d)
            }
        }
        var Y = c.find(".gallery-control"),
            s = c.find(".gallery-control-prev"),
            ad = c.find(".gallery-control-next"),
            V = s.height(),
            f = s.width();
        var l = C.first(),
            ae = l.children("div.img-container"),
            K = ae.outerWidth(true),
            w = ae.outerHeight(true),
            Q = l.find("div.paramNewStyle"),
            ag = 0,
            I = l.find("div.prop-container"),
            k = 0;
        if (C.find(".fk-productName").length > 0) {
            C.find(".fk-productName").height("auto")
        }
        if (I.length > 0) {
            $.each(I, function (j) {
                k += $(I[j]).outerHeight(true)
            })
        }
        if (Q.length > 0) {
            $.each(Q, function (j) {
                ag += $(Q[j]).outerHeight(true)
            })
        }
        var v = w + k + ag;
        C.height(v);
        C.width(K);
        if (y == 6) {
            C.find("div.prop-container").width(K * 0.8);
            C.find(".sixth_ProductName").width("80%")
        } else {
            C.find("div.prop-container").width(K)
        }
        var H = c.find("div.product-gallery-preview");
        var a = c.find(".fk-productListForm").outerHeight() - c.find(".fk-productListForm").height();
        if (a > 0) {
            v += a
        }
        H.height(v);
        var G = c.find("div.product-gallery-inner"),
            r = G.outerHeight();
        if (r < V) {
            var X = G.height(),
                ab = r - X;
            var aa = Math.ceil((V - r) / 2);
            var t = Math.ceil(ab / 2) + aa;
            G.css("padding-top", t + "px").css("padding-bottom", t + "px")
        }
        var S = (G.outerHeight() / 2) - (V / 2);
        Y.css("top", S + "px");
        var b = 1,
            ak = s.innerWidth() - f,
            L = c.find("div.formMiddleContent").width(),
            u = L - ak - (f * 2),
            am = l.outerWidth(true),
            af = l.outerWidth(),
            h = am - af;
        if (u > am) {
            b = parseInt(u / am)
        }
        var P = (b * am) - h;
        H.width(P);
        var al = C.length;
        var z = al % b == 0 ? al / b : Math.floor(al / b) + 1;
        c.find("div.product-gallery-container").width(al * am);
        var q = C.length < b ? C.length : b;
        for (var ai = 0; ai < q; ai++) {
            var n = $(C[ai]).find("img");
            if (!n.attr("src")) {
                n.attr("src", n.attr("lzurl"))
            }
            n.show()
        }
        s.addClass("gallery-control-prev-disabled");
        if (z == 1) {
            ad.addClass("gallery-control-next-disabled")
        }
        s.click(function () {
            var x = $(this);
            if (x.hasClass("gallery-control-prev-disabled")) {
                return false
            }
            var an = x.parent(),
                j = an.find("div.product-gallery-container"),
                ao = an.find(".gallery-control-next");
            if (ao.hasClass("gallery-control-next-disabled")) {
                ao.removeClass("gallery-control-next-disabled")
            }
            if (j.position().left == 0 || j.is(":animated")) {
                return false
            }
            var i = c.find(".product-gallery-preview").width() + h;
            j.animate({
                left: "+=" + i + "px"
            }, function () {
                if (j.position().left == 0) {
                    x.addClass("gallery-control-prev-disabled")
                }
            })
        });
        ad.click(function () {
            var at = $(this);
            if (at.hasClass("gallery-control-next-disabled")) {
                return false
            }
            var an = at.parent(),
                i = an.find("div.product-gallery-container"),
                x = an.find(".gallery-control-prev");
            if (x.hasClass("gallery-control-prev-disabled")) {
                x.removeClass("gallery-control-prev-disabled")
            }
            var au = c.find(".product-gallery-preview").width() + h,
                av = -(z - 1) * (au);
            left_position = parseInt(i.css("left").replace("px"));
            if (left_position == av || i.is(":animated")) {
                return false
            }
            if (!at.data("loading_finish")) {
                var ar = (Math.abs(left_position) / (am * b)) + 1;
                var j = ar <= 1 ? 1 * b : ar * b,
                    ap = j + b > C.length ? C.length : j + b;
                for (var ao = j; ao < ap; ao++) {
                    var aq = $(C[ao]).find("img");
                    if (!aq.attr("src")) {
                        aq.attr("src", aq.attr("lzurl"))
                    }
                    aq.show()
                }
            }
            i.animate({
                left: "-=" + au + "px"
            }, function () {
                var aw = parseInt(i.css("left").replace("px", ""));
                if (aw == av) {
                    at.data("loading_finish", true);
                    at.addClass("gallery-control-next-disabled")
                }
            })
        })
    } else {
        var Z = c.find("div.addNoProTips");
        c.find("div.product-gallery").height(100).html(Z)
    }
    c.find(".product-container").each(function () {
        var x = $(this).find(".eighth_ProductPanel");
        var i = x.find(".eighth_Pricepanel");
        var j = x.find(".fk_rightPiecePanel");
        if (!!x.length) {
            if (U == 1) {
                i.css("left", "4px");
                j.css("right", "16px")
            } else {
                if (U == 2) {
                    i.css("left", (4 + e) + "px");
                    j.css("right", (16 + e) + "px");
                    x.css("bottom", (84 + e) + "px")
                }
            }
        }
    });
    if (c.find(".prop-wordwrap-container").length > 0) {
        c.find(".product-container").height("auto");
        var A = 0;
        var N = 0;
        c.find(".product-container").each(function () {
            var i = $(this).height();
            N = $(this).outerHeight();
            if (i > A) {
                A = i
            }
        });
        c.find(".product-container").each(function () {
            $(this).height(A)
        });
        c.find(".product-gallery-preview").height(A);
        var G = c.find("div.product-gallery-inner"),
            Y = c.find(".gallery-control"),
            s = c.find(".gallery-control-prev"),
            V = s.height(),
            S = (G.outerHeight() / 2) - (V / 2);
        Y.css("top", S + "px")
    }
    if (y == 6) {
        var O = 0;
        c.find(".product-container").each(function () {
            var i = $(this).outerHeight();
            if (i > O) {
                O = i
            }
        });
        if (c.find(".prop-wordwrap-container").length == 0) {
            c.find(".sixth_ProductPanel").css({
                bottom: "40px"
            })
        } else {
            c.find(".product-gallery-preview").height(O + 30);
            c.find(".sixth_ProductPanel").css({
                bottom: ""
            })
        }
        c.find(".sixth_mallBuy").parent().height("auto")
    }
    if (C.length != 0) {
        for (var aj = 0; aj < C.length; aj++) {
            if ($(C[aj]).find(".fifth_mallBuy").length > 0) {
                var B = $(C[aj]).find(".fifth_mallBuy");
                var D = $(C[aj]).find(".fifth_mallBuy").width();
                B.css({
                    "line-height": D + "px"
                })
            }
        }
    }
    if (c.find(".prop-wordwrap-container").length > 0) {
        Site.unifiedAttrVal(c, ".prop-wordwrap-container", "height")
    }
};
Site.loadProductSmallPic = function (z) {
    var N = z.id,
        F = z.scale,
        f = z.cus,
        J = z.dataObjs,
        O = z.bigPicObjs,
        o = z.tmp_allow_marketprice,
        D = z.tmp_allow_price,
        m = z.tmp_allow_price_menberLevel,
        H = parseInt($(".productSmallPicForms").attr("_mallbuybtntype")),
        A = $(".productSmallPicForms").attr("_mallbuybtncolor");
    if (m) {
        m = "title = '" + m + "'"
    }
    var c = $("#" + N);
    var u = z.paramLayoutType;
    c.on("Fai_onModuleSizeChange", function () {
        Site.smallPicModuleFix(N)
    });
    c.on("Fai_onModuleLayoutChange", function () {
        Site.smallPicModuleFix(N)
    });
    var y = c.find("div.productSmallPicBox");
    var Z = c.find(".smallPicUpForms").height();
    var g = c.find(".smallPicDownForms").height();
    c.find(".productSmallPicForms").height(Z + g);
    var I = c.find(".productSmallPicForms").width();
    var b = c.find(".smallPic_control").outerWidth(true);
    var W = I - b * 2 - c.find(".containerLeft").width();
    var Q = W > 150 ? W : 150;
    c.find(".containerRight").width(Q);
    c.find(".smallPicUpForms").css("width", I + "px");
    c.find(".smallPicDownForms").css("width", I + "px");
    var B = c.find(".smallPrePic_control").outerWidth(true);
    c.find(".smallPicDownFormsMid").css("width", I - 2 * B - 20 + "px");
    var l = c.find(".containerLeft").width() + c.find(".containerRight").width();
    c.find(".smallPicUpFormsMid").width(l);
    var Y = c.find(".smallPrePicContainer");
    var S = c.find(".smallPrePicOuter").outerWidth(true);
    var P = 0;
    if (Fai.isIE6()) {
        P = 2
    }
    Y.width(S * y.length + P);
    var G = Y.width();
    var U = c.find(".smallPicUpFormsMid").outerHeight() / 2 - 30;
    c.find(".smallPic_control").css("top", U + "px");
    var t = c.find(".smallPicDownFormsMid").width();
    var aa = y.length;
    var q = Math.floor(t / S) + 1;
    var w = aa % q == 0 ? aa / q : Math.floor(aa / q) + 1;
    if (w == 1 && t < Y.width()) {
        w = 2
    }
    var n = y.length < q ? y.length : q;
    for (var V = 0; V < n; V++) {
        var k = $(y[V]).find("img");
        Site.loadProductSmallPicItem(k)
    }
    var x = "default";
    var E = true;
    var a = false;
    var C = false;
    var e = false;
    var L = false;
    var s = "style='";
    var T = "";
    var p = "";
    var i = 0;
    if (Fai.isIE6() || Fai._isIE7) {
        H = 0
    }
    switch (H) {
        case 1:
            x = "first";
            i = 1;
            s += "border-radius:5px;height:33px;line-height:33px;";
            break;
        case 2:
            x = "second";
            i = 2;
            s += "border-radius:5px;height:31px;line-height:31px;";
            a = true;
            break;
        case 3:
            x = "third";
            i = 3;
            s += "border-radius:0px;height:33px;line-height:33px;";
            break;
        case 4:
            x = "fourth";
            i = 4;
            s += "border-radius:0px;height:31px;line-height:31px;";
            a = true;
            break;
        case 5:
            x = "fifth";
            i = 5;
            s += "border-radius:16px;height:33px;line-height:33px;";
            break;
        case 6:
            x = "sixth";
            i = 6;
            s += "border-radius:16px;height:31px;line-height:31px;";
            a = true;
            break;
        case 7:
            x = "seventh";
            i = 7;
            break;
        case 8:
            x = "eight";
            i = 8;
            a = true;
            break;
        case 9:
            x = "nine";
            s += "border-radius:2px;min-height:46px;min-width:46px;display:table;";
            i = 9;
            a = true;
            e = true;
            break;
        case 10:
            x = "ten";
            s += "border-radius:2px;min-height:48px;min-width:48px;";
            i = 10;
            C = true;
            break;
        case 11:
            x = "eleven";
            s += "min-height:48px;min-width:48px;display:table;";
            i = 11;
            a = true;
            e = true;
            break;
        case 12:
            x = "twelve";
            s += "min-height:50px;min-width:50px;";
            i = 12;
            C = true;
            break;
        case 13:
            x = "thirteen";
            s += "display:table;";
            i = 13;
            e = true;
            L = true;
            break;
        default:
            E = false
    }
    var K = E ? "fk-newMallBuyBtn" : "fk-mallBuy";
    var v = "";
    var X = L ? 32 : 30;
    var d = (i >= 7 && i <= 13) ? true : false;
    if (a) {
        s += "background:none;border:1px solid " + A + ";";
        v = "style='color: " + A + ";'"
    } else {
        if (!L) {
            s += "border:none;background-color: " + A + ";";
            v = "style='color: white;'"
        }
    } if (C) {
        T = "fk-mallBgCar";
        v = "style='color: " + A + ";"
    }
    if (e) {
        p = "faisco-icons-mallBuyCar";
        v = "style='color: " + A + ";font-size: " + X + "px;vertical-align:bottom;display:table-cell;";
        s += "color: " + A + ";";
        if (i == 11) {
            v += "padding-top: 3px;"
        }
        v += "'"
    }
    if (L) {
        s += "border:none;background:none;"
    }
    if (u == 2 || u == 3) {
        s += "width:60%;"
    }
    v += "'";
    s = E ? s += "'" : "";
    var r = c.find(".smallPicDownForms .g_imgPrev"),
        R = c.find(".smallPicDownForms .g_imgNext"),
        M = c.find(".smallPicUpForms .g_control_prev"),
        h = c.find(".smallPicUpForms .g_control_next");
    r.addClass("smallPic-control-prev-disabled");
    if (w == 1) {
        R.addClass("smallPic-control-next-disabled")
    }
    M.addClass("bigPic-control-prev-disabled");
    if (aa == 1) {
        h.addClass("bigPic-control-next-disabled")
    }
    c.find(".smallPicUpForms").mouseover(function () {
        $(".smallPic_control").css("display", "block")
    }).mouseleave(function () {
        $(".smallPic_control").css("display", "none")
    });
    r.click(function () {
        var af = $(this);
        if (af.hasClass("smallPic-control-prev-disabled")) {
            return false
        }
        var ab = af.parents(".smallPicDownForms").find(".smallPrePicContainer");
        var ah = Math.floor(c.find(".smallPicDownFormsMid").width() / S) + 1;
        var ae = af.parents(".smallPicDownForms").find(".g_imgNext");
        if (ae.hasClass("smallPic-control-next-disabled")) {
            ae.removeClass("smallPic-control-next-disabled")
        }
        var ad = parseInt(ab.css("left").replace("px"));
        var ag = Math.abs(ad) / S;
        var ac = ag - ah + 1 > 0 ? ag - ah + 1 : 0;
        if (ac == 0) {
            af.addClass("smallPic-control-prev-disabled")
        }
        var j = (ag - ac) * S;
        if (ab.is(":animated")) {
            return false
        }
        ab.animate({
            left: "+=" + j + "px"
        })
    });
    R.click(function () {
        var am = $(this);
        var ad = $("#" + N);
        if (am.hasClass("smallPic-control-next-disabled")) {
            return false
        }
        var j = am.parents(".smallPicDownForms").find(".smallPrePicContainer"),
            af = am.parents(".smallPicDownForms").find(".g_imgPrev"),
            ae = Math.floor(ad.find(".smallPicDownFormsMid").width() / S) + 1;
        if (af.hasClass("smallPic-control-prev-disabled")) {
            af.removeClass("smallPic-control-prev-disabled")
        }
        var an = (ae - 1) * S,
            al = parseInt(j.css("left").replace("px"));
        var ak = Math.abs(al) / S;
        var ao = ak + ae - 1 > aa - 1 ? aa - 1 : ak + ae - 1;
        var aj = ad.find(".smallPicDownFormsMid").width();
        if (j.is(":animated")) {
            return false
        }
        var ac;
        var ab, ah;
        if (ao >= aa - 1) {
            ab = ak;
            ah = aa - 1;
            if ((ah - ab + 1) * S <= aj) {
                ac = true;
                am.addClass("smallPic-control-next-disabled")
            }
        } else {
            ab = ao;
            ah = ao + ae - 1
        }
        for (var ag = ab; ag <= ah; ag++) {
            var ai = $(y[ag]).find("img");
            Site.loadProductSmallPicItem(ai)
        }
        if (!ac) {
            j.animate({
                left: "-=" + an + "px"
            })
        }
    });
    y.mouseover(function () {
        $(this).parent().addClass("smallPrePicOuterHover").addClass("g_border").addClass("g_borderHover")
    });
    y.mouseleave(function () {
        $(this).parent().removeClass("smallPrePicOuterHover").removeClass("g_borderHover").removeClass("g_border")
    });
    c.find(".smallPicUpFormsMid").mouseenter(function () {
        var j = $(this).parents(".form").attr("id");
        if (_manageMode == true) {
            Site.initModuleProductSmallPicItemManage(j, z.productSelect, z.isOpenImgEff)
        }
    }).mouseleave(function () {
        var j = $(this).parents(".form");
        var ab = j.find("div.containerLeft");
        if (_manageMode == true) {
            if (z.isOpenImgEff) {
                Site.removeEditLayer(ab)
            } else {
                Site.removeEditLayer(ab, null, 106)
            }
        }
    });
    M.click(function () {
        var af = $(this);
        if (af.hasClass("bigPic-control-prev-disabled")) {
            return false
        }
        var ab = $("#" + N);
        var j = ab.find(".smallPicDownForms").find(".smallPrePicContainer");
        var ad = Math.floor(ab.find(".smallPicDownFormsMid").width() / S) + 1;
        var ai = ab.data("positionLeft");
        var ae = Math.abs(ai) / S;
        var ah = ae + ad - 1 > aa - 1 ? aa - 1 : ae + ad - 1;
        var ag = ab.find(".smallPrePicSelected").parent();
        var aj = ag.index();
        if (aj >= ae && aj <= ah) {
            if (aj == ae) {
                ai += S
            }
        } else {
            ai = -(aj - 1) * S;
            j.css("left", "0px")
        } if (j.is(":animated")) {
            return false
        }
        $(".img_ProductPhoto_LR_Border").remove();
        $(".img_ProductPhoto_TB_Border").remove();
        $(".editLayer").remove();
        var ac = ag.prev().find("div.productSmallPicBox");
        ab.find("div.containerLeft").attr("productId", ac.attr("proid")).attr("productName", ac.find("img").attr("productname")).attr("topClassName", ac.find("img").attr("classname")).attr("topSwitch", ac.find("img").attr("topswitch")).attr("id", "containerLeft_ProdsmallPic" + ac.attr("proid"));
        j.animate({
            left: ai + "px"
        }, function () {
            ag.prev().find("div.productSmallPicBox").click()
        })
    });
    h.click(function () {
        var af = $(this);
        if (af.hasClass("bigPic-control-next-disabled")) {
            return false
        }
        var ab = $("#" + N);
        var j = $(".smallPicDownForms").find(".smallPrePicContainer");
        var ad = Math.floor(ab.find(".smallPicDownFormsMid").width() / S) + 1;
        var ai = ab.data("positionLeft");
        var ae = Math.abs(ai) / S;
        var ah = ae + ad - 1 > aa - 1 ? aa - 1 : ae + ad - 1;
        var ag = ab.find(".smallPrePicSelected").parent();
        var aj = ag.index();
        if (aj >= ae && aj <= ah) {
            if (aj == ah) {
                ai -= 2 * S
            }
        } else {
            ai = -(aj - 1) * S;
            j.css("left", "0px")
        } if (j.is(":animated")) {
            return false
        }
        $(".img_ProductPhoto_LR_Border").remove();
        $(".img_ProductPhoto_TB_Border").remove();
        $(".editLayer").remove();
        var ac = ag.next().find("div.productSmallPicBox");
        ab.find("div.containerLeft").attr("productId", ac.attr("proid")).attr("productName", ac.find("img").attr("productname")).attr("topClassName", ac.find("img").attr("classname")).attr("topSwitch", ac.find("img").attr("topswitch")).attr("id", "containerLeft_ProdsmallPic" + ac.attr("proid"));
        j.animate({
            left: ai + "px"
        }, function () {
            ag.next().find("div.productSmallPicBox").click()
        })
    });
    y.click(function () {
        var aq = $(this).find("img");
        Site.loadProductSmallPicItem($(this).parent().next().find("img"));
        Site.loadProductSmallPicItem(aq);
        var aj = $("#" + N);
        var ae = aj.find(".smallPicUpFormsMid .containerLeft img");
        aj.find(".containerRight").children().remove();
        var aI = z.scale;
        var ai = $(this).parent();
        ai.siblings(".smallPrePicOuter").find("div.productSmallPicBox").removeClass("smallPrePicSelected");
        $(this).addClass("smallPrePicSelected");
        ai.siblings(".smallPrePicOuter").removeClass("smallPrePicOuterClick").removeClass("g_borderSelected");
        ai.addClass("smallPrePicOuterClick").addClass("g_borderSelected");
        var aB = aj.find("#bigImgDetail");
        aB.remove();
        aj.find(".smallPic_td").append(ae);
        var aT = $(this).attr("proid");
        var aW = O[aT]["bigPicThumbPath"];
        var ao = O[aT]["bWidth"];
        var at = O[aT]["bHeight"];
        var j = aj.find(".containerLeft").width(),
            ag = aj.find(".containerLeft").height();
        if (aI) {
            var ap = Fai.Img.calcSize(ao, at, j, ag, Fai.Img.MODE_SCALE_FILL);
            ae.width(ap.width);
            ae.height(ap.height)
        } else {
            ae.css("width", j).css("height", ag)
        }
        var aA = [];
        aA.push("<div class='loadingImg' style='width:" + j + "px;height:" + ag + "px;'>");
        aA.push("<table cellspacing='0' cellpadding='0' class='loadingImgTable' style='width:" + j + "px;height:" + ag + "px;'><tbody><tr><td class='loadingImgTd'>");
        aA.push("<div class='ajaxLoading2' style='margin:0 auto;'></div>");
        aA.push("</td></tr></tbody></table>");
        aA.push("</div>");
        aj.find(".smallPic_td").append(aA.join(""));
        var aQ = ae.attr("src");
        if (aQ == aW) {
            ae.attr("src", "")
        }
        ae.attr("src", aW);
        ae.css("margin", "auto");
        var aw = aq.attr("alt");
        ae.attr("alt", aw);
        aj.find(".containerLeft").height(aj.find(".containerLeft").height());
        aj.find(".containerLeft").css("overflow", "hidden");
        var a9 = $(this).find("img");
        var a7 = a9.attr("ifcenter");
        var a2 = a9.attr("ifshowname");
        var aG = a9.attr("ifwordwrap");
        var ak = a9.attr("ifmallbtn");
        var aX = a9.attr("aAttribute");
        var am = a9.attr("click");
        var aD = a9.attr("btntext");
        if (C) {
            aD = "&nbsp;"
        } else {
            if (e) {
                aD = ""
            }
        }
        ae.wrap("<a id='bigImgDetail' " + aX + "></a>");
        var al = "text-align:center";
        var ah = "margin:0 auto;";
        if (a7 == "false") {
            al = "text-align:left";
            ah = "margin-left:0;"
        }
        if (u == 2) {
            al = "text-align:center"
        }
        if (u == 3 || u == 4 || u == 5 || u == 9) {
            al = "text-align:left"
        }
        var aU = "word-break:normal;white-space:normal;overflow:visible;text-overflow:clip";
        if (aG == "false") {
            aU = "white-space:nowrap;overflow:hidden;text-overflow:ellipsis"
        }
        var aA = [];
        var az = aj.find(".containerRight").width();
        aA.push("<div class='productParamContainer' style='width:" + az + "px;" + ah + "" + (u == 4 || u == 9 ? "position:absolute;bottom:10px;" : "") + "'>");
        if (a2 == "true") {
            if (u == 2) {
                aA.push("<a " + aX + " title='" + $(this).find("img").attr("productname") + "' style='text-decoration:none;'><div class='second_ProductName fk-productName' style='width:" + (az - 20) + "px;" + aU + ";'>" + Fai.encodeHtml($(this).find("img").attr("productname")) + "</div></a>");
                aA.push("<div class='dotted'></div>")
            } else {
                if (u == 3) {
                    aA.push("<a " + aX + " title='" + $(this).find("img").attr("productname") + "' style='text-decoration:none;'><div class='third_ProductName fk-productName' style='width:" + (az - 20) + "px;" + aU + ";'>" + Fai.encodeHtml($(this).find("img").attr("productname")) + "</div></a>")
                } else {
                    if (u == 4 || u == 9) {
                        aA.push("<a " + aX + " title='" + $(this).find("img").attr("productname") + "' style='text-decoration:none;'><div class='fourth_ProductName fk-productName' style='width:" + (az - 20) + "px;" + aU + ";'>" + Fai.encodeHtml($(this).find("img").attr("productname")) + "</div></a>")
                    } else {
                        if (u == 5) {
                            aA.push("<a " + aX + " title='" + $(this).find("img").attr("productname") + "' style='text-decoration:none;'><div class='fifth_ProductName fk_paramNewStyle5 fk-productName' style='width:" + (az - 20) + "px;" + aU + ";'>" + Fai.encodeHtml($(this).find("img").attr("productname")) + "</div></a>")
                        } else {
                            aA.push("<a " + aX + " title='" + $(this).find("img").attr("productname") + "' style='text-decoration:none;'><div class='fk-productName' style='width:" + (az - 20) + "px;margin:auto;" + al + ";margin-top:20px;margin-bottom:8px;" + aU + ";'>" + Fai.encodeHtml($(this).find("img").attr("productname")) + "</div></a>")
                        }
                    }
                }
            }
        }
        var an = J[aT];
        var a3 = J.lcid.lcid;
        var ad = J.lcid._isLogin;
        var aZ = "";
        var aM = "";
        var ba = false;
        var aH = false;
        var aE = "";
        var ac = "";
        var au = "";
        for (var a1 = 0; a1 < an.length; a1++) {
            var a5 = an[a1];
            var a0 = a5.vip,
                av = a5.name,
                aV = a5.value,
                a8 = a5.type,
                aP = a5.title;
            ac = "";
            var aY = "";
            var ab = aP ? "title = " + aP : "";
            if (a8 == 12) {
                if (u == 2 || u == 3 || u == 4 || u == 5 || u == 9) {
                    aH = true;
                    aM = aV;
                    continue
                }
                aY = "g_minor mallMarketPrice fk-prop-marketprice"
            }
            if (a8 == 11 && a0) {
                au = av;
                ac = " g_stress"
            }
            if (a8 == 11) {
                if (u == 2 || u == 3 || u == 4 || u == 5 || u == 9) {
                    ba = true;
                    aZ = aV;
                    continue
                }
                aY = "g_stress mallPrice fk-prop-price"
            }
            if (a8 == 17) {
                aY = " fk-prop-sales"
            } else {
                if (a8 == 13) {
                    aY = " fk-prop-amount"
                } else {
                    if (a8 != 11 && a8 != 12) {
                        aY = " fk-prop-other"
                    }
                }
            }
            aA.push("<div class='" + (u == 5 ? "fk_paramNewStyle5" : "") + "' style='" + (u == 2 || u == 3 ? "color:#767676;" : "") + " margin:auto;height:20px;line-height:20px;padding: 5px 0;width:" + (az - 20) + "px;" + al + ";text-overflow:ellipsis;white-space:nowrap;overflow:hidden;'>");
            if (z.propNameShow || (a8 == 11 && a0)) {
                aA.push("<span class='fk-prop-name" + ac + "'>" + av + "：</span>")
            }
            aA.push("<span class='" + aY + "' " + ab + ">" + aV + "</span>");
            aA.push("</div>")
        }
        if ((u == 2 || u == 3) && (ba || aH)) {
            aA.push("<div class='g_stress fk_productSmallPicPiece second_Pricepanel' style='" + (u == 3 ? "text-align:left;" : "text-align:center;") + "'>");
            if (ba) {
                if (D) {
                    if (au == "会员价") {
                        aA.push("<span class='fk-prop-name g_stress'>" + au + "：</span>")
                    } else {
                        if (au == "VIP") {
                            aA.push("<div class='vip-show-dashed g_borderSelected g_stress'>VIP</div>")
                        }
                    }
                    aA.push("<span class='fk-prop-price-other'>" + aZ.slice(0, 1) + "</span>");
                    aA.push("<span class='second_Price fk-prop-price'>" + (aZ.slice(1)).split(".")[0] + "<span class='fk-prop-price-other priceDecimal'>." + (aZ.slice(1)).split(".")[1] + "</span></span>")
                } else {
                    aA.push("<span class='fk-prop-price second_Price' style='margin:0;'>价格：</span>\n");
                    aA.push("<span class='propValue' " + m + ">" + aZ + "</span>\n")
                }
            }
            if (aH) {
                if (o) {
                    aA.push("<span class='second_Marketprice fk-prop-marketprice'>" + aM.slice(0, 1) + "" + aM.slice(1) + "</span>")
                }
            }
            aA.push("</div>")
        }
        if (u == 4 || u == 9) {
            if (d) {
                aE = "fk_fifth_mallBuy"
            } else {
                aE = "fk_fourth_mallBuy"
            }
            aA.push("<div style='width: 100%; display: inline-block;text-align:left; margin-left:10px; padding-top:6px;'>");
            aA.push("<div style='width:" + ((ba && D) ? "55%" : "100%") + ";display:inline-block;'>");
            if (ba && D) {
                aA.push("<div style='display:inline-block; width:auto;'>");
                if (au == "会员价") {
                    aA.push("<span class='fk-prop-name g_stress'>" + au + "：</span>")
                } else {
                    if (au == "VIP") {
                        aA.push("<div class='vip-show-dashed g_borderSelected g_stress'>VIP</div>")
                    }
                }
                aA.push("</div>")
            }
            aA.push("<div class='g_stress fk_productSmallPicPiece fourth_Pricepanel' style='display:inline;'>");
            if (ba) {
                if (D) {
                    aA.push("<span class='fk-prop-price-other'>" + aZ.slice(0, 1) + "</span>");
                    aA.push("<span class='fourth_Price fk-prop-price'>" + (aZ.slice(1)).split(".")[0] + "<span class='fk-prop-price-other priceDecimal'>." + (aZ.slice(1)).split(".")[1] + "</span></span>")
                } else {
                    aA.push("<span class='fk-prop-price fourth_Price' style='margin:0;'>价格：</span>\n");
                    aA.push("<span class='propValue'" + m + ">" + aZ + "</span>\n")
                }
            }
            if (aH) {
                if (o) {
                    aA.push("<span class='fourth_Marketprice fk-prop-marketprice'>" + aM.slice(0, 1) + "" + aM.slice(1) + "</span>")
                }
            }
            aA.push("</div>");
            aA.push("</div>");
            if (ak == "true") {
                if (d) {
                    aA.push("<div style='position:absolute; display: inline-block; width: 30%; right:0;" + (L ? "bottom:6px;" : "bottom:12px;") + al + ";text-overflow:ellipsis;white-space:nowrap;overflow:hidden;'>")
                } else {
                    aA.push("<div style='position:absolute; display: inline-block; width: 40%; bottom:6px; " + (a ? "right:2px;" : "right:0;overflow:hidden;") + " height:29px;line-height:29px;padding: 5px 0;" + al + ";text-overflow:ellipsis;white-space:nowrap;'>")
                }
                aA.push("<a hidefocus='true' class='" + aE + " " + K + " fk-" + x + "BtnStyle " + T + "' " + aX + " " + s + ">\n");
                aA.push("<span " + v + " class='" + p + "' >" + aD + "</span>\n");
                aA.push("</a>");
                aA.push("</div>")
            }
            aA.push("</div>")
        }
        if (u == 5) {
            if (d || !E) {
                aE = "fk_fifth_mallBuy"
            } else {
                aE = "fk_fourth_mallBuy"
            }
            aA.push("<div class='fk_mallbuy5' style='width: 100%; display: inline-block; position:relative; height:" + ((ba && D) ? "auto" : "60px") + ";'>");
            aA.push("<div style='width:" + ((ba && D && au == "会员价") ? "80%" : "100%") + ";text-align:left;padding-left:10px;display:inline-block;'>");
            if (ba && D && au == "会员价") {
                aA.push("<div style='width:auto;margin-bottom:3px;text-align:left;display:inline-block;'>");
                aA.push("<span class='fk-prop-name g_stress'>" + au + "：</span></div>")
            }
            aA.push("<div class='g_stress fk_productSmallPicPiece fifth_Pricepanel' style='display:inline;'>");
            if (ba) {
                if (D) {
                    aA.push("<span class='fk-prop-price-other'>" + aZ.slice(0, 1) + "</span>");
                    aA.push("<span class='fifth_Price fk-prop-price'>" + (aZ.slice(1)).split(".")[0] + "<span class='fk-prop-price-other priceDecimal'>." + (aZ.slice(1)).split(".")[1] + "</span></span>")
                } else {
                    aA.push("<span class='fk-prop-price fifth_Price' style='margin:0;'>价格：</span>\n");
                    aA.push("<span class='propValue'" + m + ">" + aZ + "</span>\n")
                }
            }
            if (aH) {
                if (o) {
                    aA.push("<span class='fifth_Marketprice fk-prop-marketprice'>" + aM.slice(0, 1) + "" + aM.slice(1) + "</span>")
                }
            }
            aA.push("</div>");
            aA.push("</div>");
            if (ak == "true") {
                if (d || !E) {
                    aA.push("<div style='position:absolute; display: inline-block; width: 30%; right:0;" + (L ? "bottom:2px;" : "bottom:8px;") + al + ";text-overflow:ellipsis;white-space:nowrap;overflow:hidden;'>")
                } else {
                    aA.push("<div style='position:absolute; display: inline-block; width: 40%; bottom:6px; " + (a ? "right:2px;" : "right:0;overflow:hidden;") + " height:29px;line-height:29px;padding: 5px 0;" + al + ";text-overflow:ellipsis;white-space:nowrap;'>")
                }
                aA.push("<a hidefocus='true' class='" + aE + " " + K + " fk-" + x + "BtnStyle " + T + "' " + aX + " " + s + ">\n");
                aA.push("<span " + v + " class='" + p + "' >" + aD + "</span>\n");
                aA.push("</a>");
                aA.push("</div>")
            }
            aA.push("</div>")
        }
        if (ak == "true" && u != 4 && u != 5 && u != 9) {
            if (u == 3) {
                aE = "fk_third_mallBuy"
            }
            if (u == 1) {
                aA.push("<div style='margin-left:9px;height: auto;padding: 5px 0;width:" + (az - 20) + "px;" + al + ";text-overflow:ellipsis;white-space:nowrap;overflow:hidden;'>");
                aA.push("<a hidefocus='true' class='fk_first_mallBuy " + K + " " + x + "BtnStyle' " + aX + " " + s + ">\n");
                aA.push("<span " + v + ">" + aD + "</span>\n");
                aA.push("</a>")
            }
            if (u != 2 && u != 1) {
                aA.push("<div style='margin-left:9px;height:36px;line-height:36px;padding: 5px 0;width:" + (az - 20) + "px;" + al + ";text-overflow:ellipsis;white-space:nowrap;overflow:hidden;'>");
                aA.push("<a hidefocus='true' class='" + aE + " " + +K + " " + x + "BtnStyle' " + aX + " " + s + ">");
                aA.push("<span " + v + ">" + aD + "</span>\n");
                aA.push("</a>")
            }
            aA.push("</div>")
        }
        if (ak == "true" && u == 2) {
            if (u == 2) {
                aE = "fk_second_mallBuy"
            }
            aA.push("<div style='display: inline-block; bottom: 0; position: absolute;'>");
            aA.push("<div style='margin-left:9px;height:36px;line-height:36px;padding: 5px 0;width:" + (az - 20) + "px;" + al + ";text-overflow:ellipsis;white-space:nowrap;overflow:hidden;'>");
            aA.push("<a hidefocus='true' class='" + aE + " " + +K + " " + x + "BtnStyle' " + aX + " " + s + ">");
            aA.push("<span " + v + ">" + aD + "</span>\n");
            aA.push("</a>");
            aA.push("</div>")
        }
        aA.push("</div>");
        aj.find(".containerRight").append(aA.join(""));
        var a4 = aj.find(".smallPrePicSelected").parent().index();
        M.removeClass("bigPic-control-prev-disabled");
        h.removeClass("bigPic-control-next-disabled");
        r.removeClass("smallPic-control-prev-disabled");
        R.removeClass("smallPic-control-next-disabled");
        var aR = aj.find(".smallPicDownForms").find(".smallPrePicContainer");
        var a6 = parseInt(aR.css("left").replace("px"));
        var aS = Math.abs(a6) / S;
        var aK = aS + q - 1 > aa - 1 ? aa - 1 : aS + q - 1;
        var ax = aj.find(".smallPicDownFormsMid").width();
        var aF, ay;
        if (a4 == 0) {
            M.addClass("bigPic-control-prev-disabled");
            if (a6 == 0) {
                r.addClass("smallPic-control-prev-disabled")
            }
        }
        if (a4 == (aa - 1)) {
            h.addClass("bigPic-control-next-disabled");
            aF = aS;
            ay = aa - 1;
            if ((ay - aF + 1) * S <= ax && a6 >= (aa - q - 1) * S) {
                R.addClass("smallPic-control-next-disabled")
            }
        }
        aj.data("positionLeft", a6);
        aj.find("div.containerLeft").attr("productId", aT).attr("productName", aq.attr("productname")).attr("topClassName", aq.attr("classname")).attr("topSwitch", aq.attr("topswitch")).attr("id", "containerLeft_ProdsmallPic" + aT);
        if (u == 5 || u == 4 || u == 9) {
            var ar = $(".fk_fifth_mallBuy");
            var aC = $(".fk_fifth_mallBuy").width();
            ar.css({
                "line-height": aC + "px",
                height: aC + "px"
            });
            var aO = $(".fk_paramNewStyle5");
            var aJ = $(".fk_mallbuy5").height();
            var af = $(".smallPicUpFormsMid").find(".containerRight").height();
            var aN = 0;
            var aL = 0;
            $.each(aO, function (bb) {
                aL += $(aO[bb]).outerHeight(true)
            });
            aN = af - aL - aJ;
            $(".fk_mallbuy5").css({
                "margin-top": aN + "px"
            })
        }
    });
    y.eq(0).click()
};
Site.fixProductMallPosition = function (d, b, a) {
    var b = b || "";
    var a = a || "";
    var c = $("#module" + d).find("." + b);
    c.each(function () {
        var g = $(this).height();
        var e = $(this).find(".propList").find(".propDiv");
        var h = $(this).width() / 2;
        var f = $(this).find(".propList").find(".fifth_ProductName a").width();
        if (a == 2 || a == 3 || a == 5 || a == 9) {
            if ($(this).find(".propList").find(".paramNewStyle").length > 0) {
                $(this).find(".propList").find(".paramNewStyle").css({
                    "margin-top": "40px"
                })
            }
            if ($(this).find(".imgDiv").length > 0) {
                if ($(".productPicListForm").attr("faiwidth") < h) {
                    $(this).find(".imgDiv").css({
                        width: "50%"
                    })
                }
                $(this).find(".imgDiv").find("td").css({
                    "vertical-align": "middle"
                })
            }
            if ($(this).find(".propList").length > 0) {
                $(this).find(".propList").css({
                    "vertical-align": "middle"
                })
            }
        }
    })
};
Site.removeProductSmallPicMask = function (a) {
    $("#module" + a).find(".loadingImg").remove()
};
Site.loadProductSmallPicItem = function (d) {
    if (!d.attr("src")) {
        d.attr("src", d.attr("lzurl"))
    }
    var e = parseInt(d.attr("sWidth")),
        b = parseInt(d.attr("sHeight"));
    var a = e > b ? e : b;
    var c = e > b ? "width" : "height";
    if (a > 71) {
        d.css(c, 71)
    } else {
        d.css("width", e).css("height", b)
    }
    d.show()
};
Site.smallPicModuleFix = function (w) {
    var e = $("#" + w),
        g = e.find("div.productSmallPicBox");
    var n = e.find(".productSmallPicForms").width();
    var f = e.find(".smallPic_control").outerWidth(true);
    var d = n - f * 2 - e.find(".containerLeft").width();
    var b = d > 150 ? d : 150;
    e.find(".containerRight").width(b);
    e.find(".smallPicUpForms").css("width", n + "px");
    e.find(".smallPicDownForms").css("width", n + "px");
    var p = e.find(".smallPrePic_control").outerWidth(true);
    e.find(".smallPicDownFormsMid").css("width", n - 2 * p - 20 + "px");
    var t = e.find(".containerLeft").width() + e.find(".containerRight").width();
    $(".smallPicUpFormsMid").width(t);
    var l = e.find(".smallPrePicContainer");
    var a = $(".smallPrePicOuter").outerWidth(true);
    var x = 0;
    if (Fai.isIE6()) {
        x = 2
    }
    l.width(a * g.length + x);
    var h = l.width();
    var c = e.find(".smallPicDownFormsMid").width();
    var u = g.length;
    var m = Math.floor(c / a) + 1;
    var v = u % m == 0 ? u / m : Math.floor(u / m) + 1;
    if (v == 1 && c < l.width()) {
        v = 2
    }
    var q = e.find(".smallPicDownForms .g_imgPrev"),
        r = e.find(".smallPicDownForms .g_imgNext"),
        i = e.find(".smallPicUpForms .g_control_prev"),
        k = e.find(".smallPicUpForms .g_control_next");
    if (v == 1) {
        q.addClass("smallPic-control-prev-disabled");
        r.addClass("smallPic-control-next-disabled")
    }
    var o = g.length < m ? g.length : m;
    for (var s = 0; s < o; s++) {
        var y = $(g[s]).find("img");
        if (!y.attr("src")) {
            Site.loadProductSmallPicItem(y)
        }
    }
    e.find(".smallPrePicSelected").click()
};
Site.productInfoSwitchClick = function (a, g) {
    var f = 1,
        e = 1,
        c, d;
    d = $("#pdInfoSwitchTable");
    d.find(".tabSwitch").removeClass("selected fk-mainBorderColor fk-mainFontColor");
    d.find(".tabSwitch div").removeClass("pdNoBottomBorder");
    d.find(".J_tabTitleWrap").removeClass("f-tabTitleWrap f-tabTitleWrap2");
    if (g) {
        f = 0;
        e = 0;
        $("#pdInfoSwitchTable .J_paramBorder").show()
    } else {
        $("#pdInfoSwitchTable .tabSwitch:last").css({
            "border-right-width": f + "px"
        });
        $("#pdInfoSwitchTable .tabSwitch").css({
            "border-left-width": e + "px"
        })
    }
    var b = 0;
    if (a == "comm") {
        c = $("#accComSwitch");
        $("#msgBoardCaptchaImg").attr({
            src: "validateCode.jsp?" + Math.random() * 1000
        });
        c.addClass("selected");
        $(".selected div").addClass("pdNoBottomBorder");
        if (g) {
            c.addClass("fk-mainBorderColor fk-mainFontColor")
        }
        $("#detailedDesc").hide();
        $("#saleRecordPanel").hide();
        $("#accumulativeComment").show();
        if (g) {
            c.prev(".J_paramBorder ").hide();
            c.next(".J_paramBorder ").hide();
            if (c.index(".tabSwitch") == 0) {
                c.find(".J_tabTitleWrap").addClass("f-tabTitleWrap2")
            } else {
                c.find(".J_tabTitleWrap").addClass("f-tabTitleWrap")
            }
        } else {
            c.next().css({
                "border-left-width": "0"
            })
        }
        $("#pdInfoSwitchTable .tabSwitch").each(function (h) {
            if ($(this).attr("id") == "accComSwitch") {
                b = h;
                return true
            }
        })
    } else {
        if (a == "detail") {
            c = $("#detDescSwitch");
            c.addClass("selected");
            $(".selected div").addClass("pdNoBottomBorder");
            if (g) {
                c.addClass("fk-mainBorderColor fk-mainFontColor")
            }
            $("#accumulativeComment").hide();
            $("#saleRecordPanel").hide();
            $("#detailedDesc").show();
            if (g) {
                c.prev(".J_paramBorder ").hide();
                c.next(".J_paramBorder ").hide();
                if (c.index(".tabSwitch") == 0) {
                    c.find(".J_tabTitleWrap").addClass("f-tabTitleWrap2")
                } else {
                    c.find(".J_tabTitleWrap").addClass("f-tabTitleWrap")
                }
            } else {
                c.next().css({
                    "border-left-width": "0"
                })
            }
            $("#pdInfoSwitchTable .tabSwitch").each(function (h) {
                if ($(this).attr("id") == "detDescSwitch") {
                    b = h;
                    return true
                }
            })
        } else {
            if (a == "sale") {
                c = $("#saleRecordSwitch");
                c.addClass("selected");
                $(".selected div").addClass("pdNoBottomBorder");
                if (g) {
                    c.addClass("fk-mainBorderColor fk-mainFontColor")
                }
                $("#accumulativeComment").hide();
                $("#detailedDesc").hide();
                $("#saleRecordPanel").show();
                if (g) {
                    c.prev(".J_paramBorder ").hide();
                    c.next(".J_paramBorder ").hide();
                    if (c.index(".tabSwitch") == 0) {
                        c.find(".J_tabTitleWrap").addClass("f-tabTitleWrap2")
                    } else {
                        c.find(".J_tabTitleWrap").addClass("f-tabTitleWrap")
                    }
                } else {
                    c.next().css({
                        "border-left-width": "0"
                    })
                }
                $("#pdInfoSwitchTable .tabSwitch").each(function (h) {
                    if ($(this).attr("id") == "saleRecordSwitch") {
                        b = h;
                        return true
                    }
                })
            }
        }
    }
    document.cookie = "tabSwitch=" + b;
    Fai.refreshClass($("body"))
};
Site.initModuleProductCommentItemManage = function (b, a) {
    Fai.top.$("#" + b).mouseover(function () {
        Site.addEditLayer(b, a, 1)
    }).mouseleave(function () {
        Site.removeEditLayer(b)
    })
};
Site.siteCommImgFileUpload = function (b, d, f, a, g) {
    var e = f.split(",");
    var c = {
        file_post_name: "Filedata",
        upload_url: "/ajax/commUpsiteimg_h.jsp",
        button_placeholder_id: d,
        file_size_limit: b + "MB",
        button_image_type: 3,
        file_queue_limit: a,
        button_width: "50px",
        button_height: "50px",
        button_cursor: SWFUpload.CURSOR.HAND,
        button_image_url: _resRoot + "/image/site/msgUpImg/upload1.jpg",
        requeue_on_error: false,
        post_params: {
            ctrl: "Filedata",
            app: 21,
            type: 0,
            fileUploadLimit: 5,
            isSiteForm: true
        },
        file_types: e.join(";"),
        file_dialog_complete_handler: function (h) {
            this._allSuccess = false;
            this.startUpload()
        }, file_queue_error_handler: function (i, h, j) {
            switch (h) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                    Fai.ing(LS.siteFormSubmitCheckFileSizeErr, true);
                    break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                    Fai.ing(LS.siteFormSubmitFileUploadNotAllow, true);
                    break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadOneTimeNum, a), true);
                    break;
                default:
                    Fai.ing(LS.siteFormSubmitFileUploadReSelect, true);
                    break
            }
        }, upload_success_handler: function (i, h) {
            var j = jQuery.parseJSON(h);
            this._allSuccess = j.success;
            this._sysResult = j.msg;
            if (j.success) {
                Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSucess, Fai.encodeHtml(i.name)), true);
                onFileUploadEvent("upload", j)
            } else {
                Fai.ing(LS.siteFormSubmitFileUploadFile + i.name + "   " + j.msg)
            }
        }, upload_error_handler: function (i, h, j) {
            if (h == -280) {
                Fai.ing(LS.siteFormSubmitFileUploadFileCancle, false)
            } else {
                if (h == -270) {
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadFileExist, Fai.encodeHtml(i.name)), true)
                } else {
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSvrBusy, Fai.encodeHtml(i.name)))
                }
            }
        }, upload_complete_handler: function (i) {
            if (i.filestatus == SWFUpload.FILE_STATUS.COMPLETE) {
                if (a == null || typeof (a) == "undefined") {
                    a = 5
                }
                var j = $("#msgBoardAddImgTb").eq(0);
                var h = j.find("td").length;
                if (h >= (a + 1)) {
                    Fai.ing(LS.siteFormSubmitFileUploadOfMax, true);
                    var k = j.find("td").eq(j.find("td").length - 1);
                    k.css("display", "none");
                    return
                }
                setTimeout(function () {
                    swfObj.startUpload()
                }, swfObj.upload_delay)
            } else {
                if (i.filestatus == SWFUpload.FILE_STATUS.ERROR) {
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSvrBusy, Fai.encodeHtml(i.name)))
                }
            }
        }, upload_start_handler: function (h) {
            Fai.enablePopupWindowBtn(0, "save", false);
            Fai.ing(LS.siteFormSubmitFileUploadPrepare, false)
        }, view_progress: function (h, k, j, i) {
            Fai.ing(LS.siteFormSubmitFileUploadIng + i + "%", false)
        }
    };
    if (g) {
        c.button_image_url = _resRoot + "/image/site/msgUpImg/add.png"
    }
    swfObj = SWFUploadCreator.create(c);
    onFileUploadEvent = function (p, m) {
        if (p == "upload") {
            var j = m.id;
            var o = m.name;
            var l = m.size;
            var k = m.path;
            var q = m.pathSmall;
            var i = m.fileId;
            var h = m.width;
            var n = m.height;
            Site.productCommImgTableCtrl(q, o, j, l, a, i, g)
        }
    }
};
Site.commUpAllImgList = null;
Site.setCommUpAllImgList = function (a) {
    Site.commUpAllImgList = Fai.fkEval("(" + a + ")");
    if (Fai.isIE6() || Fai.isIE7()) {
        $(".msgBoard_upImg_border").css({
            width: "50px",
            height: "50px"
        })
    }
    $(function () {
        setTimeout(function () {
            var c = $(".J_countRecSize");
            if (typeof (c) != "undefined" && c != null) {
                for (var e = 0; e < c.length; e++) {
                    var f = c[e];
                    var d = f.getBoundingClientRect().right;
                    var g = $(f).parent().parent().parent().parent().find(".msgBoard_msgUser_level");
                    if (typeof (g) != "undefined" && g != null && g.width() != null) {
                        var b = g[0].getBoundingClientRect().left;
                        var h = b - d - 5;
                        g.css("margin-left", "-" + h + "px")
                    }
                }
            }
        }, 200)
    })
};
Site.productCommImgTableCtrl = function (l, a, b, i, c, d, e) {
    var j = $("#msgBoardAddImgTb").eq(0);
    var k = j.find("td").length;
    var g = j.find("td").eq(k - 1),
        f = (k) + "/" + c;
    if (e) {
        f = "还可上传" + (c - k) + "张图片,每张不超过5M，支持格式jpg，jpeg，bmp，png，gif"
    }
    g.find(".msgBoard_showImgCount").html(f);
    var h = [];
    h.push("<td class='msgBoard_upImg_tb_td2'>");
    if (Fai.isIE6() || Fai.isIE7()) {
        h.push("<div class='msgBoard_upImg_border' style='width:50px !important;height:50px !important;'>")
    } else {
        h.push("<div class='msgBoard_upImg_border'>")
    }
    h.push("<span onclick='Site.productCommImgDelete(this)' class='msgBoard_upImgTop_set'/>");
    if (Fai.isIE6() || Fai.isIE7()) {
        h.push("<div><p><img alt='' class='msgBoard_upImg_set' src='" + l + "' _name='" + a + "' _id='" + b + "' _file_size='" + i + "' _file_id='" + d + "'></p></div>")
    } else {
        h.push("<div><p><img alt='' class='msgBoard_upImg_set' src='" + l + "' _name='" + a + "' _id='" + b + "' _file_size='" + i + "' _file_id='" + d + "' style='margin-left:-1px;'></p></div>")
    }
    h.push("</div>");
    h.push("</td>");
    g.before(h.join(""))
};
Site.productCommImgDelete = function (a) {
    var d = $("#msgBoardAddImgTb").eq(0);
    var b = d.find("td").length;
    for (var c = 0; c < b; c++) {
        if (d.find("td").eq(c).find(".msgBoard_upImgTop_set")[0] === a) {
            d.find("td").eq(c).remove();
            break
        }
    }
    b = d.find("td").length;
    var e = d.find("td").eq(b - 1);
    e.find(".msgBoard_showImgCount").html((b - 1) + "/" + e.attr("maxNum"));
    if (b <= e.attr("maxNum")) {
        if (Fai.isIE6() || Fai.isIE7()) {
            e.css({
                display: "block",
                "padding-top": "7px"
            })
        } else {
            if (Fai.isIE()) {
                e.css({
                    display: "block",
                    "padding-top": "8px"
                })
            } else {
                e.css({
                    display: "block",
                    "padding-top": "10px"
                })
            }
        }
    }
};
Site.showCommImgList = function (k, o, c, h, b, j) {
    var e = $("#" + c),
        g = (typeof j == "number" && j == 5);
    if (e != null && typeof (e) != "undefined") {
        e.remove()
    }
    var n = $("#" + k);
    var f = n.parent().parent().parent().parent().parent().parent().parent();
    f.attr("chooseTr", h);
    f.attr("chooseTd", b);
    var d = f.find("td");
    d.find(".show_msg_border_rect").remove();
    var m = "<div class='show_msg_border_rect'><div class='show_msg_triangle_down'></div></div>";
    d.eq(b).prepend(m);
    var a = [];
    a.push("<div id='" + c + "' class='show_msg_outer_div'>");
    a.push("<span onclick=Site.commShowPicClose('" + c + "','" + k + "'," + g + ") class='msg_close_show_img_icon'/>");
    if (Fai.isIE6() || Fai.isIE7()) {
        a.push("<div class='show_msg_bordered_div' style='width:298px !important;'></div>");
        a.push("<div class='show_msg_border_div' style='width:299px !important;'>")
    } else {
        a.push("<div class='show_msg_bordered_div' style='width:299px;'></div>");
        a.push("<div class='show_msg_border_div' style='margin-left:1px;'>")
    }
    a.push("<div><p><img alt='' class='msg_up_show_img_set' src='" + o + "'></p></div>");
    a.push("</div>");
    a.push("</div>");
    f.after(a.join(""));
    if (!g) {
        setTimeout(function () {
            $("#" + c).hover(function () {
                l()
            }, function () {
                var p = $("#" + c);
                if (Fai.isIE7()) {
                    setTimeout(function () {
                        p.find("#J_showCommPicMoveSign").remove()
                    }, 500)
                } else {
                    p.find("#J_showCommPicMoveSign").remove()
                }
            })
        }, 10)
    } else {
        f.hide();
        i()
    }

    function l() {
        var p = $("#" + c);
        if (p.find("#J_showCommPicMoveSign").attr("class") == null || typeof (p.find("#J_showCommPicMoveSign").attr("class")) == "undefined") {
            var q = [];
            q.push("<div id='J_showCommPicMoveSign'>");
            q.push("<img alt='' class='showCommPicMoveLeftClickArea' onclick=Site.showCommImgMove('" + k + "','" + c + "','left')>");
            q.push("<img alt='' src='" + _resRoot + "/image/site/msgUpImg/mLeft.png' onclick=Site.showCommImgMove('" + k + "','" + c + "','left') class='showCommPicMoveLeft'>");
            q.push("<img alt='' class='showCommPicMoveRightClickArea' onclick=Site.showCommImgMove('" + k + "','" + c + "','right')>");
            q.push("<img alt='' src='" + _resRoot + "/image/site/msgUpImg/mRight.png' onclick=Site.showCommImgMove('" + k + "','" + c + "','right') class='showCommPicMoveRight'>");
            q.push("</div>");
            p.prepend(q.join(""))
        }
    }

    function i() {
        var p = $("#" + c);
        if (p.find("#J_showCommPicMoveSign").attr("class") == null || typeof (p.find("#J_showCommPicMoveSign").attr("class")) == "undefined") {
            var q = [];
            q.push("<div id='J_showCommPicMoveSign' class='fk-commPicAreaPage'>");
            q.push("<div class='f-pageLeft' onclick=\"Site.showCommImgMove('" + k + "','" + c + "','left');\"></div>");
            q.push("<div class='f-pageRight' onclick=\"Site.showCommImgMove('" + k + "','" + c + "','right')\";></div>");
            q.push("</div>");
            p.prepend(q.join(""))
        }
    }
};
Site.showCommImgMove = function (g, a, f) {
    if (g == null || f == null) {
        return
    }
    var i = $("#" + g);
    var c = i.parent().parent().parent().parent().parent().parent().parent();
    currentChooseTr = c.attr("chooseTr");
    currentChooseTd = c.attr("chooseTd");
    if (currentChooseTr == null || currentChooseTd == null) {
        return
    }
    if (Site.commUpAllImgList == null) {
        return
    }
    var b = c.find("td");
    var e = parseInt(b.length);
    if (e <= 1) {
        return
    }
    var j = 0;
    if (f == "left") {
        if (currentChooseTd == "0" || currentChooseTd == 0) {
            j = e - 1
        } else {
            j = parseInt(currentChooseTd) - 1
        }
    } else {
        if (f == "right") {
            j = parseInt(currentChooseTd) + 1;
            if (j >= Site.commUpAllImgList[currentChooseTr].data.length) {
                j = 0
            }
        }
    }
    b.eq(currentChooseTd).find(".show_msg_border_rect").remove();
    var h = "<div class='show_msg_border_rect'><div class='show_msg_triangle_down'></div></div>";
    b.eq(j).prepend(h);
    c.attr("chooseTd", j);
    var d = $("#" + a).find(".msg_up_show_img_set").parent();
    $("#" + a).find(".msg_up_show_img_set").remove();
    d.append("<img alt='' class='msg_up_show_img_set' src='" + Site.commUpAllImgList[currentChooseTr].data[j].data + "'>")
};
Site.commShowPicClose = function (c, b, f) {
    var a = $("#" + c),
        e;
    if (a != null && typeof (a) != "undefined") {
        a.remove()
    }
    var d = $("#" + b);
    if (!f) {
        e = d.parent().parent().parent().parent().parent().parent().parent()
    } else {
        e = d.parentsUntil(".J_msgImgList").last(":table");
        e.show()
    }
    e.find("td").find(".show_msg_border_rect").remove()
};
Site.productCommentAddCom = function (l) {
    if (_siteDemo) {
        Fai.ing("当前为“模板网站”，请先“复制网站”再进行评论。");
        return
    }
    if (_manageMode && typeof l == "string" && l == "5") {
        Fai.ing("当前为管理状态，您不能提交评论。");
        return
    }
    var k = $.trim($("#productCommentCreator").val());
    var p = $("#productCommentCreator").attr("minlength");
    var b = $("#productCommentInput").val();
    var h = $("#productCommentInput").attr("minlength");
    var f = $("#validateCodeInput").val();
    var q = $("#productCommentInput").attr("productId");
    var e = $("#submitTips").attr("isDefaultTips");
    if (typeof (e) == "string" && e == "true") {
        $("#submitTips").show();
        return
    }
    if (typeof (k) != "string") {
        $("#submitTips").text(LS.creatorTips).show();
        return
    }
    if (typeof (b) != "string" || "" == b) {
        $("#submitTips").text(LS.commentNotEmpty).show();
        return
    }
    if (b.length < h) {
        $("#submitTips").text(Fai.format(LS.commentLenTips, Fai.encodeHtml(h))).show();
        return
    }
    if (typeof (f) != "string" || "" == f) {
        $("#submitTips").text(LS.memberInputCaptcha).show();
        return
    }
    var n = $("#msgBoardAddImgTb");
    var g = [];
    if (n != null && typeof (n) != "undefined") {
        var a = n.eq(0);
        var d = a.find("td").length;
        if (d > 1) {
            for (var s = 0; s < (d - 1); s++) {
                var c = a.find("td").eq(s).find(".msgBoard_upImg_set");
                if (c != null && c != "undefined") {
                    var u = {};
                    var r = c.attr("_id");
                    var w = c.attr("_name");
                    var m = c.attr("_file_size");
                    var o = c.attr("_file_id");
                    u.imgId = r;
                    u.imgName = w;
                    u.imgSize = m;
                    u.tempFileId = o;
                    g.push(u)
                }
            }
        }
    }
    var v = $(".submitStarList").attr("star");
    if (!v) {
        v = 5
    }
    var j = {
        validateCode: f,
        productId: q,
        creator: k,
        commImgList: $.toJSON(g),
        comment: b,
        star: v
    };
    var t = "ajax/productComment_h.jsp?cmd=submitPC";
    $("#submitTips").text(LS.siteFormSubmitIng).show();
    $.ajax({
        type: "POST",
        url: t,
        data: j,
        error: function () {
            Fai.ing(LS.systemError);
            $("#msgBoardCaptchaImg").click()
        }, success: function (i) {
            var x = jQuery.parseJSON(i);
            if (!x || !x.success) {
                $("#msgBoardCaptchaImg").click()
            }
            Fai.removeBg();
            switch (x.msg) {
                case 1:
                    $("#submitTips").text(LS.captchaError).show();
                    break;
                case 2:
                    $("#submitTips").text(LS.creatorError).show();
                    break;
                case 3:
                    $("#submitTips").text(LS.commentError).show();
                    break;
                case 4:
                    Fai.top.location.reload();
                    $("#submitTips").text(LS.submitSuccess).show();
                    break;
                case 5:
                    $("#submitTips").text(LS.paramError).show();
                    break;
                case 6:
                    $("#submitTips").html(Fai.format(LS.commentOnlyMember, '<a href="login.jsp?url=' + Fai.encodeUrl(window.location.href) + '">' + Fai.encodeHtml(LS.login) + "</a>")).show();
                    break;
                case 7:
                    $("#submitTips").text(LS.commentClosed).show();
                    break;
                case 8:
                    $("#submitTips").text(LS.commentSubmitError).show();
                    break;
                case 9:
                    $("#submitTips").text(LS.commentCountLimit).show();
                    break;
                default:
            }
        }
    })
};
Site.showProductQRCode = function (c, a) {
    var b = ["<div id='productQRCodeDisplay' class='webSiteQRCodeDisplay'>", "<img title='' src='/qrCode.jsp?cmd=mobiDetailQR&&id=", c, "&lcid=", a, "&t=2' >", "<span>", LS.productORCodeMsg, "</span>", "</div>"];
    Fai.top.$(b.join("")).appendTo("body");
    $("#productQrCode").mouseenter(function (d) {
        $("#productQRCodeDisplay").css("top", $(this).offset().top + "px");
        $("#productQRCodeDisplay").css("left", ($(this).offset().left + 24) + "px");
        $("#productQRCodeDisplay").show()
    }).mouseleave(function (d) {
        $("#productQRCodeDisplay").hide()
    })
};
Site.initRepPropValueOfURL = function () {
    var a = new RegExp("https?|ftp|file://");
    $(".pd_J .propValue").each(function (b, d) {
        var c = $(this).text();
        if (a.test(c)) {
            $(this).html(Fai.replaceContentOfURL(c))
        }
    })
};
Site.salePromotionDetail = {
    salePromotionParam: "",
    showType: "2",
    styleType: "1",
    saleCountTimeInterval: {}
};
Site.initSalePromotion = function (b, a) {
    Site.salePromotionDetail.salePromotionParam = b;
    Site.salePromotionDetail.styleType = a
};
Site.onlyChangeSalePrice = function (b) {
    b = parseFloat(b);
    if (isNaN(b)) {
        return
    }
    var c = Site.salePromotionDetail.salePromotionParam;
    if (typeof (c) == "undefined" || c == null || c == "") {
        return
    }
    if (c.saleType == "1") {
        var a = parseFloat(c.other.ruleData.d[0].m);
        if (c.other.ruleData.s == "1") {
            b = b * (a / 10)
        } else {
            b = b - a
        } if (b < 0) {
            b = 0
        }
        $(".J_realMallAmount").html(b.toFixed(2))
    }
};
Site.showSalePromotionDl = function (q, o) {
    if (Site.salePromotionDetail.showType != "2") {
        return
    }
    if (typeof (q) == "undefined" || q == null || q == "") {
        return
    }
    var g = $("#realMallAmount").css("color");
    if (typeof (g) == "undefined" || g == null || g == "") {
        g = "#FC4643"
    }
    var c = $(".J_saleFullReduce").find(".propName").attr("style") || "";
    var k = [];
    var p = "f-saleValue";
    if (q.saleType == "1") {
        var n = "";
        var f = parseFloat(q.other.ruleData.d[0].m);
        var b = $(".J_saleFullReduce").find(".propName").html();
        var m = $("#realMallAmount").html();
        var j = m.indexOf("~");
        if (j > 0) {
            priceNumber = parseFloat(m.substring(0, j))
        } else {
            priceNumber = parseFloat(m);
            m = parseFloat(m).toFixed(2)
        } if (isNaN(priceNumber)) {
            priceNumber = 0
        }
        var a = 0;
        var l = $("#realMallAmount").attr("curval");
        if (q.other.ruleData.s == "1") {
            if (_lcid == 2052 || _lcid == 1028) {
                n = Fai.format(LS.salePromotionDisCount, f)
            } else {
                n = Fai.format(LS.salePromotionDisCount, 10 * (10 - f))
            }
            a = priceNumber * (f / 10)
        } else {
            n = Fai.format(LS.salePromotionLapse, f);
            a = priceNumber - f
        } if (isNaN(a) || a < 0) {
            a = 0
        }
        $("#realMallAmount").html(a.toFixed(2));
        $("#realMallAmount").addClass("J_realMallAmount");
        $("#realMallAmount").removeAttr("id");
        $(".J_saleFullReduce").addClass("J_salePromotionRemove");
        var e = [];
        if (o == 4) {
            $(".J_saleFullReduce").find(".propName").html(LS.promotionPrice);
            e.push("<tr>");
            e.push("<td valign='top' class='propName g_minor' style='" + c + "'>");
            e.push(b);
            e.push("</td>");
            e.push("<td valign='top' class='propColon'>");
            e.push(LS.colon);
            e.push("</td>");
            e.push("<td valign='top' class='propValue g_minor mallMarketPrice realMallAmount'>");
            e.push("<span>");
            e.push(l);
            e.push("</span>");
            e.push("<span curval='" + l + "' id='realMallAmount' class='mallPrice'>");
            e.push(m);
            e.push("</span>");
            e.push("</td>");
            e.push("</tr>")
        } else {
            $(".J_saleFullReduce").find(".propName").html(LS.promotionPrice + LS.colon);
            e.push("<tr>");
            e.push("<td valign='top' class='propName g_minor' style='" + c + "'>");
            e.push(b);
            e.push("</td>");
            e.push("<td valign='top' class='propValue g_minor mallMarketPrice realMallAmount'>");
            e.push("<span>");
            e.push(l);
            e.push("</span>");
            e.push("<span curval='" + l + "' id='realMallAmount' class='mallPrice'>");
            e.push(m);
            e.push("</span>");
            e.push("</td>");
            e.push("</tr>")
        }
        $(".J_saleFullReduce").before(e.join(""));
        var d = "";
        if ((o == 1 || o == 2 || o == 3) && Fai.isIE6()) {
            d = "padding-bottom:10px; margin:0px; line-height:25px;"
        }
        k.push("<td class='saleHoverDefault showSaleReducePrice J_salePromotionRemove' style='" + d + "'>");
        k.push("<table border='0' cellspacing='0' cellpadding='0'><tr>");
        k.push("<td style='vertical-align: bottom;padding:0;margin:0;'>");
        k.push("<div  style='width: 0; height: 0; border-bottom: 5px solid " + g + "; border-left: 5px solid transparent;' class='J_changeSaleCrBb'>");
        k.push("</div>");
        k.push("</td>");
        k.push("<td style='vertical-align:bottom; padding:0; margin:0;width:auto;height:auto;'>");
        k.push("<div style='font-size:12px; background-color:" + g + "; padding:0px 3px; word-wrap: normal; height:20px; line-height:20px;'  class='J_changeSaleCrBd' title='" + q.name + "'>");
        k.push(n);
        k.push("</div>");
        k.push("</td>");
        k.push("</tr></table>");
        k.push("</td>");
        $(".J_realMallAmount").parent().after(k.join(""))
    } else {
        if (typeof (q.other.ruleData.d.length) == "undefined") {
            return
        }
        k.push("<tr class='J_salePromotionRemove fk-changeSaleCrW saleFullCutPding'>");
        if (o == 4) {
            k.push("<td valign='top' class='propName g_minor' style='" + c + "'>");
            k.push(LS.salePromotionName);
            k.push("</td>");
            k.push("<td valign='top' class='propColon'>");
            k.push(LS.colon);
            k.push("</td>")
        } else {
            k.push("<td valign='top' class='propName g_minor' style='" + c + "'>");
            k.push(LS.salePromotionName + LS.colon);
            k.push("</td>")
        }
        k.push("<td valign='top' class='saleHoverDefault propValue J_changeSaleCrW' colSpan=2 style='color:" + g + ";'  title='" + q.name + "' >");
        if (o != 5) {
            for (var h = 0; h < q.other.ruleData.d.length; h++) {
                if (h > 0) {
                    k.push("<div class='saleFullReMgTop'>")
                } else {
                    k.push("<div>")
                }
                k.push("<span class='saleFullReBg J_changeSaleCrBd' style='margin:0;background-color:" + g + ";'>");
                k.push(Fai.format(LS.salePromotionOnlyFullReduce));
                k.push("</span>");
                k.push("<span style='margin:0; margin-left:8px;'>");
                k.push(Fai.format(LS.salePromotionFullReduce, q.other.ruleData.d[h].m, q.other.ruleData.d[h].n));
                k.push("</span>");
                k.push("</div>")
            }
        } else {
            k.push("<div>");
            for (var h = 0; h < q.other.ruleData.d.length; h++) {
                p = (h == 0) ? "" : "f-saleValue";
                k.push("<span class='saleFullReBg J_changeSaleCrBd fk-mainBgColor " + p + "'>");
                k.push(Fai.format(LS.salePromotionOnlyFull));
                k.push("</span>");
                k.push("<span class='f-saleDiscount'>");
                k.push(Fai.format(LS.salePromotionFullReduce, q.other.ruleData.d[h].m, q.other.ruleData.d[h].n));
                k.push("</span>")
            }
            k.push("</div>")
        }
        k.push("</td>");
        k.push("</tr>");
        $(".J_saleFullReduce").after(k.join(""))
    }
};
Site.changeSaleColor = function () {
    var a = Site.getTopWindow().$(".J_realMallAmount").css("color");
    if (typeof (a) == "undefined" || a == null || a == "") {
        a = Site.getTopWindow().$("#realMallAmount").css("color");
        if (typeof (a) == "undefined" || a == null || a == "") {
            a = "#FC4643"
        }
    }
    Site.getTopWindow().$(".J_changeSaleCrBb").css("border-bottom-color", a);
    Site.getTopWindow().$(".J_changeSaleCrW").css("color", a);
    Site.getTopWindow().$(".J_changeSaleCrBd").css("background-color", a)
};
Site.saleCountTimeInterval = {};
Site.showSaleTimeCountDown = function (b, f, d, e) {
    var h = "";
    var c = LS.salePromotionBegin;
    var g = LS.salePromotionEnd;
    var a = 0;
    Site.salePromotionDetail.showType = d;
    if (d == 1) {
        h = c;
        a = b
    } else {
        h = g;
        a = f
    }
    clearInterval(Site.salePromotionDetail.saleCountTimeInterval);
    Site.salePromotionDetail.saleCountTimeInterval = setInterval(function () {
        var q = parseInt(a / (3600 * 24));
        var o = parseInt(a / 3600) - (q * 24);
        var m = parseInt(a / 60) - (q * 24 * 60) - (o * 60);
        var p = parseInt(a % 60);
        if (_lcid != 2052 && _lcid != 1028) {
            if (o < 10) {
                o = "0" + o
            }
            if (m < 10) {
                m = "0" + m
            }
            if (p < 10) {
                p = "0" + p
            }
        }
        a--;
        var j = Fai.format(h, q, o, m, p);
        if (e == 2 || e == 3) {
            var l = j.indexOf(":");
            if (l < 0) {
                l = j.indexOf("：")
            }
            if (l > 0) {
                var n = j.substring(0, l + 1);
                var k = j.substring(l + 1, j.length);
                $(".showSaleTimeNameClass").html(n);
                $(".showSaleTimeClass").html(k)
            } else {
                $(".showSaleTimeClass").html(Fai.format(h, q, o, m, p))
            }
        } else {
            $(".showSaleTimeClass").text(j)
        } if (a < 0) {
            if (d == 1) {
                a = f;
                h = g;
                d = 2;
                Site.salePromotionDetail.showType = 2;
                Site.showSalePromotionDl(Site.salePromotionDetail.salePromotionParam, Site.salePromotionDetail.styleType)
            } else {
                clearInterval(Site.salePromotionDetail.saleCountTimeInterval);
                Site.salePromotionDetail.showType = 1;
                var i = $(".J_realMallAmount").attr("style");
                $(".realMallAmount").removeClass("g_minor mallMarketPrice");
                $(".realMallAmount").addClass("g_stress mallPriceBig");
                $(".realMallAmount").attr("style", i);
                $(".J_salePromotionRemove").remove()
            }
        }
    }, 1000)
};
Site.initModuleProductMallGroups = function (a, d, g, e) {
    var b = $("#module" + a),
        h = b.find(".pd_mall_G_J .p_m_cotainer_J");
    var c = false;
    if (typeof b.find(".pd_mall_G_J").menuAim == "function") {
        k()
    }

    function k() {
        b.find(".pd_mall_G_J").menuAim({
            rowSelector: " .p_m_cotainer_J",
            activate: j,
            deactivate: i,
            exitActRow: function () {
                return true
            }
        })
    }

    function j(y) {
        var K = $(y);
        K.find(".p_m_cotainerR_J").removeClass("p_m_more");
        K.find(".p_m_value_J").addClass("g_stress");
        K.addClass("bold p_m_hover g_border");
        var C = K.attr("_id"),
            u = d[C];
        if (u == null || u.list.length === 0) {
            return true
        }
        var H = f(u);
        var r = {
            that: K,
            moduleId: a,
            clsStr: "pd_m_panel " + (g === 1 || g === 2 ? "pd_m_jd" : "pd_m_yhd"),
            idStr: "group" + C + "Panel",
            contentStr: H.join("")
        };
        panel = Site.moduleSubPanel(r);
        var m = b.find(".formBanner"),
            N = 0;
        if (m.length > 0 && m.is(":visible")) {
            N = m.outerHeight()
        }
        var z = b.find(".formMiddleRight").outerWidth();
        if (Fai.isIE8()) {
            z = 0
        }
        var o = b.find(".formMiddleCenter").width(),
            s = b.find(".pd_mall_G_J").width(),
            M = b.offset().top + N,
            q = b.offset().left + b.outerWidth() - ((o - s) / 2) - 2 - z;
        panel.css({
            top: M,
            left: q
        }).show();
        if (Fai.isIE6()) {
            var O = panel.find(".p_m_body_J").outerWidth();
            panel.width(O)
        }
        var x = 0,
            l = 0,
            I = K.outerHeight() - K.innerHeight();
        m_border = parseInt((b.outerHeight() - b.innerHeight()) / 2);
        oFormMiddle = b.find(".formMiddle"), m_content_innerPaddingTopStr = oFormMiddle.find(".formMiddleContent").css("margin-top"), m_content_innerPaddingTop = parseInt(m_content_innerPaddingTopStr.replace("px", ""));
        if (g === 2) {
            var w = 20,
                D = K.outerHeight(),
                p = panel.outerHeight(),
                B = $(window).height(),
                F = K.offset().top - $(window).scrollTop(),
                v = B - F,
                G = 0;
            if (v < p) {
                G = p - v + w
            }
            if (G > K.position().top) {
                G = K.position().top
            }
            if (D < p && G + D > p) {
                G = p - v
            }
            var A = oFormMiddle.height(),
                J = parseInt((oFormMiddle.outerHeight() - oFormMiddle.innerHeight()) / 2);
            M += K.position().top - G + m_border + J + m_content_innerPaddingTop;
            panel.css({
                top: M
            });
            l = G + I / 2;
            x = D > p ? p - 4 : K.outerHeight() - I
        } else {
            var L = b.find(".formMiddleContent").offset().top - b.find(".formMiddleCenter").offset().top,
                E = K.position().top + K.outerHeight() + L,
                n = panel.outerHeight();
            if (n - 5 < E) {
                var t = panel.find(".p_m_body_J");
                t.height(E)
            }
            l = K.position().top + I / 2 + m_border + m_content_innerPaddingTop;
            x = K.outerHeight() - I
        }
        $(panel).find(".p_m_cover_J").css({
            top: l,
            height: x
        })
    }

    function i(m) {
        var l = $(m);
        Fai.top.$(".g_m_s_J").each(function () {
            var n = $(this);
            if (n.length != 1) {
                return
            }
            n.remove()
        });
        l.removeClass("bold p_m_hover g_border");
        l.find(".p_m_value_J").removeClass("g_stress");
        if (l.attr("_chd") == 1) {
            l.find(".p_m_cotainerR_J").addClass("p_m_more")
        }
    }

    function f(l) {
        var n = [];
        n.push("<div class='p_m_cover p_m_cover_J'></div>");
        n.push("<div class='" + (l.hasGrand ? "p_m_body2" : "p_m_body") + " g_border p_m_body_J'>");
        var m = "";
        if (e === 1) {
            m = "target='_blank'"
        }
        if (l.hasGrand) {
            if (g === 1 || g === 2) {
                $.each(l.list, function (o, p) {
                    if (e !== 1 && _manageMode) {
                        m = "onclick=\"Site.redirectUrl('" + p._href + "', '_self', event, 1, 0);return false;\""
                    }
                    n.push("<dl>");
                    n.push("<dt><a class='g_stress' href='" + p._href + "' " + m + ">" + Fai.encodeHtml(p.name) + "</a></dt>");
                    n.push("<dd>");
                    $.each(p.children, function (q, r) {
                        if (e !== 1 && _manageMode) {
                            m = "onclick=\"Site.redirectUrl('" + r._href + "', '_self', event, 1, 0);return false;\""
                        }
                        n.push("<a href='" + r._href + "' " + m + " title='" + Fai.encodeHtml(r.name) + "'>" + Fai.encodeHtml(r.name) + "</a>")
                    });
                    n.push("</dd>");
                    n.push("</dl>");
                    n.push("<div class='p_m_sep'></div>")
                })
            } else {
                $.each(l.list, function (o, p) {
                    if (e !== 1 && _manageMode) {
                        m = "onclick=\"Site.redirectUrl('" + p._href + "', '_self', event, 1, 0);return false;\""
                    }
                    n.push("<dl>");
                    n.push("<dt><a class='g_stress' href='" + p._href + "' " + m + ">" + Fai.encodeHtml(p.name) + "</a></dt>");
                    $.each(p.children, function (q, r) {
                        if (e !== 1 && _manageMode) {
                            m = "onclick=\"Site.redirectUrl('" + r._href + "', '_self', event, 1, 0);return false;\""
                        }
                        n.push("<dd><a href='" + r._href + "' " + m + " title='" + Fai.encodeHtml(r.name) + "'>" + Fai.encodeHtml(r.name) + "</a></dd>")
                    });
                    n.push("</dl>");
                    if ((o + 1) % 3 == 0 || (o + 1) == l.list.length) {
                        n.push("<div class='p_m_sep'></div>")
                    }
                })
            }
        } else {
            $.each(l.list, function (o, p) {
                if (e !== 1 && _manageMode) {
                    m = "onclick=\"Site.redirectUrl('" + p._href + "', '_self', event, 1, 0);return false;\""
                }
                n.push("<a class='p_m_line g_stress' href='" + p._href + "' " + m + ">" + Fai.encodeHtml(p.name) + "</a>")
            })
        }
        n.push("</div>");
        return n
    }
};
Site.createImageEffectContent_product = function (h, n, i, c) {
    if (!c) {
        return
    }
    var k = {
        fwc: (n.wordType) ? n.fullmaskWordColor : "#fff",
        fwr: (n.wordType) ? n.fullmaskWordResize : 12,
        fws: (n.wordType) ? n.fullmaskWordStyle : "微软雅黑"
    };
    var f = $(h).find(".imageEffects");
    var l = $(h).attr("id");
    if (typeof l == "undefined") {
        var d = $(f).parents("." + i.targetParent).attr("productid");
        l = i.targetParent + d
    }
    var b = (n.effType == 5) ? ($(h).height() * 0.75) * 0.5 : ($(f).height() * 0.5);
    var e = $(f).width();
    var a = "";
    m();
    j();
    g();

    function m() {
        var r = [];
        var G = "";
        var u = "";
        var p = false;
        var o = 0;
        var D = "";
        var y = "";
        y += (n.effType == 5 ? "padding-top: 2.5%;" : "");
        y += (i.productTextCenter ? "text-align: center;" : "text-align: left;");
        var E = "<div class='props'><div class='propList g_specialClass' style='" + y + "'></div><div class='propBuy'></div></div>";
        $(f).append(E);
        if (i.targetParent == "productMarqueeForm") {
            l = l.replace("_clone", "")
        }
        for (var w in c) {
            if (c[w][l] != undefined) {
                r = jQuery.parseJSON(c[w][l]);
                u = c[w]["productName"];
                a = c[w]["productBuyBtnText"];
                p = c[w]["hasDiscount"];
                o = c[w]["tmpPropPrice"];
                D = c[w]["tmpPropName"];
                break
            }
        }
        var A = $(f).find(".props .propList");
        if (i.productNameShow) {
            $(A).append("<a href='javascript:;' onclick='return false;' class='fk_imgEffProductName imgEffPropName " + (i.productNameWordWrap ? "" : "noNameWrap") + "'>" + u + "</a>")
        }
        if (r.length > 0) {
            for (var w in r) {
                var q = r[w];
                var B = q.propName;
                var x = q.propValue;
                var s = q.type || -1;
                var t = q.allowed;
                var z = false;
                var C = "";
                if (s == 11 && p) {
                    B = D;
                    x = o;
                    z = true;
                    C = " g_stress"
                }
                if (!i.propNameShow && !z) {
                    B = ""
                } else {
                    B = "<span class='propName" + C + " fk-prop-name'>" + B + "：</span>"
                } if ($(A).height() < b) {
                    if ((s == 11 || s == 12) && t) {
                        if (s == 12) {
                            x = "<span class='effect_second_Marketprice fk-prop-marketprice'>" + Fai.top._choiceCurrencyVal + x + "</span>";
                            tempStr = B + x
                        } else {
                            x = "<span class='propValue  g_stress mallPrice fk-prop-price'>" + Fai.top._choiceCurrencyVal + x + "</span>";
                            tempStr = B + x
                        }
                    } else {
                        tempStr = B + x
                    }
                    $(A).append("<p class='prop'>" + tempStr + "</p>")
                } else {
                    var F = $(A).children().last();
                    if ($(F).width() < e) {
                        var v = $(A).children().last().html();
                        $(A).children().last().html(v + "...")
                    }
                    break
                }
            }
        }
        if (n.wordType) {
            $(f).find(".imgEffPropName").css({
                color: k.fwc,
                "font-size": k.fwr + "px",
                "font-family": k.fws
            })
        }
        $(f).find(".prop").css({
            color: k.fwc,
            "font-size": k.fwr + "px",
            "font-family": k.fws
        })
    }

    function j() {
        if (i.mallShowBuy) {
            var o = "<span>" + a + "</span>";
            $(f).find(".props .propBuy").append(o)
        } else {
            $(f).find(".props .propBuy").remove()
        }
    }

    function g() {
        $(f).find(".propBuy").bind("mouseenter", function () {
            $(this).addClass("propBuy_hover")
        }).bind("mouseleave", function () {
            $(this).removeClass("propBuy_hover")
        });
        if (Fai.isIE6() || Fai.isIE7()) {
            $(f).find(".propBuy").bind("click", function () {
                var o = $(this).attr("data-click");
                if (o.length > 0) {
                    Fai.fkEval(o)
                }
            })
        }
    }
};
Site.clearImageEffectContent_product = function (b, a) {
    $("#module" + b).find("." + a).remove();
    if ($("#module" + b).find(".mallPanel").length > 0) {
        $("#module" + b).find(".mallPanel").remove()
    }
};
Site.bindImageEffectCusEvent_product = function (c, a) {
    var b = $(c).find(".imageEffects");
    $(b).css("cursor", "pointer");
    $(b).bind("click", function () {
        var g = $(this).parents("." + a.targetParent).find("a");
        if (Fai.isNull(g)) {
            return
        }
        var e = $(g).attr("href");
        var d = $(g).attr("onclick");
        var f = $(g).attr("target");
        if (typeof d != "undefined") {
            Fai.fkEval(d)
        } else {
            if (e.length > 0) {
                window.open(e, f)
            }
        }
    })
};
Site.initModuleProductResultPropFilter = function (d) {
    var c = $("#module" + d),
        e = c.find(".fp_list_J"),
        f = e.find(".fp_block_J");
    if (Fai.isIE6() || Fai.isIE7() || Fai.isIE8()) {
        var a = e.find(".block_head_J").outerWidth();
        e.find(".block_body_J").width(e.width() - a)
    }
    $.each(f, function (j, k) {
        var k = $(k),
            h = k.find(".block_head_J"),
            g = k.find(".block_body_J"),
            l = h.outerHeight();
        blockBodyH = g.outerHeight();
        if (blockBodyH > l + 10) {
            g.attr("_h", blockBodyH);
            $(k).find(".block_tail_J .more_btn_J").text(LS.productResultMore);
            return
        }
        $(k).find(".block_tail_J").remove()
    });
    var b = c.find(".fp_list_J .block_tail_J");
    b.click(function () {
        var j = $(this),
            k = j.parent(),
            g = k.find(".block_body_J"),
            h = j.find(".more_btn_J"),
            i = j.find(".more_down");
        if (i.hasClass("more_up")) {
            k.removeAttr("style");
            h.text(LS.productResultMore);
            i.removeClass("more_up")
        } else {
            k.height(g.attr("_h"));
            h.text(LS.productResultColl);
            i.addClass("more_up")
        }
    });
    $("#conds_body_sel").change(function () {
        window.location.href = $(this).val()
    });
    if (Fai.top._manageMode) {
        $("#pf_tips").hover(function () {
            var g = $(this);
            tipImgW = g.width(), tipTop = g.offset().top, tipLeft = g.offset().left, str = "<div id='pf_tips_Msg' class='pf_tips_Msg g_tip'>" + g.attr("_tipVal") + "</div>";
            Fai.top.$(str).appendTo("body");
            var h = $("#pf_tips_Msg");
            h.offset({
                top: tipTop - h.outerHeight() - 10,
                left: tipLeft
            })
        }, function () {
            $("#pf_tips_Msg").remove()
        })
    }
};
Site.productResultPropFilterSearch = function (a) {
    $("#searchButton").click(function () {
        var b = $("#searchCondInput").val();
        b = Fai.encodeUrl($.trim(b));
        if (!b) {
            Fai.top.location.href = "pr.jsp?pfc=" + Fai.encodeUrl($.toJSON(a))
        }
        if (a) {
            Fai.top.location.href = "pr.jsp?keywordCond=" + b + "&pfc=" + Fai.encodeUrl($.toJSON(a))
        } else {
            Fai.top.location.href = "pr.jsp?keywordCond=" + b
        }
    });
    $("#searchCondInput").keydown(function (b) {
        if (b.keyCode == 13) {
            var c = $("#searchCondInput").val();
            c = Fai.encodeUrl($.trim(c));
            if (!c) {
                Fai.top.location.href = "pr.jsp?pfc=" + Fai.encodeUrl($.toJSON(a))
            }
            if (a) {
                Fai.top.location.href = "pr.jsp?keywordCond=" + c + "&pfc=" + Fai.encodeUrl($.toJSON(a))
            } else {
                Fai.top.location.href = "pr.jsp?keywordCond=" + c
            }
        }
    })
};
Site.productResultPriceCondFilter = function (b) {
    var a = false;
    $("#sort_priceMin").bind("focus", function () {
        $("#sort_priceMin").removeClass("sort_priceArea");
        $("#sort_priceMin").addClass("sort_priceAreaCheck g_borderSelected");
        $("#sort_submit").show();
        $("#prSort_item2").addClass("sort_select2");
        a = true
    });
    $("#sort_priceMax").bind("focus", function () {
        $("#sort_priceMax").removeClass("sort_priceArea");
        $("#sort_priceMax").addClass("sort_priceAreaCheck g_borderSelected");
        $("#sort_submit").show();
        $("#prSort_item2").addClass("sort_select2");
        a = true
    });
    $("#sort_submit").bind("click", function () {
        var k = $("#sort_priceMin").val();
        var l = $("#sort_priceMax").val();
        if (!(k || l)) {
            return
        }
        var h = parseInt(k);
        var e = parseInt(l);
        if (isNaN(h) && "" != k) {
            $("#sort_priceMin").removeClass("sort_priceArea");
            $("#sort_priceMin").addClass("sort_priceAreaCheck g_borderSelected");
            return
        }
        if (isNaN(e) && "" != l) {
            $("#sort_priceMax").removeClass("sort_priceArea");
            $("#sort_priceMax").addClass("sort_priceAreaCheck g_borderSelected");
            return
        }
        if (h > e) {
            var g = l;
            l = k;
            k = g;
            g = e;
            e = h;
            h = g
        }
        if (!b) {
            b = {}
        }
        if (!b.props) {
            var d = [];
            b.props = d
        }
        var i = b.props;
        var j = false;
        var f = "";
        if (k) {
            f += h
        } else {
            f += "0," + e
        } if (k && l) {
            f += "," + e
        }
        f = "[" + f + "]";
        $.each(i, function (m, o) {
            if (o.k == 11) {
                o.v = f;
                j = true
            }
        });
        if (!j) {
            var c = {};
            c.k = 11;
            c.v = f;
            i.push(c)
        }
        Fai.top.location.href = "pr.jsp?pfc=" + Fai.encodeUrl($.toJSON(b))
    });
    $("#sort_priceMin").bind("blur", function () {
        a = false;
        var c = $.trim($("#sort_priceMin").val());
        var d = parseInt(c);
        if ("" != c) {
            if (isNaN(d)) {
                $("#sort_priceMin").val("");
                return
            }
        }
        $("#sort_priceMin").removeClass("sort_priceAreaCheck g_borderSelected");
        $("#sort_priceMin").addClass("sort_priceArea");
        setTimeout(function () {
            if (!a) {
                $("#sort_submit").hide();
                $("#prSort_item2").removeClass("sort_select2")
            }
        }, 250)
    });
    $("#sort_priceMax").bind("blur", function () {
        a = false;
        var d = $.trim($("#sort_priceMax").val());
        var c = parseInt(d);
        if ("" != d) {
            if (isNaN(c)) {
                $("#sort_priceMax").val("");
                return
            }
        }
        $("#sort_priceMax").removeClass("sort_priceAreaCheck g_borderSelected");
        $("#sort_priceMax").addClass("sort_priceArea");
        setTimeout(function () {
            if (!a) {
                $("#sort_submit").hide();
                $("#prSort_item2").removeClass("sort_select2")
            }
        }, 250)
    })
};
Site.initPdPagenation = function (a) {
    $("#pagenation" + a).on("click.product", ".pageNo", function () {
        var b = $(this);
        b.addClass("fk-select")
    })
};
Site.setProductStatify = function (a, b, k) {
    var j = $("#module" + a),
        h = j.find(".J_proSatifySum"),
        l, f, n, e;
    if (h.length < 1) {
        return
    }
    var m = Fai.isIE6() || Fai.isIE7(),
        d = "J_select",
        g = "J_noSelect fk-noSelect";
    if (m) {
        d = "lt_select_more";
        g = "lt_no_select"
    }
    l = j.find(".J_pdCommStarList");
    if (l.length > 0) {
        f = l.find(".J_proStar");
        b = Math.round(b);
        for (var c = 0; c < b; c++) {
            f.eq(c).addClass(d)
        }
        for (var c = b; c <= 5; c++) {
            f.eq(c).addClass(g)
        }
        l.attr("star", b)
    }
    e = j.find(".J_commNum");
    if (e.length > 0) {
        e.text(k)
    }
};
Site.initProDetailStyle = function (o, t, h, d) {
    var f = $("#module" + o),
        j = f.find(".formBanner" + o),
        a = f.find(".J_productDetail").width(),
        m = f.find(".pdTableLayout").width(),
        e = false,
        s, b, g, n, q, l, c, i, k, r, p;
    f.removeClass("fk-proDetaliModuleStyle");
    j.removeClass("fk-proDetailBannerStyle");
    if (d == 5) {
        f.addClass("fk-proDetaliModuleStyle");
        j.addClass("fk-proDetailBannerStyle");
        if (a < m) {
            g = f.find(".pdLayoutR_J");
            n = f.find(".pd_t_l_left_J");
            b = $("#imgGroup" + o);
            if (b.length > 0) {
                e = true
            }
            q = (a - 280) / 23;
            if (q < 20) {
                q = 20
            }
            s = f.find(".J_saleFullReduce");
            s.find("#realMallAmount").css({
                "font-size": q + "px",
                "line-height": q + "px"
            });
            s.find(".propName").css("line-height", s.find(".J_mallPrice").height() + "px");
            l = (a - 320) / 21;
            g.find(".J_pdDetailBorder").css("margin", "0 " + (l > 0 ? l : 0) + "px");
            if (e) {
                k = a / 46;
                b.css("margin-right", k + "px");
                n.find(".imgContainer_J").css("margin-right", k + "px").width(b.outerWidth(true) + $("#imgDiv" + o).outerWidth(true));
                i = n.find(".J_productOpera");
                r = parseInt(b.outerWidth(true));
                i.css("left", (r > 0 ? r : 0) + "px");
                n.find("#prevAndNextDiv").css("margin-left", (r > 0 ? r : 0) + "px")
            }
            p = a - n.outerWidth(true);
            if (p <= 0) {
                p = "100%"
            }
            f.find(".J_productTitle").width(p);
            g.find(".propValue:not('.J_mallPrice')").width(a - n.outerWidth(true) - g.find(".propName:last").outerWidth(true) - g.find(".propColon:last").outerWidth(true) - 3)
        }
    }
};
Site.initProDetailPage = function (b, d, a) {
    $("#singleProductpagenation" + b).find("a").hover(function () {
        $(this).addClass("g_hover")
    }, function () {
        $(this).removeClass("g_hover")
    });
    if (!d) {
        return
    }
    var c = false;
    if ($("#imgGroup" + b).length > 0) {
        c = true
    }
    if (c) {
        $("#prevAndNextDiv").addClass("fk-pd5PageStyle")
    }
    if (!a) {
        $("#prevAndNextDiv").width($("#imgDiv" + b).width())
    }
};
(function (f, a, h) {
    var d = false;
    a.initModuleMallGroup = function (i, s, q, y, w, o, l, v) {
        var k = $("#module" + i);
        var r = $(".styleMall" + i);
        var n = k.width();
        var m = k.height();
        var u;
        var p = f.top._manageMode;
        if (f.isIE6() || f.isIE7() || f.isIE8()) {
            if (e(l)) {
                l = c(l);
                if (q == 0) {
                    $(".mallGroupRight" + i).css("border", "1px solid " + l);
                    v = c(v);
                    k.find(".mallHeadYHD").css("background-color", v)
                } else {
                    if (q == 1) {
                        k.find(".mallHeadJD").css("background-color", l);
                        $(".mallGroupRight" + i).css("border", "1px solid " + l);
                        $(".styleMall" + i).find(".li-color").css({
                            "background-color": l
                        })
                    } else {
                        if (q == 2) {
                            k.find(".mallHeadTM").css("background-color", l);
                            $(".mallGroupRight" + i).css("border-color", l)
                        }
                    }
                }
            }
            if (q == 1) {
                $(".styleMall" + i).find(".li-color").css({
                    "border-bottom": "1px solid",
                    "border-top": "1px solid",
                    "border-color": l
                })
            }
        }
        x();
        a.cacheModuleFunc.init("mallGroupEventBind", {
            moduleId: i,
            useColorCode: l,
            mallStyle: q,
            groupDisplay: w
        });
        if (w == 1) {
            if (f.top._colId == 2) {
                t()
            } else {
                j()
            }
        } else {
            if (w == 2) {
                t()
            } else {
                j()
            }
        }

        function j() {
            k.find(".mallHead").die("mouseenter mouseleave").live("mouseenter", function () {
                $(".styleMall" + i).css({
                    left: k.position().left,
                    top: k.position().top + k.height(),
                    width: k.width()
                });
                $(".mallGroupRight" + i).css({
                    left: k.width(),
                    top: 0
                });
                if (f.isIE()) {
                    r.show()
                } else {
                    r.stop(true, true).slideDown(800, "easeOutExpo")
                }
            }).live("mouseleave", function () {
                if (event.relatedTarget == null) {
                    return
                }
                var z = event.relatedTarget.className;
                if (z.indexOf("li-color") < 0 && z.indexOf("mallLiName") < 0 && z.indexOf("displayRight") < 0 && z.indexOf("ui-resizable-bottomLine") < 0) {
                    if (f.isIE()) {
                        r.hide()
                    } else {
                        r.stop(true, true).slideUp(800, "easeOutExpo")
                    }
                }
            });
            r.die("mouseleave").live("mouseleave", function (B) {
                if (B.relatedTarget == null) {
                    return
                }
                var z = B.relatedTarget.className;
                if (q == 0) {
                    $(this).find(".li-color").find(".pdg_font_icon").removeAttr("style")
                }
                if (q == 0) {
                    $(this).find(".li-color").removeClass("li-color-" + s);
                    $(this).find(".li-color").find(".displayRight").removeClass("displayRight-hover")
                } else {
                    if (q == 1) {
                        $(this).find(".li-color").removeClass("JDli-hover-" + s)
                    } else {
                        if (q == 2) {
                            r.find("ul").removeClass("li-border-" + s);
                            $(this).find(".li-color").removeClass("TMli-hover-" + s)
                        }
                    }
                } if (f.isIE()) {
                    $(".mallGroupRight" + i + ":visible").hide()
                } else {
                    $(".mallGroupRight" + i).stop(true, true);
                    var A = $(".mallGroupRight" + i + ":visible").width();
                    $(".mallGroupRight" + i + ":visible").animate({
                        width: 0,
                        opacity: 0
                    }, 1000, "easeOutExpo", function () {
                        $(this).width(A);
                        $(this).css({
                            opacity: 1,
                            display: "none"
                        })
                    })
                }
                d = true;
                if (z.indexOf("mallHead") >= 0) {
                    return
                }
                if (f.isIE()) {
                    r.hide()
                } else {
                    r.stop(true, true).slideUp(800, "easeOutExpo")
                }
            })
        }

        function t() {
            r.show();
            r.mouseleave(function (A) {
                if (q == 0) {
                    $(this).find(".li-color").find(".pdg_font_icon").removeAttr("style");
                    $(this).find(".li-color").css({
                        "background-color": "#fff",
                        color: "#4a4949"
                    });
                    $(this).find(".li-color").find(".displayRight").removeClass("displayRight-hover")
                } else {
                    if (q == 1) {
                        $(this).find(".li-color").css("background-color", l)
                    } else {
                        if (q == 2) {
                            r.find("ul").css({
                                "border-right": ""
                            });
                            $(this).find(".li-color").removeClass("TMli-hover");
                            $(this).find(".li-color").css({
                                "border-color": "",
                                color: ""
                            })
                        }
                    }
                }
                $(".mallGroupRight" + i).stop(true, true);
                var z = $(".mallGroupRight" + i + ":visible").width();
                if (f.isIE()) {
                    $(".mallGroupRight" + i + ":visible").hide()
                } else {
                    $(".mallGroupRight" + i + ":visible").animate({
                        width: 0,
                        opacity: 0
                    }, 1000, "easeOutExpo", function () {
                        $(this).width(z);
                        $(this).css({
                            opacity: 1,
                            display: "none"
                        })
                    })
                }
                d = true;
                return
            })
        }

        function x() {
            k = $("#module" + i);
            if (!p) {
                k.find(".mallHead").css("cursor", "pointer")
            }
            k.after($(".styleMall" + i));
            r = $(".styleMall" + i);
            k = $("#module" + i);
            $(".styleMall" + i).css({
                left: k.position().left,
                top: k.position().top + k.height(),
                width: k.width(),
                "z-index": k.css("z-index")
            });
            r = $(".styleMall" + i);
            $(".formMiddleCenter" + i).css({
                height: "100%"
            });
            $(".formMiddleContent" + i).css({
                height: "100%"
            })
        }
    };
    a.mallGroupEventBind = function (j) {
        var m = j.moduleId,
            k = $("#module" + m),
            i = k.width();
        useColorCode = j.useColorCode, styleMall = $(".styleMall" + m), mallStyle = j.mallStyle, groupDisplay = j.groupDisplay, isNeedChangeWidth = true;
        n(useColorCode);

        function n(q) {
            p(q, mallStyle);
            $(".mallGroupRight" + m).css({
                left: i,
                top: 0
            });
            styleMall.find(".secGroupName").die("mouseenter mouseleave").live("mouseenter", function () {
                $(this).css("color", q)
            }).live("mouseleave", function () {
                $(this).removeAttr("style")
            });
            styleMall.find(".thdGroupBox").die("mouseenter mouseleave").live("mouseenter", function () {
                $(this).css("color", q)
            }).live("mouseleave", function () {
                $(this).removeAttr("style")
            });
            k.find(".mallHead").off("click").on("click", function () {
                styleMall = $(".styleMall" + m);
                if (styleMall.css("display") != "none") {
                    $(".styleMall" + m + " li").eq(0).trigger("mouseleave")
                }
                if ($(".styleMall" + m).parent().attr("id") != k.parent().attr("id")) {
                    k.after($(".styleMall" + m));
                    styleMall = $(".styleMall" + m);
                    k = $("#module" + m)
                }
                styleMall.toggle();
                styleMall.find(".mallGroupRight").hide();
                $(".styleMall" + m).css({
                    left: k.position().left,
                    top: k.position().top + k.height(),
                    width: k.width(),
                    height: "auto",
                    "z-index": k.css("z-index")
                });
                $(".mallGroupRight" + m).css({
                    left: k.width(),
                    top: 0
                })
            });
            var r;
            $.each(styleMall.find("li"), function (s, t) {
                r = styleMall.find("li:eq(" + s + ") .mallGroupRight");
                l(r, groupDisplay);
                o(r, groupDisplay);
                if (!(f.isIE6() || f.isIE7())) {
                    if (mallStyle == 0 && r.width() >= 750) {
                        r.mCustomScrollbar({
                            theme: "dark-3",
                            scrollSpeed: 10,
                            scrollButtons: {
                                enable: true
                            },
                            advanced: {
                                updateOnContentResize: true
                            },
                            axis: "y",
                            callbacks: {}
                        })
                    } else {
                        if (mallStyle != 0) {
                            r.mCustomScrollbar({
                                theme: "dark-3",
                                scrollSpeed: 10,
                                scrollButtons: {
                                    enable: true
                                },
                                advanced: {
                                    updateOnContentResize: true
                                },
                                axis: "y",
                                callbacks: {}
                            })
                        }
                    }
                }
            });
            if (mallStyle == 0) {
                styleMall.find("li").last().css("border-bottom", "0")
            }
            if (f.isIE6() || f.isIE7()) {
                if (mallStyle == 2) {
                    styleMall.find("ul").removeClass("ulMall").addClass("ulMall-ie6");
                    styleMall.find("ul li").removeClass("li-color").addClass("li-color-ie6");
                    styleMall.find(".mallGroupRight").css("border-left-width", "1px");
                    styleMall.find(".mallGroupRight").css("height", (styleMall.find(".mallGroupRight").height() + liSize * 2) + "px")
                } else {
                    if (mallStyle == 1) {
                        styleMall.find("ul li").css({
                            "margin-bottom": "-2px",
                            "margin-top": "0px"
                        });
                        styleMall.css("top", (parseInt(styleMall.css("top")) - 1) + "px");
                        if (f.isIE6()) {
                            styleMall.find(".mallGroupRight").css("height", (styleMall.find(".mallGroupRight").height() + liSize) + "px")
                        }
                    } else {
                        if (mallStyle == 0) {
                            styleMall.find(".mallGroupRight").css("height", (styleMall.find(".mallGroupRight").height() + liSize * 2) + "px")
                        }
                    }
                }
            }
        }

        function p(r, q, s) {
            if (typeof styleMall.find("ul").menuAim == "function") {
                t()
            }

            function t() {
                styleMall = $(".styleMall" + m);
                styleMall.find("ul").menuAim({
                    rowSelector: ".li-color",
                    activate: w,
                    enter: v,
                    deactivate: u,
                    exitMenu: x
                });

                function w(z) {
                    styleMall = $(".styleMall" + m);
                    styleMall.stop(true, true);
                    $(z).stop(true, true);
                    temThis = z;
                    subMallRight = $(z).children(".mallGroupRight");
                    if (q == 0) {
                        $(z).find(".displayRight").addClass("displayRight-hover");
                        $(z).css({
                            "background-color": r,
                            color: "#fff"
                        })
                    } else {
                        if (q == 1) {
                            $(z).css("background-color", g(r, 0))
                        } else {
                            if (q == 2) {
                                styleMall.find("ul").css({
                                    "border-right": "1px solid " + r
                                });
                                $(z).addClass("TMli-hover");
                                $(z).css({
                                    "border-color": r,
                                    color: r
                                })
                            }
                        }
                    } if (q == 0) {
                        $(z).find(".pdg_font_icon").css("color", "#fff")
                    }
                    if (f.isIE()) {
                        subMallRight.show()
                    } else {
                        $(".mallGroupRight").stop(true, true);
                        var y = subMallRight.width();
                        subMallRight.width(0);
                        subMallRight.css({
                            opacity: 0,
                            display: "block"
                        });
                        subMallRight.animate({
                            width: y,
                            opacity: "1"
                        }, 800, "easeOutQuint")
                    }
                    d = false;
                    if ($(z).children(".mallGroupRight").length <= 0 && q == 2) {
                        $(".styleMall" + m).find("ul").css({
                            "border-right": ""
                        });
                        $(z).css("border-right-width", "1px")
                    }
                }

                function v(z) {
                    if (typeof event != "undefined" && typeof event.target != "undefined" && typeof event.target.className != "undefined" && (event.target.className.indexOf("mallGroupRight" + m) >= 0 || event.target.className.indexOf("secGroup") >= 0 || event.target.className.indexOf("thdGroup") >= 0)) {
                        return
                    }
                    styleMall = $(".styleMall" + m);
                    styleMall.stop(true, true);
                    temThis = z;
                    subMallRight = $(z).children(".mallGroupRight");
                    if (!d) {
                        return
                    }
                    if (q == 0) {
                        $(z).find(".displayRight").addClass("displayRight-hover");
                        $(z).css({
                            "background-color": r,
                            color: "#fff"
                        })
                    } else {
                        if (q == 1) {
                            $(z).css("background-color", g(r, 0))
                        } else {
                            if (q == 2) {
                                styleMall.find("ul").css({
                                    "border-right": "1px solid " + r
                                });
                                $(z).addClass("TMli-hover");
                                $(z).css({
                                    "border-color": r,
                                    color: r
                                })
                            }
                        }
                    } if (q == 0) {
                        $(z).find(".pdg_font_icon").css("color", "#fff")
                    }
                    if (f.isIE()) {
                        subMallRight.show()
                    } else {
                        $(".mallGroupRight").stop(true, true);
                        var y = subMallRight.width();
                        subMallRight.width(0);
                        subMallRight.animate({
                            width: y,
                            opacity: "show"
                        }, 800, "easeOutQuint")
                    }
                    d = false;
                    if ($(z).children(".mallGroupRight").length <= 0 && q == 2) {
                        $(".styleMall" + m).find("ul").css({
                            "border-right": ""
                        });
                        $(z).css("border-right-width", "1px")
                    }
                }

                function u(z) {
                    styleMall = $(".styleMall" + m);
                    subMallRight = $(z).children(".mallGroupRight");
                    if (q == 0) {
                        if (f.isIE() || e($(z).css("background-color"))) {
                            $(z).css({
                                "background-color": "#fff",
                                color: "#4a4949"
                            })
                        } else {
                            $(z).animate({
                                "background-color": "#fff",
                                color: "#4a4949"
                            }, 100, "linear")
                        }
                        $(z).find(".displayRight").removeClass("displayRight-hover")
                    } else {
                        if (q == 1) {
                            if (f.isIE() || e($(z).css("background-color"))) {
                                $(z).css("background-color", r)
                            } else {
                                $(z).animate({
                                    "background-color": r
                                }, 100, "linear")
                            }
                        } else {
                            if (q == 2) {
                                styleMall.find("ul").css({
                                    "border-right": ""
                                });
                                $(z).removeClass("TMli-hover");
                                $(z).css({
                                    "border-color": "",
                                    color: ""
                                })
                            }
                        }
                    } if (f.isIE()) {
                        subMallRight.hide()
                    } else {
                        $(".mallGroupRight").stop(true, true);
                        var y = subMallRight.width();
                        subMallRight.animate({
                            width: 0,
                            opacity: 0
                        }, 1000, "easeOutExpo", function () {
                            $(z).children(".mallGroupRight").width(y);
                            $(z).children(".mallGroupRight").css({
                                opacity: 1,
                                display: "none"
                            })
                        })
                    } if (q == 0) {
                        $(z).find(".pdg_font_icon").removeAttr("style")
                    }
                }

                function x(y) {
                    var z = $(y).children("li-color");
                    styleMall = $(".styleMall" + m);
                    if (q == 0) {
                        $(z).find(".pdg_font_icon").removeAttr("style")
                    }
                }
            }
        }

        function o(u, t) {
            var q = u.find(".secGroupBox");
            if (q.length == 0) {
                u.prev(".displayRight").hide();
                u.remove();
                return
            }
            if (mallStyle == 0) {
                return
            }
            u.show();
            var v = true;
            if (styleMall.css("display") == "none") {
                v = false;
                styleMall.show()
            }
            var s = 0;
            var r = u.find(".thdGroup");
            isNeedChangeWidth = true;
            $.each(r, function (w, x) {
                if (r.eq(w).html() == "" || r.eq(w).html() == null) {
                    r.eq(w).hide();
                    r.eq(w).prev(".point2").hide();
                    return
                }
                if (r.eq(w).height() > 30) {
                    isNeedChangeWidth = false
                }
                s = (s > r.eq(w).width() ? s : r.eq(w).width())
            });
            $.each(r, function (w, x) {
                r.eq(w).width(s)
            });
            if (isNeedChangeWidth) {
                if (!f.isIE()) {
                    u.css("opacity", 1)
                }
                u.width(s + 232)
            }
            u.hide();
            if (!v) {
                styleMall.hide()
            }
        }

        function l(D, C) {
            if (mallStyle != 0) {
                return
            }
            var q = true;
            if (styleMall.css("display") == "none") {
                q = false;
                styleMall.css({
                    opacity: 0,
                    display: "block"
                })
            }
            D.css({
                opacity: 0,
                display: "block"
            });
            var y = D.find(".groupCol1").selector;
            var v = D.find(".groupCol2").selector;
            var u = D.find(".groupCol3").selector;
            var E = D.find(".secGroupBox");
            var t = false;
            $.each(E, function (F, G) {
                if (t) {
                    F++
                }
                if ((F + 1) % 3 == 1) {
                    if (t) {
                        F--
                    }
                    if ($(y).height() - $(v).height() > 100) {
                        E.eq(F).appendTo(v).show();
                        t = true;
                        return
                    }
                    E.eq(F).appendTo(y).show()
                } else {
                    if ((F + 1) % 3 == 2) {
                        if (t) {
                            F--
                        }
                        if ($(v).height() - $(u).height() > 100) {
                            E.eq(F).appendTo(u).show();
                            t = true;
                            return
                        }
                        E.eq(F).appendTo(v).show()
                    } else {
                        if ((F + 1) % 3 == 0) {
                            if (t) {
                                F--
                            }
                            E.eq(F).appendTo(u).show()
                        }
                    }
                }
            });
            var A = $(y).height();
            var z = $(v).height();
            var x = $(u).height();
            var r = A > z ? (A > x ? A : x) : (z > x ? z : x);
            var s = D.height();
            var B = (r > s ? r : s);
            var w = 250 * 3;
            $(y).height(B);
            $(v).height(B);
            $(u).height(B);
            if ($(y).html() == "") {
                w -= 250
            }
            if ($(v).html() == "") {
                w -= 250
            }
            if ($(u).html() == "") {
                w -= 250
            }
            D.width(w);
            if (f.isIE6()) {
                if ($(y).width() > 249) {
                    $(y).width(249).css("overflow", "hidden")
                }
                if ($(v).width() > 249) {
                    $(v).width(249).css("overflow", "hidden")
                }
                if ($(u).width() > 249) {
                    $(u).width(249).css("overflow", "hidden")
                }
                D.find(".secGroupBox").css("margin-left", "15px")
            }
            if (!q) {
                styleMall.css({
                    opacity: 1,
                    display: "none"
                })
            }
            D.css({
                opacity: 1,
                display: "none"
            })
        }
    };

    function g(k, s) {
        if (k.indexOf("#") >= 0) {
            k = b(k)
        }
        var n, m, j;
        var o = k.split("(")[1].split(")")[0].split(",");
        var u = parseInt(o[0]);
        var l = parseInt(o[1]);
        var q = parseInt(o[2]);
        if (u >= l) {
            if (u >= q) {
                n = 25;
                if (l >= q) {
                    m = 23;
                    j = 20
                } else {
                    m = 20;
                    j = 23
                }
            } else {
                n = 23;
                if (l >= q) {
                    m = 25;
                    j = 20
                } else {
                    m = 20;
                    j = 25
                }
            }
        } else {
            if (u >= q) {
                n = 23;
                if (l >= q) {
                    m = 25;
                    j = 20
                } else {
                    m = 20;
                    j = 25
                }
            } else {
                n = 20;
                if (l >= q) {
                    m = 25;
                    j = 23
                } else {
                    m = 23;
                    j = 25
                }
            }
        } if (s == 0) {
            if (e(k)) {
                var i = parseInt(o[0]) - n <= 0 ? "0" : "" + (parseInt(o[0]) - n) + "";
                var p = parseInt(o[1]) - m <= 0 ? "0" : "" + (parseInt(o[1]) - m) + "";
                var t = parseInt(o[2]) - j <= 0 ? "0" : "" + (parseInt(o[2]) - j) + "";
                return "rgba(" + i + "," + p + "," + t + "," + o[3] + ")"
            } else {
                var i = parseInt(o[0]) - n <= 0 ? "0" : "" + (parseInt(o[0]) - n) + "";
                var p = parseInt(o[1]) - m <= 0 ? "0" : "" + (parseInt(o[1]) - m) + "";
                var t = parseInt(o[2]) - j <= 0 ? "0" : "" + (parseInt(o[2]) - j) + "";
                return "rgb(" + i + "," + p + "," + t + ")"
            }
        } else {
            if (e(k)) {
                var i = parseInt(o[0]) + n <= 0 ? "0" : "" + (parseInt(o[0]) + n) + "";
                var p = parseInt(o[1]) + m <= 0 ? "0" : "" + (parseInt(o[1]) + m) + "";
                var t = parseInt(o[2]) + j <= 0 ? "0" : "" + (parseInt(o[2]) + j) + "";
                return "rgba(" + i + "," + p + "," + t + "," + o[3] + ")"
            } else {
                var i = parseInt(o[0]) + n <= 0 ? "0" : "" + (parseInt(o[0]) + n) + "";
                var p = parseInt(o[1]) + m <= 0 ? "0" : "" + (parseInt(o[1]) + m) + "";
                var t = parseInt(o[2]) + j <= 0 ? "0" : "" + (parseInt(o[2]) + j) + "";
                return "rgb(" + i + "," + p + "," + t + ")"
            }
        }
    }

    function e(i) {
        return (i.indexOf("#") < 0 && (i.indexOf("rgba") >= 0 || i.indexOf("RGBA") >= 0))
    }

    function c(j) {
        if (!e(j)) {
            return
        }
        if (j.indexOf("transparent") >= 0) {
            return "rgb(255,255,255)"
        }
        var i = j.split("(")[1].split(")")[0].split(",");
        return "rgb(" + i[0] + "," + i[1] + "," + i[2] + ")"
    }

    function b(l) {
        var m = l.toLowerCase();
        if (m && m.indexOf("#") >= 0) {
            if (m.length === 4) {
                var n = "#";
                for (var k = 1; k < 4; k += 1) {
                    n += m.slice(k, k + 1).concat(m.slice(k, k + 1))
                }
                m = n
            }
            var j = [];
            for (var k = 1; k < 7; k += 2) {
                j.push(parseInt("0x" + m.slice(k, k + 2)))
            }
            return "RGB(" + j.join(",") + ")"
        } else {
            return m
        }
    }
})(Fai, Site, undefined);
Site.newsScroll = function (l) {
    var g = {
            pauseDuration: 2400,
            showDuration: 600,
            scrollMode: "up"
        },
        c = $.extend({}, g, l),
        a = "scroll" + c.moduleId,
        d = $("#module" + c.moduleId),
        b = d.find(".newsList");
    b.stop(true, true);
    Fai.stopInterval(a);
    if (l.noScroll) {
        return
    }
    var h = b.parent(),
        k = b.find(".line"),
        j = b.find(".separatorLine");
    var f = c.leader || 0;
    d.on("mouseover.newsScroll", function () {
        b.stop();
        Fai.stopInterval(a);
        $(this).attr("scrollInterval", 0)
    }).on("mouseout.newsScroll", function () {
        if ($(this).attr("scrollInterval") == 0) {
            b.stop();
            Fai.stopInterval(a);
            Fai.startInterval(a);
            $(this).attr("scrollInterval", 1)
        }
    });
    (k, d).on("mouseover.newsScroll", function () {
        b.stop();
        Fai.stopInterval(a);
        $(this).attr("scrollInterval", 0)
    }).on("mouseout.newsScroll", function () {
        if ($(this).attr("scrollInterval") == 0) {
            b.stop();
            Fai.stopInterval(a);
            Fai.startInterval(a);
            $(this).attr("scrollInterval", 1)
        }
    });

    function i() {
        b.css({
            position: "relative"
        });
        h.css({
            overflow: "hidden",
            position: "relative"
        });
        b.height(b.height());
        h.height(b.height());

        function m() {
            if (c.scrollMode == "up") {
                var s = b.find(".line").eq(f);
                var o = b.find(".separatorLine").eq(f);
                var p = s.outerHeight();
                var q = o.is(":visible");
                var n = q ? o.outerHeight(true) : 0;
                if (f == 0) {
                    b.animate({
                        top: "-=" + (p + n)
                    }, c.showDuration * ((p + n) / 32), function () {
                        s.appendTo(b).end().hide().fadeIn(400);
                        o.appendTo(b).end().hide();
                        if (q) {
                            o.fadeIn(400)
                        }
                        s.insertAfter(b.find(".separatorLine:last")).end().hide().fadeIn(400);
                        o.insertAfter(b.find(".line:last")).end().hide();
                        if (q) {
                            o.fadeIn(400)
                        }
                        b.css({
                            top: 0
                        });
                        e()
                    })
                } else {
                    s.animate({
                        opacity: 0
                    }, 400).slideUp(600, function () {
                        s.css({
                            opacity: 1
                        }).appendTo(b).end().hide().fadeIn(400);
                        o.appendTo(b).end().hide();
                        if (q) {
                            o.fadeIn(400)
                        }
                    });
                    e()
                }
            } else {
                var t = b.find(".line:last");
                var v = b.find(".separatorLine:last");
                var q = v.is(":visible");
                var u = t.outerHeight();
                var r = q ? v.outerHeight(true) : 0;
                if (f == 0) {
                    b.animate({
                        top: "+=" + (u + r)
                    }, c.showDuration * ((u + r) / 32), function () {
                        v.insertBefore(b.find(".line").eq(f)).end().hide();
                        if (q) {
                            v.fadeIn(400)
                        }
                        t.insertBefore(b.find(".separatorLine").eq(f)).end().hide().fadeIn(400);
                        b.css({
                            top: 0
                        });
                        e()
                    })
                } else {
                    v.insertBefore(b.find(".line").eq(f)).end().hide();
                    if (q) {
                        v.slideDown().css({
                            opacity: 0
                        }).animate({
                            opacity: 1
                        })
                    }
                    t.insertBefore(b.find(".separatorLine").eq(f)).end().hide().slideDown().css({
                        opacity: 0
                    }).animate({
                        opacity: 1
                    });
                    e()
                }
            }
        }
        Fai.addTimeout(a, m, c.pauseDuration);
        Fai.startInterval(a)
    }

    function e() {
        i()
    }
    i()
};
Site.loadNewsList = function (h, g, c) {
    var d = $("#module" + h).find(".newsList");
    if (d.length == 0) {
        return
    }
    var a = {};
    d.find(".lineBody").each(function () {
        var p = $(this);
        var r = p.find(".newsType");
        if (r.length != 0) {
            var t = r.find(">a");
            var u = 0;
            $.each(t, function (w, v) {
                u += $(v).outerWidth() + Fai.getCssInt($(v), "margin-right")
            });
            var k = u + Fai.getCssInt(r, "padding-left") + Fai.getCssInt(r, "padding-right") + 5;
            if (typeof a.nt == "undefined" || a.nt < k) {
                if (k > 300) {
                    k = 300
                }
                a.nt = k
            }
        }
        var q = p.find(".newsTypePicList");
        if (q.length != 0) {
            var n = $(q).prevAll();
            var i = 0;
            $.each(n, function (v, w) {
                if (!$(w).hasClass("articlePhotoBox")) {
                    i += $(w).outerHeight()
                }
            });
            var l = p.outerWidth() - p.find(".articlePhotoBox").outerWidth();
            $(q).css("width", l + "px");
            var j = p.find(".articlePhotoBox img").outerHeight() - i - $(q).outerHeight();
            j = (j < 0 ? 0 : j);
            $(q).css("margin-top", j + "px")
        }
        var m = p.find(".newsCalendar");
        if (m.length != 0) {
            var o = m.find(">a").first().outerWidth();
            var s = o + Fai.getCssInt(m, "padding-left") + Fai.getCssInt(m, "padding-right") + 5;
            if (typeof a.nc == "undefined" || a.nc < s) {
                a.nc = s
            }
        }
    });
    var f = d.attr("newslisttype");
    d.find(".lineBody").each(function () {
        var l = $(this);
        if (!l.children().hasClass("J_noChangeStyle")) {
            if (c) {
                var i = l.width();
                var k, j;
                if (i <= 400) {
                    if (l.find(".newsType").length == 0) {
                        k = "100%";
                        j = "0%"
                    } else {
                        k = "60%";
                        j = "40%"
                    }
                } else {
                    if (l.find(".newsType").length == 0) {
                        k = "100%";
                        j = "0%"
                    } else {
                        k = "70%";
                        j = "30%"
                    }
                }
                l.find(".newsTitle").css("width", k);
                if (typeof a.nt != "undefined") {
                    l.find(".newsType").css("width", j).css("text-overflow", "ellipsis")
                }
            } else {
                if (f != 3) {
                    l.find(".newsTitle").css("width", "100%")
                }
                if (typeof a.nt != "undefined") {
                    l.find(".newsType").css("width", a.nt + "px").css("text-overflow", "ellipsis")
                }
            } if (typeof a.nc != "undefined" && f != 3) {
                l.find(".newsCalendar").css("width", a.nc + "px")
            }
            if (l.find(".newsCalendar").width() < l.find(".newsCalendar>a").width()) {
                l.find(".newsCalendar").width(l.find(".newsCalendar>a").width())
            }
        }
    });
    d.find(".word").css({
        display: "block",
        width: "100%"
    });
    if (Fai.isIE6() && (d.find(".wWLine").length > 0)) {
        d.find(".line").each(function () {
            $(this).height($(this).height())
        });
        if (d.find(".g_topFlag").length > 0) {
            d.find(".newsTitle a").each(function () {
                $(this).height($(this).height())
            })
        }
    }
    var b = d.find(".line").css("background-color");
    d.find(".line").find(".newsType, .J_newsTypePicList").find("a").hover(function (i) {
        i.stopPropagation();
        $(this).parents(".line").removeClass("g_hover");
        $(this).addClass("g_hover");
        $(this).css("background", b)
    }, function () {
        $(this).removeClass("g_hover");
        $(this).css("background", "")
    });
    d.find(".line").mouseover(function () {
        if (!$(this).hasClass("noHover")) {
            $(this).addClass("g_hover")
        }
    }).mouseleave(function () {
        if (!$(this).hasClass("noHover")) {
            $(this).removeClass("g_hover")
        }
    });
    var e = !!d.hasClass("pic-mixNewsList");
    if (e) {
        d.find(".mixNewsStyleTitleContainer").off("mouseover.stylePic").on("mouseover.stylePic", function (i) {
            $(this).addClass("g_hover");
            fixHoverNewsListPicTitleWidth(h, $(this))
        }).off("mouseleave.stylePic").on("mouseleave.stylePic", function (i) {
            $(this).removeClass("g_hover");
            fixHoverNewsListPicTitleWidth(h, $(this))
        })
    }
    d.find(".lineHeader").first().addClass("firstHeader");
    Site.initContentSplitLine(h, g)
};

function fixHoverNewsListPicTitleWidth(a, g) {
    var e = $("#module" + a),
        c = e.find(".newsList");
    var d = g.find(".mixNewsStyleTitle");
    if (d.attr("mix") == 1) {
        var b = c.find("td.newsTitle").width() || 0;
        var i = c.find(".articlePhotoBox img").width() || 0;
        var f = g.find(".mixNewsStyleDate").width() || 0;
        var h = parseInt(b) - parseInt(f) - parseInt(i) - 40;
        if (Fai.isIE6()) {
            h -= 20
        }
        d.css({
            width: h + "px"
        })
    }
}
Site.loadNewsNewStyle = function (n, b, q, m, f, h, i, p, r, s) {
    var c = $("#module" + n);
    var v = c.find(".newsList");
    var g = c.width();
    var j = Fai.top._isTemplateVersion2 ? "newsCircle_hover" : "g_block";
    if (v.length == 0) {
        return
    }
    if (b || q || h || i) {
        if (c.find("#pagenation" + n).length > 0) {
            c.find("#pagenation" + n).css({
                "text-align": "center"
            })
        }
        if (!i) {
            var l = v.find(".J_newsListLine");
            if (l.hasClass("top_with_line_icon")) {
                l.css("padding-left", "0")
            }
        }
        if (g <= 400) {
            if (!m) {
                $(v.find(".newsTitle").find("a")).each(function (w, x) {
                    $(this).css({
                        height: "auto",
                        "white-space": "normal",
                        "word-break": "normal"
                    });
                    if ($(this).html().length > 23) {
                        var y = $(this).html().substring(0, 20) + "...";
                        $(this).html(y)
                    }
                    if (h) {
                        $(this).parent().css({
                            height: "auto"
                        })
                    }
                })
            }
            if (!i) {
                v.find(".newsTitle").css({
                    display: "inline"
                })
            }
            v.find(".newsTitle").find("a").css({
                display: "inline"
            })
        }
        v.find(".newsTypePicList_four").find(".newsTypePic").mouseover(function () {
            $(this).css({
                color: "#fff",
                background: "#bababa",
                "border-color": "#bababa"
            })
        }).mouseleave(function () {
            $(this).css({
                color: "#717171",
                background: "#fff",
                "border-color": "#dadada"
            })
        })
    }
    if (q || h || i) {
        v.find(".fk-newsListTitle").mouseenter(function () {
            if (h) {
                $(this).parent().parent().find(".newsCircle").addClass(j)
            }
            $(this).addClass("g_stress");
            $(this).addClass("g_hover")
        }).mouseleave(function () {
            if (h) {
                $(this).parent().parent().find(".newsCircle").removeClass(j)
            }
            $(this).removeClass("g_stress");
            $(this).removeClass("g_hover")
        })
    } else {
        if (b) {
            v.find(".J_titleLine").mouseenter(function () {
                $(this).addClass("g_stress");
                $(this).addClass("g_hover")
            }).mouseleave(function () {
                $(this).removeClass("g_stress");
                $(this).removeClass("g_hover")
            })
        }
    } if (b) {
        v.find(".newsCalendar").css({
            width: "23.5%"
        });
        if (g <= 400) {
            v.find(".newsTitle").css({
                width: "100%"
            });
            v.find(".newsCalendar").css({
                display: "block"
            })
        } else {
            v.find(".newsTitle").css({
                width: "75%"
            });
            if (Fai.isIE6() || Fai.isIE7()) {
                v.find(".newsTitle").css({
                    "float": "left"
                });
                v.find(".newsCalendar").css({
                    "float": "right"
                })
            }
        }
    }
    if (q) {
        var u = v.find(".J_newsListLine").width(),
            t;
        if (!!s) {
            if (r) {
                v.find(".lineBody").css({
                    width: "100%"
                })
            } else {
                t = v.find(".J_newsListLine .J_newsCalendar").outerWidth(true);
                if (Fai.top._manageMode) {
                    v.find(".lineBody").css({
                        width: "-moz-calc(100% - " + t + "px)",
                        width: "-webkit-calc(100% - " + t + "px)",
                        width: "calc(100% - " + t + "px)"
                    })
                } else {
                    v.find(".lineBody").width(parseInt(u - t))
                }
            }
        } else {
            if (g <= 400) {
                if (!f) {
                    v.find(".newsCalendar").hide()
                }
                v.find(".lineBody").css({
                    width: "100%"
                })
            } else {
                v.find(".newsCalendar").show();
                v.find(".lineBody").css({
                    width: "84%"
                })
            }
        }
    }
    if (h) {
        if (g <= 400) {
            v.find(".newsCircleOuter").css({
                margin: "5px 8px 0px 0"
            });
            v.find(".lineBody").css({
                width: "100%"
            });
            v.find(".newsTitle").parent().css({
                width: "80%"
            });
            v.find(".J_timeLine").css({
                left: "9px"
            });
            v.find(".newsCalendar").css({
                "margin-left": "30px"
            })
        }
        var e = v.height();
        var d = v.find(".newsCircleOuter");
        var a = v.find(".newsCalendar").width();
        if (d.length == 0) {
            return
        }
        var k = d.position().left + parseInt(d.css("margin-left").replace("px", "")) + d.width() / 2;
        if (Fai.isIE6() || Fai.isIE7()) {
            v.find(".J_timeLine").css({
                height: e - 20 + "px",
                left: d.position().left + d.width() / 2 + parseInt(d.css("margin-left").replace("px", "")) + a + "px"
            })
        } else {
            v.find(".J_timeLine").css({
                height: e - 20 + "px",
                left: k + "px"
            })
        }
    }
    if (i) {
        if (g <= 400) {
            v.find(".line").css({
                "margin-left": "",
                width: "198px"
            });
            if (!p) {
                v.find(".J_articlePhotoBox").find(".cutImgPanel").each(function (x, z) {
                    var y = $(this).find("img").width() / $(this).find("img").height();
                    var w = (198 / y - 124) / 2;
                    $(this).parent().css({
                        width: "198px",
                        height: "124px"
                    });
                    $(this).css({
                        height: "124px",
                        bottom: w + "px"
                    });
                    $(this).find("img").css({
                        width: "198px",
                        height: (198 / y) + "px"
                    })
                });
                v.find(".articlePhotoBox").find("img").each(function (w, x) {
                    if ($(this).attr("_defimg")) {
                        $(this).css({
                            width: "198px",
                            height: "124px"
                        })
                    }
                    $(this).parent().css({
                        width: "198px",
                        height: "124px"
                    })
                })
            }
        } else {
            var o = 0;
            $(v.find(".line")).each(function (w, x) {
                if ($(this).height() > o) {
                    o = $(this).height()
                }
                if (o > 550) {
                    o = 550
                }
            });
            v.find(".line").css({
                height: o + "px"
            })
        }
    }
};
Site.getNewsListStyleData = function (c) {
    var b = Fai.top.newsListStyleData,
        a;
    if (!b) {
        return
    }
    a = b["newsListStyle" + c] || {};
    return a
};
Site.setNewsListImgSize = function (l, p) {
    var e = $("#module" + l),
        t = Site.getModuleAttrPattern(l).newsList,
        u = e.find("#newsList" + l),
        f = e.find(".J_newsListLine"),
        o = f.find(".J_articlePicHref"),
        r = e.find(".J_articlePhotoBox"),
        n = o.find(".J_newsListPic"),
        c = Site.getNewsListStyleData(l),
        d = t.tw || false,
        m = t.ps.t || false,
        g = c.isNewModuleStyleFour || false,
        i = parseFloat(c.picPaddingRight),
        q = parseFloat(c.picPaddingBottom),
        j = c.pictureDefaultHeight || 107,
        k = c.pictureDefaultWidth || 152,
        b = e.width(),
        h, s, a;
    if (p) {
        h = t.ps.w;
        s = t.ps.h
    }
    if (n.length < 1 && o.length < 1) {
        return
    }
    if (p) {
        n.css({
            height: s,
            width: h
        });
        o.css({
            height: s,
            width: h
        });
        r.css({
            marginBottom: q,
            marginRight: i
        })
    } else {
        if (g) {
            f.width(k)
        }
        o.css({
            height: j,
            width: k
        });
        r.css({
            marginBottom: q,
            marginRight: i
        })
    } if (g) {
        if (b <= 400) {
            f.css({
                "margin-left": "",
                width: "198px",
                height: "auto"
            });
            if (!m) {
                Site.setNewsListDefaultPicSize(e)
            }
        } else {
            f.css({
                "margin-left": "30px",
                width: h
            });
            Site.setNewsListLineMaxHeight(f)
        }
    }
    Site.resetNewScroll(l, parseInt(t.ls.t))
};
Site.setNewsClassifyStyle = function (d, f) {
    var a, n, k, e, q, g, b, l, i, p, c, j, m, o, h;
    m = Site.getModuleAttrPattern(d);
    o = Fai.top.$("#module" + d);
    $newsModule = o.find("#newsList" + d);
    a = $newsModule.find(".J_lineBody");
    i = a.find(".J_articlePhotoBox");
    p = f ? "newsList" : "newsResult";
    c = ".J_" + p + "Pic";
    j = m[p];
    h = parseInt(j.tw);
    a.each(function (r, s) {
        _this = $(s);
        n = _this.find(".J_newsTypePicList");
        if (n.length != 0) {
            l = n.prevAll(":not('.J_articlePhotoBox')");
            b = 0;
            $.each(l, function (t, u) {
                b += $(u).outerHeight()
            });
            k = _this.outerWidth() - i.eq(r).outerWidth();
            n.css("width", k + "px");
            g = _this.find(c).outerHeight() - b - n.outerHeight();
            g = (g < 0 ? 0 : g);
            if (h == 1 || h == -1 || g < 0) {
                g = 0
            }
            n.css("margin-top", g + "px")
        }
    })
};
Site.refreshNewsListStyle = function (c, b) {
    var a;
    if (b) {
        a = Site.getModuleAttrPattern(c).newsList;
        Site.setNewsListImgSize(c, parseInt(a.ps.t));
        Site.refreshNewsTimeLine(c)
    }
    Site.setNewsClassifyStyle(c, b)
};
Site.refreshNewsTimeLine = function (l) {
    var e = Site.getNewsListStyleData(l),
        q = Site.getModuleAttrPattern(l).newsList,
        r, d, f, n, h, c, a, j, i, s, m, g, b, o, k, p;
    g = e.isNewModuleStyleOne;
    s = e.isNewModuleStyleTwo;
    m = e.isNewModuleStyleThree;
    b = e.isNewModuleStyleFour;
    p = e.smallWidthHideDate;
    if (!(s || m || g || b)) {
        return
    }
    r = $("#newsList" + l);
    n = r.find(".J_newsCalendar");
    i = r.find(".J_lineBody");
    d = r.width();
    o = r.find(".J_newsTitle");
    if (g) {
        n.css({
            width: "23.5%"
        });
        if (d <= 400) {
            o.css({
                width: "100%"
            });
            n.css({
                display: "block"
            })
        } else {
            o.css({
                width: "75%"
            })
        }
    } else {
        if (s) {
            if (!p) {
                if (d <= 400) {
                    if (!e.newModuleStyleTwo_horizontal) {
                        n.hide()
                    }
                    i.css({
                        width: "100%"
                    })
                } else {
                    n.show();
                    i.css({
                        width: "84%"
                    })
                }
            }
        } else {
            if (m) {
                h = r.find(".J_timeLine");
                f = r.find(".newsCircleOuter");
                if (d <= 400) {
                    f.css({
                        margin: "5px 8px 0px 0"
                    });
                    i.css({
                        width: "100%"
                    });
                    o.parent().css({
                        width: "80%"
                    });
                    h.css({
                        left: "9px"
                    });
                    n.css({
                        "margin-left": "30px"
                    })
                }
                c = r.height();
                a = n.width();
                if (f.length == 0) {
                    return
                }
                j = f.position().left + parseInt(f.css("margin-left").replace("px", "")) + f.width() / 2;
                h.css({
                    height: c - 20 + "px",
                    left: j + "px"
                })
            }
        }
    }
};
Site.setNewsListDefaultPicSize = function (a) {
    $articlePhotoBox = a.find(".J_articlePhotoBox");
    $articlePhotoBox.find(".cutImgPanel").each(function (c, e) {
        var d = $(this).find("img").width() / $(this).find("img").height();
        var b = (198 / d - 124) / 2;
        $(e).parent().css({
            width: "198px",
            height: "124px"
        });
        $(e).css({
            height: "124px",
            bottom: b + "px"
        });
        $(e).find("img").css({
            width: "198px",
            height: (198 / d) + "px"
        })
    });
    $articlePhotoBox.find("img").each(function (b, c) {
        if ($(c).attr("_defimg")) {
            $(c).css({
                width: "198px",
                height: "124px"
            })
        }
        $(c).parent().css({
            width: "198px",
            height: "124px"
        })
    })
};
Site.resetNewScroll = function (a, h) {
    var i = $("#module" + a),
        k = Site.getModuleAttrPattern(a).newsList,
        b = "scroll" + a,
        c = i.find("#newsList" + a),
        d = "down",
        j = c.find(".J_newsListLine"),
        g, f, e;
    c.stop(true, true);
    Fai.top.Fai.stopInterval("scroll" + a);
    j.off("mouseover.newsScroll mouseout.newsScroll");
    i.off("mouseover.newsScroll mouseout.newsScroll");
    c.css({
        height: "",
        top: "",
        position: ""
    });
    c.parent().css({
        height: "",
        overflow: "",
        position: ""
    });
    if (h) {
        d = (parseInt(k.ls.d)) ? "up" : "down";
        g = Site.getNewsListStyleData(a);
        f = g.isPictureStyle;
        e = f ? 1 : 0;
        c.height("auto");
        c.parent().height("auto");
        Fai.top.Site.newsScroll({
            moduleId: a,
            scrollMode: d,
            leader: e,
            noScroll: false
        })
    }
};
Site.setNewsListLineMaxHeight = function (b) {
    var a = 0;
    if (b.length < 1) {
        return
    }
    b.css("height", "auto");
    b.each(function (c, d) {
        $elem = $(d);
        if ($elem.height() > a) {
            a = $elem.height()
        }
        if (a > 550) {
            a = 550
        }
    });
    b.css({
        height: a + "px"
    })
};
Site.afterAddNews = function (a) {
    if (typeof (a) != "undefined") {
        document.location.reload()
    }
};
Site.newsAddComment = function () {
    if (_siteDemo) {
        Fai.ing("当前为“模板网站”，请先“复制网站”再进行评论。");
        return
    }
    var b = $.trim($("#commentCreator").val());
    var g = $("#commentCreator").attr("minlength");
    var f = $("#commentInput").val();
    var h = $("#commentInput").attr("minlength");
    var i = $("#validateCodeInput").val();
    var a = $("#commentInput").attr("newsId");
    var c = $("#submitTips").attr("isDefaultTips");
    if (typeof (c) == "string" && c == "true") {
        $("#submitTips").show();
        return
    }
    if (typeof (b) != "string") {
        $("#submitTips").text(LS.creatorTips).show();
        return
    }
    if (typeof (f) != "string" || "" == f) {
        $("#submitTips").text(LS.commentNotEmpty).show();
        return
    }
    if (f.length < h) {
        $("#submitTips").text(Fai.format(LS.commentLenTips, Fai.encodeHtml(h))).show();
        return
    }
    if (typeof (i) != "string" || "" == i) {
        $("#submitTips").text(LS.memberInputCaptcha).show();
        return
    }
    var d = {
        validateCode: i,
        newsId: a,
        creator: b,
        comment: f
    };
    var e = "ajax/newsComment_h.jsp?cmd=submitComment";
    $("#submitTips").text(LS.siteFormSubmitIng).show();
    $.ajax({
        type: "POST",
        url: e,
        data: d,
        error: function () {
            Fai.ing(LS.systemError, false);
            $("#msgBoardCaptchaImg").click()
        }, success: function (j) {
            var k = jQuery.parseJSON(j);
            if (!k || !k.success) {
                $("#msgBoardCaptchaImg").click()
            }
            Fai.removeBg();
            switch (k.msg) {
                case 1:
                    $("#submitTips").text(LS.captchaError).show();
                    break;
                case 2:
                    $("#submitTips").text(LS.creatorError).show();
                    break;
                case 3:
                    $("#submitTips").text(LS.commentError).show();
                    break;
                case 4:
                    Fai.top.location.reload();
                    $("#submitTips").text(LS.submitSuccess).show();
                    break;
                case 5:
                    $("#submitTips").text(LS.paramError).show();
                    break;
                case 6:
                    $("#submitTips").html(Fai.format(LS.commentOnlyMember, '<a href="login.jsp?url=' + Fai.encodeUrl(window.location.href) + '">' + Fai.encodeHtml(LS.login) + "</a>")).show();
                    break;
                case 7:
                    $("#submitTips").text(LS.commentClosed).show();
                    break;
                case 8:
                    $("#submitTips").text(LS.commentSubmitError).show();
                    break;
                case 9:
                    $("#submitTips").text(LS.commentCountLimit).show();
                    break;
                default:
            }
        }
    })
};
Site.showNewsQRCode = function (c, a) {
    var b = ["<div id='newsQRCodeDisplay' class='webSiteQRCodeDisplay'>", "<img title='' src='/qrCode.jsp?cmd=mobiDetailQR&id=", c, "&lcid=", a, "&t=1' >", "<span>", LS.newsQRCodeMsg, "</span>", "</div>"];
    Fai.top.$(b.join("")).appendTo("body");
    $("#newsQrCode").mouseenter(function (d) {
        $("#newsQRCodeDisplay").css("top", $(this).offset().top + "px");
        $("#newsQRCodeDisplay").css("left", ($(this).offset().left + 24) + "px");
        $("#newsQRCodeDisplay").show()
    }).mouseleave(function (d) {
        $("#newsQRCodeDisplay").hide()
    })
};
Site.initMixNews = function (l) {
    var g = l.leader || 0;
    var e = $("#module" + l.moduleId),
        b = e.find(".newsList"),
        i = b.parent();
    var d = b.find(".mixNewsStyleTitle");
    if (d.attr("mix") == 1) {
        var a = b.find("td.newsTitle").width() || 0;
        var f = b.find(".mixNewsStyleDate").width() || 0;
        var k = b.find(".articlePhotoBox img").width() || 0;
        var h = parseInt(a) - parseInt(f) - parseInt(k) - 40;
        if (Fai.isIE6()) {
            h -= 20
        }
        d.css({
            width: h + "px"
        });
        if (h < 1) {
            d.addClass("mixNewsStyleTitle-hide")
        } else {
            d.removeClass("mixNewsStyleTitle-hide")
        }
    }
    if (Fai.isIE6() && g != 0) {
        var j = b.find("td.newsTitle").height();
        b.find(".line").eq(0).css({
            height: j + "px"
        })
    }
    var c = Fai.top.$("#module" + l.moduleId);
    c.on("Fai_onModuleLayoutChange", function () {
        var p = $(this).find(".newsList");
        var t = p.parent();
        var s = p.find(".mixNewsStyleTitle");
        p.css({
            height: "auto"
        });
        t.css({
            height: "auto"
        });
        if (Fai.isIE6() && g != 0) {
            var m = p.find("td.newsTitle").height();
            p.find(".line").eq(0).css({
                height: m + "px"
            })
        }
        if (p.find(".mixNewsStyleTitle").attr("mix") == 1) {
            var r = p.find("td.newsTitle").width() || 0;
            var o = p.find(".mixNewsStyleDate").width() || 0;
            var n = p.find(".articlePhotoBox img").width() || 0;
            var q = parseInt(r) - parseInt(o) - parseInt(n) - 40;
            if (Fai.isIE6()) {
                q -= 20
            }
            p.find(".mixNewsStyleTitle").css({
                width: q + "px"
            });
            if (q < 1) {
                s.addClass("mixNewsStyleTitle-hide")
            } else {
                s.removeClass("mixNewsStyleTitle-hide")
            }
        }
        if (Fai.isIE6() && g != 0) {
            var m = p.find("td.newsTitle").height();
            p.find(".line").eq(0).css({
                height: m + "px"
            })
        }
    })
};
Site.setNewsListStylePattern = function (c, b) {
    var a = Fai.top.newsListStyleData;
    if (!a) {
        Fai.top.newsListStyleData = {}
    }
    Fai.top.newsListStyleData["newsListStyle" + c] = b
};
Site.setNewsModuleAttrPattern = function (d, a, c) {
    var b = Site.getModuleAttrPattern(d);
    if (!!b[a]) {
        b[a] = c
    }
};
Site.siteFormAdd = function (b, q, o, g, a, e, d) {
    if (_siteDemo) {
        Fai.ing("当前为“模板网站”，请先“复制网站”再进行提交。");
        return
    }
    var i = [];
    var p = o;
    var c = true;
    var l = 100;
    var f = 1000;
    var n = g;
    var m = $("#M" + b + "F" + q + "siteFormValidateCode");
    var j = m.val();
    var k = [];
    if (p.length > 0) {
        $.each(p, function (F, C) {
            if (C.hide) {
                return true
            }
            var A = C.id;
            var L = C.name;
            var B = C.must;
            var w = C.type;
            var z = C.size;
            var H = {};
            H.id = A;
            H.type = w;
            if (w == 0) {
                var J = $.trim($("#M" + b + "F" + q + "siteFormInput" + A).val());
                if (B && J == "") {
                    Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitInputIsEmpty, Fai.encodeHtml(L)), q, b);
                    c = false;
                    return false
                }
                if (J.length > l) {
                    Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitInputMaxLength, Fai.encodeHtml(L), l), q, b);
                    c = false;
                    return false
                }
                H.val = J
            } else {
                if (w == 1) {
                    var t = $.trim($("#M" + b + "F" + q + "siteFormTextArea" + A).val());
                    if (B && t == "") {
                        Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitInputIsEmpty, Fai.encodeHtml(L)), q, b);
                        c = false;
                        return false
                    }
                    if (t.length > f) {
                        Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitInputMaxLength, Fai.encodeHtml(L), f), q, b);
                        c = false;
                        return false
                    }
                    H.val = t
                } else {
                    if (w == 2) {
                        if (B && $("input[name=M" + b + "F" + q + "siteFormRadioR" + A + "]:checked").length == 0) {
                            Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitCheckIsEmpty, Fai.encodeHtml(L)), q, b);
                            c = false;
                            return false
                        }
                        if ($("input[name=M" + b + "F" + q + "siteFormRadioR" + A + "]:checked").length > 0) {
                            H.val = $("input[name=M" + b + "F" + q + "siteFormRadioR" + A + "]:checked").first().val()
                        } else {
                            H.val = ""
                        }
                    } else {
                        if (w == 3) {
                            if (B && $("input[name=M" + b + "F" + q + "siteFormCheckboxR" + A + "]:checked").length == 0) {
                                Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitCheckIsEmpty, Fai.encodeHtml(L)), q, b);
                                c = false;
                                return false
                            }
                            var D = [];
                            $("input[name=M" + b + "F" + q + "siteFormCheckboxR" + A + "]:checked").each(function (M, N) {
                                D.push($(this).val())
                            });
                            H.val = D.join("\n")
                        } else {
                            if (w == 4) {
                                if (B && ($("#M" + b + "F" + q + "siteFormSelect" + A + " option:selected").length == 0 || $("#M" + b + "F" + q + "siteFormSelect" + A + " option:selected").val() == "none")) {
                                    Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitCheckIsEmpty, Fai.encodeHtml(L)), q, b);
                                    c = false;
                                    return false
                                }
                                var s = [];
                                $("#M" + b + "F" + q + "siteFormSelect" + A + " option:selected").each(function (M, N) {
                                    s.push($(this).val())
                                });
                                H.val = s.join("\n")
                            } else {
                                if (w == 5) {
                                    return true
                                } else {
                                    if (w == 6) {
                                        var J = $("#M" + b + "F" + q + "siteFormInput" + A).val();
                                        if (B && J == "") {
                                            Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitCheckIsEmpty, Fai.encodeHtml(L)), q, b);
                                            c = false;
                                            return false
                                        }
                                        H.val = J
                                    } else {
                                        if (w == 7) {
                                            var v = $("#module" + b).find("#siteForm" + b + "fileName" + A);
                                            var I = {};
                                            if (B && v.attr("_tmpFileId") == "") {
                                                Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitCheckHasFileUpload, Fai.encodeHtml(L)), q, b);
                                                c = false;
                                                return false
                                            }
                                            if (v.attr("_tmpFileId") == "") {
                                                H.val = ""
                                            } else {
                                                H.val = v.attr("_fileId");
                                                I.tmpFileName = v.attr("_tmpFileName");
                                                I.fileId = H.val;
                                                I.tmpFileId = v.attr("_tmpFileId");
                                                k.push(I)
                                            }
                                        } else {
                                            if (w == 8) {
                                                var u = $("#M" + b + "F" + q + "siteFormSelectPhoneCT" + A).val();
                                                var K = $("#M" + b + "F" + q + "siteFormPhoneInput" + A).val();
                                                if (B && K == "") {
                                                    Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitInputIsEmpty, Fai.encodeHtml(L)), q, b);
                                                    c = false;
                                                    return false
                                                }
                                                if (!Fai.isNationMobile(K)) {
                                                    Site.siteFormShowMsg(Fai.format(LS.mobileNumRegular, Fai.encodeHtml(L)), q, b);
                                                    c = false;
                                                    return false
                                                }
                                                H.val = u + K
                                            } else {
                                                if (w == 9) {
                                                    var G = $("#M" + b + "F" + q + "siteFormMailInput" + A).val();
                                                    if (B && G == "") {
                                                        Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitInputIsEmpty, Fai.encodeHtml(L)), q, b);
                                                        c = false;
                                                        return false
                                                    }
                                                    if (!Fai.isEmail(G)) {
                                                        Site.siteFormShowMsg(Fai.format(LS.memberSignupUserAddItemCorrect, Fai.encodeHtml(L)), q, b);
                                                        c = false;
                                                        return false
                                                    }
                                                    H.val = G
                                                } else {
                                                    if (w == 10) {
                                                        var y = $("#M" + b + "F" + q + "siteFormIdentityInput" + A).val();
                                                        if (B && y == "") {
                                                            Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitInputIsEmpty, Fai.encodeHtml(L)), q, b);
                                                            c = false;
                                                            return false
                                                        }
                                                        if (!Fai.isCardNo(y)) {
                                                            Site.siteFormShowMsg(Fai.format(LS.memberSignupUserAddItemCorrect, Fai.encodeHtml(L)), q, b);
                                                            c = false;
                                                            return false
                                                        }
                                                        H.val = y
                                                    } else {
                                                        if (w == 11) {
                                                            var x = $("#M" + b + "F" + q + "siteFormSelectProvince" + A).find("option:selected").attr("_val");
                                                            var E = $("#M" + b + "F" + q + "siteFormSelectCity" + A).find("option:selected").attr("_val");
                                                            var r = $("#M" + b + "F" + q + "siteFormSelectCounty" + A).find("option:selected").attr("_val");
                                                            if (B && (x == "-1" || E == "-1")) {
                                                                Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitInputIsEmpty, Fai.encodeHtml(L)), q, b);
                                                                c = false;
                                                                return false
                                                            }
                                                            H.val = x + E + r
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            i.push(H)
        })
    }
    if (!c) {
        return false
    }
    if (n && j == "") {
        Site.siteFormShowMsg(Fai.format(LS.siteFormSubmitInputIsEmpty, m.attr("msg")), q, b);
        c = false;
        return false
    }
    if (!e) {
        e = ""
    }
    var h = "&submitContentList=" + Fai.encodeUrl($.toJSON(i));
    Site.siteFormShowMsg(LS.siteFormSubmitIng, q, b);
    $.ajax({
        type: "post",
        url: "ajax/siteForm_h.jsp",
        data: "cmd=addSubmit&formId=" + q + "&submitContentList=" + Fai.encodeUrl($.toJSON(i)) + "&vCodeId=" + b + q + "&validateCode=" + j + "&tmpFileList=" + Fai.encodeUrl($.toJSON(k)),
        error: function () {
            var s = Site.getDialogContent(false, Fai.format(LS.siteFormSubmitError));
            var r = {
                htmlContent: s,
                width: 205,
                height: 78
            };
            Site.popupBox(r)
        }, success: function (r) {
            r = $.parseJSON(r);
            if (r.success) {
                Fai.top.$("#siteFormMsgM" + b + "F" + q).hide();
                var t = Site.getDialogContent(true, Fai.format(LS.siteFormSubmitOk));
                var s = {
                    htmlContent: t,
                    width: 205,
                    height: 78,
                    autoClose: 3000
                };
                Site.popupBox(s);
                setTimeout(function () {
                    location.href = e
                }, 300);
                Site.siteFormValidation(q, b);
                Fai.top.$("#module" + b + " .siteForm input[type=text]").val("");
                Fai.top.$("#module" + b + " .siteForm textarea").val("");
                Fai.top.$("#module" + b + " .siteForm input[type=radio]").each(function () {
                    $(this)[0].checked = false
                });
                Fai.top.$("#module" + b + " .siteForm input[type=checkbox]").each(function () {
                    $(this)[0].checked = false
                });
                if (Fai.top.$("#module" + b + " .siteForm select")[0] != undefined) {
                    Fai.top.$("#module" + b + " .siteForm select")[0].selectedIndex = 0
                }
                Fai.top.$("#module" + b).find(".siteFormFileName").html(LS.siteFormSubmitNotSeletcFile);
                Fai.top.$("#module" + b).find(".siteFormFileName").removeAttr("_tmpFileId").removeAttr("_tmpFileName").removeAttr("title").removeAttr("_fileId")
            } else {
                if (r.rt == -4) {
                    Site.siteFormShowMsg(LS.siteFormSubmitCountLimit, q, b)
                } else {
                    if (r.rt == -7) {
                        Site.siteFormShowMsg(LS.siteImgFull, q, b)
                    } else {
                        if (r.rt == -20) {
                            Site.siteFormShowMsg(r.msg, q, b)
                        } else {
                            if (r.rt == -401) {
                                Site.siteFormShowMsg(LS.siteFormSubmitValidateCodeErr, q, b);
                                $("#M" + b + "F" + q + "siteFormValidateCode").val("");
                                Site.siteFormValidation(q, b)
                            } else {
                                Fai.top.$("#siteFormMsgM" + b + "F" + q).hide();
                                var t = Site.getDialogContent(false, Fai.format(LS.siteFormSubmitError));
                                var s = {
                                    htmlContent: t,
                                    width: 205,
                                    height: 78
                                };
                                Site.popupBox(s)
                            }
                        }
                    }
                }
            }
        }
    })
};
Site.fixLowIePlaceholder = function (c, b) {
    var a = false;
    if (Fai.isIE) {
        if (Fai.isIE6() || Fai.isIE7() || Fai.isIE8() || Fai.isIE9()) {
            a = true
        }
    }
    if (!a) {
        $(Fai.top.$("#module" + b + "").find(".resize:not(select)")).each(function () {
            var d = $(this).attr("_placeHolder");
            $(this).attr("placeHolder", d)
        })
    } else {
        remind = function (e, g) {
            var f = g,
                d = e.defaultValue;
            if (!d) {
                e.val(f).addClass("phcolor")
            }
            e.focus(function () {
                if (e.val() == f) {
                    $(this).val("")
                }
            });
            e.blur(function () {
                if (e.val() == "") {
                    $(this).val(f).addClass("phcolor")
                }
            });
            e.keydown(function () {
                $(this).removeClass("phcolor")
            })
        };
        $(Fai.top.$("#module" + b + "").find(".resize:not(select)")).each(function () {
            var d = $(this).attr("_placeHolder");
            remind($(this), d)
        })
    }
};
Site.siteFormNotLogin = function (d, c) {
    var b = Fai.encodeUrl(Fai.top.location.href);
    var a = LS.siteFormSubmitNotLogin + "<a href='login.jsp?url=" + b + "'>" + LS.login + "</a>" + LS.period;
    Site.siteFormShowMsg(a, d, c)
};
Site.siteFormShowMsg = function (c, b, a) {
    Fai.top.$("#siteFormMsgM" + a + "F" + b).show();
    Fai.top.$("#siteFormMsgM" + a + "F" + b).html(c)
};
Site.siteFormTimeBtn = function () {
    $(".siteFormTimer6").each(function (b, c) {
        var a = parseInt($.format.date(new Date(), "yyyy")) + 10;
        a = "1900:" + a;
        $(c).on("mousedown", function () {
            $(this).datepicker({
                dateFormat: "yy-mm-dd",
                changeYear: true,
                changeMonth: true,
                showButtonPanel: true,
                yearRange: a,
                onSelect: function () {
                    $(this).addClass("timeButtonInputChange")
                }
            })
        })
    })
};
Site.siteFormValidation = function (b, a) {
    $("#M" + a + "F" + b + "validateCodeImg").attr("src", "validateCode.jsp?" + parseInt(Math.random() * 1000) + "&vCodeId=" + a + b)
};
Site.fixSiteFormStyle = function (f, a, b, d, i) {
    Fai.top.$(".siteFormItem_N_U").find(".F" + f + "siteFormItemShowVal").find("textarea").parent().css({
        height: "102px"
    });
    if (Fai.top.$("#module" + a + "").width() <= 400) {
        if (Fai.top.$("#module" + a + "").find(".siteFormItemTable_N_U").is("table")) {
            $(Fai.top.$("#module" + a + "").find(".siteFormItemTable_N_U")).css({
                padding: "0"
            });
            $(Fai.top.$("#module" + a + "").find(".siteForm")).css({
                padding: "0 25px"
            })
        }
        if ($(Fai.top.$("#module" + a + "").find(".siteFormItem_N_U").find(".siteFormItemCheckItem_N_U_A")).length > 0) {
            $(Fai.top.$("#module" + a + "").find(".siteFormItemCheckItem_N_U_A")).css({
                "margin-right": "12px"
            });
            $(Fai.top.$("#module" + a + "").find(".siteFormItemCheckItem_N_U_A").find("input")).css({
                "float": "left"
            });
            $(Fai.top.$("#module" + a + "").find(".siteFormItemCheckItem_N_U_A").find("label")).each(function () {
                $(this).wrapAll("<div style='float:left;width:100px;'></div>")
            })
        }
        if ($(Fai.top.$("#module" + a + "").find(".siteFormValidate_N_U")).length > 0) {
            if (!d) {
                $(Fai.top.$("#module" + a + "").find(".siteFormValidate_N_U").find(".siteFormValidate")).css({
                    margin: "4px 0 0 0"
                });
                $(Fai.top.$("#module" + a + "").find(".siteFormValidate_N_U").find(".star")).css({
                    "margin-top": "4px"
                })
            }
        }
        if ($(Fai.top.$("#module" + a + "").find(".siteFormValidate_N_U")).length > 0) {
            $(Fai.top.$("#module" + a + "").find(".siteFormValidate_N_U").find("input")).css({
                width: "92%",
                "max-width": "400px"
            })
        }
        if ($(Fai.top.$("#module" + a + "").find(".faiButton")).length > 0) {
            $(Fai.top.$("#module" + a + "").find(".faiButton")).css({
                width: "95%"
            })
        }
        if ($(Fai.top.$("#module" + a + "").find("#buttonStyle")).length > 0) {
            if (d) {
                if (Fai.top.$("#module" + a + "").width() <= 220) {
                    $(Fai.top.$("#module" + a + "").find("#buttonStyle").find(".s_ibutton")).css({
                        width: "100%"
                    })
                }
                $(Fai.top.$("#module" + a + "").find("#buttonStyle")).css({
                    width: "100%"
                })
            } else {
                $(Fai.top.$("#module" + a + "").find("#buttonStyle")).css({
                    width: "77%"
                })
            }
        }
        if ($(Fai.top.$("#module" + a + "").find(".address-resize")).length > 0) {
            $(Fai.top.$("#module" + a + "").find(".address-resize")).find(".three-resize").css({
                width: "94%",
                "margin-bottom": "10px"
            });
            $(Fai.top.$("#module" + a + "").find(".address-resize")).find(".three-resize").last().css({
                "margin-bottom": ""
            });
            var c = $(Fai.top.$("#module" + a + "").find(".address-resize").find("select").first()).width();
            $(Fai.top.$("#module" + a + "").find(".address-resize").parent().find(".star")).css({
                position: "absolute",
                left: c + 25 + "px"
            })
        }
        if ($(Fai.top.$("#module" + a + "").find(".phone-resize")).length > 0) {
            $(Fai.top.$("#module" + a + "").find(".phone-resize")).find(".two-resize").first().css({
                width: "94%",
                "margin-bottom": "10px"
            });
            $(Fai.top.$("#module" + a + "").find(".phone-resize")).find(".two-resize").last().css({
                width: "93%",
                "margin-bottom": ""
            });
            var c = $(Fai.top.$("#module" + a + "").find(".phone-resize").find("select")).width();
            $(Fai.top.$("#module" + a + "").find(".phone-resize").parent().find(".star")).css({
                position: "absolute",
                left: c + 25 + "px"
            })
        }
    }
    if (Fai.top.$("#module" + a + "").find(".siteFormAddButton").find("#buttonStyle").find(".middle").width() > 241) {
        Fai.top.$("#module" + a + "").find(".siteFormAddButton").find("#buttonStyle").find(".middle").css({
            width: "240px"
        })
    }
    $(Fai.top.$(".siteFormItem_N_U").find("select")).each(function () {
        if ($(this).attr("id").indexOf("siteFormSelectPhoneCT") == -1) {
            $($(this).find("option")[0]).hide()
        }
    });
    if ($(Fai.top.$("#module" + a + "").find(".siteFormItem_N_U").find(".siteFormItemCheckItem_N_U_F")).length > 0) {
        var h = Fai.top.$("#module" + a + "").find(".siteFormItemCheckItem_N_U_F").width();
        var g = (h / b - 10) + "px";
        var e = ((h / b - 54) <= 36) ? 36 : (h / b - 54) + "px";
        Fai.top.$("#module" + a + "").find(".siteFormRadioFix").css({
            width: g
        });
        Fai.top.$("#module" + a + "").find(".siteFormRadioCententFix").css({
            width: e
        })
    }
    if (i && i.length > 0) {
        $(Fai.top.$("#module" + a + "").find(".siteFormItem_N_U").find(".resize")).each(function () {
            var k = $(this).attr("_id");
            var l = $(this).attr("_show");
            for (var j = 0; j < i.length; j++) {
                if (i[j].wo != l) {
                    break
                }
                if (i[j].i == k) {
                    $(this).css({
                        width: i[j].w * 100 + "%"
                    });
                    $(this).attr("_width", i[j].w)
                }
            }
        })
    }
};
Site.siteFormFileUpload = function (h) {
    var j = h.fileSize;
    var i = h.siteFormItemId;
    var f = h.siteFormId;
    var t = h.moduleId;
    var e = h.fileTypeList;
    var q = h.buttonValue;
    var d = h.isModuleButtonStyle;
    var o = h.showType;
    var l = h.srcjQueryUploadPath;
    var s;
    var v;
    var g = document.documentElement || document.body;
    var k = $("#siteForm" + t + "fileUpload" + i);
    var b = k.parent().width();
    var c = Fai.top.$("#module" + t + "").width();
    var a = b * 0.31;
    var u;
    if (d) {
        if (c <= 400) {
            if (o) {
                a = (c - 60) * 0.95
            } else {
                a = (c - 10) * 0.75 * 0.92
            } if (a > 161) {
                a = 161
            }
        } else {
            if (a < 111) {
                a = 111
            } else {
                if (a > 161) {
                    a = 161
                }
            }
        }
    }
    if (!Fai.isPC()) {
        var p = {
            auto: true,
            fileTypeExts: e.join(""),
            multi: true,
            fileSizeLimit: j * 1024 * 1024,
            breakPoints: true,
            saveInfoLocal: false,
            showUploadedPercent: true,
            showUploadedSize: true,
            removeTimeout: 9999999,
            post_params: {
                app: 21,
                type: 0
            },
            getFileSizeUrl: "/ajax/advanceUpload.jsp?cmd=_getUploadSize",
            uploader: "/ajax/advanceUpload.jsp?cmd=_upload",
            onUploadSuccess: function (x, z) {
                var y = $.parseJSON(z);
                if (y.success) {
                    var w = {
                        status: "end",
                        id: x.id,
                        title: "上传成功。"
                    };
                    Fai.ing("文件: " + x.name + " 上传成功", true);
                    n("upload", y, t, i)
                } else {
                    var w = {
                        status: "end",
                        id: x.id,
                        title: y.msg
                    };
                    Fai.ing("文件:" + x.name + "，" + y.msg)
                }
            }, onUploadError: function (w, x) {
                $("#progressBody_" + w.id).remove();
                $("#progressWrap_" + w.id).remove();
                Fai.ing("网络繁忙，文件:" + w.name + "上传失败，请稍后重试")
            }
        };

        function r() {
            s = k.uploadify(p);
            k.css("width", a + 2);
            k.on("click", function () {
                k.find("a")[0].click()
            })
        }
        if (typeof k.uploadify == "function") {
            r()
        } else {
            v = document.createElement("script");
            v.src = l;
            v.type = "text/javascript";
            g.appendChild(v);
            v.onload = function () {
                r()
            }
        }
    } else {
        if (d) {
            u = 5
        } else {
            u = 3
        } if (navigator.userAgent.toLowerCase().indexOf("se 2.x") > -1) {
            u = 6
        }
        var m = {
            file_post_name: "Filedata",
            upload_url: "/ajax/upsiteimg_h.jsp",
            button_placeholder_id: "siteForm" + t + "fileUpload" + i,
            file_size_limit: j + "MB",
            button_image_type: u,
            file_queue_limit: 1,
            requeue_on_error: false,
            button_height: d ? "34" : "22",
            button_width: d ? (a - 2) : "71",
            button_text: d ? "<span class='fk_btText'>" + q + "</span>" : "",
            button_text_style: d ? ".fk_btText{text-align:center; font-family: 微软雅黑; color: #666666;}" : "",
            button_text_top_padding: d ? 8 : "",
            post_params: {
                ctrl: "Filedata",
                app: 21,
                type: 0,
                isSiteForm: true
            },
            file_types: e.join(""),
            file_dialog_complete_handler: function (w) {
                this._allSuccess = false;
                this.startUpload()
            }, file_queue_error_handler: function (x, w, y) {
                switch (w) {
                    case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                        Fai.ing(LS.siteFormSubmitCheckFileSizeErr, true);
                        break;
                    case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                        Fai.ing("不允许的文件类型", true);
                        break;
                    case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                        Fai.ing("一次只能上传一个文件", true);
                        break;
                    default:
                        Fai.ing("请重新选择文件上传。", true);
                        break
                }
            }, upload_success_handler: function (x, w) {
                var y = jQuery.parseJSON(w);
                this._allSuccess = y.success;
                this._sysResult = y.msg;
                if (y.success) {
                    Fai.ing(Fai.format(LS.siteFormSubmitFileUploadSucess, Fai.encodeHtml(x.name)), true);
                    n("upload", y, t, i)
                } else {
                    Fai.ing("文件" + x.name + "，" + y.msg)
                }
            }, upload_error_handler: function (x, w, y) {
                if (w == -280) {
                    Fai.ing("文件取消成功", false)
                } else {
                    if (w == -270) {
                        Fai.ing("已经存在名称为" + x.name + "的文件。", true)
                    } else {
                        Fai.ing("服务繁忙，文件" + x.name + "上传失败，请稍候重试。")
                    }
                }
            }, upload_complete_handler: function (w) {
                if (w.filestatus == SWFUpload.FILE_STATUS.COMPLETE) {
                    setTimeout(function () {
                        s.startUpload()
                    }, s.upload_delay)
                } else {
                    if (w.filestatus == SWFUpload.FILE_STATUS.ERROR) {
                        Fai.ing("服务繁忙，文件" + w.name + "上传失败，请稍候重试。")
                    }
                }
            }, upload_start_handler: function (w) {
                Fai.enablePopupWindowBtn(0, "save", false);
                Fai.ing("读取文件准备上传", false)
            }, view_progress: function (w, z, y, x) {
                Fai.ing("正在上传" + x + "%", false)
            }
        };
        s = SWFUploadCreator.create(m)
    }

    function n(L, G, M, D) {
        if (L == "upload") {
            var A = G.id;
            var I = G.name;
            var y = G.type;
            var F = G.size;
            var E = G.path;
            var z = G.createTime;
            var w = G.groupId;
            var B = "";
            var x = 100;
            var H = 100;
            var C = G.fileId;
            var J = $("#module" + M);
            var K = J.find("#siteForm" + M + "fileName" + D);
            J.find("#siteForm" + M + "FUDesc" + D).hide();
            K.show();
            K.html(I);
            K.attr("_tmpFileId", A).attr("_tmpFileName", I).attr("title", I).attr("_fileId", C)
        }
    }
};
Site.siteFormInputResize = function (d, c) {
    var a = Fai.top.$("#module" + c + "").find(".siteFormItem_N_U").find(".resize");
    var b = false;
    if (a.length < 1) {
        return
    }
    if (Fai.top.$("#module" + c + "").width() <= 400) {
        b = true
    }
    a.each(function () {
        var n = $(this),
            g = Fai.isIE8() ? $(document) : $(window),
            o = $("#g_main"),
            l, h, m, f = $(this),
            j, i = {};
        if (n.hasClass("resize")) {
            if (n.is("textarea")) {
                n.before("<div class='u-inputResize-w' style='height:100px;' title='可拖动调节宽度'><div style='position:absolute;width:3px;height:100px;border-left:1px dashed #2b73ba;'></div></div>");
                n.after("<div class='u-inputResize-e' style='height:100px;' title='可拖动调节宽度'><div style='position:absolute;width:3px;height:100px;border-left:1px dashed #2b73ba;'></div></div>")
            } else {
                n.before("<div class='u-inputResize-w' title='可拖动调节宽度'><div style='position:absolute;width:3px;height:34px;border-left:1px dashed #2b73ba;'></div></div>");
                n.after("<div class='u-inputResize-e' title='可拖动调节宽度'><div style='position:absolute;width:3px;height:34px;border-left:1px dashed #2b73ba;'></div></div>")
            }
        }
        l = $(n).prev();
        h = $(n).next();
        if (!l.hasClass("u-inputResize-w") || !h.hasClass("u-inputResize-e")) {
            return
        }
        l.off("mousedown.fi").on("mousedown.fi", e);
        h.off("mousedown.fi").on("mousedown.fi", e);

        function e(q) {
            q = q || window.event;
            i.x = q.pageX;
            g.css("cursor", "n-resize!important");
            if ($(this).hasClass("u-inputResize-w")) {
                i.dir = "w";
                i.ptb = parseInt(f.css("width"))
            } else {
                if ($(this).hasClass("u-inputResize-e")) {
                    i.dir = "e";
                    i.ptb = parseInt(f.css("width"))
                }
            }
            i.elem = $(this);
            $(this).addClass("u-inputResize-show");
            i.ieFirstChange = $("#saveButton").hasClass("buttonDisabled");
            j = $("#dockTip").show().css({
                left: "-1000px;",
                top: "-1000px"
            });
            g.off("mousemove.fi").on("mousemove.fi", k);
            g.off("mouseup.fi").on("mouseup.fi", p);
            q.preventDefault()
        }

        function k(t) {
            t = t || window.event;
            var u = {
                    x: t.pageX
                },
                r, w, q = n.parent().width() * 0.3,
                s = n.parent().width() * 0.93,
                v = "";
            if (n.hasClass("phone-resize") || n.hasClass("address-resize")) {
                s = n.parent().width()
            }
            if (i.dir == "w") {
                r = i.x - u.x;
                w = i.ptb + r;
                w = w > q ? w : q;
                w = w > s ? s : w;
                w = Math.round(w);
                v = "宽度:"
            } else {
                if (i.dir == "e") {
                    r = u.x - i.x;
                    w = i.ptb + r;
                    w = w > q ? w : q;
                    w = w > s ? s : w;
                    w = Math.round(w);
                    v = "宽度:"
                }
            }
            n.css({
                width: w + "px"
            });
            j.html(v + w).css({
                left: t.pageX - 28,
                top: t.pageY - 40
            });
            Site.siteFormInputResizeLine(n, d, c);
            t.preventDefault()
        }

        function p(s) {
            s = s || window.event;
            i.dir = "";
            g.css("cursor", "");
            g.off("mousemove.fi");
            g.off("mouseup.fi");
            j.hide();
            i.elem.removeClass("u-inputResize-show");
            Fai.top.$("body").find(".inputResizeLine").hide();
            var r = n.width() / (n.parent().width() - 2);
            n.attr("_width", Math.round(r * 1000) / 1000);
            var q = Site.getModuleAttr(c);
            q.data.changed = true;
            Site.styleChanged();
            i = {};
            s.preventDefault()
        }
    })
};
Site.siteFormInputResizeLine = function (d, h, b) {
    var j = Fai.top.$("#module" + b + "").find(".siteFormItem_N_U").find(".resize"),
        m = j.length,
        k = $(j[0]).offset().top - 15 + "px",
        c = d.offset().left + d.width() + "px",
        l = ($(j[m - 1]).offset().top - $(j[0]).offset().top + 60) + "px",
        a = false;
    if (Fai.isIE) {
        if (Fai.isIE6() || Fai.isIE7() || Fai.isIE8()) {
            a = true
        }
    }
    if (a) {
        var g = [];
        for (var e = 0; e < j.length; e++) {
            if (!$(d).is(j[e])) {
                g.push(j[e])
            }
        }
        $(g).each(function () {
            var i = d.width();
            var o = $(this).width();
            if (d.hasClass("phone-resize") || d.hasClass("address-resize")) {
                i = i * 0.93
            }
            if ($(this).hasClass("phone-resize") || $(this).hasClass("address-resize")) {
                o = o * 0.93
            }
            var n = $(this).offset().left + o + "px";
            if (Math.abs(i - o) < 3) {
                if (!Fai.top.$("body").find(".inputResizeLine").is("div")) {
                    Fai.top.$("body").append("<div class='inputResizeLine' style='display:none;height:" + l + ";width:1px;position:absolute;left:" + n + ";top:" + k + ";border-right:1px solid #2b73ba;'></div>")
                } else {
                    Fai.top.$("body").find(".inputResizeLine").css({
                        left: n,
                        top: k,
                        height: l
                    })
                }
                Fai.top.$("body").find(".inputResizeLine").show();
                return false
            } else {
                Fai.top.$("body").find(".inputResizeLine").hide()
            }
        })
    } else {
        function f(i) {
            return !$(i).is(d)
        }
        $($.makeArray(j).filter(f)).each(function () {
            var i = d.width();
            var o = $(this).width();
            if (d.hasClass("phone-resize") || d.hasClass("address-resize")) {
                i = i * 0.93
            }
            if ($(this).hasClass("phone-resize") || $(this).hasClass("address-resize")) {
                o = o * 0.93
            }
            var n = $(this).offset().left + o + "px";
            if (Math.abs(i - o) < 3) {
                if (!Fai.top.$("body").find(".inputResizeLine").is("div")) {
                    Fai.top.$("body").append("<div class='inputResizeLine' style='display:none;height:" + l + ";width:1px;position:absolute;left:" + n + ";top:" + k + ";border-right:1px solid #2b73ba;'></div>")
                } else {
                    Fai.top.$("body").find(".inputResizeLine").css({
                        left: n,
                        top: k,
                        height: l
                    })
                }
                Fai.top.$("body").find(".inputResizeLine").show();
                return false
            } else {
                Fai.top.$("body").find(".inputResizeLine").hide()
            }
        })
    }
};
Site.siteFormAddressInit = function (i, c, b, f, j) {
    var g = [];
    var h;
    var d;
    var a;
    var e;
    if (f == 2052 || f == 1028) {
        h = site_cityUtil.getProvince()
    } else {
        h = site_cityUtil.getProvinceEn()
    }
    $.each(h, function (k, l) {
        if (f == 2052 || f == 1028) {
            g.push("<option _val='" + l.name + "' value='" + l.id + "'>" + site_cityUtil.simpleCityNameStr(l.name) + "</option>")
        } else {
            g.push("<option _val='" + l.name + "' value='" + l.id + "'>" + site_cityUtil.simpleCityNameStrEn(l.name) + "</option>")
        }
    });
    $("#M" + b + "F" + c + "siteFormSelectProvince" + i + "").html("").html("<option _val='-1' value='-1'>" + j + "</option>" + g.join("")).change(function (k) {
        d = $("#M" + b + "F" + c + "siteFormSelectProvince" + i + "").val();
        if (isNaN(d) || d <= 0) {
            $("#M" + b + "F" + c + "siteFormSelectCity" + i + "").html("").html("<option value='-1'>" + j + "</option>");
            $("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").html("").html("<option value='-1'>" + j + "</option>")
        }
        a = [];
        if (f == 2052 || f == 1028) {
            citylist = site_cityUtil.getCities(d)
        } else {
            citylist = site_cityUtil.getCitiesEn(d)
        }
        $.each(citylist, function (l, m) {
            a.push("<option _val='" + m.name + "' value='" + m.id + "' >" + m.name + "</option>")
        });
        $("#M" + b + "F" + c + "siteFormSelectCity" + i + "").removeAttr("disabled");
        $("#M" + b + "F" + c + "siteFormSelectCity" + i + "").html("").html("<option _val='-1' value='-1'>" + j + "</option>" + a.join("")).unbind().bind("change", function (l) {
            cityId = $("#M" + b + "F" + c + "siteFormSelectCity" + i + "").val();
            if (isNaN(cityId) || cityId <= 0) {
                $("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").html("").html("<option _val='-1' value='-1'>" + j + "</option>")
            }
            e = [];
            if (f == 2052 || f == 1028) {
                countylist = site_cityUtil.getCounty(cityId)
            } else {
                countylist = site_cityUtil.getCountyEn(cityId)
            }
            $.each(countylist, function (m, n) {
                e.push("<option _val='" + n.name + "' value='" + n.id + "' >" + n.name + "</option>")
            });
            $("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").removeAttr("disabled");
            $("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").html("").html("<option _val='-1' value='-1'>" + j + "</option>" + e.join("")).unbind().bind("change", function (m) {});
            if ($("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").find("option").length <= 1 && cityId != -1) {
                $("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").hide()
            } else {
                $("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").show()
            }
        })
    })
};
Site.addFlashModuleFlash = function (a) {
    var c = "Opaque";
    if (a.transparent != 1) {
        c = "transparent"
    }
    var b = ['<embed id="' + a.moduleId + '" width="' + a.width + '" height="' + a.height + '" allowscriptaccess="' + a.allowScriptAccess + '" style="visibility: visible;" pluginspage="http://get.adobe.com/cn/flashplayer/" flashvars="playMovie=true&amp;auto=1" allowfullscreen="true" quality="hight" src="' + a.path + '" type="application/x-shockwave-flash" wmode="' + c + '"></embed>'];
    $("#flashModuleFlash" + a.moduleId).append(b.join(""))
};
Site.noticeMarquee = function (f, x) {
    var w = {
        direction: "up",
        speed: "normal",
        loop: "infinite",
        moveout: false,
        isScrolling: false
    };
    $.extend(w, f);
    if (w.speed == "normal") {
        $.extend(w, {
            speed: 28
        })
    } else {
        if (w.speed == "slow") {
            $.extend(w, {
                speed: 60
            })
        } else {
            $.extend(w, {
                speed: 13
            })
        }
    }
    $("#noticeMarquee" + w.id).data("options", f);
    var m = w.id,
        u = $("#noticeMarquee" + m),
        h = u.outerHeight(true),
        g = u.outerWidth(true),
        p = u.children().width(),
        c = $("#noticeContainer" + m),
        d = c.outerWidth(),
        l = (p > d) ? p : d;
    if (x != null) {
        var k = $("#noticeMarquee" + x).width();
        k = k ? k : 0;
        g = k;
        l = (g > d) ? g : d;
        Fai.stopInterval("rm" + x);
        $("#noticeMarqueeCopy" + x).remove();
        $(u).appendTo($("#noticeContainer" + x));
        $("#noticeMarqueeNewParent" + x).remove()
    }
    var B = w.direction,
        z = 0,
        j = "left",
        r = w.speed,
        A = (w.loop != "infinite" || w.loop <= 0) ? 1 : w.loop,
        n = w.moveout,
        C = w.isScrolling,
        v = w.noticeType,
        y = 20,
        t = $("<div id='noticeMarqueeCopy" + m + "' class='noticeMarquee' style='overflow:hidden;width:" + l + "px;' ></div>");
    var i = "<div id='noticeMarqueeNewParent" + m + "' style='position:relative;overflow:hidden;width:" + l * 2 + ";";
    if (v != 4) {
        i += "left:23px;'></div>"
    } else {
        i += "'></div>"
    }
    var o = $(i);

    function q() {
        o.appendTo(u.parent());
        u.appendTo(o);
        t.appendTo(o);
        if (!C && !n) {} else {
            $(u.html()).appendTo(t)
        } if (B == "left") {
            z = h;
            j = "left"
        } else {
            z = 0 - l;
            if (C && !n) {
                z = 0
            }
            if (C && n) {
                z = -l
            }
            j = "left"
        } if (n) {
            u.css(j, 0)
        } else {
            u.css(j, z)
        } if (B == "left" || B == "right") {
            u.css("top", 0)
        }
        $("#module" + m + " .noticeContainer").mouseover(function () {
            Fai.stopInterval("rm" + m)
        }).mouseout(function () {
            if (A == "infinite" || A > 0) {
                Fai.startInterval("rm" + m)
            }
        });
        e();
        a(B)
    }

    function b() {
        var D = u.find("img");
        if (D.length > 0) {
            var F = D[0].width;
            for (var E = 0; E < D.length; E++) {
                if (F < D[E].width) {
                    F = D[E].width
                }
            }
            return F
        }
        return 0
    }

    function e() {
        var D = u.find("img");
        $(D).load(function () {
            var E = u.height();
            if (h != E) {
                h = E;
                a(B)
            }
        })
    }

    function a(D) {
        if (D == "left" || D == "right") {
            o.css("position", "relative");
            o.css("width", l);
            t.css("top", 0);
            if (D == "left") {
                t.css("margin-left", y);
                if (C && !n) {
                    u.css("left", l);
                    t.css("left", l * 2)
                }
                if (C && n) {
                    t.css("left", l)
                }
                if (!C && !n) {
                    u.css("left", g);
                    t.css("left", l + g)
                }
                if (!C && n) {
                    t.css("left", l + g)
                }
            } else {
                t.css("left", 0);
                u.css("margin-left", y);
                u.css("width", (l) + "px");
                if (C && !n) {
                    u.css("padding-left", l);
                    u.css("padding-right", l);
                    o.scrollLeft(l * 2 + y)
                }
                if (C && n) {
                    u.css("padding-left", l);
                    o.scrollLeft(l * 2)
                }
                if (!C && !n) {
                    u.css("padding-right", l + g);
                    u.css("padding-left", l + g);
                    o.scrollLeft(l + g + y)
                }
                if (!C && n) {
                    u.css("padding-right", l + g);
                    u.css("padding-left", l + g);
                    o.scrollLeft(l + g + y)
                }
            }
        }
    }

    function s() {
        if (B == "left") {
            var D = o.scrollLeft();
            D++;
            if (C && !n) {
                if (D == l * 2 + y) {
                    o.scrollLeft(l)
                } else {
                    o.scrollLeft(D)
                }
            }
            if (C && n) {
                if (D == l + y) {
                    o.scrollLeft(0)
                } else {
                    o.scrollLeft(D)
                }
            }
            if (!C && !n) {
                if (D == (l + g) + y) {
                    o.scrollLeft(0)
                } else {
                    o.scrollLeft(D)
                }
            }
            if (!C && n) {
                if (D == l + g + y) {
                    o.scrollLeft(0)
                } else {
                    o.scrollLeft(D)
                }
            }
        } else {
            if (B == "right") {
                var D = o.scrollLeft();
                D--;
                if (C && !n) {
                    if (D == -1) {
                        o.scrollLeft(l + y)
                    } else {
                        o.scrollLeft(D)
                    }
                }
                if (C && n) {
                    if (D == -1) {
                        o.scrollLeft(l + y)
                    } else {
                        o.scrollLeft(D)
                    }
                }
                if (!C && !n) {
                    if (D == -1) {
                        o.scrollLeft(l + g + y)
                    } else {
                        o.scrollLeft(D)
                    }
                }
                if (!C && n) {
                    if (D == -1) {
                        o.scrollLeft(l + g + y)
                    } else {
                        o.scrollLeft(D)
                    }
                }
            }
        }
    }
    if (f != null) {
        q();
        Fai.addInterval("rm" + m, s, r);
        Fai.startInterval("rm" + m)
    }
};
Site.saveNoticeMarqueeProps = function (a) {
    if (a != null) {
        $("#noticeMarquee" + a.id).data("options", a)
    }
    $("#module" + a.id).on("Fai_onModuleSizeChange", function () {
        Site.noticeMarquee($("#noticeMarquee" + a.id).data("options"), a.id)
    });
    $("#module" + a.id).on("Fai_onModulePositionChange", function () {
        Site.noticeMarquee($("#noticeMarquee" + a.id).data("options"), a.id)
    })
};
Site.noticeMarqueeUpDown = function (c) {
    var b = {
        direction: "top",
        speed: "normal",
        stopTime: 1000
    };
    $.extend(b, c);
    if ("fast" === b.speed) {
        $.extend(b, {
            speed: 500
        })
    } else {
        if ("slow" === b.speed) {
            $.extend(b, {
                speed: 1100
            })
        } else {
            $.extend(b, {
                speed: 850
            })
        }
    }
    var g = $("#noticeScrollbar" + b.id + " li");
    if (g.length == 1) {
        var f = $(g.get(0));
        var a = "<li class='scrollbarLi'>" + f.html() + "</li>";
        $(a).insertAfter(f)
    }
    $("#noticeScrollbar" + b.id).marquee({
        yScroll: b.direction,
        showSpeed: b.speed,
        pauseSpeed: b.stopTime,
        hoverChange: false
    });
    var e = $("#module" + b.id + " .formMiddleContent");
    e.css("overflow", "hidden");
    e.css("width", "98%");
    var d = $("#module" + b.id + " .formMiddleCenter");
    d.css("overflow", "hidden")
};
Site.noticeUpDownSizeChange = function (d) {
    var b = $("#noticeMarquee" + d),
        a = b.height(),
        c = b.children().children();
    $.each(c, function (e, f) {
        $(f).css("top", -(a + 2) + "px")
    });
    $("#noticeScrollbar" + d).removeData("_innerHeight")
};
Site.setSerTextOverflow = function (d) {
    var c = $("#serOnline-container" + d);
    var e = c.find(".serOnline-service").children(".serOnline-list-h");
    var a = c.find(".serOnline-contact").children(".serOnline-list-h");
    var b = c.outerWidth(),
        f = c.outerHeight();
    Site.setSerListCSS(e, b);
    Site.setSerListCSS(a, b)
};
Site.setSerListCSS = function (a, d) {
    var c, f, e, b;
    $.each(a, function (h, g) {
        c = $(g).outerWidth();
        if (c > d - 3) {
            if (f != null && f < d - 3) {
                $('<div style="clear:both;"></div>').insertAfter($(g).prev())
            }
            b = $(g).outerWidth();
            $(g).css("white-space", "normal");
            $(g).css("word-break", "break-all");
            e = true
        }
        f = e ? b : $(g).outerWidth();
        e = false
    })
};
Site.initCustomIframe = function (d) {
    var f = Fai.top.$("#iframe" + d);
    var b = f.attr("width");
    var c = f.attr("height");
    var a = f.attr("src");
    var e = "<iframe id='iframe" + d + "' frameborder='0' height='" + c + "' width='" + b + "' src='" + a + "'></iframe>";
    f.replaceWith(e)
};
Site.initModuleWeiboShow = function (b, e, a, d) {
    var h = Fai.top.$("#wbShowFrame" + e);
    var g = h.attr("width");
    var f = h.attr("height");
    var i = "<iframe id='wbShowFrame" + e + "' name='wbShowFrame' frameborder='0' scrolling='no' height='" + f + "' width='" + g + "' src='about:blank'></iframe>";
    h.replaceWith(i);
    var c = Fai.top.$("#wbShowFrame" + e).parent().width();
    var j = a + c + "&ran=" + Math.random();
    Site.initIframeLoading(b, e, j, d);
    $("#refreshChlid" + e).css("padding-top", "40%")
};
Site.initLocaler = function (b, a) {
    if (typeof Fai.top._localerJsonTmp == "undefined") {
        Fai.top._localerJsonTmp = b
    }
    if (a) {
        Site.initLocalerManage(b)
    } else {
        Site.initLocalerSite()
    }
    Site.checkLocalerItemWidthForIE();
    Site.bindLocalerItemEvent()
};
Site.initLocaleStyle = function (b) {
    var a = $("#webTop").width();
    if (b > a) {
        $("#localer").css("left", "auto");
        $("#localer").css("right", a - b - $("#localer").width() + "px")
    } else {
        $("#localer").css("left", b);
        $("#localer").css("right", "auto")
    }
};
Site.initLocalerSite = function () {
    $("#localer").bind("mouseenter", function () {
        Site.openLocalerList()
    }).bind("mouseleave", function () {
        Site.closeLocalerList(this)
    })
};
Site.openLocalerList = function () {
    var b = parseInt($("#localer").attr("_moduleStyle"));
    if (b >= 1 && b <= 3) {
        return
    }
    var a = $("#localer").find(".J_localerList").height();
    if (Fai.isIE()) {
        $("#localer").find(".J_localerPanel").stop().animate({
            height: a
        }, {
            duration: 200
        })
    } else {
        $("#localer").find(".J_localerPanel").css("height", a + "px")
    }
    $("#localer").find(".J_localerPanel .J_localerList .first .arrow").addClass("arrow_hover")
};
Site.closeLocalerList = function (c) {
    var b = parseInt($("#localer").attr("_moduleStyle"));
    if (b >= 1 && b <= 3) {
        return
    }
    var a = $("#localer").find(".J_localerPanel .J_localerList .first").height();
    if (Fai.isIE()) {
        $("#localer").find(".J_localerPanel").stop().animate({
            height: a
        }, {
            duration: 200
        })
    } else {
        $("#localer").find(".J_localerPanel").css("height", a + "px")
    }
    $("#localer").find(".J_localerPanel .J_localerList .first .arrow").removeClass("arrow_hover")
};
Site.bindLocalerItemEvent = function () {
    $("#localer").find(".J_localerPanel .J_localerList .localerItemContent").bind("mouseenter", function () {
        if ($(this).hasClass("first")) {
            return
        }
        $(this).addClass("localerItemContent_hover")
    }).bind("mouseleave", function () {
        if ($(this).hasClass("first")) {
            return
        }
        $(this).removeClass("localerItemContent_hover")
    })
};
Site.checkLocalerItemWidthForIE = function () {
    Fai.top.$("#localer").find(".localerItemContent").removeAttr("style");
    var b = parseInt(Fai.top.$("#localer").attr("_moduleStyle"));
    if ((Fai.isIE6() || Fai.isIE7()) && (b >= 4 && b <= 9)) {
        var c = Fai.top.$("#localer").find(".J_localerPanel").width();
        Fai.top.$("#localer").find(".localerItemContent").css("width", c + "px")
    }
    if ((Fai.isIE6()) && (b >= 1 && b <= 3)) {
        var a = Fai.top.$("#localer").find(".J_localerPanel").height();
        Fai.top.$("#localer").find(".J_localerPanel").css("line-height", a + "px")
    }
};
Site.initFloatImg = function (a) {
    Site.hoverChangeImage()
};
Site.floatImgInContainerForms = function (a) {
    if (!$("#webContainerTable").length) {
        return false
    }
    if ($("#webContainerTable").find("#module" + a).length) {
        if (!(Site.checkNestModule($("#module" + a)).parentId > 0)) {
            return true
        } else {
            return false
        }
    } else {
        return false
    }
};
Site.bindImageEffectCusEvent_floatImg = function (g, c) {
    var f = Fai.top.$(g).find(".imageEffects"),
        a = true,
        e = Fai.top.$(g).find("a"),
        d = $(e).attr("href"),
        b = (typeof d == "undefined" || d.length == 0 || d.indexOf("javascirpt") > 0 || d.indexOf("return") > 0 || e.length == 0) ? false : true;
    if (!b) {
        a = false
    }
    if (a) {
        $(f).css("cursor", "pointer")
    } else {
        $(f).css("cursor", "default")
    }
    $(f).off("click.imgEft").on("click.imgEft", function () {
        var l = $(this).parents("." + c.targetParent).find("a");
        if (Fai.isNull(l)) {
            return
        }
        var i = $(l).attr("href"),
            h = $(l).attr("onclick"),
            j = $(l).attr("target");
        if (typeof j == "undefined") {
            j = "_self"
        }
        var k = (typeof i == "undefined" || i.length == 0 || i.indexOf("javascirpt") > 0 || i.indexOf("return") > 0 || e.length == 0) ? false : true;
        if (typeof h != "undefined") {
            $(l).click()
        } else {
            if (k) {
                window.open(i, j)
            }
        }
    })
};
Site.mallCoupon = function (a) {
    this.moduleId = a;
    this.module = Fai.top.$("#module" + a);
    this.couponList = this.module.find("#couponList" + a)
};
(function (c, a, b) {
    var d = a.prototype,
        h = {};
    d.init = function (k) {
        h["moduleId" + k] = this;
        i(k);
        if (window.localStorage) {
            var l = window.localStorage.getItem("receTime");
            if (l && Fai.top._TOKEN) {
                if (new Date().getTime() - Number(l) > 120000) {
                    localStorage.removeItem("receTime");
                    return
                }
                var j = window.localStorage.getItem("cpId");
                c("div.receiveCoupon[coupon_id=" + j + "]").click();
                window.localStorage.removeItem("receTime");
                window.localStorage.removeItem("cpId")
            }
        }
    };

    function i(j) {
        h["moduleId" + j].module.on("click", ".receiveCoupon", function () {
            if (_manageMode) {
                if (!Fai.top._panelOptionData.allowCoupon) {
                    return
                }
                var l = {};
                l.height = 75;
                l.width = 280;
                l.htmlContent = '<div class="resultFailIcon addItemTextTips" style="font-size:14px; color:#636363 ;margin-left: 39px; padding-left: 35px;">';
                l.htmlContent += "当前为管理状态，领取失败</div>";
                l.autoClose = 2000;
                var k = Site.popupBox(l)
            } else {
                var m = c(this).attr("coupon_id");
                var n = c(this).attr("bg_id");
                f(m, n)
            }
        })
    }

    function f(j, k) {
        c.ajax({
            url: "ajax/mallCoupon_h.jsp?cmd=receiveCoupon",
            data: "bgId=" + k + "&cid=" + j + "&t=" + new Date().getTime(),
            dataType: "json",
            success: function (m) {
                var p = {};
                if (m.success) {
                    var o = m.coupon;
                    p.height = 229;
                    p.width = 379;
                    var q = [];
                    q.push('<div class="coupon-popup-box">');
                    q.push('<div class="coupon-receive-success">');
                    q.push(LS.CongratulatSuccess);
                    q.push("</div>");
                    q.push('<div class="coupon-line">');
                    q.push(LS.coupon + LS.name + "：" + o.couponName);
                    q.push("</div>");
                    q.push('<div class="coupon-line">');
                    q.push(LS.denomination + '：<span class="savePrice">' + o.savePrice + "</span>");
                    q.push("</div>");
                    q.push('<div class="coupon-line">');
                    q.push(LS.useConditionOrderOver + Fai.top.choiceCurrencyVal + o.orderMinPrice);
                    q.push("</div>");
                    q.push('<div class="coupon-line">');
                    q.push(LS.vilidaty + "：" + o.validity);
                    q.push("</div>");
                    q.push('<div class="coupon-opera">');
                    q.push('<div class="goto-coupon-btn">');
                    q.push(LS.view + LS.coupon);
                    q.push("</div>");
                    q.push('<div class="back-page">');
                    q.push(LS.returnPage);
                    q.push("</div>");
                    q.push("</div>");
                    q.push("</div>");
                    p.htmlContent = q.join("");
                    var l = Site.popupBox(p);
                    g(l);
                    e(l)
                } else {
                    var n = m.rt;
                    if (n == -23) {
                        if (window.localStorage) {
                            var r = window.localStorage.getItem("receTime");
                            if (r) {
                                window.localStorage.removeItem("receTime");
                                window.localStorage.removeItem("cpId")
                            }
                            localStorage.setItem("cpId", j);
                            localStorage.setItem("receTime", new Date().getTime())
                        }
                        document.location.href = "login.jsp?url=" + document.location.href
                    } else {
                        if (n == -4) {
                            p.height = 155;
                            p.width = 312;
                            var q = [];
                            q.push('<div class="coupon-popup-box">');
                            q.push('<div class="coupon-receive-fail">');
                            q.push(LS.receiveFail);
                            q.push("</div>");
                            q.push('<div class="coupon-msg">');
                            q.push(LS.receiveOverLimit);
                            q.push("</div>");
                            q.push('<div style="white-space: nowrap;">');
                            q.push('<div class="goto-coupon-btn">');
                            q.push(LS.view + LS.coupon);
                            q.push("</div>");
                            q.push('<div class="back-page">');
                            q.push(LS.returnPage);
                            q.push("</div>");
                            q.push("</div>");
                            q.push("</div>");
                            p.htmlContent = q.join("");
                            var l = Site.popupBox(p);
                            l.css("width", "");
                            l.find(".popupCnBg").css("width", "");
                            g(l);
                            e(l)
                        } else {
                            p.height = 110;
                            p.width = 270;
                            var q = [];
                            q.push('<div class="coupon-popup-box">');
                            q.push('<div class="coupon-receive-fail">');
                            q.push(LS.receiveFail);
                            q.push("</div>");
                            q.push('<div class="coupon-msg">');
                            if (m.msg == "receiveOverLimit") {
                                q.push(LS.receiveOverLimit)
                            } else {
                                if (m.msg == "couponCountZero") {
                                    q.push(LS.couponCountZero)
                                } else {
                                    if (m.msg == "couponExpired") {
                                        p.height = 110;
                                        p.width = 210;
                                        q.push(LS.couponExpired)
                                    }
                                }
                            }
                            q.push("</div>");
                            q.push("</div>");
                            p.htmlContent = q.join("");
                            var l = Site.popupBox(p);
                            l.css("width", "");
                            l.find(".popupCnBg").css("width", "")
                        }
                    }
                }
            }, error: function () {
                Fai.ing(LS.systemError, true)
            }
        })
    }

    function g(j) {
        j.find(".back-page").on("click", function () {
            j.find(".popupBClose").click()
        })
    }

    function e(j) {
        j.find(".goto-coupon-btn").on("click", function () {
            document.location.href = "mCenter.jsp?item=memberCoupon"
        })
    }
    d.showPage = function () {
        return function (k, j) {
            c.ajax({
                url: "../ajax/mallCoupon_h.jsp?cmd=getPageData",
                data: "moduleId=" + k + "&pageNo=" + j,
                dataType: "json",
                success: function (l) {
                    if (l.success) {
                        var m = [];
                        c.each(l.list, function (o, n) {
                            if (n.id == 0) {
                                return false
                            }
                            m.push("<div class='coupon' id='coupon" + n.id + "' couponId='" + n.id + "' couponName='" + n.couponName + "'>");
                            m.push("<div class='couponWatermark '>券</div>");
                            if (n.state) {
                                m.push("<div class='coupon-left coupon-" + l.bg + "-left'></div>");
                                m.push("<div class='coupon-content coupon-color-" + l.bg + "'>")
                            } else {
                                m.push("<div class='coupon-left coupon-invalid-left'></div>");
                                m.push("<div class='coupon-content coupon-color-invalid'>")
                            }
                            m.push("<div class='couponSavePrice'><span class='priceSign'>" + Fai.top.choiceCurrencyVal + "</span><span class='couponPrice'>" + n.savePrice + "</span></div>");
                            if (n.state) {
                                m.push("<div class='couponUseCondition'><span>" + LS.full + n.orderMinPrice + LS.money + "</span><br><span>" + LS.canUse + "</span><br><span class='coupon-name coupon-name-" + l.bg + "'>" + n.couponName + "</span></div>")
                            } else {
                                m.push("<div class='couponUseCondition'><span>" + LS.full + n.orderMinPrice + LS.money + "</span><br><span>" + LS.canUse + "</span><br><span class='coupon-name coupon-name-invalid'>" + n.couponName + "</span></div>")
                            }
                            var q = LS.immediatelyReceive;
                            var p = l.bg;
                            if (!n.state) {
                                q = LS.expired;
                                p = "gray"
                            } else {
                                if (n.couponLeaveAmount == 0 && !n.autoInc) {
                                    q = LS.receivedOver;
                                    p = "gray"
                                }
                            }
                            m.push("<div class='receiveCoupon font-color-" + p + "' coupon_id='" + n.id + "'>" + q + "</div>");
                            m.push("<div class='validTime'>" + LS.vilidaty + "：" + n.validity + "</div>");
                            m.push("</div>");
                            if (n.state) {
                                m.push("<div class='coupon-right coupon-" + l.bg + "-right'></div>")
                            } else {
                                m.push("<div class='coupon-right coupon-invalid-right'></div>")
                            }
                            m.push("</div>")
                        });
                        h["moduleId" + k].couponList.html(m.join(""));
                        Fai.Cookie.set("pageNo" + k, j);
                        if (_manageMode && Fai.top._panelOptionData.allowCoupon) {
                            Site.initModuleCouponListItemManage({
                                couponParent: "couponList" + k,
                                coupon: "coupon",
                                moduleId: k
                            })
                        }
                    }
                }, error: function () {
                    Fai.ing(LS.systemError, true)
                }
            });
            if (_manageMode) {
                Site.initModuleCouponListItemManage({
                    couponParent: "couponList" + k,
                    coupon: "coupon",
                    moduleId: k
                })
            }
        }
    }
})(jQuery, Site.mallCoupon);
Site.initMallCoupon = function (a) {
    Fai.top.mallCoupon = Fai.top.mallCoupon || {};
    Fai.top.mallCoupon["couponList" + a] = new Site.mallCoupon(a);
    Fai.top.mallCoupon["couponList" + a].init(a)
};
Site.videoCompatible = function (p) {
    var a = Fai.top.navigator.userAgent,
        j = /^https?.+\.(mp4)$/i,
        i = p.flvPagePath,
        d = false;
    if (j.test(i)) {
        d = true
    }
    if (!(d && /(iPhone|iPad|iPod|iOS|Android)/i.test(a))) {
        return
    }
    var b = !!(document.createElement("video").canPlayType),
        k = "mediaplayerObj" + p.moduleId,
        m = "mediaplayer" + p.moduleId,
        h = [],
        g = [],
        l, f, c, o;
    if (!b && p.mediaJsUrl.length > 0) {
        if (Fai.top.$("#jz-Html5VideoJs").length < 1) {
            var n = document.createElement("script"),
                e = document.head || document.body;
            n.id = "jz-Html5VideoJs";
            n.type = "text/javascript";
            n.src = p.mediaJsUrl;
            e.appendChild(n)
        }
    }
    if (p.videoType == 1) {
        k = p.moduleId;
        m = "onLineFlv" + p.moduleId
    }
    c = Fai.top.$("#" + m);
    o = Fai.top.$("#" + k);
    h.push('id="' + k + '"');
    if (p.flvImgUrl.length > 0) {
        h.push('poster="' + p.flvImgUrl + '"')
    }
    h.push('width="' + p.flvWidth + '"');
    h.push('height="' + p.flvHeight + '"');
    h.push("controls");
    l = h.join(" ");
    g.push("<video " + l + ">");
    g.push('<source src="' + i + '">');
    g.push("抱歉，你的浏览器不能查看该视频。");
    g.push("</video>");
    f = g.join("");
    if (o.length > 0) {
        o.remove();
        c.append(f)
    }
};
Site.optimizeFooterAlign = function () {
    var d = $("#footerNav"),
        b = true,
        g;
    if (d.length < 1) {
        return
    }
    var a = d.find(".J_footerItemListContainer"),
        h = a.children(".J_footerItemSection");
    if (h.length < 1) {
        return
    }
    var f = a.children(".J_footerItemSpacing_end"),
        k = h.first(),
        i = h.last(),
        j = i.find(".J_footerItemContainer"),
        c, e;
    if (Fai.top._designAuth) {
        g = Site.getFooterStyleData();
        if (g.fa != 2) {
            b = false
        }
        if (g.fis == 2) {
            b = false
        }
    }
    if (k.offset().top < i.offset().top) {
        b = false
    }
    if (!b) {
        i.removeClass("fixWidth");
        Fai.top.Fai.removeCtrlStyleCss("stylefooter", "webFooterTable", ".footerItemSpacing_end", "display");
        return
    }
    if (Fai.top._designAuth) {
        i.removeClass("fixWidth")
    }
    e = i.width();
    c = j.width();
    Fai.top.Fai.setCtrlStyleCss("stylefooter", "webFooterTable", ".footerItemSpacing_end", "display", "none");
    if (e < c) {
        i.removeClass("fixWidth")
    } else {
        i.addClass("fixWidth");
        Fai.top.Fai.setCtrlStyleCss("stylefooter", "webFooterTable", ".footerItemListContainer .fixWidth", "width", c + "px")
    }
};
Site.changeTheLogoSize = function () {
    if ($("#footerSupport")) {
        var b = $("#footerSupport").css("font-size");
        var a = parseInt(b.substring(0, b.length - 2)) + 3;
        $("#faisco-icons-logo").css("font-size", a + "px")
    }
};
Site.initCorpTitleContent = function (c, j, a) {
    var e = $("#" + c),
        i = $("#corpTitle"),
        k, l, m, f, d, h, g, b;
    if (i.length <= 0) {
        return
    }
    if (!j) {
        a = ""
    }
    d = i.clone();
    d.html(j);
    if (c == "primaryTitle") {
        g = !!(d.find("#primaryTitle").length);
        b = !!(d.find(".newPrimaryTitle").length);
        if (!g && !b && j != "请输入网站标题") {
            l = $("<div id='primaryTitle' style='" + a + "'></div>");
            i.append(l);
            l.html(j.replace(/\s/g, "&nbsp;"))
        } else {
            i.append(j)
        }
    }
    if (c == "subTitle") {
        if (d.find("#subTitle").length <= 0) {
            f = $("<div id='subTitle' style='" + a + "'></div>");
            i.append(f);
            f.html(j.replace(/\s/g, "&nbsp;"))
        } else {
            i.append(j)
        }
    }
};
Site.initForms = function () {
    $(".form").each(function () {
        var a = $(this),
            b = a.attr("_moduleid") || 0;
        if (b > 0) {
            if (a.attr("_autoHeight") != "1") {
                Site.setModuleHeight2(b, a.height())
            } else {
                if (a.hasClass("formStyle29")) {
                    Site.setModuleHeight2(b, a.height())
                }
            }
        }
    })
};
Site.setModuleHeight2 = function (m, l) {
    var b = Fai.top.$("#module" + m);
    b.css("height", l + "px");
    if (b.hasClass("formStyle80") || b.hasClass("formStyle87")) {
        return
    }
    var g = b.find(".formTop" + m);
    var k = b.find(".formBanner" + m);
    var j = b.find(".formMiddle" + m);
    var r = b.find(".formBottom" + m);
    var a = g.is(":visible") ? g.outerHeight(true) : 0;
    var f = k.is(":visible") ? k.outerHeight(true) : 0;
    var s = r.is(":visible") ? r.outerHeight(true) : 0;
    var n = j.find(".formMiddleCenter" + m);
    var o = j.find(".formMiddleContent" + m);
    var t = l - a - f - s - Fai.getFrameHeight(j);
    j.css("height", t + "px");
    t = t - Fai.getFrameHeight(n);
    t = t - Fai.getFrameHeight(o);
    if (!b.hasClass("formStyle81") && !b.hasClass("formStyle82") && !b.hasClass("formStyle85") && !b.hasClass("formStyle98")) {
        if (t > 0) {
            o.css("height", t + "px");
            o.css("overflow-y", "hidden")
        }
    }
    if (b.hasClass("formStyle29")) {
        var p = b.find(".titleTable"),
            i = b.find(".formTabButtonList");
        if (p.length == 1) {
            var h = p.outerHeight(true);
            if (b.find(".formTabDirectionY").length > 0) {
                h = i.outerHeight(true)
            }
            var c = b.find(".formTabContent" + m);
            var e = t - h - Fai.getCssInt(c, "border-top-width") - Fai.getCssInt(c, "border-bottom-width");
            if (Fai.isIE6()) {
                e += 1
            }
            c.css("height", e + "px");
            var d = b.find(".formTabCntId");
            d.css("height", e + "px")
        }
    } else {
        if (b.hasClass("formStyle79")) {
            var q = b.attr("id").replace("module", "");
            if (!Site.floatImgInContainerForms(q)) {
                b.find("#float_img_" + m).css("height", t + "px")
            }
        }
    }
};
Site.refreshForms = function () {
    Site.refreshFormIndexClass();
    Site.displayAddModule();
    Fai.top.Fai.delayLoadImg(20)
};
Site.displayAddModule = function () {
    if (!Fai.top._designAuth) {
        return
    }
    Site.addAddModuleButton(1);
    Site.addAddModuleButton(2);
    Site.addAddModuleButton(3);
    Site.addAddModuleButton(4);
    Site.addAddModuleButton(5);
    Site.addAddModuleButton(6);
    Site.addAddModuleButton(7);
    Site.addAddModuleButton(8);
    Site.addAddModuleButton(10);
    Site.addAddModuleButton(11);
    Site.addAddModuleButton(12);
    Site.addAddModuleButton(13);
    Site.addAddModuleButton(20);
    Site.addAddModuleButton(22);
    Site.addAddModuleButton(23);
    Site.addAddModuleButton(24);
    Site.addAddModuleButton(25);
    Site.addAddModuleButton(26);
    Site.addAddModuleButton(27);
    Site.addAddModuleButton(28)
};
Site.checkModuleInZone = function (a) {
    return a.parent().hasClass("J_moduleZone")
};
Site.checkFloatModulePosition = function (a) {
    if (!a.length) {
        return
    }
    var f = a.parent().attr("id");
    var c = a.offset().top,
        k = a[0].getBoundingClientRect().top;
    moduleTop = c - Fai.top.$("body").scrollTop();
    var b = a.offset().left;
    var g = a.height();
    var j = moduleTop + g;
    var i = 0;
    var d = Fai.top.Fai.getBrowserHeight() - i;
    if (f == "floatLeftBottomForms" || f == "floatRightBottomForms") {
        var h = Fai.top.$("#web").offset().top;
        if (j > d) {
            var e = d - g;
            a.offset({
                left: b,
                top: h + Fai.top.Fai.getBrowserHeight() / 2
            })
        }
        if (j < h) {
            a.offset({
                top: h + Fai.top.Fai.getBrowserHeight() / 2
            })
        }
        if (moduleTop < h) {
            a.offset({
                top: h + Fai.top.Fai.getBrowserHeight() / 2
            })
        }
    } else {
        if (f == "floatLeftTopForms" || f == "floatRightTopForms") {
            var h = Fai.top.$("#web").offset().top;
            if (h < 0) {
                h = 0
            }
            if (moduleTop > (h + Fai.top.Fai.getBrowserHeight())) {
                a.offset({
                    top: h + Fai.top.Fai.getBrowserHeight() / 2 - g
                })
            }
            if (j < h) {
                a.offset({
                    top: h
                })
            }
            if (moduleTop < h) {
                a.offset({
                    top: h
                })
            }
        }
    }
};
Site.closeAd = function (a) {
    $("#" + a).data("top", $("#" + a).position().top);
    $("#" + a).data("left", $("#" + a).position().left);
    $("#" + a).hide()
};
Site.checkSideModule = function (a) {
    Site.reSetSidePosition(a)
};
Site.reSetSidePosition = function (b, q) {
    var j = b.attr("id");
    var u = b.offset().top;
    var n = Fai.top.Fai.getBrowserWidth();
    var a = Fai.top.Fai.getBrowserHeight();
    var m = b.outerWidth();
    var w = b.height();
    var y = Fai.getCssInt(b, "border-left-width");
    var r = b.parent().attr("id");
    var c = b.attr("_side");
    var h = 0;
    var i = [];
    var s = Fai.top.$("#" + j + "SideBtn");
    s.remove();
    var v = j.replace("module", "");
    var l = b.find(".mainTitle" + v).first().text();
    var g = 0;
    var d = false;
    if (c == 1) {
        if (r == "floatLeftTopForms" || r == "floatLeftBottomForms") {
            b.offset({
                top: u,
                left: 0
            });
            h = 1;
            i = ["<div id='" + j + "SideBtn' class='g_sideBtn fk-sideLeft'><div class='g_sideBtn_t g_sB_lt'></div><div class='g_sideBtn_c g_sB_lc'><span class='g_sideBtn_tl'>" + l + "</span></div><div class='g_sideBtn_b g_sB_lb'></div><div class='g_sideBtn_extend g_sB_le'></div></div>"];
            b.animate({
                left: -m
            }, {
                queue: false,
                duration: 0
            });
            b.off("mouseenter.sideModule").on("mouseenter.sideModule", Site.bindSideIn1);
            b.off("mouseleave.sideModule").on("mouseleave.sideModule", Site.bindSideOut1)
        } else {
            if (r == "floatRightTopForms" || r == "floatRightBottomForms") {
                if (Fai.top._webRightBar) {
                    g = Fai.getScrollWidth() + $(".fk-rbar").width();
                    if (b.width() > 10) {
                        b.data("_selfWidth", b.width())
                    }
                    if (b.attr("_moduleStyle") == 7) {
                        b.find(".formWrap").css({
                            "word-break": "keep-all",
                            "white-space": "nowrap",
                            overflow: "hidden",
                            "text-overflow": "ellipsis"
                        })
                    }
                    d = b.data("notInitState") || d
                }
                b.offset({
                    top: u,
                    left: n - m - g
                });
                h = 0;
                i = ["<div id='" + j + "SideBtn' class='g_sideBtn fk-sideRight'><div class='g_sideBtn_t g_sB_rt'></div><div class='g_sideBtn_c g_sB_rc'><span class='g_sideBtn_tl'>" + l + "</span></div><div class='g_sideBtn_b g_sB_rb'></div><div class='g_sideBtn_extend g_sB_re'></div></div>"];
                if (Fai.top._webRightBar) {
                    if (!d) {
                        b.animate({
                            left: 0
                        }, {
                            queue: false,
                            duration: 0
                        })
                    }
                    if (Fai.top._manageMode && !q) {
                        b.css("overflow", "visible");
                        b.animate({
                            left: -g + "px",
                            width: 0
                        }, {
                            queue: false,
                            duration: 300
                        })
                    } else {
                        if (Fai.top._manageMode && q) {
                            b.animate({
                                left: -g + "px"
                            }, {
                                queue: false,
                                duration: 0
                            })
                        } else {
                            b.animate({
                                left: -$(".fk-rbar").width() + "px"
                            }, {
                                queue: false,
                                duration: 500
                            })
                        }
                    }
                } else {
                    b.animate({
                        left: 0
                    }, {
                        queue: false,
                        duration: 0
                    })
                }
                b.off("mouseenter.sideModule").on("mouseenter.sideModule", Site.bindSideIn2);
                b.off("mouseleave.sideModule").on("mouseleave.sideModule", Site.bindSideOut2)
            } else {
                b.attr("_side", 0)
            }
        }
        b.css("overflow", "visible")
    }
    b.append(i.join(""));
    b.addClass("jz-moduleSide");
    if (!!b.find(".formMiddle").length) {
        b.find(".formMiddle").addClass("jz-moduleSide-content")
    }
    var k = Fai.top.$("#" + j + "SideBtn");
    if (k.length > 0) {
        var t = k.width();
        var e = k.height();
        var p = parseInt((w - e) / 2);
        if (h == 0) {
            k.css({
                top: p,
                left: -t - y
            })
        } else {
            k.css({
                top: p,
                left: m - y
            })
        }
        var o = k.position().top;
        var x = k.position().top + e;
        if (c == 1) {
            if (r == "floatLeftTopForms" || r == "floatRightTopForms") {
                if (x <= 0) {
                    k.css({
                        top: w - e
                    })
                }
            } else {
                if (r == "floatLeftBottomForms" || r == "floatRightBottomForms") {
                    if ((o - a) >= 0) {
                        k.css({
                            top: 0
                        })
                    }
                }
            }
            var f = k[0].getBoundingClientRect();
            if (f.top > a || f.bottom < 0) {
                k.css({
                    top: 0
                })
            }
        }
    }
};
Site.checkFlutterModule = function (b) {
    var a = b.attr("_side");
    if (a == 2) {
        Site.flutterStart(b)
    }
};
var flutterCount = 1000;
Site.flutterInternel = function (d) {
    var i = d.attr("_flutterSwitch");
    if (i == "true") {
        Site.stopFlutterInterval(d)
    }
    var m = 1;
    var b = document.body.scrollTop;
    var g = document.body.scrollLeft;
    if (Fai.isIE8() || Fai.isIE7() || Fai.isIE10() || Fai.isIE9() || Fai.isIE11()) {
        b = document.documentElement.scrollTop
    }
    var a = $("#g_main").offset().top + b;
    var e = 0 + g;
    var c = document.documentElement.clientWidth - d.width() + g;
    var h = document.documentElement.clientHeight - d.height() + b;
    if (Fai.isIE6()) {
        c = document.body.clientWidth - d.width()
    }
    var l = d.data("flutterXPos");
    var f = d.data("flutterYPos");
    d.offset({
        left: l,
        top: f
    });
    var k = d.data("flutterXPos") + m * (d.data("flutterXon") ? 1 : -1);
    d.data("flutterXPos", k);
    if (d.data("flutterXPos") <= e) {
        d.data("flutterXon", true);
        d.data("flutterXPos", e)
    }
    if (d.data("flutterXPos") >= c) {
        d.data("flutterXon", false);
        d.data("flutterXPos", c)
    }
    var j = d.data("flutterYPos") + m * (d.data("flutterYon") ? 1 : -1);
    d.data("flutterYPos", j);
    if (d.data("flutterYPos") <= a) {
        d.data("flutterYon", true);
        d.data("flutterYPos", a)
    }
    if (d.data("flutterYPos") >= h) {
        d.data("flutterYon", false);
        d.data("flutterYPos", h)
    }
};
Site.stopFlutterInterval = function (a) {
    Fai.stopInterval("flutter" + a.attr("id"))
};
Site.startFlutterInterval = function (b) {
    var a = b.attr("_side");
    if (a != 2) {
        return
    }
    if (b.attr("_edit") == "true") {
        return
    }
    Site.stopFlutterInterval(b);
    var d = function () {
        var f = b.attr("_side");
        var g = b.attr("_flutterSwitch");
        if (f == 2) {
            Site.flutterInternel(b)
        } else {
            Site.stopFlutterInterval(b)
        }
    };
    var e = 10;
    var c = "flutter" + b.attr("id");
    Fai.addInterval(c, d, e);
    Fai.startInterval(c)
};
Site.flutterStart = function (b, a) {
    b.addClass("fk-flutterForm");
    var g = 0;
    var f = document.body.scrollLeft;
    if (Fai.isIE6()) {
        rightBoundary = document.body.clientWidth - b.width()
    } else {
        rightBoundary = document.documentElement.clientWidth - b.width() + f
    } if (b.offset().left > rightBoundary) {
        b.offset({
            left: rightBoundary - b.outerWidth()
        })
    }
    var h = b.position().left;
    var c = b.position().top;
    var i = b.data("toFlutterFlag");
    var k = b.attr("_flutterSwitch");
    if (!i) {
        b.data("startFlutterXPos", h);
        b.data("startFlutterYPos", c)
    } else {
        var j = b.data("startFlutterXPos");
        var d = b.data("startFlutterYPos");
        if (!j && !d) {
            b.data("startFlutterXPos", h);
            b.data("startFlutterYPos", c)
        }
    }
    var l = b.data("startFlutterParentId");
    if (!l) {
        b.data("startFlutterParentId", b.parent().attr("id"))
    }
    b.data("flutterXPos", b.offset().left);
    b.data("flutterYPos", b.offset().top);
    b.data("flutterXon", true);
    b.data("flutterYon", true);
    var e = b.attr("_side");
    if (_manageMode == true && e == 2 && !a) {
        b.attr("_flutterSwitch", true)
    }
    var k = b.attr("_flutterSwitch");
    if (k == "false" || !k) {
        Site.startFlutterInterval(b)
    }
    b.on("mouseenter", function () {
        Site.stopFlutterInterval($(this))
    });
    b.on("mouseleave", function () {
        var m = $(this).attr("_flutterSwitch");
        if (m == "false" || !m) {
            Site.startFlutterInterval($(this))
        }
    })
};
Site.bindSideIn1 = function (b) {
    var b = $(this);
    var c = b.attr("_side");
    var a = b.outerWidth();
    var d = b.parent().attr("id");
    if (Fai.top._manageMode) {
        Site.disableEditLayer();
        if (-a == b.offset().left) {
            jzUtils.run({
                name: "moduleAnimation.canRunAgain",
                base: Site
            })
        }
        b.animate({
            left: 0
        }, {
            queue: false,
            duration: 500,
            complete: function () {
                Site.enableEditLayer();
                if (c == 1) {
                    b.unbind("mouseenter.sideModule", Site.bindSideIn1).unbind("mouseleave.sideModule", Site.bindSideOut1).unbind("mouseenter.sideModule", Site.bindSideIn2).unbind("mouseleave.sideModule", Site.bindSideOut2)
                }
                jzUtils.run({
                    name: "moduleAnimation.publish",
                    base: Site
                });
                jzUtils.run({
                    name: "moduleAnimation.contentAnimationPublish",
                    base: Site
                })
            }
        })
    } else {
        if (-a == b.offset().left) {
            jzUtils.run({
                name: "moduleAnimation.canRunAgain",
                base: Site
            })
        }
        b.animate({
            left: 0
        }, {
            queue: false,
            duration: 500,
            complete: function () {
                jzUtils.run({
                    name: "moduleAnimation.publish",
                    base: Site
                });
                jzUtils.run({
                    name: "moduleAnimation.contentAnimationPublish",
                    base: Site
                })
            }
        })
    }
    $(b).find("img").trigger("appear")
};
Site.bindSideIn2 = function (e) {
    var e = $(this);
    var d = e.attr("_side");
    var g = e.outerWidth();
    var i = e.parent().attr("id");
    var m = Fai.top.Fai.getBrowserWidth();
    var j = 0;
    var l = Fai.top.$("#" + e.attr("id") + "SideBtn");
    var k = l.width();
    var b = Fai.getCssInt(e, "border-left-width");
    var f = 0;
    var c = {
        left: -g
    };
    var h = 0;
    var a = 500;
    if (Fai.top._webRightBar) {
        f = $(".fk-rbar").width();
        j = Fai.getScrollWidth() + f;
        g = e.data("_selfWidth");
        if (e.attr("_moduleStyle") == 7) {
            e.find(".formWrap").css({
                "word-break": "keep-all",
                "white-space": "nowrap",
                overflow: "hidden",
                "text-overflow": "ellipsis"
            })
        }
        e.data("notInitState", true);
        c = {
            left: -g - j,
            width: g
        };
        h = Fai.getScrollWidth();
        if (Fai.top._isTemplateVersion2 && Fai.top._manageMode) {
            a = 0
        }
    }
    e.find("img").trigger("appear");
    if (Fai.top._manageMode) {
        Site.disableEditLayer();
        if (m == (e.offset().left + f + h)) {
            jzUtils.run({
                name: "moduleAnimation.canRunAgain",
                base: Site
            })
        }
        e.animate(c, {
            queue: false,
            duration: a,
            complete: function () {
                Site.enableEditLayer();
                if (d == 1) {
                    e.unbind("mouseenter.sideModule", Site.bindSideIn1).unbind("mouseleave.sideModule", Site.bindSideOut1).unbind("mouseenter.sideModule", Site.bindSideIn2).unbind("mouseleave.sideModule", Site.bindSideOut2)
                }
                jzUtils.run({
                    name: "moduleAnimation.publish",
                    base: Site
                });
                jzUtils.run({
                    name: "moduleAnimation.contentAnimationPublish",
                    base: Site
                })
            }
        })
    } else {
        if (m == e.offset().left) {
            jzUtils.run({
                name: "moduleAnimation.canRunAgain",
                base: Site
            })
        }
        e.animate({
            left: -g - f
        }, {
            queue: false,
            duration: 500,
            complete: function () {
                jzUtils.run({
                    name: "moduleAnimation.publish",
                    base: Site
                });
                jzUtils.run({
                    name: "moduleAnimation.contentAnimationPublish",
                    base: Site
                })
            }
        })
    }
};
Site.bindSideOut1 = function (b) {
    var b = $(this);
    var c = b.attr("_side");
    var a = b.outerWidth();
    var d = b.parent().attr("id");
    b.animate({
        left: -a
    }, {
        queue: false,
        duration: 500
    })
};
Site.bindSideOut2 = function (d) {
    var d = $(this);
    var e = d.attr("_side");
    var b = d.outerWidth();
    var f = d.parent().attr("id");
    var a = 0;
    var c = 0;
    if (Fai.top._webRightBar) {
        a = Fai.getScrollWidth() + $(".fk-rbar").width();
        if (d.attr("_moduleStyle") == 7) {
            d.find(".formWrap").css({
                "word-break": "keep-all",
                "white-space": "nowrap"
            })
        }
        c = $(".fk-rbar").width()
    }
    if (Fai.top._manageMode) {
        d.animate({
            left: 0 - a
        }, {
            queue: false,
            duration: 500
        })
    } else {
        d.animate({
            left: -c
        }, {
            queue: false,
            duration: 500
        })
    }
};
Site.setAbsFormsHolder2 = function (h) {
    var a = 0,
        f = 0,
        j = 0,
        g = Fai.top.$("#containerPlaceholder"),
        b = Fai.top.$("#g_main"),
        d = Fai.isIE6(),
        c = Fai.isIE7(),
        i = false,
        k, e;
    k = function (l) {
        if (!Fai.top._manageMode && !d && !c) {
            return l
        }
        var m = b.scrollTop();
        if (m <= 0) {
            return l
        }
        return l + m
    };
    Fai.top.$("#absForms >.form").each(function () {
        var l = $(this).offset().top + $(this).outerHeight();
        l = k(l);
        if (l > a) {
            a = l
        }
    });
    Fai.top.$("#absTopForms >.form").each(function () {
        var l = $(this).offset().top + $(this).outerHeight();
        l = k(l);
        if (l > a) {
            a = l
        }
    });
    f = Fai.top.$("#fullmeasureBottomForms").outerHeight();
    if (f > 0) {
        a = a - f;
        if (a < 0) {
            a = 0
        }
        i = true
    }
    j = k(g.offset().top);
    if (i) {
        if (a > j) {
            e = a - j;
            if (e !== parseInt(g.height())) {
                if (!Fai.top._manageMode && Fai.top._colOtherStyleData.y > e) {} else {
                    g.css("height", e + "px");
                    if (!h) {
                        Fai.top._colOtherStyleData.y = parseInt(e)
                    }
                }
            }
        } else {
            if (a != 0 && (a - j) !== 0) {
                g.css("height", "0");
                if (!h) {
                    Fai.top._colOtherStyleData.y = 0
                }
            } else {
                if (Fai.top._colOtherStyleData.y > 0 && a < j) {
                    g.css("height", "0");
                    Fai.top._colOtherStyleData.y = 0
                }
            }
        }
    } else {
        if (a > j) {
            var e = a - j;
            if (e !== parseInt(g.height())) {
                g.css("height", e + "px");
                Fai.top._colOtherStyleData.y = parseInt(e)
            }
        } else {
            if (a != 0 && (a - j) !== 0) {
                g.css("height", "0px");
                Fai.top._colOtherStyleData.y = 0
            }
        }
    }
};
Site.checkAbsModulePosition = function (c, a) {
    var h = c.parent().attr("id");
    var f = c.offset().left;
    var d = c.offset().top;
    var e = c.height();
    var g = c.offset().top + e;
    if (h == "absTopForms") {
        var b = Fai.top.$("#web").offset().top;
        if (d < b) {
            d = b;
            c.offset({
                top: d,
                left: f
            })
        }
        Site.setAbsFormsHolder2(a)
    } else {
        if (h == "absBottomForms") {
            var b = Fai.top.$("#webFooter").offset().top;
            if (d < b) {
                d = b
            }
            if (Fai.top._siteVer < 30) {
                var b = Site.getFooterBottom();
                if (d + e > b) {
                    d = b - e;
                    c.offset({
                        top: d,
                        left: f
                    })
                }
            } else {
                var b = Site.getFooterBottom(true);
                if (d + e > b) {
                    d = b - e;
                    c.offset({
                        top: d,
                        left: f
                    })
                }
            }
            c.offset({
                top: d,
                left: f
            })
        } else {
            if (h == "absForms") {
                Site.setAbsFormsHolder2(a)
            }
        }
    }
};
Site.demoStyleDesignLoading = function (a, c) {
    var b = $('<div class="forWaiting ajaxLoading2" style="position:absolute;background-color:#d6d9e0;width:100%;height:205px;top:0;left:0;"></div>');
    b.appendTo("#" + a);
    $("#" + c).load(function () {
        $(".forWaiting").remove()
    })
};
Site._webToggleClass = function (a) {
    if (a == "show") {
        $("html").removeClass("g_html").addClass("g_htmlManage");
        $("body").removeClass("g_body").addClass("g_bodyManage");
        $("#g_main").addClass("g_mainManage");
        $("#web").addClass("g_webManage")
    }
};
Site._demoTemplate = function () {
    var a = $("#siteTipsDemoTemplate");
    if (a.is(":visible")) {
        document.location.reload()
    } else {
        a.show();
        Site._webToggleClass("show");
        if ($("#topBarArea").length > 0) {
            $("#topBarArea").hide();
            $("#topBar").hide()
        }
        Site.demoStyleDesignLoading("siteTipsDemoTemplate", "siteTipsDemoTemplateFrame");
        $("#siteTipsDemoTemplateFrame").attr("src", "manage/styleTemplate.jsp?demoTemplate=true&ram" + Math.random());
        Site.resetGmainPos()
    }
};
Site.adjustFlBtnPos = function (b) {
    var a = Fai.top.$("#module" + b);
    a.css({
        border: "10px solid transparent",
        "margin-top": "-10px",
        "margin-left": "-10px"
    })
};
Site.initFlBtnStyle = function (i) {
    var b = i.moduleId,
        f = i.btnNumSystem,
        g = i.btnStyle,
        a = "module" + b,
        c = Fai.top.$("#" + a);
    if (Fai.top._designAuth) {
        Site.initManageFlBtnStyle(b, f, g)
    } else {
        var h = g.sh;
        var d = Fai.top.$(".mulMColContent");
        var e = c.find(".floatBtn");
        if (c.css("position") != "absolute") {
            Site.setFlBtnBoxPadding(a, h, true)
        }
        if (Site.setFlBtnParentColHide && typeof Site.setFlBtnParentColHide == "function") {
            Site.setFlBtnParentColHide();
            delete Site.setFlBtnParentColHide
        }
    }
};
Site.setFlBtnParentColHide = function () {
    var a = Fai.top.$(".mulMColContent");
    if (a.length > 0) {
        a.each(function () {
            if ($(this).find(".formStyle81").length > 0) {
                var b = $(this).attr("id");
                Fai.top.Fai.setCtrlStyleCss("stylemodule", b, ".mulMColList", "overflow", "hidden")
            }
        })
    }
};
Site.setFlBtnBoxPadding = function (a, g, d) {
    if (g.t == 0) {
        return
    }
    var f = (g.f / 2 - g.dy);
    var h = (g.f / 2 + g.dx);
    var c = (g.f / 2 + g.dy);
    var e = (g.f / 2 - g.dx);
    var i = [];
    var b = [];
    if (f > 0) {
        i.push({
            cls: ".floatBtnBox",
            key: "padding-top",
            value: f + "px"
        });
        b.push({
            cls: ".floatBtnBox",
            key: "padding-top"
        })
    }
    if (h > 0) {
        i.push({
            cls: ".floatBtnBox",
            key: "padding-right",
            value: h + "px"
        });
        b.push({
            cls: ".floatBtnBox",
            key: "padding-right"
        })
    }
    if (c > 0) {
        i.push({
            cls: ".floatBtnBox",
            key: "padding-bottom",
            value: c + "px"
        });
        b.push({
            cls: ".floatBtnBox",
            key: "padding-bottom"
        })
    }
    if (e > 0) {
        i.push({
            cls: ".floatBtnBox",
            key: "padding-left",
            value: e + "px"
        });
        b.push({
            cls: ".floatBtnBox",
            key: "padding-left"
        })
    }
    if (d) {
        Fai.top.Fai.setCtrlStyleCssList("stylemodule", a, i)
    } else {
        Fai.top.Fai.removeCtrlStyleCssList("stylemodule", a, b)
    }
};
Site.initPhotoCard = function (b) {
    var a = Fai.top.$("#module" + b);
    Site.resizePhotoCardHeight(a);
    Site.setPhotoCardHeight(a);
    Site.adjustPhotoCardImgSize(a);
    jzUtils.run({
        name: "ImageEffect.FUNC.BASIC.Init",
        callMethod: true
    }, Fai.top["photoCard" + b])
};
Site.setPhotoCardHeight = function (a) {
    var b = a.find(".cardTd");
    b.each(function () {
        var e = $(this).height(),
            d = $(this).find(".photoCard"),
            c = d.height();
        if (c < e) {
            d.css("height", e + "px")
        }
    })
};
Site.adjustPhotoCardImgSize = function (b) {
    var c = b.attr("id").replace("module", ""),
        a = b.find(".photoCard"),
        d = b.find(".cardDivEffect .cardImg");
    Site.setPhotoCardHeight(b);
    a.each(function () {
        var o = $(this).find(".cardImgView"),
            l = $(this).find(".cardDivEffect"),
            m = $(this).height();
        if (o.length < 1) {
            return true
        }
        var k = o.width(),
            g = o.height(),
            e = $(this).width(),
            i, n, f = k,
            j = g,
            h = l.attr("tmpPic");
        imgOrProp = f / j;
        if (e / m <= imgOrProp) {
            o.css("width", "");
            o.css("height", m + "px");
            i = $(this).width();
            n = o.width();
            l.css("marginTop", "");
            l.css("marginLeft", ((i - n) / 2) + "px")
        } else {
            o.css("height", "");
            o.css("width", e + "px");
            i = $(this).height();
            n = o.height();
            l.css("marginLeft", "");
            l.css("marginTop", ((i - n) / 2) + "px")
        }
        o.removeClass("cardImgViewHide")
    });
    d.load(function () {
        var p = $(this),
            m = p.parents(".cardDiv"),
            j = p.parents(".photoCard"),
            n = j.height();
        var l = p.width(),
            f = p.height(),
            e = j.width(),
            k, o, i, h = l / f,
            g = m.attr("tmpPic");
        if (e / n <= h) {
            p.css("width", "");
            p.css("height", n + "px");
            k = j.width();
            o = p.width();
            i = (k - o) / 2;
            m.css("marginTop", "");
            m.css("marginLeft", i + "px")
        } else {
            p.css("height", "");
            p.css("width", e + "px");
            k = j.height();
            o = p.height();
            i = (k - o) / 2;
            m.css("marginLeft", "");
            m.css("marginTop", i + "px")
        }
        jzUtils.run({
            name: "ImageEffect.FUNC.BASIC.Init",
            callMethod: true
        }, Fai.top["photoCard" + c])
    })
};
Site.resizePhotoCardHeight = function (c) {
    var k = c.find(".photoCardTable"),
        l = c.find(".formMiddleContent"),
        a = c.find(".photoCardOuter"),
        b = c.find(".photoCardInner"),
        h = k.find("tr"),
        e = c.find(".cardTd"),
        d = a.attr("cusHeight"),
        f = h.length,
        i = c.height(),
        j = parseInt(l.css("marginTop").replace("px", ""));
    formMiddleContentMB = parseInt(l.css("marginBottom").replace("px", ""));
    photoCardInnerMT = parseInt(b.css("marginTop").replace("px", ""));
    photoCardInnerMB = parseInt(b.css("marginBottom").replace("px", ""));
    cellspacing = parseInt(k.attr("cellspacing"));
    if (d) {
        i = a.height();
        j = 0;
        formMiddleContentMB = 0
    }
    var g = i - j - formMiddleContentMB - photoCardInnerMT - photoCardInnerMB - (2 * cellspacing);
    e.each(function () {
        var n = $(this).find(".photoCard"),
            o = parseInt($(this).attr("rowspan")),
            m = (g - (f - 1) * cellspacing) / f || "";
        switch (o) {
            case 1:
                n.css("height", m + "px");
                break;
            case 2:
                n.css("height", (m * 2 + cellspacing) + "px");
                break;
            default:
                n.css("height", m + "px")
        }
    })
};
Site.adjustPhotoCard = function (b) {
    if (Fai.isNumber(b)) {
        var a = Fai.top.$("#module" + b);
        if (a.hasClass("formStyle83") && !a.find(".photoCardOuter").attr("cusHeight")) {
            Site.initPhotoCard(b);
            a.attr("_autoheight", 0)
        }
    } else {
        if (typeof b == "object") {
            var d = b;
            var c = d.find(".formStyle83");
            if (c.length > 0) {
                e(c)
            }
        } else {
            if (b == undefined) {
                var c = Fai.top.$(".formStyle83");
                if (c.length > 0) {
                    e(c)
                }
            }
        }
    }

    function e(f) {
        c.each(function () {
            var h = $(this).attr("id").replace("module", ""),
                g = $(this).find(".photoCardOuter"),
                i = g.attr("cusHeight");
            if (i) {
                return true
            }
            Site.initPhotoCard(h);
            $(this).attr("_autoheight", 0)
        })
    }
};
Site.addPhotoCardModuleHeight = function (b) {
    var g = Fai.top.$("#module" + b),
        a = g.find(".photoCardOuter"),
        f = g.find(".photoCard"),
        c = g.width(),
        i = g.height(),
        h = c / 960,
        j = a.attr("cusHeight"),
        e = a.height(),
        d = i * h;
    if (j) {
        d = e
    }
    g.css("height", d + "px");
    Site.initPhotoCard(b);
    Site.scrollToModuleDiv(g);
    Site.getModuleAttrPattern(b).changed = true;
    g.attr("_autoheight", 0)
};
Site.initPhotoNewCard = function (b) {
    var a = Fai.top.$("#module" + b);
    Site.resizePhotoNewCardHeight(a);
    Site.setPhotoNewCardHeight(a);
    Site.adjustPhotoNewCardImgSize(a);
    jzUtils.run({
        name: "ImageEffect.FUNC.BASIC.Init",
        callMethod: true
    }, Fai.top["photoNewCard" + b])
};
Site.setPhotoNewCardHeight = function (a) {
    var b = a.find(".cardTd");
    b.each(function () {
        var c = $(this).height(),
            e = $(this).find(".photoNewCard"),
            d = e.height();
        if (d < c) {
            e.css("height", c + "px")
        }
    })
};
Site.adjustPhotoNewCardImgSize = function (a) {
    var c = a.attr("id").replace("module", ""),
        b = a.find(".photoNewCard"),
        d = a.find(".cardDivEffect .cardImg");
    Site.setPhotoNewCardHeight(a);
    b.each(function () {
        var o = $(this).find(".cardImgView"),
            l = $(this).find(".cardDivEffect"),
            m = $(this).height();
        if (o.length < 1) {
            return true
        }
        var k = o.width(),
            g = o.height(),
            e = $(this).width(),
            i, n, f = k,
            j = g,
            h = l.attr("tmpPic");
        imgOrProp = f / j;
        if (e / m <= imgOrProp) {
            o.css("width", "");
            o.css("height", m + "px");
            i = $(this).width();
            n = o.width();
            l.css("marginTop", "");
            l.css("marginLeft", ((i - n) / 2) + "px")
        } else {
            o.css("height", "");
            o.css("width", e + "px");
            i = $(this).height();
            n = o.height();
            l.css("marginLeft", "");
            l.css("marginTop", ((i - n) / 2) + "px")
        }
        o.removeClass("cardImgViewHide")
    });
    d.load(function () {
        var p = $(this),
            m = p.parents(".cardDiv"),
            g = p.parents(".photoNewCard"),
            n = g.height();
        var l = p.width(),
            f = p.height(),
            e = g.width(),
            k, o, j, i = l / f,
            h = m.attr("tmpPic");
        if (e / n <= i) {
            p.css("width", "");
            p.css("height", n + "px");
            k = g.width();
            o = p.width();
            j = (k - o) / 2;
            m.css("marginTop", "");
            m.css("marginLeft", j + "px")
        } else {
            p.css("height", "");
            p.css("width", e + "px");
            k = g.height();
            o = p.height();
            j = (k - o) / 2;
            m.css("marginLeft", "");
            m.css("marginTop", j + "px")
        }
        jzUtils.run({
            name: "ImageEffect.FUNC.BASIC.Init",
            callMethod: true
        }, Fai.top["photoNewCard" + c])
    })
};
Site.resizePhotoNewCardHeight = function (a) {
    var k = a.find(".photoNewCardTable"),
        l = a.find(".formMiddleContent"),
        e = a.find(".photoNewCardOuter"),
        f = a.find(".photoNewCardInner"),
        h = k.find(".newCardDrag"),
        c = a.find(".cardTd"),
        b = e.attr("cusHeight"),
        d = h.length,
        i = a.height(),
        j = parseInt(l.css("marginTop").replace("px", ""));
    formMiddleContentMB = parseInt(l.css("marginBottom").replace("px", ""));
    photoNewCardInnerMT = parseInt(f.css("marginTop").replace("px", ""));
    photoNewCardInnerMB = parseInt(f.css("marginBottom").replace("px", ""));
    cellspacing = parseInt(k.attr("cellspacing"));
    if (b) {
        i = e.height();
        j = 0;
        formMiddleContentMB = 0
    }
    var g = i - j - formMiddleContentMB - photoNewCardInnerMT - photoNewCardInnerMB - (2 * cellspacing);
    c.each(function () {
        var o = $(this).find(".photoNewCard"),
            n = parseInt($(this).attr("rowspan")),
            m = (g - (d - 1) * cellspacing) / d || "";
        switch (n) {
            case 1:
                o.css("height", m - 1 + "px");
                break;
            case 2:
                o.css("height", (m * 2 + cellspacing) - 1 + "px");
                break;
            default:
                o.css("height", m - 1 + "px")
        }
    })
};
Site.adjustPhotoNewCard = function (b) {
    if (Fai.isNumber(b)) {
        var a = Fai.top.$("#module" + b);
        if (a.hasClass("formStyle85") && !a.find(".photoNewCardOuter").attr("cusHeight")) {
            Site.initPhotoNewCard(b);
            a.attr("_autoheight", 0)
        }
    } else {
        if (typeof b == "object") {
            var d = b;
            var e = d.find(".formStyle85");
            if (e.length > 0) {
                c(e)
            }
        } else {
            if (b == undefined) {
                var e = Fai.top.$(".formStyle85");
                if (e.length > 0) {
                    c(e)
                }
            }
        }
    }

    function c(f) {
        e.each(function () {
            var h = $(this).attr("id").replace("module", ""),
                g = $(this).find(".photoNewCardOuter"),
                i = g.attr("cusHeight");
            if (i) {
                return true
            }
            Site.initPhotoNewCard(h);
            $(this).attr("_autoheight", 1)
        })
    }
};
Site.addPhotoNewCardModuleHeight = function (a) {
    var d = Fai.top.$("#module" + a),
        h = d.find(".formBanner").height(),
        e = d.find(".photoNewCardOuter"),
        c = d.find(".photoNewCard"),
        l = d.width(),
        g = d.height(),
        j = l / 960,
        k = e.attr("cusHeight"),
        i = e.height(),
        b = g * j;
    if (k) {
        b = i
    }
    var f = (d.find(".newCardDrag").length) / 2;
    d.css("height", b * f + "px");
    Site.initPhotoNewCard(a);
    Site.scrollToModuleDiv(d);
    Site.getModuleAttrPattern(a).changed = true;
    d.attr("_autoheight", 0)
};
Site.hideDrag = function (a) {
    $("#module" + a).find(".photoNewCardTable").find(".drag").each(function () {
        $(this).css("display", "none")
    })
};
Site.initPhotoMoreCard = function (b, c) {
    var a = Fai.top.$("#module" + b);
    Site.resizePhotoMoreCardHeight(a, c);
    Site.setPhotoMoreCardHeight(a);
    Site.adjustPhotoMoreCardImgSize(a);
    jzUtils.run({
        name: "ImageEffect.FUNC.BASIC.Init",
        callMethod: true
    }, Fai.top["photoMoreCard" + b])
};
Site.setPhotoMoreCardHeight = function (d) {
    var f = d.find(".moreCardTd");
    var b = d.find(".formBanner");
    var e = d.find(".moreCardDrag:last").attr("tr");
    var g = 1 + parseInt(e);
    if (b.css("display") == "none") {
        var c = 0
    } else {
        var c = b.height()
    }
    f.each(function () {
        var a = $(this).height(),
            h = $(this).find(".photoMoreCard"),
            i = h.height();
        if (i <= a) {
            $(this).css("height", a - c / g + "px");
            h.css("height", a - c / g + "px")
        }
    })
};
Site.adjustPhotoMoreCardImgSize = function (a) {
    var c = a.attr("id").replace("module", ""),
        b = a.find(".photoMoreCard"),
        d = a.find(".cardDivEffect .cardImg");
    b.each(function () {
        var o = $(this).find(".cardImgView"),
            l = $(this).find(".cardDivEffect"),
            m = $(this).height();
        if (o.length < 1) {
            return true
        }
        var k = o.width(),
            g = o.height(),
            e = $(this).width(),
            i, n, f = k,
            j = g,
            h = l.attr("tmpPic");
        imgOrProp = f / j;
        if (e / m <= imgOrProp) {
            o.css("width", "");
            o.css("height", m + "px");
            i = $(this).width();
            n = o.width();
            l.css("marginTop", "");
            l.css("marginLeft", ((i - n) / 2) + "px")
        } else {
            o.css("height", "");
            o.css("width", e + "px");
            i = $(this).height();
            n = o.height();
            l.css("marginLeft", "");
            l.css("marginTop", ((i - n) / 2) + "px")
        }
        o.removeClass("cardImgViewHide")
    });
    d.load(function () {
        var p = $(this),
            m = p.parents(".cardDiv"),
            h = p.parents(".photoMoreCard"),
            n = h.height();
        var l = p.width(),
            f = p.height(),
            e = h.width(),
            k, o, j, i = l / f,
            g = m.attr("tmpPic");
        if (e / n <= i) {
            p.css("width", "");
            p.css("height", n + "px");
            k = h.width();
            o = p.width();
            j = (k - o) / 2;
            m.css("marginTop", "");
            m.css("marginLeft", j + "px")
        } else {
            p.css("height", "");
            p.css("width", e + "px");
            k = h.height();
            o = p.height();
            j = (k - o) / 2;
            m.css("marginLeft", "");
            m.css("marginTop", j + "px")
        }
    })
};
Site.resizePhotoMoreCardHeight = function (b, d) {
    var p = b.find(".photoMoreCardTable"),
        q = b.find(".formMiddleContent"),
        c = b.find(".photoMoreCardOuter"),
        e = b.find(".photoMoreCardInner"),
        m = p.find(".moreCardDrag"),
        i = b.find(".moreCardTd"),
        k = 1,
        h = 1,
        j = false,
        f = c.attr("cusHeight"),
        g = m.length,
        a = b.width(),
        n = b.height(),
        o = parseInt((q.css("marginTop") || "0").replace("px", ""));
    formMiddleContentMB = parseInt((q.css("marginBottom") || "0").replace("px", ""));
    photoMoreCardInnerMT = parseInt((e.css("marginTop") || "0").replace("px", ""));
    photoMoreCardInnerMB = parseInt((e.css("marginBottom") || "0").replace("px", ""));
    cellspacing = parseInt(p.attr("cellspacing"));
    if (f) {
        n = c.height();
        o = 0;
        formMiddleContentMB = 0
    }
    var l = n - o - formMiddleContentMB - photoMoreCardInnerMT - photoMoreCardInnerMB - (2 * cellspacing);
    if (d != null) {
        b.find(".moreCardDrag").each(function (s, t) {
            var r = parseInt($(this).attr("num"));
            if (s == 0) {
                k = (a - ((2 + r) * cellspacing)) / (d - ((2 + r) * cellspacing))
            } else {
                h = (a - ((2 + r) * cellspacing)) / (d - ((2 + r) * cellspacing));
                return false
            }
        });
        j = true
    }
    i.each(function () {
        var t = $(this).find(".photoMoreCard"),
            s = parseInt($(this).attr("rowspan")),
            u = $(this).width(),
            r = Math.floor((l - (g - 1) * cellspacing) / g) || "";
        $(this).css("padding-top", cellspacing + "px");
        $(this).css("padding-left", cellspacing + "px");
        $(this).css("height", r + "px");
        if (j) {
            if ($(this).parents(".moreCardDrag").attr("tr") == 0) {
                $(this).css("width", u * k + "px");
                t.css("width", u * k + "px")
            } else {
                $(this).css("width", u * h + "px");
                t.css("width", u * h + "px")
            }
        }
    });
    Site.resizePhotoMoreCartShape(b)
};
Site.resizePhotoMoreCartShape = function (c) {
    var q = c.find(".photoMoreCardTable"),
        i = c.find(".photoMoreCardOuter"),
        n = c.find(".moreCardDrag"),
        l = c.find(".moreCardTd"),
        b = parseInt(q.attr("cellspacing")),
        t = parseInt(c.find(".photoMoreCardInner").attr("cardstyle")) || 0;
    var n = c.find(".moreCardDrag"),
        s = n.length,
        o = s / 2,
        d = c.height() - (s + 1) * b,
        a = d / (o),
        h, m, r, g, e, l;
    var k = 0;
    n.each(function (v, w) {
        var u = $(this).find(".noPhoto");
        var x = u.length > 0;
        if (x) {
            j($(this), u)
        }
        k += $(this).find(".moreCardTd").last().height()
    });

    function j(w, u) {
        var v = u.first().prev();
        if (v.length > 0 && v.attr("rowspan") != "2") {
            w.find(".noPhoto, .noPhoto .photoMoreCard").css("height", v.height());
            return
        }
        if (v.length > 0 && v.attr("rowspan") == "2") {
            w.find(".noPhoto, .noPhoto .photoMoreCard").css("height", (v.height() - t) / 2);
            return
        }
        if (v.length == 0) {
            var x = w.prev().find(".moreCardTd").last().height();
            w.find(".noPhoto, .noPhoto .photoMoreCard").css("height", a - x)
        }
    }
    var p = [];
    c.find(".moreCardTd").each(function () {
        var u = $(this).height();
        if ($(this).attr("rowspan") == "2") {
            p.push($(this))
        } else {
            $(this).css("height", Math.floor(d * u / k));
            $(this).find(".photoMoreCard").css("height", Math.floor(d * u / k))
        }
    });
    $.each(p, function (v, x) {
        if (x.attr("rowspan") == "2") {
            var w = x.next().height();
            var u = x.parent().next().find(".moreCardTd").first().height();
            x.css("height", Math.floor(w + u + b - 1));
            x.find(".photoMoreCard").css("height", Math.floor(w + u + b - 1))
        }
    });
    f();

    function f() {
        n.each(function () {
            var v = $(this).find(".noPhoto");
            if (v.length < 1) {
                return true
            }
            var u = $(this).children(),
                w = u.first();
            if (!w.hasClass("noPhoto") && w.attr("rowspan") != "2") {
                u.css("height", w.height())
            }
        })
    }
};
Site.adjustPhotoMoreCard = function (d) {
    if (Fai.isNumber(d)) {
        var b = Fai.top.$("#module" + d);
        if (b.hasClass("formStyle98") && !b.find(".photoMoreCardOuter").attr("cusHeight")) {
            Site.initPhotoMoreCard(d);
            b.attr("_autoheight", 0)
        }
    } else {
        if (typeof d == "object") {
            var e = d;
            var c = e.find(".formStyle98");
            if (c.length > 0) {
                a(c)
            }
        } else {
            if (d == undefined) {
                var c = Fai.top.$(".formStyle98");
                if (c.length > 0) {
                    a(c)
                }
            }
        }
    }

    function a(f) {
        c.each(function () {
            var h = $(this).attr("id").replace("module", ""),
                g = $(this).find(".photoMoreCardOuter"),
                j = g.attr("cusHeight"),
                i = parseInt($(this).data("contentWidth")) || undefined;
            if (j) {
                return true
            }
            Site.initPhotoMoreCard(h, i);
            $(this).attr("_autoheight", 1)
        })
    }
};
Site.photoMoreCardHideDrag = function (a) {
    $("#module" + a).find(".photoMoreCardTable").find(".drag").each(function () {
        $(this).css("display", "none")
    })
};
Site.initPhotoMoreCardTdLength = function (d, b) {
    var a = $("#module" + d),
        c = a.find(".photoMoreCardTable"),
        e = parseInt(c.attr("cellspacing"));
    a.data("photoStyleId", b);
    if (b == 0) {
        a.find(".moreCardDrag").each(function (g, h) {
            var f = $(this).attr("num");
            if (f == 0) {
                $(this).attr("num", 1)
            } else {
                $(this).attr("num", 2)
            }
        })
    } else {
        if (b == 1) {
            a.find(".moreCardDrag").each(function (g, h) {
                var f = $(this).attr("num");
                if (f == 0) {
                    $(this).attr("num", 2)
                } else {
                    $(this).attr("num", 1)
                }
            })
        } else {
            if (b == 2) {
                a.find(".moreCardDrag").each(function (g, h) {
                    var f = $(this).attr("num");
                    if (f == 0) {
                        $(this).attr("num", 2)
                    } else {
                        $(this).attr("num", 2)
                    }
                })
            } else {
                if (b == 3) {
                    a.find(".moreCardDrag").each(function (g, h) {
                        var f = $(this).attr("num");
                        if (f == 0) {
                            $(this).attr("num", 1)
                        } else {
                            $(this).attr("num", 2)
                        }
                    })
                } else {
                    if (b == 4) {
                        a.find(".moreCardDrag").each(function (g, h) {
                            var f = $(this).attr("num");
                            if (f == 0) {
                                $(this).attr("num", 1)
                            } else {
                                $(this).attr("num", 2)
                            }
                        })
                    } else {
                        if (b == 5) {
                            a.find(".moreCardDrag").each(function (g, h) {
                                var f = $(this).attr("num");
                                if (f == 0) {
                                    $(this).attr("num", 2)
                                } else {
                                    $(this).attr("num", 1)
                                }
                            })
                        } else {
                            if (b == 6) {
                                a.find(".moreCardDrag").each(function (g, h) {
                                    var f = $(this).attr("num");
                                    if (f == 0) {
                                        $(this).attr("num", 3)
                                    } else {
                                        $(this).attr("num", 2)
                                    }
                                })
                            } else {
                                if (b == 7) {
                                    a.find(".moreCardDrag").each(function (g, h) {
                                        var f = $(this).attr("num");
                                        if (f == 0) {
                                            $(this).attr("num", 2)
                                        } else {
                                            $(this).attr("num", 1)
                                        }
                                    })
                                } else {
                                    if (b == 8) {
                                        a.find(".moreCardDrag").each(function (g, h) {
                                            var f = $(this).attr("num");
                                            if (f == 0) {
                                                $(this).attr("num", 1)
                                            } else {
                                                $(this).attr("num", 2)
                                            }
                                        })
                                    } else {
                                        if (b == 9) {
                                            a.find(".moreCardDrag").each(function (g, h) {
                                                var f = $(this).attr("num");
                                                if (f == 0) {
                                                    $(this).attr("num", 1)
                                                } else {
                                                    $(this).attr("num", 0)
                                                }
                                            })
                                        } else {
                                            if (b == 10) {
                                                a.find(".moreCardDrag").each(function (g, h) {
                                                    var f = $(this).attr("num");
                                                    if (f == 0) {
                                                        $(this).attr("num", 0)
                                                    } else {
                                                        $(this).attr("num", 1)
                                                    }
                                                })
                                            } else {
                                                if (b == 11) {
                                                    a.find(".moreCardDrag").each(function (g, h) {
                                                        var f = $(this).attr("num");
                                                        if (f == 0) {
                                                            $(this).attr("num", 1)
                                                        } else {
                                                            $(this).attr("num", 1)
                                                        }
                                                    })
                                                } else {
                                                    if (b == 12) {
                                                        a.find(".moreCardDrag").each(function (g, h) {
                                                            var f = $(this).attr("num");
                                                            if (f == 0) {
                                                                $(this).attr("num", 2)
                                                            } else {
                                                                $(this).attr("num", 2)
                                                            }
                                                        })
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
};
Site.firstPhotoMoreCardInit = function (b, o) {
    var c = $("#module" + b),
        p = c.find(".photoMoreCardTable"),
        g = parseInt(p.attr("cellspacing")),
        n = c.width(),
        j = c.height(),
        f;
    c.data("photoStyleId", o);
    if (o == 0) {
        var f = Math.ceil(c.find(".moreCardTd").length / 4),
            l = (n - 3 * g) * 0.35,
            k = (n - 3 * g) * 0.65,
            e = (n - 4 * g - l) * 0.5,
            m = e,
            a = (j - (f + 1) * g) / f,
            i = (a - g) / 2,
            h = i,
            d = h;
        c.find(".moreCardTd").each(function (q, r) {
            q = q % 4;
            if (q == 0) {
                $(this).css("width", l + "px");
                $(this).css("height", a + "px")
            } else {
                if (q == 1) {
                    $(this).css("width", k + "px");
                    $(this).css("height", i + "px")
                } else {
                    if (q == 2) {
                        $(this).css("width", e + "px");
                        $(this).css("height", h + "px")
                    } else {
                        if (q == 3) {
                            $(this).css("width", m + "px");
                            $(this).css("height", d + "px")
                        }
                    }
                }
            }
        })
    } else {
        if (o == 1) {
            var f = Math.ceil(c.find(".moreCardTd").length / 4);
            l = (n - 3 * g) * 0.35, k = (n - 4 * g - l) * 0.5, e = k, m = (n - 3 * g) * 0.65, a = (j - (f + 1) * g) / f, i = (a - g) / 2, h = i, d = h;
            c.find(".moreCardTd").each(function (q, r) {
                q = q % 4;
                if (q == 0) {
                    $(this).css("width", l + "px");
                    $(this).css("height", a + "px")
                } else {
                    if (q == 1) {
                        $(this).css("width", k + "px");
                        $(this).css("height", i + "px")
                    } else {
                        if (q == 2) {
                            $(this).css("width", e + "px");
                            $(this).css("height", h + "px")
                        } else {
                            if (q == 3) {
                                $(this).css("width", m + "px");
                                $(this).css("height", d + "px")
                            }
                        }
                    }
                }
            })
        } else {
            if (o == 2) {
                var f = Math.ceil(c.find(".moreCardTd").length / 5);
                l = (n - 4 * g) * 0.35, k = (n - 4 * g - l) * 0.5, e = k, m = e, fifthWidth = m, a = (j - (f + 1) * g) / f, i = (a - g) / 2, h = i, d = h, fifthHeight = d;
                c.find(".moreCardTd").each(function (q, r) {
                    q = q % 5;
                    if (q == 0) {
                        $(this).css("width", l + "px");
                        $(this).css("height", a + "px")
                    } else {
                        if (q == 1) {
                            $(this).css("width", k + "px");
                            $(this).css("height", i + "px")
                        } else {
                            if (q == 2) {
                                $(this).css("width", e + "px");
                                $(this).css("height", h + "px")
                            } else {
                                if (q == 3) {
                                    $(this).css("width", m + "px");
                                    $(this).css("height", d + "px")
                                } else {
                                    if (q == 4) {
                                        $(this).css("width", fifthWidth + "px");
                                        $(this).css("height", fifthHeight + "px")
                                    }
                                }
                            }
                        }
                    }
                })
            } else {
                if (o == 3) {
                    var f = Math.ceil(c.find(".moreCardTd").length / 5);
                    l = (n - 3 * g) * 0.35, k = (n - 3 * g) * 0.65, e = l, m = (n - 4 * g - l) * 0.5, fifthWidth = m, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                    c.find(".moreCardTd").each(function (q, r) {
                        q = q % 5;
                        if (q == 0) {
                            $(this).css("width", l + "px");
                            $(this).css("height", a + "px")
                        } else {
                            if (q == 1) {
                                $(this).css("width", k + "px");
                                $(this).css("height", i + "px")
                            } else {
                                if (q == 2) {
                                    $(this).css("width", e + "px");
                                    $(this).css("height", h + "px")
                                } else {
                                    if (q == 3) {
                                        $(this).css("width", m + "px");
                                        $(this).css("height", d + "px")
                                    } else {
                                        if (q == 4) {
                                            $(this).css("width", fifthWidth + "px");
                                            $(this).css("height", fifthHeight + "px")
                                        }
                                    }
                                }
                            }
                        }
                    })
                } else {
                    if (o == 4) {
                        var f = Math.ceil(c.find(".moreCardTd").length / 5);
                        l = (n - 3 * g) * 0.65, k = (n - 3 * g) * 0.35, e = (n - 4 * g - k) * 0.5, m = e, fifthWidth = k, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                        c.find(".moreCardTd").each(function (q, r) {
                            q = q % 5;
                            if (q == 0) {
                                $(this).css("width", l + "px");
                                $(this).css("height", a + "px")
                            } else {
                                if (q == 1) {
                                    $(this).css("width", k + "px");
                                    $(this).css("height", i + "px")
                                } else {
                                    if (q == 2) {
                                        $(this).css("width", e + "px");
                                        $(this).css("height", h + "px")
                                    } else {
                                        if (q == 3) {
                                            $(this).css("width", m + "px");
                                            $(this).css("height", d + "px")
                                        } else {
                                            if (q == 4) {
                                                $(this).css("width", fifthWidth + "px");
                                                $(this).css("height", fifthHeight + "px")
                                            }
                                        }
                                    }
                                }
                            }
                        })
                    } else {
                        if (o == 5) {
                            var f = Math.ceil(c.find(".moreCardTd").length / 5);
                            m = (n - 3 * g) * 0.65, fifthWidth = (n - 3 * g) * 0.35, l = (n - 4 * g - fifthWidth) * 0.5, k = l, e = (n - 4 * g) * 0.35, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                            c.find(".moreCardTd").each(function (q, r) {
                                q = q % 5;
                                if (q == 0) {
                                    $(this).css("width", l + "px");
                                    $(this).css("height", a + "px")
                                } else {
                                    if (q == 1) {
                                        $(this).css("width", k + "px");
                                        $(this).css("height", i + "px")
                                    } else {
                                        if (q == 2) {
                                            $(this).css("width", e + "px");
                                            $(this).css("height", h + "px")
                                        } else {
                                            if (q == 3) {
                                                $(this).css("width", m + "px");
                                                $(this).css("height", d + "px")
                                            } else {
                                                if (q == 4) {
                                                    $(this).css("width", fifthWidth + "px");
                                                    $(this).css("height", fifthHeight + "px")
                                                }
                                            }
                                        }
                                    }
                                }
                            })
                        } else {
                            if (o == 6) {
                                var f = Math.ceil(c.find(".moreCardTd").length / 7);
                                l = (n - 5 * g) * 0.25, k = l, e = k, m = e, fifthWidth = l * 2 + g, sixthWidth = m, seventhWidth = sixthWidth, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                                sixthHeight = fifthHeight, seventhHeight = sixthHeight;
                                c.find(".moreCardTd").each(function (q, r) {
                                    q = q % 7;
                                    if (q == 0) {
                                        $(this).css("width", l + "px");
                                        $(this).css("height", a + "px")
                                    } else {
                                        if (q == 1) {
                                            $(this).css("width", k + "px");
                                            $(this).css("height", i + "px")
                                        } else {
                                            if (q == 2) {
                                                $(this).css("width", e + "px");
                                                $(this).css("height", h + "px")
                                            } else {
                                                if (q == 3) {
                                                    $(this).css("width", m + "px");
                                                    $(this).css("height", d + "px")
                                                } else {
                                                    if (q == 4) {
                                                        $(this).css("width", fifthWidth + "px");
                                                        $(this).css("height", fifthHeight + "px")
                                                    } else {
                                                        if (q == 5) {
                                                            $(this).css("width", sixthWidth + "px");
                                                            $(this).css("height", sixthHeight + "px")
                                                        } else {
                                                            if (q == 6) {
                                                                $(this).css("width", seventhWidth + "px");
                                                                $(this).css("height", seventhHeight + "px")
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                })
                            } else {
                                if (o == 7) {
                                    var f = Math.ceil(c.find(".moreCardTd").length / 5);
                                    l = (n - 4 * g) * 0.33, k = (n - 4 * g) * 0.34, e = l, m = (n - 3 * g) * 0.5, fifthWidth = m, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                                    c.find(".moreCardTd").each(function (q, r) {
                                        q = q % 5;
                                        if (q == 0) {
                                            $(this).css("width", l + "px");
                                            $(this).css("height", a + "px")
                                        } else {
                                            if (q == 1) {
                                                $(this).css("width", k + "px");
                                                $(this).css("height", i + "px")
                                            } else {
                                                if (q == 2) {
                                                    $(this).css("width", e + "px");
                                                    $(this).css("height", h + "px")
                                                } else {
                                                    if (q == 3) {
                                                        $(this).css("width", m + "px");
                                                        $(this).css("height", d + "px")
                                                    } else {
                                                        if (q == 4) {
                                                            $(this).css("width", fifthWidth + "px");
                                                            $(this).css("height", fifthHeight + "px")
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    })
                                } else {
                                    if (o == 8) {
                                        var f = Math.ceil(c.find(".moreCardTd").length / 5);
                                        l = (n - 3 * g) * 0.5, k = l, e = (n - 4 * g) * 0.33, m = (n - 4 * g) * 0.34, fifthWidth = e, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                                        c.find(".moreCardTd").each(function (q, r) {
                                            q = q % 5;
                                            if (q == 0) {
                                                $(this).css("width", l + "px");
                                                $(this).css("height", a + "px")
                                            } else {
                                                if (q == 1) {
                                                    $(this).css("width", k + "px");
                                                    $(this).css("height", i + "px")
                                                } else {
                                                    if (q == 2) {
                                                        $(this).css("width", e + "px");
                                                        $(this).css("height", h + "px")
                                                    } else {
                                                        if (q == 3) {
                                                            $(this).css("width", m + "px");
                                                            $(this).css("height", d + "px")
                                                        } else {
                                                            if (q == 4) {
                                                                $(this).css("width", fifthWidth + "px");
                                                                $(this).css("height", fifthHeight + "px")
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        })
                                    } else {
                                        if (o == 9) {
                                            var f = Math.ceil(c.find(".moreCardTd").length / 3);
                                            l = (n - 3 * g) * 0.5, k = l, e = (n - 2 * g) * 1, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i;
                                            c.find(".moreCardTd").each(function (q, r) {
                                                q = q % 3;
                                                if (q == 0) {
                                                    $(this).css("width", l + "px");
                                                    $(this).css("height", a + "px")
                                                } else {
                                                    if (q == 1) {
                                                        $(this).css("width", k + "px");
                                                        $(this).css("height", i + "px")
                                                    } else {
                                                        if (q == 2) {
                                                            $(this).css("width", e + "px");
                                                            $(this).css("height", h + "px")
                                                        }
                                                    }
                                                }
                                            })
                                        } else {
                                            if (o == 10) {
                                                var f = Math.ceil(c.find(".moreCardTd").length / 3);
                                                l = (n - 2 * g) * 1, k = (n - 3 * g) * 0.5, e = k, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i;
                                                c.find(".moreCardTd").each(function (q, r) {
                                                    q = q % 3;
                                                    if (q == 0) {
                                                        $(this).css("width", l + "px");
                                                        $(this).css("height", a + "px")
                                                    } else {
                                                        if (q == 1) {
                                                            $(this).css("width", k + "px");
                                                            $(this).css("height", i + "px")
                                                        } else {
                                                            if (q == 2) {
                                                                $(this).css("width", e + "px");
                                                                $(this).css("height", h + "px")
                                                            }
                                                        }
                                                    }
                                                })
                                            } else {
                                                if (o == 11) {
                                                    var f = Math.ceil(c.find(".moreCardTd").length / 4);
                                                    l = (n - 3 * g) * 0.65, k = (n - 3 * g) * 0.35, e = k, m = l, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h;
                                                    c.find(".moreCardTd").each(function (q, r) {
                                                        q = q % 4;
                                                        if (q == 0) {
                                                            $(this).css("width", l + "px");
                                                            $(this).css("height", a + "px")
                                                        } else {
                                                            if (q == 1) {
                                                                $(this).css("width", k + "px");
                                                                $(this).css("height", i + "px")
                                                            } else {
                                                                if (q == 2) {
                                                                    $(this).css("width", e + "px");
                                                                    $(this).css("height", h + "px")
                                                                } else {
                                                                    if (q == 3) {
                                                                        $(this).css("width", m + "px");
                                                                        $(this).css("height", d + "px")
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    })
                                                } else {
                                                    if (o == 12) {
                                                        var f = Math.ceil(c.find(".moreCardTd").length / 6);
                                                        l = (n - 4 * g) * 0.43, k = (n - 4 * g) * 0.34, e = (n - 4 * g) * 0.23, m = e, fifthWidth = k, sixthWidth = l, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                                                        sixthHeight = fifthHeight;
                                                        c.find(".moreCardTd").each(function (q, r) {
                                                            q = q % 6;
                                                            if (q == 0) {
                                                                $(this).css("width", l + "px");
                                                                $(this).css("height", a + "px")
                                                            } else {
                                                                if (q == 1) {
                                                                    $(this).css("width", k + "px");
                                                                    $(this).css("height", i + "px")
                                                                } else {
                                                                    if (q == 2) {
                                                                        $(this).css("width", e + "px");
                                                                        $(this).css("height", h + "px")
                                                                    } else {
                                                                        if (q == 3) {
                                                                            $(this).css("width", m + "px");
                                                                            $(this).css("height", d + "px")
                                                                        } else {
                                                                            if (q == 4) {
                                                                                $(this).css("width", fifthWidth + "px");
                                                                                $(this).css("height", fifthHeight + "px")
                                                                            } else {
                                                                                if (q == 5) {
                                                                                    $(this).css("width", sixthWidth + "px");
                                                                                    $(this).css("height", sixthHeight + "px")
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        })
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    Site.adjustPhotoMoreCardImgSize(c)
};
Site.nophotoMoreCardInit = function (a, l) {
    var b = $("#module" + a),
        m = b.find(".photoMoreCardTable"),
        e = parseInt(m.attr("cellspacing")),
        k = b.width(),
        f = b.height(),
        c;
    if (l == 0) {
        var j, h, g, i = b.find(".noPhoto").length,
            d = b.find(".noPhoto").eq(0).attr("number");
        if (i == 1) {
            j = b.find(".moreCardTd").eq(d - 1).width();
            h = b.find(".moreCardTd").eq(d - 2).width() - j - e;
            b.find(".noPhoto").eq(0).css("width", h + "px")
        } else {
            if (i == 2) {
                j = b.find(".moreCardTd").eq(d - 1).width();
                h = (j - e) / 2;
                g = h;
                b.find(".noPhoto").eq(0).css("width", h + "px");
                b.find(".noPhoto").eq(1).css("width", g + "px")
            } else {
                if (i == 3) {
                    j = b.find(".moreCardTd").eq(d - 1).width();
                    h = k - j - 3 * e;
                    g = (k - j - 4 * e) / 2;
                    b.find(".noPhoto").eq(0).css("width", h + "px");
                    b.find(".noPhoto").eq(1).css("width", g + "px");
                    b.find(".noPhoto").eq(2).css("width", g + "px")
                }
            }
        }
    } else {
        if (l == 1) {
            var j, h, g, i = b.find(".noPhoto").length,
                d = b.find(".noPhoto").eq(0).attr("number");
            if (i == 1) {
                j = b.find(".moreCardTd").eq(d - 1).width();
                h = b.find(".moreCardTd").eq(d - 2).width() + j + e;
                b.find(".noPhoto").eq(0).css("width", h + "px")
            } else {
                if (i == 2) {
                    j = b.find(".moreCardTd").eq(d - 2).width();
                    h = k - 3 * e - j;
                    g = h - b.find(".moreCardTd").eq(d - 1).width() - e;
                    b.find(".noPhoto").eq(0).css("width", g + "px");
                    b.find(".noPhoto").eq(1).css("width", h + "px")
                } else {
                    if (i == 3) {
                        j = b.find(".moreCardTd").eq(d - 1).width();
                        h = k - j - 3 * e;
                        g = (k - j - 4 * e) / 2;
                        b.find(".noPhoto").eq(0).css("width", g + "px");
                        b.find(".noPhoto").eq(1).css("width", g + "px");
                        b.find(".noPhoto").eq(2).css("width", h + "px")
                    }
                }
            }
        } else {
            if (l == 2) {
                var j, h, g, i = b.find(".noPhoto").length,
                    d = b.find(".noPhoto").eq(0).attr("number");
                if (i == 1) {
                    j = b.find(".moreCardTd").eq(d - 4).width();
                    h = k - b.find(".moreCardTd").eq(d - 1).width() - j - 4 * e;
                    b.find(".noPhoto").eq(0).css("width", h + "px")
                } else {
                    if (i == 2) {
                        j = b.find(".moreCardTd").eq(d - 3).width();
                        h = (k - 4 * e - j) / 2;
                        b.find(".noPhoto").eq(0).css("width", h + "px");
                        b.find(".noPhoto").eq(1).css("width", h + "px")
                    } else {
                        if (i == 3) {
                            j = b.find(".moreCardTd").eq(d - 2).width();
                            h = k - b.find(".moreCardTd").eq(d - 1).width() - j - 4 * e;
                            g = (k - j - 4 * e) / 2;
                            b.find(".noPhoto").eq(0).css("width", h + "px");
                            b.find(".noPhoto").eq(1).css("width", g + "px");
                            b.find(".noPhoto").eq(2).css("width", g + "px")
                        } else {
                            if (i == 4) {
                                j = b.find(".moreCardTd").eq(d - 1).width();
                                h = (k - 4 * e - j) / 2;
                                b.find(".noPhoto").eq(0).css("width", h + "px");
                                b.find(".noPhoto").eq(1).css("width", h + "px");
                                b.find(".noPhoto").eq(2).css("width", h + "px");
                                b.find(".noPhoto").eq(3).css("width", h + "px")
                            }
                        }
                    }
                }
            } else {
                if (l == 3) {
                    var j, h, g, i = b.find(".noPhoto").length,
                        d = b.find(".noPhoto").eq(0).attr("number");
                    if (i == 1) {
                        j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                        b.find(".noPhoto").eq(0).css("width", j + "px")
                    } else {
                        if (i == 2) {
                            j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                            b.find(".noPhoto").eq(0).css("width", j + "px");
                            b.find(".noPhoto").eq(1).css("width", j + "px")
                        } else {
                            if (i == 3) {
                                j = (k - 4 * e) / 3;
                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                b.find(".noPhoto").eq(1).css("width", j + "px");
                                b.find(".noPhoto").eq(2).css("width", j + "px")
                            } else {
                                if (i == 4) {
                                    j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                    h = (k - 4 * e) / 3;
                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                    b.find(".noPhoto").eq(1).css("width", h + "px");
                                    b.find(".noPhoto").eq(2).css("width", h + "px");
                                    b.find(".noPhoto").eq(3).css("width", h + "px")
                                }
                            }
                        }
                    }
                } else {
                    if (l == 4) {
                        var j, h, g, i = b.find(".noPhoto").length,
                            d = b.find(".noPhoto").eq(0).attr("number");
                        if (i == 1) {
                            j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                            b.find(".noPhoto").eq(0).css("width", j + "px")
                        } else {
                            if (i == 2) {
                                j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                b.find(".noPhoto").eq(1).css("width", j + "px")
                            } else {
                                if (i == 3) {
                                    j = (k - 4 * e) / 3;
                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                    b.find(".noPhoto").eq(1).css("width", j + "px");
                                    b.find(".noPhoto").eq(2).css("width", j + "px")
                                } else {
                                    if (i == 4) {
                                        j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                        h = (k - 4 * e) / 3;
                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                        b.find(".noPhoto").eq(1).css("width", h + "px");
                                        b.find(".noPhoto").eq(2).css("width", h + "px");
                                        b.find(".noPhoto").eq(3).css("width", h + "px")
                                    }
                                }
                            }
                        }
                    } else {
                        if (l == 5) {
                            var j, h, g, i = b.find(".noPhoto").length,
                                d = b.find(".noPhoto").eq(0).attr("number");
                            if (i == 1) {
                                j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                b.find(".noPhoto").eq(0).css("width", j + "px")
                            } else {
                                if (i == 2) {
                                    j = (k - 3 * e) / 2;
                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                    b.find(".noPhoto").eq(1).css("width", j + "px")
                                } else {
                                    if (i == 3) {
                                        j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                                        h = (k - 3 * e) / 2;
                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                        b.find(".noPhoto").eq(1).css("width", h + "px");
                                        b.find(".noPhoto").eq(2).css("width", h + "px")
                                    } else {
                                        if (i == 4) {
                                            j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                            h = (k - 3 * e) / 2;
                                            b.find(".noPhoto").eq(0).css("width", j + "px");
                                            b.find(".noPhoto").eq(1).css("width", j + "px");
                                            b.find(".noPhoto").eq(2).css("width", h + "px");
                                            b.find(".noPhoto").eq(3).css("width", h + "px")
                                        }
                                    }
                                }
                            }
                        } else {
                            if (l == 6) {
                                var j, h, g, i = b.find(".noPhoto").length,
                                    d = b.find(".noPhoto").eq(0).attr("number");
                                if (i == 1) {
                                    j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                                    b.find(".noPhoto").eq(0).css("width", j + "px")
                                } else {
                                    if (i == 2) {
                                        j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                        b.find(".noPhoto").eq(1).css("width", j + "px")
                                    } else {
                                        if (i == 3) {
                                            j = (k - 4 * e) / 3;
                                            b.find(".noPhoto").eq(0).css("width", j + "px");
                                            b.find(".noPhoto").eq(1).css("width", j + "px");
                                            b.find(".noPhoto").eq(2).css("width", j + "px")
                                        } else {
                                            if (i == 4) {
                                                j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - b.find(".moreCardTd").eq(d - 3).width() - 5 * e;
                                                h = (k - 4 * e) / 3;
                                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                                b.find(".noPhoto").eq(1).css("width", h + "px");
                                                b.find(".noPhoto").eq(2).css("width", h + "px");
                                                b.find(".noPhoto").eq(3).css("width", h + "px")
                                            } else {
                                                if (i == 5) {
                                                    j = (k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 5 * e) / 2;
                                                    h = (k - 4 * e) / 3;
                                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                                    b.find(".noPhoto").eq(1).css("width", j + "px");
                                                    b.find(".noPhoto").eq(2).css("width", h + "px");
                                                    b.find(".noPhoto").eq(3).css("width", h + "px");
                                                    b.find(".noPhoto").eq(4).css("width", h + "px")
                                                } else {
                                                    if (i == 6) {
                                                        j = (k - b.find(".moreCardTd").eq(d - 1).width() - 5 * e) / 3;
                                                        h = (k - 4 * e) / 3;
                                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                                        b.find(".noPhoto").eq(1).css("width", j + "px");
                                                        b.find(".noPhoto").eq(2).css("width", j + "px");
                                                        b.find(".noPhoto").eq(3).css("width", h + "px");
                                                        b.find(".noPhoto").eq(4).css("width", h + "px");
                                                        b.find(".noPhoto").eq(5).css("width", h + "px")
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            } else {
                                if (l == 7) {
                                    var j, h, g, i = b.find(".noPhoto").length,
                                        d = b.find(".noPhoto").eq(0).attr("number");
                                    if (i == 1) {
                                        j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                        b.find(".noPhoto").eq(0).css("width", j + "px")
                                    } else {
                                        if (i == 2) {
                                            j = (k - 3 * e) / 2;
                                            b.find(".noPhoto").eq(0).css("width", j + "px");
                                            b.find(".noPhoto").eq(1).css("width", j + "px")
                                        } else {
                                            if (i == 3) {
                                                j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                                                h = (k - 3 * e) / 2;
                                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                                b.find(".noPhoto").eq(1).css("width", h + "px");
                                                b.find(".noPhoto").eq(2).css("width", h + "px")
                                            } else {
                                                if (i == 4) {
                                                    j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                                    h = (k - 3 * e) / 2;
                                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                                    b.find(".noPhoto").eq(1).css("width", j + "px");
                                                    b.find(".noPhoto").eq(2).css("width", h + "px");
                                                    b.find(".noPhoto").eq(3).css("width", h + "px")
                                                }
                                            }
                                        }
                                    }
                                } else {
                                    if (l == 8) {
                                        var j, h, g, i = b.find(".noPhoto").length,
                                            d = b.find(".noPhoto").eq(0).attr("number");
                                        if (i == 1) {
                                            j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                                            b.find(".noPhoto").eq(0).css("width", j + "px")
                                        } else {
                                            if (i == 2) {
                                                j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                                b.find(".noPhoto").eq(1).css("width", j + "px")
                                            } else {
                                                if (i == 3) {
                                                    j = (k - 4 * e) / 3;
                                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                                    b.find(".noPhoto").eq(1).css("width", j + "px");
                                                    b.find(".noPhoto").eq(2).css("width", j + "px")
                                                } else {
                                                    if (i == 4) {
                                                        j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                                        h = (k - 4 * e) / 3;
                                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                                        b.find(".noPhoto").eq(1).css("width", h + "px");
                                                        b.find(".noPhoto").eq(2).css("width", h + "px");
                                                        b.find(".noPhoto").eq(3).css("width", h + "px")
                                                    }
                                                }
                                            }
                                        }
                                    } else {
                                        if (l == 9) {
                                            var j, h, g, i = b.find(".noPhoto").length,
                                                d = b.find(".noPhoto").eq(0).attr("number");
                                            if (i == 1) {
                                                j = k - 2 * e;
                                                b.find(".noPhoto").eq(0).css("width", j + "px")
                                            } else {
                                                if (i == 2) {
                                                    j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                                    h = k - 2 * e;
                                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                                    b.find(".noPhoto").eq(1).css("width", h + "px")
                                                }
                                            }
                                        } else {
                                            if (l == 10) {
                                                var j, h, g, i = b.find(".noPhoto").length,
                                                    d = b.find(".noPhoto").eq(0).attr("number");
                                                if (i == 1) {
                                                    j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                                    b.find(".noPhoto").eq(0).css("width", j + "px")
                                                } else {
                                                    if (i == 2) {
                                                        j = (k - 3 * e) / 2;
                                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                                        b.find(".noPhoto").eq(1).css("width", j + "px")
                                                    }
                                                }
                                            } else {
                                                if (l == 11) {
                                                    var j, h, g, i = b.find(".noPhoto").length,
                                                        d = b.find(".noPhoto").eq(0).attr("number");
                                                    if (i == 1) {
                                                        j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                                        b.find(".noPhoto").eq(0).css("width", j + "px")
                                                    } else {
                                                        if (i == 2) {
                                                            j = (k - 3 * e) / 2;
                                                            b.find(".noPhoto").eq(0).css("width", j + "px");
                                                            b.find(".noPhoto").eq(1).css("width", j + "px")
                                                        } else {
                                                            if (i == 3) {
                                                                j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                                                h = (k - 3 * e) / 2;
                                                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                                                b.find(".noPhoto").eq(1).css("width", h + "px");
                                                                b.find(".noPhoto").eq(2).css("width", h + "px")
                                                            }
                                                        }
                                                    }
                                                } else {
                                                    if (l == 12) {
                                                        var j, h, g, i = b.find(".noPhoto").length,
                                                            d = b.find(".noPhoto").eq(0).attr("number");
                                                        if (i == 1) {
                                                            j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                                                            b.find(".noPhoto").eq(0).css("width", j + "px")
                                                        } else {
                                                            if (i == 2) {
                                                                j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                                                b.find(".noPhoto").eq(1).css("width", j + "px")
                                                            } else {
                                                                if (i == 3) {
                                                                    j = (k - 4 * e) / 3;
                                                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                                                    b.find(".noPhoto").eq(1).css("width", j + "px");
                                                                    b.find(".noPhoto").eq(2).css("width", j + "px")
                                                                } else {
                                                                    if (i == 4) {
                                                                        j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                                                                        h = (k - 4 * e) / 3;
                                                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                                                        b.find(".noPhoto").eq(1).css("width", h + "px");
                                                                        b.find(".noPhoto").eq(2).css("width", h + "px");
                                                                        b.find(".noPhoto").eq(3).css("width", h + "px")
                                                                    } else {
                                                                        if (i == 5) {
                                                                            j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                                                            h = (k - 4 * e) / 3;
                                                                            b.find(".noPhoto").eq(0).css("width", j + "px");
                                                                            b.find(".noPhoto").eq(1).css("width", j + "px");
                                                                            b.find(".noPhoto").eq(2).css("width", h + "px");
                                                                            b.find(".noPhoto").eq(3).css("width", h + "px");
                                                                            b.find(".noPhoto").eq(4).css("width", h + "px")
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    Site.adjustPhotoMoreCardImgSize(b)
};
(function (h, e, f) {
    var b = {},
        l = "fullmeasureOuterContentPage",
        g = false,
        k = false,
        c = false,
        j = false,
        a = 0,
        i = 0;
    var d = [];
    h(function () {
        var o = h(".formStyle80");
        setTimeout(function () {
            k = true;
            if (d.length > 0 || Fai.top._manageMode) {
                h("body").off("mousemove.fmGmainMousemove").on("mousemove.fmGmainMousemove", function (p) {
                    if (Fai.top._manageMode) {
                        if (h(".popupBg").length > 0) {
                            if (!j) {
                                j = true;
                                a = 0;
                                var w = h(".formStyle80");
                                if (w.length > 0) {
                                    w.each(function (y, z) {
                                        h("#module" + h(z).attr("id").replace("module", "")).data("mouseenter", false)
                                    })
                                }
                            }
                        } else {
                            j = false
                        }
                    }
                    if (d.length > 0) {
                        if (c) {
                            return
                        }
                        c = true;
                        a = 0;
                        var u = p || window.event;
                        var v = u.clientY;
                        var s = false;
                        for (var t = 0; t < d.length; t++) {
                            var r = h("#module" + d[t]);
                            var x = r.height();
                            var q = h("#module" + d[t])[0].getBoundingClientRect().top;
                            if (v >= q && v <= (x + q)) {
                                a = d[t];
                                s = true;
                                break
                            }
                        }
                        if (!s) {
                            a = 0
                        }
                        c = false
                    }
                })
            }
            if (Fai.top._manageMode) {
                h("body").off("click.fmGmainClick").on("click.fmGmainClick", function () {
                    if (i == 0) {
                        return
                    }
                    if (i != a) {
                        if (h("#faiFloatPanel").css("display") != "block") {
                            i = 0
                        }
                    }
                })
            }
        }, 1500);
        if (o.length > 0 || Fai.top._manageMode) {
            o.each(function (p, q) {
                e.refFillRelativeDivHeight(h(q).attr("id").replace("module", ""), true)
            });
            if (Fai.top._colId == 8) {
                setTimeout(function () {
                    o.each(function (p, q) {
                        e.refFillRelativeDivHeight(h(q).attr("id").replace("module", ""), true)
                    })
                }, 2500)
            }
            setTimeout(function () {
                g = true;
                o.each(function (p, r) {
                    var q = h(r).attr("id").replace("module", "");
                    e.refFillRelativeDivHeight(q, true);
                    e.dynamicSetArrowDom(q)
                })
            }, 1000);
            h(window).resize(function () {
                var p = h(".formStyle80");
                p.each(function (q, t) {
                    var s = h(t).attr("fmslidestyle");
                    var r = h(t).attr("id");
                    if (typeof r != f) {
                        r = r.replace("module", "");
                        e.buildFmSlideStyleDom(r, s)
                    }
                })
            })
        }
    });
    e.fmAddModuleStopCarousel = function (q) {
        if (typeof (q) == f) {
            return
        }
        if (Fai.top._manageMode) {
            var o = h("#module" + q);
            if (!o.hasClass("formStyle80")) {
                var p = Site.checkNestModule(o);
                if (p.inFullmeasure) {
                    q = p.parentId
                }
            }
        }
        setTimeout(function () {
            i = q
        }, 500)
    };
    e.setFmCarouselIdList = function (r, q) {
        var o = false;
        for (var p = (d.length - 1); p >= 0; p--) {
            if (d[p] == r) {
                if (q != 1) {
                    d.splice(p, 1)
                }
                o = true;
                break
            }
        }
        if (!o) {
            if (q == 1) {
                d[d.length] = r
            }
        }
    };

    function n(r, p, o, q) {
        e.setModuleFmSlideStyleAndPage(r, p, o, q);
        e.clearAnimate(r);
        e.bindModuleEvent(r);
        e.refFillRelativeDivHeight(r)
    }
    e.setModuleFmSlideStyleAndPage = function (r, p, o, q) {
        if (typeof (r) == f || typeof (p) == f || typeof (o) == f) {
            return
        }
        h("#module" + r).attr("fmSlideStyle", p);
        h("#module" + r).attr("fmPage", o);
        h("#module" + r).attr("isCarousel", q.c);
        h("#module" + r).attr("displayTime", q.d);
        h("#module" + r).attr("carouselSpeed", q.s);
        e.buildFmSlideStyleDom(r, p);
        e.setFmCarouselIdList(r, q.c);
        m(r)
    };
    e.clearAnimate = function (p) {
        if (p in b) {
            var o = b[p];
            if ("animateCt" in o) {
                clearInterval(o.animateCt)
            }
            if ("animateSlide" in o) {
                clearInterval(o.animateSlide)
            }
        }
    };
    e.bindModuleEvent = function (p) {
        var o = h("#module" + p);
        o.off("mouseenter.fullmeasureAnimate").on("mouseenter.fullmeasureAnimate", function () {
            h(this).data("mouseenter", true)
        });
        o.off("mouseleave.fullmeasureAnimate").on("mouseleave.fullmeasureAnimate", function () {
            h(this).data("mouseenter", false)
        })
    };
    e.refFillRelativeDivHeight = function (o, u) {
        if (typeof (o) == f) {
            return
        }
        var q = h("#module" + o);
        var x = 0,
            p = 0;
        if (q.find(".fullmeasureContent").length > 0) {
            var r = q.find(".J_fullmeasurePageShow .fullmeasureOuterContent").clone();
            var s = false;
            q.prepend("<div class='J_fullmeasureGetMaxHeight' style='display:none; position:relative; height:auto;'></div>");
            if (typeof (r) != f && r != null) {
                r.each(function (z, A) {
                    h(A).find("input").removeAttr("name");
                    q.find(".J_fullmeasureGetMaxHeight").html(h(A));
                    if (q.find(".J_fullmeasureGetMaxHeight").find(".fullmeasureContent").children(".form").length <= 0) {
                        var B = q.find(".J_fullmeasureGetMaxHeight").innerHeight();
                        var y = q.find(".J_fullmeasureGetMaxHeight").height();
                        if (y > 0) {
                            s = true
                        }
                        if (B > p) {
                            p = B
                        }
                        return true
                    }
                    var y = q.find(".J_fullmeasureGetMaxHeight").height();
                    if (y > x) {
                        x = y
                    }
                })
            }
            q.find(".J_fullmeasureGetMaxHeight").remove();
            var w = q.find(".J_fullmeasurePageShow").find(".fullmeasureOuterContentBg");
            w.each(function (y, A) {
                var z = h(A).css("background");
                if (typeof (z) != f && z.indexOf("url") > 0) {
                    s = true;
                    return false
                }
            });
            if (s == true && q.find(".fullmeasureContent").find(".form").length <= 0) {
                x = p
            }
            r = null;
            if (x <= 0) {
                if (Fai.top._manageMode || s == true) {
                    x = 165
                }
            }
            q.find(".fillContentRelative").css({
                height: x,
                position: "relative"
            })
        }
        if (u == true) {
            var v = q.find(".fullmeasureOuterContentPage");
            for (var t = 0; t < v.length; t++) {
                if (v.eq(t).css("display") != "block") {
                    v.eq(t).addClass("hideFmOuterContentPage").css("display", "block")
                }
            }
            setTimeout(function () {
                q.find(".formTabButtonHover").click();
                setTimeout(function () {
                    q.find(".hideFmOuterContentPage").removeClass("hideFmOuterContentPage").css("display", "none")
                }, 100)
            }, 1000)
        }
        e.dynamicSetArrowDom(o)
    };
    e.refreshSlideArrowPositon = function (p) {
        var o = h("#module" + p).attr("fmslidestyle");
        e.buildFmSlideStyleDom(p, o)
    };
    e.slide = function (q, E, u, s) {
        if (!k) {
            return
        }
        var A = b[q];
        var p = h("#module" + q);
        if (s != 0) {
            if (Fai.top._manageMode) {
                if (h("body").children(".popupBg").length || h(".moduleMaskContainer").length > 0) {
                    return
                }
                if (h("#faiFloatPanel").css("display") == "block" && q == i) {
                    return
                }
            }
            if (p.data("stopCarousel") == true) {
                return
            }
            if (a == q) {
                return
            }
        }
        var o = parseInt(p.attr("isCarousel"));
        if (isNaN(o)) {
            o = 0
        }
        var F = o;
        if (typeof (s) != f) {
            o = s
        }
        var G = parseFloat(p.attr("carouselSpeed"));
        if (isNaN(G)) {
            G = 1
        }
        if (o == 1) {
            if (p.data("mouseenter") == true) {
                return
            }
        }
        if (p.data("animateSlide") == true) {
            return
        }
        p.data("animateSlide", true);
        var v = p.find(".J_fullmeasurePageShow");
        if ("animateSlide" in A) {
            clearInterval(A.animateSlide)
        }
        if (v.length <= 1) {
            p.data("animateSlide", false);
            return
        }
        var y, D, C, r = true;
        if (o == 1) {
            for (var B = 0; B < v.length; B++) {
                var z = v.eq(B);
                if (z.css("display") == "block") {
                    D = z;
                    C = B;
                    if (B < (v.length - 1)) {
                        E = (parseInt(B) + 1);
                        y = v.eq(E)
                    } else {
                        E = 0;
                        y = v.eq(0)
                    }
                    break
                }
            }
        } else {
            for (var B = 0; B < v.length; B++) {
                var z = v.eq(B);
                if (z.css("display") == "block" && B != E) {
                    D = z;
                    C = B;
                    break
                }
            }
            y = v.eq(E)
        } if (typeof (y) == f || y == null || y.length <= 0) {
            p.data("animateSlide", false);
            return
        }
        if (typeof (D) == f || D == null || D.length <= 0) {
            p.data("animateSlide", false);
            return
        }
        if (C > E) {
            r = false
        }
        if (u == true && E == 0) {
            r = true
        }
        if (o == 1) {
            r = true
        }
        var x = p.width(),
            t = 0,
            w = parseInt(x / parseInt(G * 1000 / 40));
        if (F != 1) {
            w = 150
        }
        p.find(".fmSlideStyleShow").removeClass("fmSlideStyleShow");
        p.find(".fmSlideStyle").eq(E).addClass("fmSlideStyleShow");
        if (r) {
            y.css({
                left: x,
                display: "block"
            })
        } else {
            y.css({
                left: ("-" + x + "px"),
                display: "block"
            })
        } if ("animateSlide" in A) {
            clearInterval(A.animateSlide)
        }
        A.animateSlide = setInterval(function () {
            if (r) {
                if (y.css("left").replace("px", "") <= 0) {
                    if ("animateSlide" in A) {
                        clearInterval(A.animateSlide);
                        jzUtils.run({
                            name: "moduleAnimation.publish",
                            base: Fai.top.Site
                        });
                        jzUtils.run({
                            name: "moduleAnimation.contentAnimationPublish",
                            base: Fai.top.Site
                        })
                    }
                    y.css({
                        display: "block",
                        left: "0"
                    });
                    D.css({
                        display: "none",
                        left: "0"
                    });
                    p.data("animateSlide", false);
                    return
                }
                if (t >= x) {
                    y.css({
                        display: "block",
                        left: "0"
                    });
                    D.css({
                        display: "none",
                        left: "0"
                    });
                    if ("animateSlide" in A) {
                        clearInterval(A.animateSlide);
                        jzUtils.run({
                            name: "moduleAnimation.publish",
                            base: Fai.top.Site
                        });
                        jzUtils.run({
                            name: "moduleAnimation.contentAnimationPublish",
                            base: Fai.top.Site
                        })
                    }
                    p.data("animateSlide", false);
                    return
                }
                D.css("left", "-" + t + "px");
                y.css("left", (parseInt(x) - parseInt(t)) + "px");
                t = t + w
            } else {
                if (y.css("left").replace("px", "") >= 0) {
                    if ("animateSlide" in A) {
                        clearInterval(A.animateSlide);
                        jzUtils.run({
                            name: "moduleAnimation.publish",
                            base: Fai.top.Site
                        });
                        jzUtils.run({
                            name: "moduleAnimation.contentAnimationPublish",
                            base: Fai.top.Site
                        })
                    }
                    y.css({
                        display: "block",
                        left: "0"
                    });
                    D.css({
                        display: "none",
                        left: "0"
                    });
                    p.data("animateSlide", false);
                    return
                }
                if (t >= x) {
                    y.css({
                        display: "block",
                        left: "0"
                    });
                    D.css({
                        display: "none",
                        left: "0"
                    });
                    if ("animateSlide" in A) {
                        clearInterval(A.animateSlide);
                        jzUtils.run({
                            name: "moduleAnimation.publish",
                            base: Fai.top.Site
                        });
                        jzUtils.run({
                            name: "moduleAnimation.contentAnimationPublish",
                            base: Fai.top.Site
                        })
                    }
                    p.data("animateSlide", false);
                    return
                }
                D.css("left", t + "px");
                y.css("left", (parseInt("-" + x) + parseInt(t)) + "px");
                t = t + w
            }
        }, 40)
    };

    function m(o) {
        if (typeof (b[o]) != f) {
            if ("animateCt" in b[o]) {
                clearInterval(b[o]["animateCt"])
            }
        }
        var p = {};
        b[o] = p;
        var q = h("#module" + o);
        var v = q.find(".fullmeasureOuterContentPage");
        var u = v.eq(0);
        if (q.find(".fillContentRelative").length > 0) {
            var t = u.height();
            q.find(".formWrap").css({
                position: "relative"
            });
            v.css({
                position: "absolute"
            })
        }
        if (v.length <= 1) {
            if (!Fai.top._manageMode && v.length == 1) {
                v.css({
                    position: "static"
                })
            }
            return
        }
        v.each(function (z, A) {
            var y = h(A);
            var B = h(A).attr("page");
            if (typeof (B) == f) {
                B = 1000;
                y.attr("1000")
            }
        });
        var s = parseInt(q.attr("isCarousel"));
        if (isNaN(s)) {
            s = 0
        }
        if (s == 1) {
            var x = parseFloat(q.attr("displayTime"));
            if (isNaN(x)) {
                x = 4
            }
            var r = parseFloat(q.attr("carouselSpeed"));
            if (isNaN(r)) {
                r = 1
            }
            var w = (r + x) * 1000;
            p.animateCt = setInterval("Site.inFullmeasueAnimation.slide('" + o + "');", w)
        }
    }
    e.animateFm = function (r, p, o, q) {
        var r = r + "";
        n(r, p, o, q);
        m(r)
    };
    e.slideArrow = function (u, s) {
        var u = u + "";
        var q = h("#module" + u);
        var o = q.find(".J_fullmeasurePageShow");
        var r = o.length;
        if (r <= 1) {
            return
        }
        var p = 0;
        o.each(function (v, w) {
            if (h(w).css("display") == "block") {
                p = v;
                return false
            }
        });
        if (s == 1) {
            p--
        } else {
            if (s == 2) {
                p++
            } else {
                return
            }
        } if (p < -1) {
            r = parseInt(r) - 1
        } else {
            if (p >= r) {
                r = 0
            } else {
                r = p
            }
        }
        var t = s == 2 ? true : false;
        e.slide(u, r, t, 0)
    };
    e.dynamicSetArrowDom = function (s) {
        var s = s + "";
        var p = h("#module" + s);
        var o = p.find(".fmSlideStyleArrowBase");
        if (o.length > 0) {
            if (o.css("display") == "none") {
                setTimeout(function () {
                    var u = p.height();
                    if (u < 80) {
                        o.css({
                            display: "none"
                        })
                    } else {
                        var t = parseInt((parseInt(u) - 80) / 2);
                        o.css({
                            top: t + "px",
                            display: "block"
                        })
                    }
                }, 500)
            } else {
                var r = p.height();
                if (r < 80) {
                    o.css({
                        display: "none"
                    })
                } else {
                    var q = parseInt((parseInt(r) - 80) / 2);
                    o.css({
                        top: q + "px",
                        display: "block"
                    })
                }
            }
        } else {
            if (g) {
                if (p.find(".J_fmSlideStyle").length > 0) {
                    var r = p.height();
                    if (r < 40) {
                        p.find(".J_fmSlideStyle").css("display", "none")
                    } else {
                        p.find(".J_fmSlideStyle").css("display", "block")
                    }
                }
            }
        }
    };
    e.buildFmSlideStyleDom = function (r, C) {
        var r = r + "";
        var s = h("#module" + r);
        s.find(".J_fmSlideStyle").remove();
        var B = s.find(".J_fullmeasurePageShow");
        var A = B.length;
        if (A <= 1) {
            return
        }
        var q = 0;
        B.each(function (F, G) {
            if (h(G).css("display") == "block") {
                q = F;
                return false
            }
        });
        var x = [];
        if (C == 3) {
            var y = B.find(".fullmeasureContent").width();
            var z = h(document.body).width();
            var p = 0;
            if ((z - y) > 184) {
                p = parseInt(((parseInt(z) - parseInt(y)) / 2 - 92));
                if (Fai.top._manageMode) {
                    p = p - 10
                }
            } else {
                p = 20
            }
            p = p + "px";
            var o = "style='display:none;left:" + p + ";'",
                E = "style='display:none;right:" + p + ";''";
            var w = "",
                u = "",
                D = "";
            w = "J_fmSlideStyle fmSlideStyleArrowBase fmSlideStyleArrowLast fmSlideStyle" + C;
            u = "J_fmSlideStyle fmSlideStyleArrowBaseBg fmSlideStyleArrowBase fmSlideStyleArrowLast";
            x.push("<div " + o + " class='" + u + "'></div><div " + o + " class='" + w + "' onclick='Site.inFullmeasueAnimation.slideArrow(" + r + ", 1)'></div>");
            w = "J_fmSlideStyle fmSlideStyleArrowBase fmSlideStyleArrowNext fmSlideStyle" + C;
            u = "J_fmSlideStyle fmSlideStyleArrowBaseBg  fmSlideStyleArrowBase fmSlideStyleArrowNext";
            D = "Site.inFullmeasueAnimation.slideArrow(" + r + ", 'next')";
            x.push("<div " + E + "  class='" + u + "'></div><div " + E + " class='" + w + "' onclick='Site.inFullmeasueAnimation.slideArrow(" + r + ", 2)'></div>")
        } else {
            var t = "";
            if (!g) {
                t = "style='display:none;'"
            }
            x.push("<div " + t + " class='fmSlideStyleWrap J_fmSlideStyle'>");
            var w = "",
                D = "";
            for (var v = 0; v < A; v++) {
                w = "fmSlideStyle fmSlideStyle" + C;
                D = "Site.inFullmeasueAnimation.slide(" + r + "," + v + ", false, 0)";
                if (v == q) {
                    w = w + " fmSlideStyleShow"
                }
                x.push("<div class='" + w + "' onclick='" + D + "'></div>")
            }
            x.push("</div>")
        }
        s.append(x.join(""));
        e.dynamicSetArrowDom(r)
    }
})(jQuery, Site.inFullmeasueAnimation || (Site.inFullmeasueAnimation = {}), "undefined");
(function (f, b, c) {
    var d = !!window.localStorage;
    var e = {
        bit: {},
        tens: {},
        array: {}
    };
    b.setBitMemory = function (h, m) {
        var l = e.bit[h];
        if (typeof l != "number") {
            throw new Error("参数错误！！未配置dic字典");
            return
        }
        var j = parseInt(l / 31),
            k = l % 31,
            i = g("JBM" + j);
        if (i == null) {
            i = 0
        } else {
            i = parseInt(i)
        } if (Boolean(m)) {
            i |= (1 << k)
        } else {
            i &= ~(1 << k)
        }
        a("JBM" + j, i)
    };
    b.getBitMemory = function (h) {
        var l = e.bit[h];
        if (typeof l != "number") {
            throw new Error("参数错误！！");
            return
        }
        var j = parseInt(l / 31),
            k = l % 31,
            i = g("JBM" + j);
        if (i == null) {
            return c
        } else {
            i = parseInt(i)
        }
        return ((i & (1 << k)) != 0) ? true : false
    };
    b.setTensMemory = function (k, o) {
        var h = e.tens[k];
        if (typeof h != "number" || o > 9 || o < 0) {
            throw new Error("参数错误！！");
            return
        }
        var n = parseInt(h),
            m = g("JTM") || "",
            l = 0;
        if (m == "") {
            l = n
        } else {
            l = n - m.length
        }
        for (var j = l; j > 0; j--) {
            m += "0"
        }
        m = m.split("");
        m[n] = o;
        m = m.join("");
        a("JTM", m)
    };
    b.getTensMemory = function (j) {
        var i = e.tens[j];
        if (typeof i != "number") {
            throw new Error("参数错误！！");
            return
        }
        var l = i,
            k = g("JTM") || [],
            h;
        k = k.split("");
        h = Number(k[l]);
        return isNaN(h) ? c : h
    };
    b.setArrayMemory = function (j, k) {
        var l = e.array[j];
        if (typeof l != "number") {
            throw new Error("参数错误！！");
            return
        }
        var h = unescape(g("JAM") || ""),
            i = h.split(",") || [];
        i[l] = k;
        h = i.join(",");
        a("JAM", escape(h))
    };
    b.getArrayMemory = function (j) {
        var k = e.array[j];
        if (typeof k != "number") {
            throw new Error("参数错误！！");
            return
        }
        var h = unescape(g("JAM")),
            i = h.split(",") || [];
        return i[k] || c
    };

    function a(h, i) {
        if (d) {
            b.getTopWindow().localStorage.setItem(h, i)
        } else {
            f.cookie(h, i, {
                expires: 1800,
                path: "/"
            })
        }
    }

    function g(h) {
        if (d) {
            return b.getTopWindow().localStorage.getItem(h)
        } else {
            return f.cookie(h, {
                path: "/"
            })
        }
    }
})(jQuery, Site);
$.ajaxSettings.errorCall.push(function (c, a, d) {
    var b = Site.getTopWindow()._faiAjax;
    if (b) {
        b.ajax({
            type: "post",
            url: "ajax/logAjaxErr_h.jsp?cmd=ajaxErr&error=" + d + "&status=" + a,
            data: "msg=" + Fai.encodeHtml("ajaxUrl=" + Fai.encodeUrl(c.url) + ";refer=" + Fai.encodeUrl(top.location.href))
        })
    }
});
Site.initPage = function () {
    var c = 0;
    var b = setInterval(function () {
        $.each(Fai.top.$("body>iframe"), function (h, j) {
            var g = $.trim($(j).attr("src"));
            var l = g;
            var k = g.indexOf("http://");
            if (k >= 0) {
                l = g.substring(k + 7)
            } else {
                return
            }
            k = l.indexOf("/");
            if (k > 0) {
                l = l.substring(0, k)
            }
            k = l.indexOf(":");
            if (k > 0) {
                l = l.substring(0, k)
            }
            if (Fai.isIp(l)) {
                $(j).remove();
                Site.logMsg("body be iframe. iframeSrc=" + g + "; ")
            }
        });
        c++;
        if (c >= 30) {
            clearInterval(b)
        }
    }, 300);
    if (Fai.isIE6()) {
        try {
            document.execCommand("BackgroundImageCache", false, true)
        } catch (f) {}
    }
    Site.resetGmainPos();
    if (Fai.isIE7() || Fai.isIE6()) {
        $(window).resize(function () {
            Site.resetGmainPos()
        })
    }
    Site.initForms();
    Site.refreshForms();
    $("#footer").show();
    Site.initPageBindAmousedown();
    Site.setAbsFormsHolder2(true);
    Fai.top.setAbsFormsHolder2_interval = setInterval(function () {
        Site.setAbsFormsHolder2(true)
    }, 1000);
    Site.fixSiteWidth(Fai.top._manageMode);
    var d = $("#web").find("iframe");
    if (d.size() > 0) {
        for (var a = 0; a < d.length - 1; a++) {
            $(d[a]).bind("load", function () {
                Site.fixWebFooterHeight()
            })
        }
    } else {
        Site.fixWebFooterHeight()
    }
    Site.refreshDefaultBannerEdge();
    if (Fai.top.toolBoxShowView && !(Fai.top._uiMode && Fai.top._isTemplateVersion2)) {
        Site.showFaierTool()
    }
    if (Fai.top._uiMode) {
        Fai.top.$("#nav .navCenter .item").eq(0).mouseover()
    }
};
Site.showFaierTool = function () {
    var k = Site.getTopWindow().location.href;
    var a = /\?/;
    k += (a.test(k) ? "&" : "?") + "_safeMode=true";
    var g = ["dear", "boss", "theone", "cyb", "max", "mgz", "qnt", "kiki", "emma"];
    var j = function (o, n) {
        return parseInt(Math.random() * (n - o) + o)
    };
    var d = j(0, g.length);
    var h = 0;
    while (d === 0) {
        if ((h++) > 1) {
            break
        }
        d = j(0, g.length)
    }
    if (d === 1) {
        d = j(1, g.length)
    }
    if (d === 2) {
        d = j(2, g.length)
    }
    $("#_faiMenuBtn").remove();
    $("#fai_spinach").remove();
    if ($("#fai_webVersionList")) {
        $("#fai_webVersionList").remove()
    }
    var m = "http://hs.aaadns.com/image/faisco_onepice/" + g[d] + ".jpg";
    var i = "<div id='_faiMenuBtn' style='width:50px;height:50px;position:absolute;bottom:100px;left:0px;background:#a90;z-index:9032;'><div style='width:50px;height:50px;background:url(" + m + ") center no-repeat;'><span id='_faiMenuClose' style='display:none;width:15px;height:14px;line-height:14px;text-align:center;position:absolute;top:0px;right:0px;background:url(http://0.ss.faidns.com/image/bg02.png) -1503px -123px no-repeat;cursor:pointer;color:#fff;'></div></div></div>";
    var f = "<div id='fai_spinach' style='padding:5px 0px 5px 5px;line-height:20px;position:absolute;bottom:100px;left:50px;background:#ff8400;z-index:9032;display:none;border:1px solid #000'><table>";
    if (Fai.top.toolBoxShowView) {
        var b = Site.getABVersion();
        f = f + "<tr><td><a href='" + k + "' style='color:#fff;font-size:12px;'>安全模式</a></td></tr><tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.checkEnv();return false;'>检测横向滚动条</a></td></tr><tr id='J_cloneWebVersion'><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.cloneWebVersion()'>克隆企业网站</a></td></tr><tr id='J_changeABVersion'><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.changeABVersion(" + b + ")'>切换到" + (b ? "A" : "B") + "类网站</a></td></tr>"
    }
    if (Fai.top.toolBoxShowSet) {
        f = f + "<tr id='J_changeTrialMallTime'><td><a href='javascript:;' style='color:#fff;font-size:12px;padding-right:5px;'>设置商城试用时间</a></td></tr><tr id='J_changeWebVersion'><td><a href='javascript:;' style='color:#fff;font-size:12px;'>切换网站版本</a></td></tr>"
    }
    f = f + "</table></div>";
    $("body").append(i).append(f);
    var c = "<div id='fai_trialEndTime' style='padding:5px;line-height:20px;position:absolute;bottom:100px;left:160px;background:#ff8400;z-index:9032;display:none;border:1px solid #000;'>";
    c += "<table>";
    c += "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.setMallTrialTime(0)'>已过期</a></td></tr>";
    c += "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.setMallTrialTime(1)'>未过期</a></td></tr>";
    c += "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.setMallTrialTime(2)'>自定义时间</a></td></tr>";
    c += "</table>";
    c += "</div>";
    $("body").append(c);
    $("#J_changeTrialMallTime").mouseenter(function () {
        $("#fai_trialEndTime").show()
    }).mouseleave(function () {
        $("#fai_trialEndTime").hide()
    });
    $("#fai_trialEndTime").mouseenter(function () {
        $("#fai_trialEndTime").show();
        $("#fai_spinach").show()
    }).mouseleave(function () {
        $("#fai_trialEndTime").hide();
        $("#_faiMenuClose").hide()
    });
    if (Fai.top.toolBoxShowView) {
        if (!Fai.top._oem) {
            var l = ["<div id='fai_webVersionList' style='padding:5px;line-height:20px;position:absolute;bottom:100px;left:160px;background:#ff8400;z-index:9032;display:none;border:1px solid #000;'>", "<table>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.chageTheWebVersion(10)'>免费版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.chageTheWebVersion(20)'>试用版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.chageTheWebVersion(30)'>标准版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.chageTheWebVersion(40)'>专业版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.chageTheWebVersion(50)'>商城版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.chageTheWebVersion(51)'>旗舰版</a></td></tr>", "</table>", "</div>"]
        } else {
            var l = ["<div id='fai_webVersionList' style='padding:5px;line-height:20px;position:absolute;bottom:100px;left:160px;background:#ff8400;z-index:9032;display:none;border:1px solid #000;'>", "<table>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.chageTheWebVersion(120)'>初级版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.chageTheWebVersion(110)'>试用版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.chageTheWebVersion(130)'>中级版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.chageTheWebVersion(140)'>高级版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.chageTheWebVersion(150)'>尊贵版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Site.chageTheWebVersion(160)'>至尊版</a></td></tr>", "</table>", "</div>"]
        }
        $("body").append(l.join(""));
        $("#J_changeWebVersion").mouseenter(function () {
            $("#fai_webVersionList").show()
        }).mouseleave(function () {
            $("#fai_webVersionList").hide()
        });
        $("#fai_webVersionList").mouseenter(function () {
            $("#fai_webVersionList").show();
            $("#fai_spinach").show()
        }).mouseleave(function () {
            $("#fai_webVersionList").hide();
            $("#_faiMenuClose").hide()
        })
    }
    var e = false;
    $("#_faiMenuBtn").mouseenter(function (n) {
        $("#fai_spinach").show();
        $("#_faiMenuClose").show()
    }).mouseleave(function (n) {
        window.setTimeout(function () {
            if (!e) {
                $("#fai_spinach").hide()
            }
        }, 200);
        $("#_faiMenuClose").hide()
    });
    $("#fai_spinach").mouseenter(function (n) {
        e = true
    }).mouseleave(function (n) {
        e = false;
        $("#fai_spinach").hide()
    });
    $("#_faiMenuClose").click(function (n) {
        $("#_faiMenuBtn").hide();
        $("#fai_spinach").hide()
    })
};
Site.colLayout45Width = function () {
    var a = Fai.top._colOtherStyleData.layout4Width;
    var e = Fai.top._colOtherStyleData.layout5Width;
    var b = $(".containerFormsCenterMiddle").width();
    var d = Math.floor(b * 0.02);
    if (Fai.top._manageMode) {
        $("#middleLeftForms").css("padding-right", d + "px");
        if ((a + e + d) > b) {
            $("#middleLeftForms").css("width", (b - (e + d)) + "px")
        }
    }
    if (a > 0 && e == 0) {
        var c = $("#middleLeftForms").css("padding-right").replace("px", "");
        $("#middleLeftForms").css("width", a);
        $("#middleRightForms").css("width", b - c - a);
        Fai.top._colOtherStyleData.layout5Width = $("#middleRightForms").width()
    }
};
Site.initPage2 = function () {
    Site.manageFaiscoAd();
    Fai.top.$(".absForms >.form").each(function () {
        Site.checkAbsModulePosition($(this), true)
    });
    Fai.top.$(".floatForms >.form").each(function () {
        Site.checkFloatModulePosition($(this));
        Site.checkSideModule($(this));
        Site.checkFlutterModule($(this))
    });
    if (Fai.top.$("#faiBgMusicPlayer").length > 0) {
        Site.callMusicPlayButton("bgplayerButton", "faiBgMusicPlayer", "bgplayerTime", "bgplayerPause");
        var a = Fai.top.$("#faiBgMusicPlayer").attr("bgpause");
        if (a === "false") {
            $.cookie("bgplayerPause", "false");
            $("#bgplayerButton").attr("bgMusicStatus", "false")
        }
        if (a === "true") {
            $("#bgplayerButton").addClass("bgplayerButtonP");
            $("#bgplayerButton").attr("title", "点击播放音乐");
            $("#bgplayerButton").attr("bgMusicStatus", "true");
            $.cookie("bgplayerPause", "true")
        }
    }
    if (Fai.top.$(".footerSupport").find(":visible").length == 0) {
        Fai.top.$(".footerSupport").hide()
    }
    Site.setAbsFormsHolder2(true);
    $.each($("img"), function (c, b) {
        if ($.trim($(b).attr("data-original")).length > 0) {
            $(b).addClass("loadingPlaceholderBackground")
        }
    });
    if (Fai.isIE6() || Fai.isIE7()) {
        $("img").lazyload({
            threshold: 400,
            lazyRemoveclass: "loadingPlaceholderBackground",
            container: $("#g_main")
        })
    } else {
        $("img").lazyload({
            threshold: 400,
            lazyRemoveclass: "loadingPlaceholderBackground"
        })
    }
    Site.bindGobalEvent("site_moduleTabSwitch", function (b, d) {
        var c = $("#formTabCntId" + d).find("img");
        $.each(c, function (f, e) {
            var g = $.trim($(e).attr("data-original"));
            if (g.length > 0) {
                $(e).attr("src", g).removeClass("loadingPlaceholderBackground")
            }
        })
    });
    $(".g_ibutton").livequery(function () {
        $(this).faiButton()
    })
};
Site.initModuleItemHover = function (a) {
    $(a).mouseover(function () {
        $(this).addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_hover")
    })
};
Site.initModuleItemCover = function (a, c, d) {
    $(a).mouseover(function () {
        $(this).addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_hover")
    });
    var b = a.replace("#module", "");
    Site.initContentSplitLine(b, d)
};
Site.initBackToTopTool = function (j, f, h, a) {
    var d = '<div id="BackToTopborder" style="display:none;"><div id="BackToTopborder-left" style="position:fixed;border-left:1px dashed #2b73ba;z-index:9030;"></div><div id="BackToTopborder-top" style="position:fixed;border-top:1px dashed #2b73ba;z-index:9030;"></div><div id="BackToTopborder-bottom" style="position:fixed;border-bottom:1px dashed #2b73ba;z-index:9030;"></div><div id="BackToTopborder-right" style="position:fixed;border-right:1px dashed #2b73ba;z-index:9030;"></div></div>';
    var g = '<div id="borderLayer" class="borderLayer" style="position:absolute;width:70px;display:none;"><div id="item"><a class="tool backToTopEdit" href="javascript:;" style="cursor:pointer;" title="设置样式">编辑</a></div><div class="itemHr"></div><div id="item"><a class="tool backToTopClose" style="cursor:pointer;" title="您可以在网站设计-网站设置-高级设置中重新开启" title="设置样式">隐藏</a></div></div>';
    var k = "";
    if (a == "small_box" || a == "null") {
        a = "";
        k = $('<div id="siteBackToTop_small_box" class="fk_siteBackToTop" title="' + h + '" _style="' + a + '"></div>');
        Fai.top.Fai.setCtrlStyleCssList("stylebacktotop", "", [{
            cls: ".fk_siteBackToTop",
            key: "display",
            value: "none"
        }, {
            cls: ".fk_siteBackToTop",
            key: "width",
            value: "41px"
        }, {
            cls: ".fk_siteBackToTop",
            key: "height",
            value: "38px"
        }, {
            cls: ".fk_siteBackToTop",
            key: "cursor",
            value: "pointer"
        }, {
            cls: ".fk_siteBackToTop",
            key: "position",
            value: "fixed"
        }, {
            cls: ".fk_siteBackToTop",
            key: "z-index",
            value: "9030"
        }, {
            cls: ".fk_siteBackToTop",
            key: "right",
            value: "40px"
        }, {
            cls: ".fk_siteBackToTop",
            key: "bottom",
            value: "50px"
        }, {
            cls: ".fk_siteBackToTop",
            key: "background",
            value: "url(" + _resRoot + "/image/site/backtotop.png?v=201411241810) no-repeat"
        }])
    } else {
        k = $('<div id="siteBackToTop_small_box" class="fk_siteBackToTop" title="' + h + '" _style="' + a + '"></div>');
        Fai.top.Fai.setCtrlStyleCssList("stylebacktotop", "", [{
            cls: ".fk_siteBackToTop",
            key: "display",
            value: "none"
        }, {
            cls: ".fk_siteBackToTop",
            key: "cursor",
            value: "pointer"
        }, {
            cls: ".fk_siteBackToTop",
            key: "position",
            value: "fixed"
        }, {
            cls: ".fk_siteBackToTop",
            key: "z-index",
            value: "9030"
        }, {
            cls: ".fk_siteBackToTop",
            key: "right",
            value: "40px"
        }, {
            cls: ".fk_siteBackToTop",
            key: "bottom",
            value: "50px"
        }]);
        getBackToTopStyleCss(a, false)
    }
    $("#g_main").before(k);
    if (j) {
        $("#g_main").before(d);
        $("#g_main").before(g)
    }
    $(".backToTopEdit").bind("click", function () {
        Site.popupWindow({
            title: "编辑返回顶部图标",
            frameSrcUrl: "manage/backToTopEdit.jsp?ram=" + Math.random(),
            width: "600",
            height: "350",
            frameScrolling: "no",
            saveBeforePopup: false,
            closeFunc: Site.closeCss
        })
    });
    $(".backToTopClose").bind("click", function () {
        e.hide();
        $("#BackToTopborder").hide();
        $("#borderLayer").hide();
        Fai.top._advanceSettingData.backToTopOpen = false;
        Fai.top._backToTop = false;
        Site.styleChanged();
        Site.styleSetting("open", "webSettingTab", false, "advanceFuncShow");
        Fai.ing("您可以在网站设计-网站设置-高级设置中重新开启。", true);
        c.scrollTop(0)
    });

    function b() {
        $("#BackToTopborder-left").css({
            left: ($("#siteBackToTop_small_box").offset().left - 2) + "px",
            top: ($("#siteBackToTop_small_box").offset().top - 2) + "px",
            height: $("#siteBackToTop_small_box").height() + 2 + "px"
        });
        $("#BackToTopborder-top").css({
            left: ($("#siteBackToTop_small_box").offset().left - 2) + "px",
            top: ($("#siteBackToTop_small_box").offset().top - 2) + "px",
            width: $("#siteBackToTop_small_box").width() + 2 + "px"
        });
        $("#BackToTopborder-bottom").css({
            left: ($("#siteBackToTop_small_box").offset().left - 2) + "px",
            top: ($("#siteBackToTop_small_box").offset().top + $("#siteBackToTop_small_box").height() + 1) + "px",
            width: $("#siteBackToTop_small_box").width() + 2 + "px"
        });
        $("#BackToTopborder-right").css({
            left: ($("#siteBackToTop_small_box").offset().left + $("#siteBackToTop_small_box").width() + 1) + "px",
            top: ($("#siteBackToTop_small_box").offset().top - 2) + "px",
            height: $("#siteBackToTop_small_box").height() + 2 + "px"
        });
        $("#borderLayer").css({
            left: ($("#siteBackToTop_small_box").offset().left + $("#siteBackToTop_small_box").width() - 70) + "px",
            top: ($("#siteBackToTop_small_box").offset().top - 26) + "px"
        })
    }
    var e = $("#siteBackToTop_small_box");
    var c = Fai.top.$("#g_main");
    if (!j && !Fai.isIE6()) {
        c = $(window);
        e.css("right", 5 + "px");
        e.css("bottom", 5 + "px")
    }
    if (!j && Fai.isIE6()) {
        e.css("bottom", 5 + "px")
    }
    i();
    c.scroll(function () {
        i()
    });
    e.click(function () {
        c.scrollTop(0)
    });

    function i() {
        if (!Fai.top._backToTop) {
            e.hide();
            return
        }
        if (c.scrollTop() > 0) {
            if (e.css("display") == "none") {
                if (Fai.isIE6()) {
                    e.css("position", "absolute")
                }
                if (Fai.isIE8() && Fai.top._manageMode) {
                    e.show()
                } else {
                    e.slideDown("slow")
                }
            }
        } else {
            if (Fai.isIE8() && Fai.top._manageMode) {
                e.hide()
            } else {
                e.slideUp("slow")
            }
        }
    }
    $("#siteBackToTop_small_box").hover(function () {
        var m = $(this),
            l = m.attr("_style");
        m.animate({
            opacity: 0.2
        }, "slow", function () {
            $("#siteBackToTop_small_box").css("height", "")
        });
        if (l != "" && l != "small_box") {
            getBackToTopStyleCss(l, true)
        }
        b();
        $("#BackToTopborder").show();
        $("#borderLayer").show();
        m.attr("_realmousein", "1")
    }, function () {
        var m = $(this),
            l = m.attr("_style");
        m.animate({
            opacity: 1
        }, "slow", function () {
            $("#siteBackToTop_small_box").css("height", "")
        });
        if (l != "" && l != "small_box") {
            getBackToTopStyleCss(l, false)
        }
        return setTimeout(function () {
            m.attr("_realmousein", "0");
            if (m.attr("_mousein") == 1) {
                $("#BackToTopborder").show();
                $("#borderLayer").show()
            } else {
                $("#BackToTopborder").hide();
                $("#borderLayer").hide()
            }
        }, 50)
    });
    $("#borderLayer").hover(function () {
        $("#BackToTopborder").show();
        $("#borderLayer").show();
        $("#siteBackToTop_small_box").attr("_mousein", "1")
    }, function () {
        return setTimeout(function () {
            $("#siteBackToTop_small_box").attr("_mousein", "0");
            if ($("#siteBackToTop_small_box").attr("_realmousein") == 1) {
                $("#BackToTopborder").show();
                $("#borderLayer").show()
            } else {
                $("#BackToTopborder").hide();
                $("#borderLayer").hide()
            }
        }, 50)
    })
};

function getBackToTopStyleCss(a, e) {
    var g = a.split("_"),
        c = g[0],
        b = g[1],
        d = [],
        f = "";
    if (e) {
        f = "_hover"
    }
    if (a != "small_box") {
        switch (c) {
            case "firstStyle":
                d.push({
                    cls: ".fk_siteBackToTop",
                    key: "position",
                    value: "fixed"
                });
                d.push({
                    cls: ".fk_siteBackToTop",
                    key: "width",
                    value: "42px"
                });
                d.push({
                    cls: ".fk_siteBackToTop",
                    key: "height",
                    value: "42px"
                });
                d.push({
                    cls: ".fk_siteBackToTop",
                    key: "margin",
                    value: "5px"
                });
                if (e) {
                    d.push({
                        cls: ".fk_siteBackToTop:hover",
                        key: "background-image",
                        value: "url(" + _resRoot + "/image/backToTop/firstStyle/" + b + f + ".png?v=201505251717)"
                    })
                } else {
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "background-image",
                        value: "url(" + _resRoot + "/image/backToTop/firstStyle/" + b + f + ".png?v=201505251717)"
                    })
                }
                break;
            case "secondStyle":
                d.push({
                    cls: ".fk_siteBackToTop",
                    key: "position",
                    value: "fixed"
                });
                d.push({
                    cls: ".fk_siteBackToTop",
                    key: "width",
                    value: "50px"
                });
                d.push({
                    cls: ".fk_siteBackToTop",
                    key: "height",
                    value: "50px"
                });
                d.push({
                    cls: ".fk_siteBackToTop",
                    key: "margin",
                    value: "1px"
                });
                if (b == "01" || b == "05") {
                    if (e) {
                        d.push({
                            cls: ".fk_siteBackToTop:hover",
                            key: "background-image",
                            value: "url(" + _resRoot + "/image/backToTop/secondStyle/" + b + f + ".png?v=201505261406)"
                        })
                    } else {
                        d.push({
                            cls: ".fk_siteBackToTop",
                            key: "background-image",
                            value: "url(" + _resRoot + "/image/backToTop/secondStyle/" + b + ".png?v=201505251717)"
                        })
                    }
                } else {
                    if (e) {
                        d.push({
                            cls: ".fk_siteBackToTop:hover",
                            key: "background-image",
                            value: "url(" + _resRoot + "/image/backToTop/secondStyle/" + b + f + ".png?201505251717)"
                        })
                    } else {
                        d.push({
                            cls: ".fk_siteBackToTop",
                            key: "background-image",
                            value: "url(" + _resRoot + "/image/backToTop/secondStyle/" + b + ".png?v=201505251717)"
                        })
                    }
                }
                break;
            case "special":
                d.push({
                    cls: ".fk_siteBackToTop",
                    key: "position",
                    value: "fixed"
                });
                if (e) {
                    d.push({
                        cls: ".fk_siteBackToTop:hover",
                        key: "background-image",
                        value: "url(" + _resRoot + "/image/backToTop/" + b + f + ".png?v=201505251717)"
                    })
                } else {
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "background-image",
                        value: "url(" + _resRoot + "/image/backToTop/" + b + ".png?v=201505251717)"
                    })
                }
                break
        }
        if (c == "special") {
            switch (b) {
                case "01":
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "width",
                        value: "32px"
                    });
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "height",
                        value: "32px"
                    });
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "margin",
                        value: "10px 10px"
                    });
                    break;
                case "02":
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "width",
                        value: "26px"
                    });
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "height",
                        value: "48px"
                    });
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "margin",
                        value: "2px 13px"
                    });
                    break;
                case "03":
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "width",
                        value: "42px"
                    });
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "height",
                        value: "42px"
                    });
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "margin",
                        value: "5px"
                    });
                    break;
                case "04":
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "width",
                        value: "45px"
                    });
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "height",
                        value: "50px"
                    });
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "margin",
                        value: "1px 3px"
                    });
                    break
            }
        }
    } else {
        Fai.top.Fai.setCtrlStyleCssList("stylebacktotop", "", [{
            cls: ".fk_siteBackToTop",
            key: "display",
            value: "none"
        }, {
            cls: ".fk_siteBackToTop",
            key: "width",
            value: "41px"
        }, {
            cls: ".fk_siteBackToTop",
            key: "height",
            value: "38px"
        }, {
            cls: ".fk_siteBackToTop",
            key: "cursor",
            value: "pointer"
        }, {
            cls: ".fk_siteBackToTop",
            key: "position",
            value: "fixed"
        }, {
            cls: ".fk_siteBackToTop",
            key: "z-index",
            value: "9030"
        }, {
            cls: ".fk_siteBackToTop",
            key: "right",
            value: "40px"
        }, {
            cls: ".fk_siteBackToTop",
            key: "bottom",
            value: "50px"
        }, {
            cls: ".fk_siteBackToTop",
            key: "background",
            value: "url(" + _resRoot + "/image/site/backtotop.png?v=201411241810) no-repeat"
        }, ]);
        if (e) {
            Fai.top.Fai.removeCtrlStyleCssList("stylebacktotop", "", [{
                cls: ".fk_siteBackToTop:hover",
                key: "background"
            }, ])
        }
    } if (!!d.length) {
        Fai.top.Fai.setCtrlStyleCssList("stylebacktotop", "", d)
    }
}
Site.closeCss = function () {
    if (Fai.top._advanceSettingData.btts == "small_box") {
        Fai.top.$("#siteBackToTop_small_box").attr("style", "display:block");
        Fai.top.Fai.removeCtrlStyleCssList("stylebacktotop", "", [{
            cls: ".fk_siteBackToTop:hover",
            key: "background"
        }, ])
    } else {
        Fai.top.Fai.setCtrlStyleCssList("stylebacktotop", "", [{
            cls: ".fk_siteBackToTop",
            key: "cursor",
            value: "pointer"
        }, {
            cls: ".fk_siteBackToTop",
            key: "position",
            value: "fixed"
        }, {
            cls: ".fk_siteBackToTop",
            key: "z-index",
            value: "9030"
        }, {
            cls: ".fk_siteBackToTop",
            key: "right",
            value: "40px"
        }, {
            cls: ".fk_siteBackToTop",
            key: "bottom",
            value: "50px"
        }, ])
    }
    Fai.top.$("#siteBackToTop_small_box").attr("_style", Fai.top._advanceSettingData.btts);
    getBackToTopStyleCss(Fai.top._advanceSettingData.btts, false)
};
Site.fixSiteWidth = function (c) {
    b(c);
    var a;
    Fai.top.$(window).off("resize.fixSiteWidth");
    Fai.top.$(window).on("resize.fixSiteWidth", function () {
        if (typeof a == "number") {
            return
        }
        a = setTimeout(function () {
            b(c);
            Site.fixWebFooterHeight();
            Site.refreshDefaultBannerEdge();
            a = null
        }, 300)
    });

    function b(f) {
        var s = Fai.top.$("#webContainer").outerWidth(true),
            o = s,
            q = s,
            n = document.documentElement ? document.documentElement.clientWidth : document.body.clientWidth,
            j = document.documentElement ? document.documentElement.scrollWidth : document.body.scrollWidth,
            k = Fai.top.$("#web"),
            m = Fai.top.$("#g_main"),
            l = 0,
            i = 960,
            h = (f || (Fai.isIE6() || Fai.isIE7())) ? m.scrollLeft() : $(document).scrollLeft(),
            e = k[0].getBoundingClientRect().right + h,
            r = 0,
            p, g;
        if (f || Fai.isIE6()) {
            n = n - Fai.getScrollWidth()
        }
        Fai.top.$(".fullmeasureForms").find(".fullmeasureContent").each(function (t, u) {
            if ($(u).is(":visible") && o < $(u).width()) {
                o = $(u).width()
            }
        });
        q = o;
        n = n > q ? n : q;
        i = n > i ? n : i;
        p = Fai.top.$("#fk-webBannerZone, #fk-webHeaderZone, #fk-webFooterZone").children(".form");
        p = p.add(Fai.top.$("#nav"));
        p = p.add(k.find("div.absForms").children(".form"));
        p = p.add(Fai.top.$("#corpTitle"));
        p = p.add(Fai.top.$("#logo"));
        r = d(p) + h;
        g = (r - e) * 2 + e;
        if (g > i) {
            i = g;
            l = (i - m[0].scrollWidth) + h
        }
        if (f) {
            if (!Fai.top._cusResponsive) {
                k.css({
                    width: i + "px"
                })
            }
            if (l > 0) {
                m.scrollLeft(l)
            }
        } else {
            if (Fai.isIE6() || Fai.isIE7()) {
                if (!Fai.top._cusResponsive) {
                    k.css({
                        width: i + "px"
                    })
                }
                if (l > 0) {
                    m.scrollLeft(l)
                }
            } else {
                if (!Fai.top._cusResponsive) {
                    m.css({
                        width: i + "px"
                    })
                }
                if (l > 0) {
                    $(document).scrollLeft(l)
                }
            }
        }
    }

    function d(h) {
        var f = h.length,
            e = 0,
            g;
        while (f) {
            f -= 1;
            if (h.eq(f).is(":hidden") || h.eq(f).css("position") == "fixed") {
                continue
            }
            g = h[f].getBoundingClientRect().right;
            if (g > e) {
                e = g
            }
        }
        return e
    }
};
Site.fixWebFooterHeight = function () {
    var h = Fai.top.$("#web"),
        a = Fai.top.$("body").height(),
        c = Fai.top.$("#webFooterTable"),
        b = c.css({
                height: ""
            }) && c.height(),
        f = h.offset().top,
        d = h.height();
    if (Fai.top._manageMode || Fai.isIE6()) {
        var g = 0;
        h.children().each(function () {
            g += $(this).height()
        });
        if (a > (g + f)) {
            c.css("height", (a - g + b - f) + "px")
        }
    } else {
        var e = d + f;
        if (a > e) {
            var i = a - e;
            b = c.outerHeight();
            c.css("height", i + b + "px")
        }
    }
};
Site.initPageBindAmousedown = function () {
    function a(f) {
        if (Fai.isIE8() && f.button == 1) {
            return true
        } else {
            if (Fai.isIE6() && f.button == 1) {
                return true
            } else {
                if (Fai.isIE7() && f.button == 1) {
                    return true
                } else {
                    if (f.button == 0) {
                        return true
                    }
                }
            }
        }
        return false
    }
    if (!Fai.top._designAuth) {
        return
    }
    var d = Site.getTopWindow().$(Site.getTopWindow().document).find("#g_main");
    var c = Site.getTopWindow().$(Site.getTopWindow().document).find("#memberBarArea");
    var b = /^javascript/g;
    d.delegate("a", "click.initSaveChange", function (f) {
        if (!a(f)) {
            return
        }
        var e = $(this).attr("href");
        if (e && e.match(b) == null && !$(this).hasClass("stopPropagation")) {
            var g = $(this).attr("target") || "_self";
            if (!Site.redirectUrl(e, g, f, 0, 0)) {
                return false
            }
        }
    });
    c.delegate("a", "mousedown", function (f) {
        if (!a(f)) {
            return
        }
        var e = $(this).attr("href");
        if (e && e.match(b) == null && !$(this).hasClass("stopPropagation")) {
            var g = $(this).attr("target") || "_self";
            Site.redirectUrl(e, g, f, 0, 0)
        }
        return false
    });
    Site.getTopWindow().$(Site.getTopWindow().document).find("#tabs a.cancelBtn").mousedown(function (e) {
        if (!a(e)) {
            return
        }
        Site.redirectUrl("javascript:;", "cancelBtn", e, 0, 1);
        return false
    });
    Site.getTopWindow().$(Site.getTopWindow().document).delegate("div.navSubMenu a", "mousedown", function (f) {
        if (!a(f)) {
            return
        }
        var e = $(this).attr("href");
        if (e && e.match(b) == null && !$(this).hasClass("stopPropagation")) {
            var g = $(this).attr("target") || "_self";
            Site.redirectUrl(e, g, f, 1, 0)
        }
        return false
    })
};
Site.refreshFooterItemSpacing = function () {
    var b = Fai.top.$("#footerNav");
    if (b.length < 1) {
        return
    }
    var j = b.find(".footerItemSpacing");
    var h = b.find(".footerItemSection");
    if (h.length < 1) {
        return
    }
    var a = 9;
    var f = 5;
    if (b.attr("cusHeight") == "1") {
        if (Fai.top._manageMode) {
            var e = Site.getFooterStyleData() || {};
            Fai.top.Fai.removeCtrlStyleCssList("stylefooter", "webFooterTable", [{
                cls: "li.footerItemSpacing",
                key: "padding-top"
            }]);
            if (b.hasClass("footerPattern1")) {
                Fai.top.Fai.setCtrlStyleCssList("stylefooter", "webFooterTable", [{
                    cls: "li.footerItemSection",
                    key: "height",
                    value: e.fih + "px"
                }, {
                    cls: "li.footerItemSpacing",
                    key: "height",
                    value: (e.fih - a) + "px"
                }, {
                    cls: "li.footerItemSpacing",
                    key: "padding-top",
                    value: f + "px"
                }])
            } else {
                Fai.top.Fai.setCtrlStyleCssList("stylefooter", "webFooterTable", [{
                    cls: "li.footerItemSection",
                    key: "height",
                    value: e.fih + "px"
                }, {
                    cls: "li.footerItemSpacing",
                    key: "height",
                    value: e.fih + "px"
                }])
            }
        }
        return
    }
    Fai.top.Fai.removeCtrlStyleCssList("stylefooter", "webFooterTable", [{
        cls: "li.footerItemSpacing",
        key: "padding-top"
    }]);
    Fai.top.Fai.setCtrlStyleCssList("tmpStylefooter", "webFooterTable", [{
        cls: "li.footerItemSection",
        key: "height",
        value: "auto !important"
    }, {
        cls: "li.footerItemSpacing",
        key: "height",
        value: "auto !important"
    }]);
    var g = h.eq(0).height();
    var d = 0;
    for (var c = 1; c < h.length; c++) {
        d = h.eq(c).height();
        if (d > g) {
            g = d
        }
    }
    if (b.hasClass("footerPattern1")) {
        Fai.top.Fai.setCtrlStyleCssList("stylefooter", "webFooterTable", [{
            cls: "li.footerItemSection",
            key: "height",
            value: g + "px"
        }, {
            cls: "li.footerItemSpacing",
            key: "height",
            value: (g - a) + "px"
        }, {
            cls: "li.footerItemSpacing",
            key: "padding-top",
            value: f + "px"
        }])
    } else {
        Fai.top.Fai.setCtrlStyleCssList("stylefooter", "webFooterTable", [{
            cls: "li.footerItemSection",
            key: "height",
            value: g + "px"
        }, {
            cls: "li.footerItemSpacing",
            key: "height",
            value: g + "px"
        }])
    }
    Fai.top.Fai.removeCtrlStyleCssList("tmpStylefooter", "webFooterTable", [{
        cls: "li.footerItemSection",
        key: "height"
    }, {
        cls: "li.footerItemSpacing",
        key: "height"
    }]);
    Fai.top.$("#tmpStylefooter").remove()
};
Site.pageOnload = function () {
    Site.mobiPlatform();
    Site.fixWebFooterHeight();
    if (Fai.top.$("#banner").length > 0) {
        Site.refreshBanner(0)
    }
    Site.adjustBannerWidth();
    Site.addStellarEvent();
    Site.excuteMallBuy2()
};
Site.onTitlePositionFixTop = function (a) {
    if (Fai.top._manageMode && a) {
        Site.onTitlePositionFixTop()
    } else {}
};
Site.excuteMallBuy2 = function () {
    var f = $.cookie("isNeedAddCartItem");
    if (typeof f == "undefined" || f == null || f == "") {
        return
    }
    var e = $.parseJSON(f);
    var b = e.pid;
    var d = e.mid;
    var c = e.url;
    var a = e.doWhat;
    if (a == "add") {
        Site.mallBuy2(b, d, c)
    } else {
        if (a == "buy") {
            Site.mallImmeBuy(b, d)
        }
    }
    setTimeout(function () {
        $.cookie("isNeedAddCartItem", null)
    }, 1000)
};
Site.triggerGobalEvent = function (a, b) {
    Fai.top.$(Fai.top.document).trigger(a, b)
};
Site.bindGobalEvent = function (a, b) {
    if (a == "site_articlePictureChange" && Fai.isIE()) {
        Fai.top.$(Fai.top.document).off(a)
    }
    Fai.top.$(Fai.top.document).on(a, b)
};
Site.refreshFormIndexClass = function () {
    Site.refreshFormIndexClass2({
        id: "topForms"
    });
    Site.refreshFormIndexClass2({
        id: "leftForms"
    });
    Site.refreshFormIndexClass2({
        id: "centerTopForms"
    });
    Site.refreshFormIndexClass2({
        id: "middleLeftForms"
    });
    Site.refreshFormIndexClass2({
        id: "middleRightForms"
    });
    Site.refreshFormIndexClass2({
        id: "centerBottomForms"
    });
    Site.refreshFormIndexClass2({
        id: "rightForms"
    });
    Site.refreshFormIndexClass2({
        id: "bottomForms"
    });
    Site.refreshFormIndexClass2({
        id: "fullmeasureTopForms"
    });
    Site.refreshFormIndexClass2({
        id: "fullmeasureBottomForms"
    });
    Site.refreshFormIndexClass2({
        id: "absTopForms"
    });
    Site.refreshFormIndexClass2({
        id: "absForms"
    });
    Site.refreshFormIndexClass2({
        id: "absBottomForms"
    });
    Site.refreshFormIndexClass2({
        id: "floatLeftTopForms"
    });
    Site.refreshFormIndexClass2({
        id: "floatRightTopForms"
    });
    Site.refreshFormIndexClass2({
        id: "floatLeftBottomForms"
    });
    Site.refreshFormIndexClass2({
        id: "floatRightBottomForms"
    });
    Site.refreshFormIndexClass2({
        id: "fk-webHeaderZone"
    });
    Site.refreshFormIndexClass2({
        id: "fk-webBannerZone"
    });
    Site.refreshFormIndexClass2({
        id: "fk-webFooterZone"
    })
};
Site.refreshFormIndexClass2 = function (c) {
    var g = c.id;
    var d = c.inFullmeasure || 0;
    var a, f, b, e;
    Fai.top.$("#" + g).children(".form").each(function (h, j) {
        b = $(j);
        e = Site.checkNestModule(b);
        b.attr("_inmulmcol", 0);
        b.attr("_intab", 0);
        b.attr("_infullmeasure", 0);
        b.attr("_inpack", 0);
        if (e.isCol) {
            Site.refreshFormIndexClassInCol(b)
        } else {
            if (e.isTab) {
                Site.refreshFormIndexClassInTab(b)
            } else {
                if (e.isPack) {
                    Site.refreshFormIndexClassInPack(b)
                } else {
                    if (e.isFullmeasure) {
                        Site.refreshFormIndexClassInFullmeasure(b)
                    }
                }
            }
        }
        a = b.attr("_indexClass");
        f = "formIndex" + (h + 1);
        if (Fai.isNull(a)) {
            b.addClass(f);
            b.attr("_indexClass", f);
            Fai.refreshClass(b)
        } else {
            if (a != f) {
                b.removeClass(a);
                b.addClass(f);
                b.attr("_indexClass", f);
                Fai.refreshClass(b)
            }
        }
    })
};
Site.refreshFormIndexClassInCol = function (b) {
    var d = b.attr("id").replace("module", "") || 0,
        a, c;
    b.find(".mulMColList").children(".form").each(function (e, f) {
        a = $(f);
        a.attr("_inmulmcol", d);
        a.attr("_intab", 0);
        a.attr("_infullmeasure", 0);
        a.attr("_inpack", 0);
        a.removeAttr("_indexclass ");
        c = Site.checkNestModule(a);
        if (c.isTab) {
            Site.refreshFormIndexClassInTab(a)
        } else {
            if (c.isPack) {
                Site.refreshFormIndexClassInPack(a)
            }
        }
    })
};
Site.refreshFormIndexClassInTab = function (b) {
    var c = b.attr("id").replace("module", "") || 0,
        a;
    b.find(".formTabCntId").children(".form").each(function (d, e) {
        a = $(e);
        a.attr("_inmulmcol", 0);
        a.attr("_intab", c);
        a.attr("_infullmeasure", 0);
        a.attr("_inpack", 0);
        a.removeAttr("_indexclass ");
        if (Site.checkNestModule(a).isPack) {
            Site.refreshFormIndexClassInPack(a)
        }
    })
};
Site.refreshFormIndexClassInFullmeasure = function (c) {
    var f = c.attr("id").replace("module", "") || 0,
        a, e, b, d;
    c.find(".fullmeasureContent").children(".form").each(function (g, h) {
        b = $(h);
        b.attr("_inmulmcol", 0);
        b.attr("_intab", 0);
        b.attr("_infullmeasure", f);
        b.attr("_inpack", 0);
        d = Site.checkNestModule(b);
        if (d.isTab) {
            Site.refreshFormIndexClassInTab(b)
        } else {
            if (d.isCol) {
                Site.refreshFormIndexClassInCol(b)
            } else {
                if (d.isPack) {
                    Site.refreshFormIndexClassInPack(b)
                }
            }
        }
        a = b.attr("_indexClass");
        e = "formIndex" + (g + 1);
        if (Fai.isNull(a)) {
            b.addClass(e);
            b.attr("_indexClass", e);
            Fai.refreshClass(b)
        } else {
            if (a != e) {
                b.removeClass(a);
                b.addClass(e);
                b.attr("_indexClass", e);
                Fai.refreshClass(b)
            }
        }
    })
};
Site.refreshFormIndexClassInPack = function (b) {
    var d = b.attr("id").replace("module", "") || 0,
        a, c;
    b.find(".J_packContent").children(".form").each(function (e, f) {
        a = $(f);
        a.attr("_inmulmcol", 0);
        a.attr("_intab", 0);
        a.attr("_infullmeasure", 0);
        a.attr("_inpack", d);
        a.removeAttr("_indexclass ");
        c = Site.checkNestModule(a);
        if (c.isTab) {
            Site.refreshFormIndexClassInTab(a)
        } else {
            if (c.isCol) {
                Site.refreshFormIndexClassInCol(a)
            }
        }
    })
};
Site.checkNestModule = function (e) {
    var a = {
            nest: false,
            isTab: false,
            isCol: false,
            isFullmeasure: false,
            isPack: false,
            parentId: 0,
            inTab: false,
            inCol: false,
            inFullmeasure: false,
            inPack: false
        },
        d = parseInt(e.attr("_intab")) || 0,
        b = parseInt(e.attr("_inmulmcol")) || 0,
        c = parseInt(e.attr("_infullmeasure")) || 0,
        f = parseInt(e.attr("_inpack")) || 0;
    if (e.hasClass("formStyle35")) {
        a.nest = true;
        a.isCol = true
    } else {
        if (e.hasClass("formStyle29")) {
            a.nest = true;
            a.isTab = true
        } else {
            if (e.hasClass("formStyle80")) {
                a.nest = true;
                a.isFullmeasure = true
            } else {
                if (e.hasClass("formStyle87")) {
                    a.nest = true;
                    a.isPack = true
                }
            }
        }
    } if (d > 0) {
        a.parentId = d;
        a.inTab = true
    } else {
        if (b > 0) {
            a.parentId = b;
            a.inCol = true
        } else {
            if (c > 0) {
                a.parentId = c;
                a.inFullmeasure = true
            } else {
                if (f > 0) {
                    a.parentId = f;
                    a.inPack = true
                }
            }
        }
    }
    return a
};
Site.createMemberBar = function (e, c, g, d, a) {
    if (Fai.top.$("#memberBarArea").length > 0) {
        return
    }
    var b = new Array();
    b.push("<div id='memberBarArea' class='memberBarArea g_editPanel' >");
    b.push("<div id='memberBar' class='memberBar'>");
    b.push("         <div class='right'>");
    b.push("			<div style='float:right;'>");
    if (e || c || g) {
        if (g) {
            b.push("			<a href='javascript:;' class='l_Btn' id='t_wxLgn'>");
            b.push("				<span class='l_Ico wxLgn'></span>");
            b.push("			</a>")
        }
        if (c) {
            b.push("			<a href='javascript:;' class='l_Btn' id='t_wbLgn'>");
            b.push("				<span class='l_Ico wbLgn'></span>");
            b.push("			</a>")
        }
        if (e) {
            b.push("			<a href='javascript:;' class='l_Btn' id='t_qqLgn'>");
            b.push("				<span class='l_Ico qqLgn'></span>");
            b.push("			</a>")
        }
        b.push("				<span style='float: right;'>" + LS.otherAccountLogin + "：</span>")
    }
    b.push("					<a class='memberOption memberReg' href='/signup.html' style='margin-right:10px;'>" + LS.memberReg + "</a>");
    b.push("					<a class='memberOption memberLogin' href='/login.jsp' >" + LS.memberLogin + "</a>");
    b.push("			</div>");
    b.push("		</div>");
    b.push('		<div class="left">');
    if (!d) {
        Fai.top._memberTopBar_myOrder = false
    }
    if (Fai.top._memberTopBar_addBookMark) {
        b.push('				<div style="float:left;margin-left: 8px;">');
        b.push('					<a id="topBarMember_addBookMark" hidefocus="true" href="javascript:;"" style="text-decoration:none;display:;" onclick="">' + LS.favorite + "</a>");
        b.push("				</div>")
    } else {
        b.push('				<div style="float:left;margin-left: 8px;">');
        b.push('					<a id="topBarMember_addBookMark" hidefocus="true" href="javascript:;"" style="text-decoration:none;display:none;" onclick="">' + LS.favorite + "</a>");
        b.push("				</div>	")
    } if (Fai.top._memberTopBar_addBookMark && (Fai.top._memberTopBar_myOrder || Fai.top._memberTopBar_myProfile)) {
        b.push('				<div id="line1" class="line" style="float:left;display:;"></div>')
    } else {
        b.push('				<div id="line1" class="line" style="float:left;display:none;"></div>')
    } if (Fai.top._memberTopBar_myProfile) {
        b.push('				<div style="float:left;">');
        b.push('					<a  id="topBarMember_myProfile" hidefocus="true" style="text-decoration:none;display:;"  href="mCenter.jsp">' + LS.member_center_profile + "</a>");
        b.push("				</div>	")
    } else {
        b.push('				<div style="float:left;">');
        b.push('					<a  id="topBarMember_myProfile" hidefocus="true" style="text-decoration:none;display:none;"  href="mCenter.jsp">' + LS.member_center_profile + "</a>");
        b.push("				</div>")
    } if (Fai.top._memberTopBar_myProfile && Fai.top._memberTopBar_myOrder) {
        b.push('				<div id="line2" class="line" style="float:left;display:;"></div>')
    } else {
        b.push('				<div id="line2" class="line" style="float:left;display:none;"></div>')
    } if (Fai.top._memberTopBar_myOrder) {
        b.push('				<div style="float:left;">');
        b.push('					<a id="topBarMember_myOrder" hidefocus="true" style="text-decoration:none;display:;" href="mCenter.jsp?item=memberOrder">' + LS.member_center_order + "</a>");
        b.push("				</div>")
    } else {
        b.push('				<div style="float:left;">');
        b.push('					<a id="topBarMember_myOrder" hidefocus="true" style="text-decoration:none;display:none;" href="mCenter.jsp?item=memberOrder">' + LS.member_center_order + "</a>");
        b.push("				</div>")
    } if (d) {
        var f = "";
        if (Fai.top._memberTopBar_mallCart) {
            f = "display:none;"
        }
        if (Fai.top._memberTopBar_addBookMark || Fai.top._memberTopBar_myOrder || Fai.top._memberTopBar_myProfile) {
            b.push('		<div id="mallCartLine" class="line" style="' + f + 'margin-right: 0px;"></div>')
        } else {
            b.push('		<div id="mallCartLine" class="line" style="display:none;margin-right: 0px;"></div>')
        }
        b.push('		<div style="float:left;  margin-left: 15px;">');
        b.push('			<div id="mallCart_js" class="mallCart" style="' + f + '">');
        b.push('				<div class="mallCartItem">');
        b.push('					<span class="mallCart_icon">&nbsp;</span>');
        b.push('					<span class="mallCart_name">' + LS.memberMallCart + "</span>");
        b.push('					<span class="mallCart_proNum">(0)</span>');
        b.push('					<span class="mallCart_down">&nbsp;</span>');
        b.push("				</div>");
        b.push("			</div>");
        b.push('			<div class="mallCartPanel">');
        b.push('				<div id="mallCartList_js" class="mallCartList">');
        b.push('					<div class="mcProductList">' + LS.memberMallCartNoProduct + "</div>");
        b.push('					<div class="checkMallCartBtn" <%=(isRU || isLo) ? "style=\'width: 178px;\'" : "" %> >' + LS.memberMallCartCheckBtn + "</div>");
        b.push("				</div>");
        b.push("			</div>");
        b.push("		</div>")
    }
    if (Fai.top._memberTopBar_mobiWeb && Fai.top.openMSite) {
        if (Fai.top._memberTopBar_myOrder || Fai.top._memberTopBar_myProfile || d) {
            b.push('				<div id="mobiWeb_line" class="line" style="margin-right: 0px; display:;"></div>')
        }
        b.push('				<div style="float:left;  margin-left: 15px;">');
        b.push('					<div id="mobiWeb_js" class="mobiWeb">');
        b.push('						<div class="mobiWebItem">');
        b.push('							<span class="mobiWeb_icon">&nbsp;</span>');
        b.push('							<span class="mobi_down">&nbsp;</span>');
        b.push("						</div>");
        b.push("					</div>");
        b.push('					<div class="mobiWebPanel">');
        b.push('						<div id="mobiWebQRCode_js" class="mobiWebQRCode">');
        b.push('							<div style="text-align:center;padding-top:10px;"><img src="/qrCode.jsp?cmd=mobiQR&_s=80&lanCode==lanCode"></div>');
        b.push('							<div style="text-align:center;padding-top:2px;font-size:12px;color:#555555;">' + LS.showMobiWeb + "</div>");
        b.push("						</div>");
        b.push("					</div>");
        b.push("				</div>")
    } else {
        if (Fai.top._memberTopBar_myOrder || Fai.top._memberTopBar_myProfile || d) {
            b.push('				<div id="mobiWeb_line" class="line" style="margin-right: 0px; display:none;"></div>')
        }
        b.push('				<div style="float:left;  margin-left: 15px;">');
        b.push('					<div id="mobiWeb_js" class="mobiWeb" style="display:none;">');
        b.push('						<div class="mobiWebItem">');
        b.push('							<span class="mobiWeb_icon">&nbsp;</span>');
        b.push('							<span class="mobi_down">&nbsp;</span>');
        b.push("						</div>");
        b.push("					</div>");
        b.push('					<div class="mobiWebPanel" style="display:none;">');
        b.push('						<div id="mobiWebQRCode_js" class="mobiWebQRCode">');
        b.push('							<div style="text-align:center;padding-top:10px;"><img src="/qrCode.jsp?cmd=mobiQR&_s=80"></div>');
        b.push('							<div style="text-align:center;padding-top:2px;">' + LS.showMobiWeb + "</div>");
        b.push("						</div>");
        b.push("					</div>");
        b.push("				</div>	 ")
    }
    b.push("		</div>");
    b.push("	</div>");
    b.push("</div>");
    Fai.top.$("body").prepend(b.join(""));
    Site.resetMemberBarPos();
    if (d) {
        Site.mallCartInit(Fai.top._colId)
    }
    if (Fai.top._memberTopBar_mobiWeb) {
        Site.mobiWebInit()
    }
};
Site.resetGmainPos = function () {
    var d = 0;
    d = Site.getTopHeight();
    var b = Fai.top.$("#g_main");
    if (Fai.isIE6() || Fai.isIE7()) {
        var a = Fai.top.document.documentElement.clientHeight - d;
        if (b.height() != a) {
            b.css("height", a + "px")
        }
        var c = Fai.top.document.documentElement.clientWidth;
        if (b.width() != c) {
            b.css("width", c + "px")
        }
    }
    if ($("#topBar").css("display") === "block") {
        d = d - 6
    }
    if ($("#memberBarArea").length !== 0) {
        d = d - 2
    }
    if (b.css("top") != (d + "px")) {
        b.css("top", d + "px")
    }
    Site.resetMemberBarPos();
    Fai.top.$(".floatLeftTop").css("top", d + "px");
    Fai.top.$(".floatRightTop").css("top", d + "px")
};
Site.resetMemberBarPos = function () {
    var b = Site.getTopHeight() - 37;
    if ($("#topBar").css("display") === "block") {
        b = b - 6
    }
    var a = Fai.top.$("#memberBarArea");
    if (a.css("top") != (b + "px")) {
        a.css("top", b + "px")
    }
};
Site.getTopHeight = function () {
    var f = 0;
    var e = 0;
    var a = 0;
    var d = 0;
    var g = 0;
    var c = 0;
    var b = 0;
    if ((Fai.top.$("#sitetips").length > 0) && (Fai.top.$("#sitetips").css("display") != "none")) {
        g = Fai.top.$("#sitetips").outerHeight(true)
    }
    if ((Fai.top.$("#arrears").length > 0) && (Fai.top.$("#arrears").css("display") != "none")) {
        e = Fai.top.$("#arrears").outerHeight(true)
    }
    if ((Fai.top.$("#topBar").length > 0) && (Fai.top.$("#topBar").css("display") != "none")) {
        a = Fai.top.$("#topBarArea").outerHeight(true)
    }
    if ((Fai.top.$("#styleDesign").length > 0) && (Fai.top.$("#styleDesign").css("display") != "none")) {
        d = Fai.top.$("#styleDesign").outerHeight(true)
    }
    if ((Fai.top.$("#siteTipsDemoTemplate").length > 0) && (Fai.top.$("#siteTipsDemoTemplate").css("display") != "none")) {
        c = Fai.top.$("#siteTipsDemoTemplate").outerHeight(true)
    }
    if ((Fai.top.$("#memberBar").length > 0) && (Fai.top.$("#memberBar").css("display") != "none")) {
        b = Fai.top.$("#memberBar").outerHeight(true)
    }
    if (d > 0) {
        g = 0
    }
    f = e + a + d + g + c + b;
    return f
};
Site.scrollToDiv = function (a) {
    if (Fai.top.$("#g_main").hasClass("g_mainManage")) {
        Fai.top.$("#g_main").scrollTop(0);
        Fai.top.$("#g_main").scrollTop(a.offset().top - Fai.top.$(".g_main").offset().top - 10)
    } else {
        Fai.top.$("body").scrollTop(0);
        Fai.top.$("body").scrollTop(a.offset().top - 10)
    }
};
Site.checkSaveBar = function (a) {
    if (Fai.top._changeStyleNum > 0) {
        Site.popupStyleChangeBodyWindow({
            msg: "您的网站设计已经更改，是否立即保存？",
            isCancelBtn: false,
            runCallback: false,
            saveBtnStr: "确定",
            cancelBtnStr: "取消",
            otherOptions: a
        });
        return true
    }
    return false
};
Site.logClick = function (c, b) {
    return;
    var a = "cmd=click&app=" + c;
    if (typeof b != "undefined") {
        a += "&value=" + b
    }
    $.ajax({
        type: "post",
        url: Site.genAjaxUrl("log_h.jsp"),
        data: a,
        error: function () {}, success: function () {}
    })
};
Site.popupLogin = function (a, c) {
    try {
        if (!Site.getTopWindow().location.href) {
            alert('您好，目前无法打开登录框，可能是以下原因：\n1、当前网页未完全加载，请稍后重试或刷新再试。\n2、不支持"域名转发"时登录。\n3、不支持"被其他网站嵌入"时登录。');
            return
        }
    } catch (b) {
        alert('您好，目前无法打开登录框，可能是以下原因：\n1、当前网页未完全加载，请稍后重试或刷新再试。\n2、不支持"域名转发"时登录。\n3、不支持"被其他网站嵌入"时登录。');
        return
    }
    a = a + "/loginForm.jsp?cid=" + c + "&f=" + Fai.encodeUrl(window.location.href) + "&rqDomain=" + Fai.encodeUrl(Fai.top.document.domain);
    Fai.popupWindow({
        title: "登录",
        frameSrcUrl: a + "&track=2&ram=" + Math.random(),
        width: "380",
        height: "175",
        frameScrolling: "no"
    })
};
Site.getFooterBottom = function (a) {
    if (!a) {
        if (Fai.top.$(".footerSupport").css("display") != "none") {
            return Fai.top.$(".footerSupport").offset().top
        } else {
            return Fai.top.$("#webFooter").offset().top + Fai.top.$("#webFooter").height()
        }
    } else {
        return Fai.top.$("#webFooter").offset().top + Fai.top.$("#webFooter").height()
    }
};
Site.navAppendToParent = function (a, b) {
    if (!b) {
        if (a == 0) {
            Site.getTopWindow().$("#banner").appendTo(Site.getTopWindow().$("#webBanner .bannerCenter"));
            Site.getTopWindow().$("#nav").appendTo(Site.getTopWindow().$("#webBanner .bannerCenter"))
        } else {
            if (a == 1) {
                Site.getTopWindow().$("#banner").appendTo(Site.getTopWindow().$("#webBanner .bannerCenter"));
                Site.getTopWindow().$("#nav").appendTo(Site.getTopWindow().$("#webHeader .headerNav"))
            } else {
                if (a == 2) {
                    Site.getTopWindow().$("#banner").appendTo(Site.getTopWindow().$("#containerMiddleLeft"));
                    Site.getTopWindow().$("#nav").appendTo(Site.getTopWindow().$("#webHeader .headerNav"))
                } else {
                    if (a == 3 || a == 5) {
                        Site.getTopWindow().$("#nav").appendTo(Site.getTopWindow().$("#containerMiddleLeft"));
                        Site.getTopWindow().$("#banner").appendTo(Site.getTopWindow().$("#containerMiddleLeft"))
                    } else {
                        if (a == 4 || a == 6) {
                            Site.getTopWindow().$("#banner").appendTo(Site.getTopWindow().$("#containerMiddleCenterTop"));
                            Site.getTopWindow().$("#nav").appendTo(Site.getTopWindow().$("#containerMiddleLeft"))
                        } else {
                            if (a == 7) {
                                Site.getTopWindow().$("#banner").prependTo(Site.getTopWindow().$("#containerFormsCenter"));
                                Site.getTopWindow().$("#nav").appendTo(Site.getTopWindow().$("#webHeader .headerNav"))
                            } else {
                                if (a == 8) {
                                    Site.getTopWindow().$("#banner").prependTo(Site.getTopWindow().$("#centerTopForms"));
                                    Site.getTopWindow().$("#nav").appendTo(Site.getTopWindow().$("#webHeader .headerNav"))
                                } else {
                                    if (a == 9) {
                                        Site.getTopWindow().$("#banner").appendTo(Site.getTopWindow().$("#webBanner .bannerCenter"));
                                        Site.getTopWindow().$("#nav").appendTo(Site.getTopWindow().$("#webBanner .bannerCenter"))
                                    } else {
                                        if (a == 10) {
                                            Site.getTopWindow().$("#nav").appendTo(Site.getTopWindow().$("#webBanner .bannerCenter"));
                                            Site.getTopWindow().$("#banner").appendTo(Site.getTopWindow().$("#webBanner .bannerCenter"))
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
};
Site.initTemplateLayout = function (c, d, b) {
    var a = Fai.top.$("#webBanner");
    Site.navAppendToParent(c, d);
    if (c == 0) {
        a.show();
        Site.showNavSubMenu(0);
        setTimeout(function () {
            Site.showNavItemContainer()
        }, 200)
    } else {
        if (c == 1) {
            a.show();
            Site.showNavSubMenu(0);
            setTimeout(function () {
                Site.showNavItemContainer()
            }, 200)
        } else {
            if (c == 2) {
                a.hide();
                Site.showNavSubMenu(0);
                setTimeout(function () {
                    Site.showNavItemContainer()
                }, 200)
            } else {
                if (c == 3) {
                    a.hide();
                    Site.showNavSubMenu(1);
                    setTimeout(function () {
                        Site.showNavItemContainer()
                    }, 200);
                    Site.hideNavItemContainer()
                } else {
                    if (c == 4) {
                        a.hide();
                        Site.showNavSubMenu(1);
                        setTimeout(function () {
                            Site.showNavItemContainer()
                        }, 200);
                        Site.hideNavItemContainer()
                    } else {
                        if (c == 5) {
                            a.hide();
                            Site.showNavSubMenu(1);
                            setTimeout(function () {
                                Site.showNavItemContainer()
                            }, 200);
                            Site.hideNavItemContainer()
                        } else {
                            if (c == 6) {
                                a.hide();
                                Site.showNavSubMenu(100);
                                setTimeout(function () {
                                    Site.showNavItemContainer()
                                }, 200);
                                Site.hideNavItemContainer()
                            } else {
                                if (c == 7) {
                                    a.hide();
                                    Site.showNavSubMenu(0);
                                    setTimeout(function () {
                                        Site.showNavItemContainer()
                                    }, 200)
                                } else {
                                    if (c == 8) {
                                        a.hide();
                                        Site.showNavSubMenu(0);
                                        setTimeout(function () {
                                            Site.showNavItemContainer()
                                        }, 200)
                                    } else {
                                        if (c == 9 || c == 10) {
                                            a.show();
                                            Site.showNavSubMenu(0);
                                            setTimeout(function () {
                                                Site.showNavItemContainer()
                                            }, 200)
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    } if (Fai.top._manageMode) {
        setTimeout(function () {
            Site.absoluteNavDraggableAndResize(c, b)
        }, 300)
    }
};
Site.checkFaiAnchor = function () {
    var c = window.location.hash;
    var b = c.substring(1).split("_");
    if (b[0] != "fai") {
        return
    }
    var d = b[1],
        a = b[2];
    if (!!d) {
        if (typeof a == "undefined") {
            a = "top"
        }
        Site.jumpToModulePosition(d, a)
    }
    return
};
Site.logout = function (a) {
    Fai.ing("正在退出系统...", false);
    $.ajax({
        type: "post",
        url: "ajax/login_h.jsp?cmd=logout",
        error: function () {
            Fai.ing("系统繁忙，请稍后重试。", false)
        }, success: function (b) {
            Fai.successHandle(b, "", "系统繁忙，请稍后重试。", a, 1, 1)
        }
    })
};
Site.manageFaiscoAd = function () {
    if (_manageMode) {
        $(".siteAdvertisement_box").mouseover(function () {
            $(".siteAdvertisement_boxTip").css("display", "block")
        }).mouseleave(function () {
            $(".siteAdvertisement_boxTip").css("display", "none")
        })
    }
    $(".reportUrl").mouseover(function () {
        $(this).text("举报此网站").css("text-decoration", "underline")
    }).mouseleave(function () {
        $(this).text("举报").css("text-decoration", "none")
    });
    $(".closeImg").click(function () {
        if (_manageMode) {
            if (Fai.isDbg()) {
                $.cookie("faiscoAd", false, {
                    expires: 1,
                    path: "/",
                    domain: "aaa.cn"
                })
            } else {
                $.cookie("faiscoAd", false, {
                    expires: 1,
                    path: "/",
                    domain: "faisco.cn"
                })
            }
            var a = $.cookie("faiscoAdLoopCount");
            if (a == "1") {
                Site.logDog(200004, 22)
            } else {
                if (a == "2") {
                    Site.logDog(200004, 23)
                } else {
                    if (a == "3") {
                        Site.logDog(200004, 24)
                    } else {
                        if (a == "4") {
                            Site.logDog(200004, 21)
                        }
                    }
                }
            }
        }
        $(".siteAdvertisement_box").css("display", "none")
    })
};
Site.initMulColModuleInIE = function (a) {
    if (Fai.isIE10()) {
        $(a).find(".mulModuleColStyleLine").css("height", $(a).height() - 25 + "px")
    }
};
Site.initCorpTitleJump = function () {
    $("#corpTitle").click(function () {
        var b = $(this).attr("_href");
        if (b == "" || b == null) {
            return false
        }
        if ($(this).attr("contenteditable") == "true") {
            return false
        }
        var a = parseInt($(this).attr("_linktype"));
        if (Fai.top._titleData != null && Fai.top._titleData != "") {
            if (Fai.top._titleData.jm.ot === 1) {
                window.open(b)
            } else {
                Fai.top.location.href = b
            }
        } else {
            if (a === 1) {
                window.open(b)
            } else {
                Fai.top.location.href = b
            }
        }
    })
};
Site.onTitleSiteFixTop = function () {
    var f, h = false,
        a = false,
        r = Fai.isIE6(),
        q = Fai.isIE7(),
        z = Fai.top.$("#corpTitle"),
        u = Fai.top.$(window),
        n = Fai.top.$("#g_main"),
        d = Fai.top.$("#web"),
        k = Fai.top.$("body"),
        w = Fai.top.$(".webTopTable"),
        g = Fai.top.$(".floatLeftTop"),
        e = z.parent(),
        m = Fai.top.$("#sitetips"),
        l, v = parseInt(z.css("top").replace("px", "")),
        s = z.offset().top - n.offset().top,
        j = z.position().left,
        p = m.height() || 0,
        c = s,
        b = g.css("top").replace("px", "") || 0,
        o = Fai.top.$(window),
        y = o;
    if (r || q) {
        a = true;
        y = n
    }
    var x = z.offset().left - e.offset().left;
    var t, i;
    y.off("scroll.title");
    y.on("scroll.title", function () {
        var B = y.scrollTop(),
            A = parseInt(g.css("top").replace("px", "")) - 1;
        b = A || 0;
        f = Site.getNavInClientPosition(z).left;
        if (w.find("#corpTitle").length > 0) {
            l = w;
            l.css({
                zIndex: "60",
                position: "relative"
            })
        }
        if (!h && c < B) {
            if (r) {
                t = z.parent();
                i = z.offset().left - t.offset().left;
                k.prepend(z);
                z.css({
                    position: "absolute",
                    left: f + "px",
                    top: b + "px"
                })
            } else {
                z.addClass("titlefixtop");
                z.css({
                    left: f + "px",
                    top: b + "px",
                    position: "fixed"
                })
            }
            h = true
        }
        if (h && c > B) {
            if (r) {
                e.append(z);
                z.css({
                    position: "absolute",
                    left: j,
                    top: s,
                    zIndex: ""
                })
            } else {
                z.removeClass("titlefixtop");
                z.css({
                    position: "absolute",
                    left: j,
                    top: s
                })
            }
            h = false
        }
    });
    Fai.top.$(window).on("resize.title", function () {
        if (r && z.offset().top == 0) {
            z.css("left", t.offset().left + i)
        } else {
            if (z.hasClass("titlefixtop")) {
                setTimeout(function () {
                    z.css("left", e.offset().left + x)
                }, 0)
            }
        }
    })
};
Site.onLogoSiteFixTop = function () {
    var f, j = false,
        a = false,
        s = Fai.isIE6(),
        q = Fai.isIE7(),
        g = Fai.top.$("#logo"),
        w = Fai.top.$(window),
        n = Fai.top.$("#g_main"),
        e = Fai.top.$("#web"),
        k = Fai.top.$("body"),
        x = Fai.top.$(".webTopTable"),
        i = Fai.top.$(".floatLeftTop"),
        h = g.parent(),
        m = Fai.top.$("#sitetips"),
        l, v = parseInt(g.css("top").replace("px", "")),
        y = g.offset().top - n.offset().top,
        r = g.position().left,
        p = m.height() || 0,
        d = y,
        c = i.css("top").replace("px", "") || 0,
        o = Fai.top.$(window),
        z = o;
    if (s || q) {
        a = true;
        z = n
    }
    var u = g.offset().left - h.offset().left;
    var t, b;
    z.off("scroll.logo");
    z.on("scroll.logo", function () {
        var B = z.scrollTop(),
            A = parseInt(i.css("top").replace("px", "")) - 1;
        c = A || 0;
        f = Site.getNavInClientPosition(g).left;
        if (x.find("#logo").length > 0) {
            l = x;
            l.css({
                zIndex: "60",
                position: "relative"
            })
        }
        if (!j && d < B) {
            if (s) {
                t = g.parent();
                b = g.offset().left - t.offset().left;
                k.prepend(g);
                g.css({
                    position: "absolute",
                    left: f + "px",
                    top: c + "px",
                    zIndex: 60
                })
            } else {
                g.addClass("logofixtop");
                g.css({
                    left: f + "px",
                    top: c + "px",
                    position: "fixed"
                })
            }
            j = true
        }
        if (j && d > B) {
            if (s) {
                h.append(g);
                g.css({
                    position: "absolute",
                    left: r,
                    top: y,
                    zIndex: ""
                })
            } else {
                g.removeClass("logofixtop");
                g.css({
                    position: "absolute",
                    left: r,
                    top: y
                })
            }
            j = false
        }
    });
    Fai.top.$(window).on("resize.logo", function () {
        if (s && g.offset().top == 0) {
            g.css("left", t.offset().left + b)
        } else {
            if (g.hasClass("logofixtop")) {
                setTimeout(function () {
                    g.css("left", h.offset().left + u)
                }, 0)
            }
        }
    })
};
Site.voidFun = function () {};
Site.codeInsertButtom = function (d) {
    var b = /document.write/g;
    d = d.replace(b, "Site.voidFun");
    var a = document.createElement("script");
    a.type = "text/javascript";
    try {
        a.appendChild(document.createTextNode(d))
    } catch (c) {
        a.text = d
    }
    document.body.appendChild(a)
};
Site.computeTabsWidthHideMore = function (e) {
    var d = Fai.top.$("#module" + e).find(".formTabButtonTopCenter");
    var c = parseInt(d.css("width")) + 4;
    var b = 0;
    var a = d.find(".formTabButton");
    $.each(a, function (f, h) {
        var g = parseInt($(h).css("width"));
        b += g + 5
    });
    b += 40;
    if (b > c) {
        d.find(".formTabButtonMore").hide()
    } else {
        d.find(".formTabButtonMore").show()
    }
};
Site.wxShareAlter = function (a) {
    var c = new Array();
    c.push("<div class='wxShare'>");
    c.push("<div class='wxShareContent'>");
    c.push("<div class='wxShareDesc'>");
    c.push("<span>" + LS.weChatShare + "</span>");
    c.push("</div>");
    c.push("<div class='wxShareQrcode'><img alt='' src='" + a + "' /></div>");
    c.push("</div>");
    c.push("</div>");
    var b = Site.getTopWindow().Fai.popupWindow({
        width: 480,
        height: 420,
        frameScrolling: "no",
        bannerDisplay: false,
        bgClose: true,
        closeBtnClass: "wxSharehideCloseBtn",
        divContent: c.join("")
    });
    if (Fai.isIE6() && Fai.top.$("#fixSelectIframe" + b).length > 0) {
        Fai.top.$("#fixSelectIframe" + b).remove()
    }
};
Site.hoverChangeImage = function () {
    var m = $("img[_defImg][_hovImg], img[_defFont][_hovFont], div[_defFont][_hovFont], div[_defImg][_hovImg]");
    var f = $(".J_hoverImage");
    var q = false;
    var n = this.body ? this.body : (this.editor ? this.editor.body : false);
    if (n) {
        m = $(n).find("img[_defImg][_hovImg], img[_defFont][_hovFont], div[_defFont][_hovFont], div[_defImg][_hovImg]")
    }
    if (n) {
        f = $(n).find(".J_hoverImage")
    }
    if (m.length == 0) {
        return
    }
    f.remove();
    for (var r = 0; r < m.length; r++) {
        var u = m[r];
        var o = $(u).parent();
        var e = $(u).position().top;
        var c = $(u).position().left;
        var s = $(u).width();
        var p = $(u).height();
        var d = $(u).attr("title") || "";
        var l = $(u).attr("_defFont");
        var h = "";
        var g = $(u).attr("_hovImg");
        var v = "position: absolute; opacity:0;";
        var k = $(u).attr("_hovFont");
        var j = $(u).attr("_hovColor");
        q = ($(u).parents(".richContent").length > 0 || n) && $(o).is("p, span, td");
        if (q) {
            if (!(o[0].nodeName.toLowerCase() === "span" && $(o).hasClass("J_hoverImageParent"))) {
                var a = "display: inline-block; width: " + s + "px; height: " + p + "px; _display: block; _zoom: 1;";
                $(u).after("<span class='J_hoverImageParent' style='" + a + "'></span>");
                o = $(u).next("span");
                $(o).append($(u))
            }
        }
        var h = $(o).find(".J_hoverImage");
        if (h.length == 0) {
            v += "top: 0px; left: 0px; width:" + s + "px; height:" + p + "px;";
            if (!!k) {
                font_size = s > p ? p : s;
                v += "font-size:" + font_size + "px; text-align : center; line-height:" + p + "px;";
                h = "<div class='J_hoverImage " + k + "' style='" + v + "color: " + j + "' ></div>"
            } else {
                h = "<img class='J_hoverImage' src='" + g + "' style='" + v + (g ? "" : "visibility:hidden;") + "' title='" + d + "' alt='" + d + "' >"
            }
            $(u).after(h)
        }
        $(u).css("opacity", "")
    }
    var t = $(m).parent();
    $.each(t, function (x, y) {
        var z = $(this).find("img[_defImg], div[_defFont]")[0];
        if (typeof ($(z).attr("_hovImg")) == "undefined" && typeof ($(z).attr("_hovFont")) == "undefined") {
            return
        }
        if (typeof ($(z).attr("_hovImg")) != "undefined" && $(z).attr("_hovImg").length == 0) {
            return
        }
        var w = $(y).parents(".form");
        if (Fai.isChrome() && !$(w).hasClass("formStyle31")) {
            $(y).css("position", "relative")
        }
        $(y).off(".hoverImage");
        $(y).on("mouseenter.hoverImage", function () {
            var i = $(this).find("img[_defImg], div[_defFont]")[0];
            var A = $(this).find(".J_hoverImage");
            b(i, A);
            $(i).stop(false, true).animate({
                opacity: 0
            }, 500);
            $(A).stop(false, true).animate({
                opacity: 1
            }, 500)
        }).on("mouseleave.hoverImage", function () {
            var i = $(this).find("img[_defImg], div[_defFont]")[0];
            var A = $(this).find(".J_hoverImage");
            b(i, A);
            $(A).stop(false, true).animate({
                opacity: 0
            }, 500);
            $(i).stop(false, true).animate({
                opacity: 1
            }, 500)
        })
    });

    function b(z, C) {
        var x = $(z).width();
        var w = $(z).height();
        var y = $(z).position().top;
        var i = $(z).position().left;
        var B = $(z).css("margin-left");
        var A = $(z).css("margin-top");
        if (!!B) {
            B = parseInt(B.replace("px", ""));
            i += B
        }
        if (!!A) {
            A = parseInt(A.replace("px", ""));
            y += A
        }
        if ($(z).context.tagName == "DIV") {
            $(z).parent().css("display", "block")
        }
        $(C).css({
            top: y + "px",
            left: i + "px",
            width: x + "px",
            height: w + "px"
        })
    }
};
Site.hoverStyle = function () {
    var k = $("a[aStyle_h]");
    var l = this.body ? this.body : (this.editor ? this.editor.body : false);
    var g;
    var d;
    var e;
    var h = true;
    var j;
    var b;
    if (l) {
        k = $(l).find("a[aStyle_h]")
    }
    if (k.length == 0) {
        return
    }
    for (var f = 0; f < k.length; f++) {
        var c = k[f];
        $(c).off("mouseenter.hoverStyle");
        $(c).on("mouseenter.hoverStyle", function () {
            var n = $.parseJSON($(this).attr("stylehover"));
            var i = $.parseJSON($(this).attr("wbackColor_h"));
            if (n == null && i == null) {
                return
            } else {
                if (n != null && i == null) {
                    for (var m = 0; j = this.childNodes.length, m < j; m++) {
                        var o = this.childNodes[m];
                        a(o, 1, n, null, false)
                    }
                    e = this.style.textDecoration;
                    d = this.style.color;
                    $(this).css({
                        "text-decoration": (n.u ? "underline" : "none"),
                        color: n.c,
                        display: "inline-block",
                        "text-indent": 0
                    });
                    if (!n.u) {
                        h = false
                    }
                } else {
                    if (i != null && n == null) {
                        for (var m = 0; j = this.childNodes.length, m < j; m++) {
                            var o = this.childNodes[m];
                            a(o, 2, null, i, false)
                        }
                    } else {
                        e = this.style.textDecoration;
                        d = this.style.color;
                        for (var m = 0; j = this.childNodes.length, m < j; m++) {
                            var o = this.childNodes[m];
                            a(o, 3, n, i, false)
                        }
                        $(this).css({
                            "text-decoration": (n.u ? "underline" : "none"),
                            color: n.c
                        });
                        if (!n.u) {
                            h = false
                        }
                    }
                }
            }
        }).on("mouseleave.hoverStyle", function () {
            var n = $.parseJSON($(this).attr("stylehover"));
            var i = $.parseJSON($(this).attr("wbackColor_h"));
            if (n == null && i == null) {
                return
            }
            $(this).css("display", "");
            for (var m = 0; b = this.childNodes.length, m < b; m++) {
                var o = this.childNodes[m];
                a(o, 3, n, i, true)
            }
            if (!h) {
                $(this).css({
                    "text-decoration": "none"
                });
                h = true
            }
            if ($(this).attr("astyle_h") == 1) {
                $(this).css({
                    color: "" + d + ""
                });
                $(this).css({
                    "text-decoration": "" + e + ""
                })
            } else {
                if ($(this).attr("astyle_h") == 2) {
                    $(this).css({
                        color: ""
                    });
                    $(this).css({
                        "text-decoration": ""
                    })
                }
            }
            e = null;
            d = null;
            g = null
        })
    }

    function a(r, o, q, i, p) {
        var o = o || 0;
        var n = r.childNodes.length;
        if (r.nodeType == 1 && n > 0) {
            for (var m = 0; m < n; m++) {
                a(r.childNodes[m], o, q, i, p)
            }
        }
        if (r.nodeType == 3) {
            if (p) {
                r.parentNode.style.cssText = g
            } else {
                g = r.parentNode.style.cssText;
                if (o == 1) {
                    $(r.parentNode).css({
                        "font-size": q.fs,
                        "font-weight": q.b ? "bold" : "normal",
                        "font-family": q.ff,
                        color: q.c,
                        "text-decoration": q.u ? "underline" : "none"
                    })
                } else {
                    if (o == 2) {
                        $(r.parentNode).css({
                            "background-color": i.bc
                        })
                    } else {
                        if (o == 3) {
                            $(r.parentNode).css({
                                "font-size": q.fs,
                                "font-weight": q.b ? "bold" : "normal",
                                "font-family": q.ff,
                                color: q.c,
                                "background-color": i.bc,
                                "text-decoration": q.u ? "underline" : "none"
                            })
                        }
                    }
                }
            }
        }
    }
};
Site.setFullMeasureBgHightInIe6 = function (b) {
    if (Fai.isIE6()) {
        var a = Fai.top.$("#module" + b),
            c = a.height();
        a.find(".fullmeasureOuterContentBg" + b).css("height", c + "px");
        a.find(".fullmeasureContentBg" + b).css("height", c + "px")
    }
};
Site.addStellarEvent = function () {
    var a = Fai.top.$(".fullmeasureOuterContentBg"),
        b = false;
    if (a.length > 0) {
        a.each(function () {
            if (!!$(this).attr("data-stellar-background-ratio")) {
                b = true;
                return
            }
        })
    }
    if (b) {
        if (Fai.top._manageMode) {
            Fai.top.$("#g_main").stellar("destroy");
            Fai.top.$("#g_main").stellar({
                horizontalScrolling: false,
                responsive: false
            })
        } else {
            $(Fai.top).stellar("destroy");
            $(Fai.top).stellar({
                horizontalScrolling: false,
                responsive: false
            })
        }
    }
};
Site.popupPwdTips = function (b, a, c) {
    Site.getTopWindow().$.cookie("hasLoginSite", "true", {
        expires: 1,
        path: "/"
    });
    Site.getTopWindow().$(".formDialog .formX").trigger("click");
    Fai.ing2("<span style='font-size: 20px; color: #AFB2B5;'>请先修改您的密码</span><br><hr style='margin: 5px auto; color: #ccc;'><div style='font-size: 12px;'>您的密码过于简单，为避免盗号造成损失，请先修改密码。</div><div style='float: right;'><a class='tipsButton cancelBtn' href='javaScript:void(0);' onclick=\"Site.tipsClose('" + a + "','" + c + "')\">暂不修改</a><a class='tipsButton' href='" + b + "/portal.jsp#appId=setPwd' onclick='Site.logDog(100068,9);'>修改密码</a></div>", false);
    Site.getTopWindow().$(".msg2").css({
        "text-align": "left",
        margin: "15px",
        width: "auto"
    });
    Site.getTopWindow().$(".tips2").css({
        height: "205px",
        display: "none"
    }).slideDown();
    Site.getTopWindow().$("#ing2").css({
        width: "452px",
        "margin-top": "105px"
    });
    Site.getTopWindow().$("#ing2").css({
        transition: "opacity 0s ease",
        position: "fixed",
        top: "0"
    });
    Fai.bg(0, 0.02);
    Site.getTopWindow().$("body").css("overflow", "hidden");
    Site.getTopWindow().$("#popupBg0").click(function () {
        Site.tipsClose(a, c)
    });
    Site.getTopWindow().$("#ing2 .close").bind("click", function () {
        Site.tipsClose(a, c)
    })
};
Site.tipsClose = function (a, b) {
    Site.getTopWindow().Fai.removeIng2();
    Site.getTopWindow().Fai.removeBg();
    Site.getTopWindow().$("body").css("overflow", "scroll");
    $.cookie("hasLoginSite", "false", {
        expires: 1,
        path: "/"
    });
    window.location.href = "http://" + a + "." + b + ""
};
Site.changeAdmHref = function (a, b) {
    window.location.href = "http://" + a + "." + b + ""
};
Site.getDialogContent = function (b, a) {
    var d = b ? "suc-ico" : "resultFailIcon";
    var c = ["<table style='width:100%;height:100%;'>", "<tr>", "<td style='width:100px;'></td>", "<td style='width:180px;'>", "<div class='" + d + " addItemTextTips' style='max-width:160px;font-size:14px; color:#636363; overflow: hidden;word-wrap:normal; white-space: nowrap; text-overflow: ellipsis;' >" + a + "</div>", "</td>", "<td style='width:100px;'></td>", "</tr>", "</table>"];
    return c.join("")
};
/*!
 * Clamp.js 0.5.1
 *
 * Copyright 2011-2013, Joseph Schmitt http://joe.sh
 * Released under the WTFPL license
 * http://sam.zoy.org/wtfpl/
 *
 * 第三方 多行省略代码
 */
(function (a, c) {
    function b(i, k) {
        k = k || {};
        var u = this,
            l = window,
            g = {
                clamp: k.clamp || 2,
                useNativeClamp: typeof (k.useNativeClamp) != "undefined" ? k.useNativeClamp : true,
                splitOnChars: k.splitOnChars || [".", "-", "–", "—", " "],
                animate: k.animate || false,
                truncationChar: k.truncationChar || "…",
                truncationHTML: k.truncationHTML
            },
            s = i.style,
            A = i.innerHTML,
            w = typeof (i.style.webkitLineClamp) != "undefined",
            f = g.clamp,
            n = f.indexOf && (f.indexOf("px") > -1 || f.indexOf("em") > -1),
            p;
        if (g.truncationHTML) {
            p = document.createElement("span");
            p.innerHTML = g.truncationHTML
        }
        var e = g.splitOnChars.slice(0),
            x = e[0],
            r, z;
        if (f == "auto") {
            f = j()
        } else {
            if (n) {
                f = j(parseInt(f))
            }
        }
        var q;
        if (w && g.useNativeClamp) {
            s.overflow = "hidden";
            s.textOverflow = "ellipsis";
            s.webkitBoxOrient = "vertical";
            s.display = "-webkit-box";
            s.webkitLineClamp = f;
            if (n) {
                s.height = g.clamp + "px"
            }
        } else {
            var v = y(f);
            if (v <= i.clientHeight) {
                q = h(d(i), v)
            }
        }
        return {
            original: A,
            clamped: q
        };

        function t(B, C) {
            if (!l.getComputedStyle) {
                l.getComputedStyle = function (D, E) {
                    this.el = D;
                    this.getPropertyValue = function (G) {
                        var F = /(\-([a-z]){1})/g;
                        if (G == "float") {
                            G = "styleFloat"
                        }
                        if (F.test(G)) {
                            G = G.replace(F, function () {
                                return arguments[2].toUpperCase()
                            })
                        }
                        return D.currentStyle && D.currentStyle[G] ? D.currentStyle[G] : null
                    };
                    return this
                }
            }
            return l.getComputedStyle(B, null).getPropertyValue(C)
        }

        function j(B) {
            var C = B || i.clientHeight,
                D = o(i);
            return Math.max(Math.floor(C / D), 0)
        }

        function y(B) {
            var C = o(i);
            return C * B
        }

        function o(C) {
            var B = t(C, "line-height");
            if (B == "normal") {
                B = parseInt(t(C, "font-size")) * 1.2
            }
            return parseInt(B)
        }

        function d(B) {
            if (B.lastChild.children && B.lastChild.children.length > 0) {
                return d(Array.prototype.slice.call(B.children).pop())
            } else {
                if (!B.lastChild || !B.lastChild.nodeValue || B.lastChild.nodeValue == "" || B.lastChild.nodeValue == g.truncationChar) {
                    B.lastChild.parentNode.removeChild(B.lastChild);
                    return d(i)
                } else {
                    return B.lastChild
                }
            }
        }

        function h(E, D) {
            if (!D) {
                return
            }

            function C() {
                e = g.splitOnChars.slice(0);
                x = e[0];
                r = null;
                z = null
            }
            var B = E.nodeValue.replace(g.truncationChar, "");
            if (!r) {
                if (e.length > 0) {
                    x = e.shift()
                } else {
                    x = ""
                }
                r = B.split(x)
            }
            if (r.length > 1) {
                z = r.pop();
                m(E, r.join(x))
            } else {
                r = null
            } if (p) {
                E.nodeValue = E.nodeValue.replace(g.truncationChar, "");
                i.innerHTML = E.nodeValue + " " + p.innerHTML + g.truncationChar
            }
            if (r) {
                if (i.clientHeight <= D) {
                    if (e.length >= 0 && x != "") {
                        m(E, r.join(x) + x + z);
                        r = null
                    } else {
                        return i.innerHTML
                    }
                }
            } else {
                if (x == "") {
                    m(E, "");
                    E = d(i);
                    C()
                }
            } if (g.animate) {
                setTimeout(function () {
                    h(E, D)
                }, g.animate === true ? 10 : g.animate)
            } else {
                return h(E, D)
            }
        }

        function m(B, C) {
            B.nodeValue = C + g.truncationChar
        }
    }
    a.clamp = b
})(Site);
Site.userReadyOperateSite = function () {
    Site.mallCartInit(_colId);
    Site.mobiWebInit();
    if (!Fai.top._oem) {
        Site.changeTheLogoSize()
    }
    Site.refreshFooterItemSpacing();
    Site.bindInTabSwitch()
};
(function () {
    if (Fai.top != window) {
        return
    }
    var d = Fai.top.window.location.hash,
        b, c, a;
    if (!d) {
        return
    }
    b = $(d);
    if (b.length < 1) {
        return
    }
    c = Fai.top._manageMode ? "#g_main" : Fai.top.window;
    a = b.parents(":not(#g_main)");
    $(c).one("scroll", function () {
        a.each(function () {
            if ($(this).css("overflow") == "hidden") {
                $(this).scrollTop(0);
                $(this).scroll(function () {
                    if ($(this).scrollTop() != 0) {
                        $(this).scrollTop(0)
                    }
                })
            }
        })
    })
})();
(function (h, m, n, d) {
    var e = "mCustomScrollbar",
        a = "mCS",
        l = ".mCustomScrollbar",
        f = {
            setWidth: false,
            setHeight: false,
            setTop: 0,
            setLeft: 0,
            axis: "y",
            scrollbarPosition: "inside",
            scrollInertia: 950,
            autoDraggerLength: true,
            autoHideScrollbar: false,
            autoExpandScrollbar: false,
            alwaysShowScrollbar: 0,
            snapAmount: null,
            snapOffset: 0,
            mouseWheel: {
                enable: true,
                scrollAmount: "auto",
                axis: "y",
                preventDefault: false,
                deltaFactor: "auto",
                normalizeDelta: false,
                invert: false,
                disableOver: ["select", "option", "keygen", "datalist", "textarea"]
            },
            scrollButtons: {
                enable: false,
                scrollType: "stepless",
                scrollAmount: "auto"
            },
            keyboard: {
                enable: true,
                scrollType: "stepless",
                scrollAmount: "auto"
            },
            contentTouchScroll: 25,
            advanced: {
                autoExpandHorizontalScroll: false,
                autoScrollOnFocus: "input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",
                updateOnContentResize: true,
                updateOnImageLoad: true,
                updateOnSelectorChange: false
            },
            theme: "light",
            callbacks: {
                onScrollStart: false,
                onScroll: false,
                onTotalScroll: false,
                onTotalScrollBack: false,
                whileScrolling: false,
                onTotalScrollOffset: 0,
                onTotalScrollBackOffset: 0,
                alwaysTriggerOffsets: true
            },
            live: false,
            liveSelector: null
        },
        k = 0,
        p = {},
        c = function (q) {
            if (p[q]) {
                clearTimeout(p[q]);
                g._delete.call(null, p[q])
            }
        },
        j = (m.attachEvent && !m.addEventListener) ? 1 : 0,
        o = false,
        b = {
            init: function (r) {
                var r = h.extend(true, {}, f, r),
                    q = g._selector.call(this);
                if (r.live) {
                    var t = r.liveSelector || this.selector || l,
                        s = h(t);
                    if (r.live === "off") {
                        c(t);
                        return
                    }
                    p[t] = setTimeout(function () {
                        s.mCustomScrollbar(r);
                        if (r.live === "once" && s.length) {
                            c(t)
                        }
                    }, 500)
                } else {
                    c(t)
                }
                r.setWidth = (r.set_width) ? r.set_width : r.setWidth;
                r.setHeight = (r.set_height) ? r.set_height : r.setHeight;
                r.axis = (r.horizontalScroll) ? "x" : g._findAxis.call(null, r.axis);
                r.scrollInertia = r.scrollInertia < 17 ? 17 : r.scrollInertia;
                if (typeof r.mouseWheel !== "object" && r.mouseWheel == true) {
                    r.mouseWheel = {
                        enable: true,
                        scrollAmount: "auto",
                        axis: "y",
                        preventDefault: false,
                        deltaFactor: "auto",
                        normalizeDelta: false,
                        invert: false
                    }
                }
                r.mouseWheel.scrollAmount = !r.mouseWheelPixels ? r.mouseWheel.scrollAmount : r.mouseWheelPixels;
                r.mouseWheel.normalizeDelta = !r.advanced.normalizeMouseWheelDelta ? r.mouseWheel.normalizeDelta : r.advanced.normalizeMouseWheelDelta;
                r.scrollButtons.scrollType = g._findScrollButtonsType.call(null, r.scrollButtons.scrollType);
                g._theme.call(null, r);
                return h(q).each(function () {
                    var v = h(this);
                    if (!v.data(a)) {
                        v.data(a, {
                            idx: ++k,
                            opt: r,
                            scrollRatio: {
                                y: null,
                                x: null
                            },
                            overflowed: null,
                            bindEvents: false,
                            tweenRunning: false,
                            sequential: {},
                            langDir: v.css("direction"),
                            cbOffsets: null,
                            trigger: null
                        });
                        var x = v.data(a).opt,
                            w = v.data("mcs-axis"),
                            u = v.data("mcs-scrollbar-position"),
                            y = v.data("mcs-theme");
                        if (w) {
                            x.axis = w
                        }
                        if (u) {
                            x.scrollbarPosition = u
                        }
                        if (y) {
                            x.theme = y;
                            g._theme.call(null, x)
                        }
                        g._pluginMarkup.call(this);
                        b.update.call(null, v)
                    }
                })
            }, update: function (r) {
                var q = r || g._selector.call(this);
                return h(q).each(function () {
                    var u = h(this);
                    if (u.data(a)) {
                        var w = u.data(a),
                            v = w.opt,
                            s = h("#mCSB_" + w.idx + "_container"),
                            t = [h("#mCSB_" + w.idx + "_dragger_vertical"), h("#mCSB_" + w.idx + "_dragger_horizontal")];
                        if (!s.length) {
                            return
                        }
                        if (w.tweenRunning) {
                            g._stop.call(null, u)
                        }
                        if (u.hasClass("mCS_disabled")) {
                            u.removeClass("mCS_disabled")
                        }
                        if (u.hasClass("mCS_destroyed")) {
                            u.removeClass("mCS_destroyed")
                        }
                        g._maxHeight.call(this);
                        g._expandContentHorizontally.call(this);
                        if (v.axis !== "y" && !v.advanced.autoExpandHorizontalScroll) {
                            s.css("width", g._contentWidth(s.children()))
                        }
                        w.overflowed = g._overflowed.call(this);
                        g._scrollbarVisibility.call(this);
                        if (v.autoDraggerLength) {
                            g._setDraggerLength.call(this)
                        }
                        g._scrollRatio.call(this);
                        g._bindEvents.call(this);
                        var x = [Math.abs(s[0].offsetTop), Math.abs(s[0].offsetLeft)];
                        if (v.axis !== "x") {
                            if (!w.overflowed[0]) {
                                g._resetContentPosition.call(this);
                                if (v.axis === "y") {
                                    g._unbindEvents.call(this)
                                } else {
                                    if (v.axis === "yx" && w.overflowed[1]) {
                                        g._scrollTo.call(this, u, x[1].toString(), {
                                            dir: "x",
                                            dur: 0,
                                            overwrite: "none"
                                        })
                                    }
                                }
                            } else {
                                if (t[0].height() > t[0].parent().height()) {
                                    g._resetContentPosition.call(this)
                                } else {
                                    g._scrollTo.call(this, u, x[0].toString(), {
                                        dir: "y",
                                        dur: 0,
                                        overwrite: "none"
                                    })
                                }
                            }
                        }
                        if (v.axis !== "y") {
                            if (!w.overflowed[1]) {
                                g._resetContentPosition.call(this);
                                if (v.axis === "x") {
                                    g._unbindEvents.call(this)
                                } else {
                                    if (v.axis === "yx" && w.overflowed[0]) {
                                        g._scrollTo.call(this, u, x[0].toString(), {
                                            dir: "y",
                                            dur: 0,
                                            overwrite: "none"
                                        })
                                    }
                                }
                            } else {
                                if (t[1].width() > t[1].parent().width()) {
                                    g._resetContentPosition.call(this)
                                } else {
                                    g._scrollTo.call(this, u, x[1].toString(), {
                                        dir: "x",
                                        dur: 0,
                                        overwrite: "none"
                                    })
                                }
                            }
                        }
                        g._autoUpdate.call(this)
                    }
                })
            }, scrollTo: function (s, r) {
                if (typeof s == "undefined" || s == null) {
                    return
                }
                var q = g._selector.call(this);
                return h(q).each(function () {
                    var v = h(this);
                    if (v.data(a)) {
                        var y = v.data(a),
                            x = y.opt,
                            w = {
                                trigger: "external",
                                scrollInertia: x.scrollInertia,
                                scrollEasing: "mcsEaseInOut",
                                moveDragger: false,
                                callbacks: true,
                                onStart: true,
                                onUpdate: true,
                                onComplete: true
                            },
                            t = h.extend(true, {}, w, r),
                            z = g._arr.call(this, s),
                            u = t.scrollInertia < 17 ? 17 : t.scrollInertia;
                        z[0] = g._to.call(this, z[0], "y");
                        z[1] = g._to.call(this, z[1], "x");
                        if (t.moveDragger) {
                            z[0] *= y.scrollRatio.y;
                            z[1] *= y.scrollRatio.x
                        }
                        t.dur = u;
                        setTimeout(function () {
                            if (z[0] !== null && typeof z[0] !== "undefined" && x.axis !== "x" && y.overflowed[0]) {
                                t.dir = "y";
                                t.overwrite = "all";
                                g._scrollTo.call(this, v, z[0].toString(), t)
                            }
                            if (z[1] !== null && typeof z[1] !== "undefined" && x.axis !== "y" && y.overflowed[1]) {
                                t.dir = "x";
                                t.overwrite = "none";
                                g._scrollTo.call(this, v, z[1].toString(), t)
                            }
                        }, 60)
                    }
                })
            }, stop: function () {
                var q = g._selector.call(this);
                return h(q).each(function () {
                    var r = h(this);
                    if (r.data(a)) {
                        g._stop.call(null, r)
                    }
                })
            }, disable: function (s) {
                var q = g._selector.call(this);
                return h(q).each(function () {
                    var r = h(this);
                    if (r.data(a)) {
                        var u = r.data(a),
                            t = u.opt;
                        g._autoUpdate.call(this, "remove");
                        g._unbindEvents.call(this);
                        if (s) {
                            g._resetContentPosition.call(this)
                        }
                        g._scrollbarVisibility.call(this, true);
                        r.addClass("mCS_disabled")
                    }
                })
            }, destroy: function () {
                var q = g._selector.call(this);
                return h(q).each(function () {
                    var t = h(this);
                    if (t.data(a)) {
                        var v = t.data(a),
                            u = v.opt,
                            r = h("#mCSB_" + v.idx),
                            s = h("#mCSB_" + v.idx + "_container"),
                            w = h(".mCSB_" + v.idx + "_scrollbar");
                        if (u.live) {
                            c(q)
                        }
                        g._autoUpdate.call(this, "remove");
                        g._unbindEvents.call(this);
                        g._resetContentPosition.call(this);
                        t.removeData(a);
                        g._delete.call(null, this.mcs);
                        w.remove();
                        r.replaceWith(s.contents());
                        t.removeClass(e + " _" + a + "_" + v.idx + " mCS-autoHide mCS-dir-rtl mCS_no_scrollbar mCS_disabled").addClass("mCS_destroyed")
                    }
                })
            }
        },
        g = {
            _selector: function () {
                return (typeof h(this) !== "object" || h(this).length < 1) ? l : this
            }, _theme: function (t) {
                var s = ["rounded", "rounded-dark", "rounded-dots", "rounded-dots-dark"],
                    r = ["rounded-dots", "rounded-dots-dark", "3d", "3d-dark", "3d-thick", "3d-thick-dark", "inset", "inset-dark", "inset-2", "inset-2-dark", "inset-3", "inset-3-dark"],
                    q = ["minimal", "minimal-dark"],
                    v = ["minimal", "minimal-dark"],
                    u = ["minimal", "minimal-dark"];
                t.autoDraggerLength = h.inArray(t.theme, s) > -1 ? false : t.autoDraggerLength;
                t.autoExpandScrollbar = h.inArray(t.theme, r) > -1 ? false : t.autoExpandScrollbar;
                t.scrollButtons.enable = h.inArray(t.theme, q) > -1 ? false : t.scrollButtons.enable;
                t.autoHideScrollbar = h.inArray(t.theme, v) > -1 ? true : t.autoHideScrollbar;
                t.scrollbarPosition = h.inArray(t.theme, u) > -1 ? "outside" : t.scrollbarPosition
            }, _findAxis: function (q) {
                return (q === "yx" || q === "xy" || q === "auto") ? "yx" : (q === "x" || q === "horizontal") ? "x" : "y"
            }, _findScrollButtonsType: function (q) {
                return (q === "stepped" || q === "pixels" || q === "step" || q === "click") ? "stepped" : "stepless"
            }, _pluginMarkup: function () {
                var z = h(this),
                    y = z.data(a),
                    s = y.opt,
                    u = s.autoExpandScrollbar ? " mCSB_scrollTools_onDrag_expand" : "",
                    C = ["<div id='mCSB_" + y.idx + "_scrollbar_vertical' class='mCSB_scrollTools mCSB_" + y.idx + "_scrollbar mCS-" + s.theme + " mCSB_scrollTools_vertical" + u + "'><div class='mCSB_draggerContainer'><div id='mCSB_" + y.idx + "_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>", "<div id='mCSB_" + y.idx + "_scrollbar_horizontal' class='mCSB_scrollTools mCSB_" + y.idx + "_scrollbar mCS-" + s.theme + " mCSB_scrollTools_horizontal" + u + "'><div class='mCSB_draggerContainer'><div id='mCSB_" + y.idx + "_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],
                    v = s.axis === "yx" ? "mCSB_vertical_horizontal" : s.axis === "x" ? "mCSB_horizontal" : "mCSB_vertical",
                    x = s.axis === "yx" ? C[0] + C[1] : s.axis === "x" ? C[1] : C[0],
                    w = s.axis === "yx" ? "<div id='mCSB_" + y.idx + "_container_wrapper' class='mCSB_container_wrapper' />" : "",
                    t = s.autoHideScrollbar ? " mCS-autoHide" : "",
                    q = (s.axis !== "x" && y.langDir === "rtl") ? " mCS-dir-rtl" : "";
                if (s.setWidth) {
                    z.css("width", s.setWidth)
                }
                if (s.setHeight) {
                    z.css("height", s.setHeight)
                }
                s.setLeft = (s.axis !== "y" && y.langDir === "rtl") ? "989999px" : s.setLeft;
                z.addClass(e + " _" + a + "_" + y.idx + t + q).wrapInner("<div id='mCSB_" + y.idx + "' class='mCustomScrollBox mCS-" + s.theme + " " + v + "'><div id='mCSB_" + y.idx + "_container' class='mCSB_container' style='position:relative; top:" + s.setTop + "; left:" + s.setLeft + ";' dir=" + y.langDir + " /></div>");
                var r = h("#mCSB_" + y.idx),
                    A = h("#mCSB_" + y.idx + "_container");
                if (s.axis !== "y" && !s.advanced.autoExpandHorizontalScroll) {
                    A.css("width", g._contentWidth(A.children()))
                }
                if (s.scrollbarPosition === "outside") {
                    if (z.css("position") === "static") {
                        z.css("position", "relative")
                    }
                    z.css("overflow", "visible");
                    r.addClass("mCSB_outside").after(x)
                } else {
                    r.addClass("mCSB_inside").append(x);
                    A.wrap(w)
                }
                g._scrollButtons.call(this);
                var B = [h("#mCSB_" + y.idx + "_dragger_vertical"), h("#mCSB_" + y.idx + "_dragger_horizontal")];
                B[0].css("min-height", B[0].height());
                B[1].css("min-width", B[1].width())
            }, _contentWidth: function (q) {
                return Math.max.apply(Math, q.map(function () {
                    return h(this).outerWidth(true)
                }).get())
            }, _expandContentHorizontally: function () {
                var r = h(this),
                    t = r.data(a),
                    s = t.opt,
                    q = h("#mCSB_" + t.idx + "_container");
                if (s.advanced.autoExpandHorizontalScroll && s.axis !== "y") {
                    q.css({
                        position: "absolute",
                        width: "auto"
                    }).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({
                        width: (Math.ceil(q[0].getBoundingClientRect().right + 0.4) - Math.floor(q[0].getBoundingClientRect().left)),
                        position: "relative"
                    }).unwrap()
                }
            }, _scrollButtons: function () {
                var t = h(this),
                    v = t.data(a),
                    u = v.opt,
                    r = h(".mCSB_" + v.idx + "_scrollbar:first"),
                    s = ["<a href='#' class='mCSB_buttonUp' oncontextmenu='return false;' />", "<a href='#' class='mCSB_buttonDown' oncontextmenu='return false;' />", "<a href='#' class='mCSB_buttonLeft' oncontextmenu='return false;' />", "<a href='#' class='mCSB_buttonRight' oncontextmenu='return false;' />"],
                    q = [(u.axis === "x" ? s[2] : s[0]), (u.axis === "x" ? s[3] : s[1]), s[2], s[3]];
                if (u.scrollButtons.enable) {
                    r.prepend(q[0]).append(q[1]).next(".mCSB_scrollTools").prepend(q[2]).append(q[3])
                }
            }, _maxHeight: function () {
                var u = h(this),
                    x = u.data(a),
                    w = x.opt,
                    s = h("#mCSB_" + x.idx),
                    r = u.css("max-height"),
                    t = r.indexOf("%") !== -1,
                    q = u.css("box-sizing");
                if (r !== "none") {
                    var v = t ? u.parent().height() * parseInt(r) / 100 : parseInt(r);
                    if (q === "border-box") {
                        v -= ((u.innerHeight() - u.height()) + (u.outerHeight() - u.innerHeight()))
                    }
                    s.css("max-height", Math.round(v))
                }
            }, _setDraggerLength: function () {
                var v = h(this),
                    t = v.data(a),
                    q = h("#mCSB_" + t.idx),
                    x = h("#mCSB_" + t.idx + "_container"),
                    z = [h("#mCSB_" + t.idx + "_dragger_vertical"), h("#mCSB_" + t.idx + "_dragger_horizontal")],
                    u = [q.height() / x.outerHeight(false), q.width() / x.outerWidth(false)],
                    r = [parseInt(z[0].css("min-height")), Math.round(u[0] * z[0].parent().height()), parseInt(z[1].css("min-width")), Math.round(u[1] * z[1].parent().width())],
                    s = j && (r[1] < r[0]) ? r[0] : r[1],
                    y = j && (r[3] < r[2]) ? r[2] : r[3];
                z[0].css({
                    height: s,
                    "max-height": (z[0].parent().height() - 10)
                }).find(".mCSB_dragger_bar").css({
                    "line-height": r[0] + "px"
                });
                z[1].css({
                    width: y,
                    "max-width": (z[1].parent().width() - 10)
                })
            }, _scrollRatio: function () {
                var u = h(this),
                    w = u.data(a),
                    r = h("#mCSB_" + w.idx),
                    s = h("#mCSB_" + w.idx + "_container"),
                    t = [h("#mCSB_" + w.idx + "_dragger_vertical"), h("#mCSB_" + w.idx + "_dragger_horizontal")],
                    v = [s.outerHeight(false) - r.height(), s.outerWidth(false) - r.width()],
                    q = [v[0] / (t[0].parent().height() - t[0].height()), v[1] / (t[1].parent().width() - t[1].width())];
                w.scrollRatio = {
                    y: q[0],
                    x: q[1]
                }
            }, _onDragClasses: function (s, u, r) {
                var t = r ? "mCSB_dragger_onDrag_expanded" : "",
                    q = ["mCSB_dragger_onDrag", "mCSB_scrollTools_onDrag"],
                    v = s.closest(".mCSB_scrollTools");
                if (u === "active") {
                    s.toggleClass(q[0] + " " + t);
                    v.toggleClass(q[1]);
                    s[0]._draggable = s[0]._draggable ? 0 : 1
                } else {
                    if (!s[0]._draggable) {
                        if (u === "hide") {
                            s.removeClass(q[0]);
                            v.removeClass(q[1])
                        } else {
                            s.addClass(q[0]);
                            v.addClass(q[1])
                        }
                    }
                }
            }, _overflowed: function () {
                var u = h(this),
                    v = u.data(a),
                    r = h("#mCSB_" + v.idx),
                    t = h("#mCSB_" + v.idx + "_container"),
                    s = v.overflowed == null ? t.height() : t.outerHeight(false),
                    q = v.overflowed == null ? t.width() : t.outerWidth(false);
                return [s > r.height(), q > r.width()]
            }, _resetContentPosition: function () {
                var u = h(this),
                    w = u.data(a),
                    v = w.opt,
                    r = h("#mCSB_" + w.idx),
                    s = h("#mCSB_" + w.idx + "_container"),
                    t = [h("#mCSB_" + w.idx + "_dragger_vertical"), h("#mCSB_" + w.idx + "_dragger_horizontal")];
                g._stop(u);
                if ((v.axis !== "x" && !w.overflowed[0]) || (v.axis === "y" && w.overflowed[0])) {
                    t[0].add(s).css("top", 0)
                }
                if ((v.axis !== "y" && !w.overflowed[1]) || (v.axis === "x" && w.overflowed[1])) {
                    var q = dx = 0;
                    if (w.langDir === "rtl") {
                        q = r.width() - s.outerWidth(false);
                        dx = Math.abs(q / w.scrollRatio.x)
                    }
                    s.css("left", q);
                    t[1].css("left", dx)
                }
            }, _bindEvents: function () {
                var s = h(this),
                    u = s.data(a),
                    t = u.opt;
                if (!u.bindEvents) {
                    g._draggable.call(this);
                    if (t.contentTouchScroll) {
                        g._contentDraggable.call(this)
                    }
                    if (t.mouseWheel.enable) {
                        function r() {
                            q = setTimeout(function () {
                                if (!h.event.special.mousewheel) {
                                    r()
                                } else {
                                    clearTimeout(q);
                                    g._mousewheel.call(s[0])
                                }
                            }, 1000)
                        }
                        var q;
                        r()
                    }
                    g._draggerRail.call(this);
                    g._wrapperScroll.call(this);
                    if (t.advanced.autoScrollOnFocus) {
                        g._focus.call(this)
                    }
                    if (t.scrollButtons.enable) {
                        g._buttons.call(this)
                    }
                    if (t.keyboard.enable) {
                        g._keyboard.call(this)
                    }
                    u.bindEvents = true
                }
            }, _unbindEvents: function () {
                var t = h(this),
                    u = t.data(a),
                    q = a + "_" + u.idx,
                    v = ".mCSB_" + u.idx + "_scrollbar",
                    s = h("#mCSB_" + u.idx + ",#mCSB_" + u.idx + "_container,#mCSB_" + u.idx + "_container_wrapper," + v + " .mCSB_draggerContainer,#mCSB_" + u.idx + "_dragger_vertical,#mCSB_" + u.idx + "_dragger_horizontal," + v + ">a"),
                    r = h("#mCSB_" + u.idx + "_container");
                if (u.bindEvents) {
                    h(n).unbind("." + q);
                    s.each(function () {
                        h(this).unbind("." + q)
                    });
                    clearTimeout(t[0]._focusTimeout);
                    g._delete.call(null, t[0]._focusTimeout);
                    clearTimeout(u.sequential.step);
                    g._delete.call(null, u.sequential.step);
                    clearTimeout(r[0].onCompleteTimeout);
                    g._delete.call(null, r[0].onCompleteTimeout);
                    u.bindEvents = false
                }
            }, _scrollbarVisibility: function (r) {
                var u = h(this),
                    w = u.data(a),
                    v = w.opt,
                    q = h("#mCSB_" + w.idx + "_container_wrapper"),
                    s = q.length ? q : h("#mCSB_" + w.idx + "_container"),
                    x = [h("#mCSB_" + w.idx + "_scrollbar_vertical"), h("#mCSB_" + w.idx + "_scrollbar_horizontal")],
                    t = [x[0].find(".mCSB_dragger"), x[1].find(".mCSB_dragger")];
                if (v.axis !== "x") {
                    if (w.overflowed[0] && !r) {
                        x[0].add(t[0]).add(x[0].children("a")).css("display", "block");
                        s.removeClass("mCS_no_scrollbar_y mCS_y_hidden")
                    } else {
                        if (v.alwaysShowScrollbar) {
                            if (v.alwaysShowScrollbar !== 2) {
                                t[0].add(x[0].children("a")).css("display", "none")
                            }
                            s.removeClass("mCS_y_hidden")
                        } else {
                            x[0].css("display", "none");
                            s.addClass("mCS_y_hidden")
                        }
                        s.addClass("mCS_no_scrollbar_y")
                    }
                }
                if (v.axis !== "y") {
                    if (w.overflowed[1] && !r) {
                        x[1].add(t[1]).add(x[1].children("a")).css("display", "block");
                        s.removeClass("mCS_no_scrollbar_x mCS_x_hidden")
                    } else {
                        if (v.alwaysShowScrollbar) {
                            if (v.alwaysShowScrollbar !== 2) {
                                t[1].add(x[1].children("a")).css("display", "none")
                            }
                            s.removeClass("mCS_x_hidden")
                        } else {
                            x[1].css("display", "none");
                            s.addClass("mCS_x_hidden")
                        }
                        s.addClass("mCS_no_scrollbar_x")
                    }
                }
                if (!w.overflowed[0] && !w.overflowed[1]) {
                    u.addClass("mCS_no_scrollbar")
                } else {
                    u.removeClass("mCS_no_scrollbar")
                }
            }, _coordinates: function (r) {
                var q = r.type;
                switch (q) {
                    case "pointerdown":
                    case "MSPointerDown":
                    case "pointermove":
                    case "MSPointerMove":
                    case "pointerup":
                    case "MSPointerUp":
                        return [r.originalEvent.pageY, r.originalEvent.pageX];
                        break;
                    case "touchstart":
                    case "touchmove":
                    case "touchend":
                        var s = r.originalEvent.touches[0] || r.originalEvent.changedTouches[0];
                        return [s.pageY, s.pageX];
                        break;
                    default:
                        return [r.pageY, r.pageX]
                }
            }, _draggable: function () {
                var v = h(this),
                    t = v.data(a),
                    q = t.opt,
                    s = a + "_" + t.idx,
                    u = ["mCSB_" + t.idx + "_dragger_vertical", "mCSB_" + t.idx + "_dragger_horizontal"],
                    w = h("#mCSB_" + t.idx + "_container"),
                    x = h("#" + u[0] + ",#" + u[1]),
                    B, z, A;
                x.bind("mousedown." + s + " touchstart." + s + " pointerdown." + s + " MSPointerDown." + s, function (F) {
                    F.stopImmediatePropagation();
                    F.preventDefault();
                    if (!g._mouseBtnLeft(F)) {
                        return
                    }
                    o = true;
                    if (j) {
                        n.onselectstart = function () {
                            return false
                        }
                    }
                    y(false);
                    g._stop(v);
                    B = h(this);
                    var G = B.offset(),
                        H = g._coordinates(F)[0] - G.top,
                        C = g._coordinates(F)[1] - G.left,
                        E = B.height() + G.top,
                        D = B.width() + G.left;
                    if (H < E && H > 0 && C < D && C > 0) {
                        z = H;
                        A = C
                    }
                    g._onDragClasses(B, "active", q.autoExpandScrollbar)
                }).bind("touchmove." + s, function (D) {
                    D.stopImmediatePropagation();
                    D.preventDefault();
                    var E = B.offset(),
                        F = g._coordinates(D)[0] - E.top,
                        C = g._coordinates(D)[1] - E.left;
                    r(z, A, F, C)
                });
                h(n).bind("mousemove." + s + " pointermove." + s + " MSPointerMove." + s, function (D) {
                    if (B) {
                        var E = B.offset(),
                            F = g._coordinates(D)[0] - E.top,
                            C = g._coordinates(D)[1] - E.left;
                        if (z === F) {
                            return
                        }
                        r(z, A, F, C)
                    }
                }).add(x).bind("mouseup." + s + " touchend." + s + " pointerup." + s + " MSPointerUp." + s, function (C) {
                    if (B) {
                        g._onDragClasses(B, "active", q.autoExpandScrollbar);
                        B = null
                    }
                    o = false;
                    if (j) {
                        n.onselectstart = null
                    }
                    y(true)
                });

                function y(C) {
                    var D = w.find("iframe");
                    if (!D.length) {
                        return
                    }
                    var E = !C ? "none" : "auto";
                    D.css("pointer-events", E)
                }

                function r(E, F, H, C) {
                    w[0].idleTimer = q.scrollInertia < 233 ? 250 : 0;
                    if (B.attr("id") === u[1]) {
                        var D = "x",
                            G = ((B[0].offsetLeft - F) + C) * t.scrollRatio.x
                    } else {
                        var D = "y",
                            G = ((B[0].offsetTop - E) + H) * t.scrollRatio.y
                    }
                    g._scrollTo(v, G.toString(), {
                        dir: D,
                        drag: true
                    })
                }
            }, _contentDraggable: function () {
                var z = h(this),
                    L = z.data(a),
                    J = L.opt,
                    G = a + "_" + L.idx,
                    w = h("#mCSB_" + L.idx),
                    A = h("#mCSB_" + L.idx + "_container"),
                    x = [h("#mCSB_" + L.idx + "_dragger_vertical"), h("#mCSB_" + L.idx + "_dragger_horizontal")],
                    F, H, M, N, D = [],
                    E = [],
                    I, B, v, u, K, y, s = 0,
                    r, t = J.axis === "yx" ? "none" : "all";
                A.bind("touchstart." + G + " pointerdown." + G + " MSPointerDown." + G, function (O) {
                    if (!g._pointerTouch(O) || o) {
                        return
                    }
                    var P = A.offset();
                    F = g._coordinates(O)[0] - P.top;
                    H = g._coordinates(O)[1] - P.left
                }).bind("touchmove." + G + " pointermove." + G + " MSPointerMove." + G, function (R) {
                    if (!g._pointerTouch(R) || o) {
                        return
                    }
                    R.stopImmediatePropagation();
                    B = g._getTime();
                    var Q = w.offset(),
                        T = g._coordinates(R)[0] - Q.top,
                        V = g._coordinates(R)[1] - Q.left,
                        S = "mcsLinearOut";
                    D.push(T);
                    E.push(V);
                    if (L.overflowed[0]) {
                        var P = x[0].parent().height() - x[0].height(),
                            U = ((F - T) > 0 && (T - F) > -(P * L.scrollRatio.y))
                    }
                    if (L.overflowed[1]) {
                        var O = x[1].parent().width() - x[1].width(),
                            W = ((H - V) > 0 && (V - H) > -(O * L.scrollRatio.x))
                    }
                    if (U || W) {
                        R.preventDefault()
                    }
                    y = J.axis === "yx" ? [(F - T), (H - V)] : J.axis === "x" ? [null, (H - V)] : [(F - T), null];
                    A[0].idleTimer = 250;
                    if (L.overflowed[0]) {
                        C(y[0], s, S, "y", "all", true)
                    }
                    if (L.overflowed[1]) {
                        C(y[1], s, S, "x", t, true)
                    }
                });
                w.bind("touchstart." + G + " pointerdown." + G + " MSPointerDown." + G, function (O) {
                    if (!g._pointerTouch(O) || o) {
                        return
                    }
                    O.stopImmediatePropagation();
                    g._stop(z);
                    I = g._getTime();
                    var P = w.offset();
                    M = g._coordinates(O)[0] - P.top;
                    N = g._coordinates(O)[1] - P.left;
                    D = [];
                    E = []
                }).bind("touchend." + G + " pointerup." + G + " MSPointerUp." + G, function (Q) {
                    if (!g._pointerTouch(Q) || o) {
                        return
                    }
                    Q.stopImmediatePropagation();
                    v = g._getTime();
                    var O = w.offset(),
                        U = g._coordinates(Q)[0] - O.top,
                        W = g._coordinates(Q)[1] - O.left;
                    if ((v - B) > 30) {
                        return
                    }
                    K = 1000 / (v - I);
                    var R = "mcsEaseOut",
                        S = K < 2.5,
                        X = S ? [D[D.length - 2], E[E.length - 2]] : [0, 0];
                    u = S ? [(U - X[0]), (W - X[1])] : [U - M, W - N];
                    var P = [Math.abs(u[0]), Math.abs(u[1])];
                    K = S ? [Math.abs(u[0] / 4), Math.abs(u[1] / 4)] : [K, K];
                    var V = [Math.abs(A[0].offsetTop) - (u[0] * q((P[0] / K[0]), K[0])), Math.abs(A[0].offsetLeft) - (u[1] * q((P[1] / K[1]), K[1]))];
                    y = J.axis === "yx" ? [V[0], V[1]] : J.axis === "x" ? [null, V[1]] : [V[0], null];
                    r = [(P[0] * 4) + J.scrollInertia, (P[1] * 4) + J.scrollInertia];
                    var T = parseInt(J.contentTouchScroll) || 0;
                    y[0] = P[0] > T ? y[0] : 0;
                    y[1] = P[1] > T ? y[1] : 0;
                    if (L.overflowed[0]) {
                        C(y[0], r[0], R, "y", t, false)
                    }
                    if (L.overflowed[1]) {
                        C(y[1], r[1], R, "x", t, false)
                    }
                });

                function q(Q, O) {
                    var P = [O * 1.5, O * 2, O / 1.5, O / 2];
                    if (Q > 90) {
                        return O > 4 ? P[0] : P[3]
                    } else {
                        if (Q > 60) {
                            return O > 3 ? P[3] : P[2]
                        } else {
                            if (Q > 30) {
                                return O > 8 ? P[1] : O > 6 ? P[0] : O > 4 ? O : P[2]
                            } else {
                                return O > 8 ? O : P[3]
                            }
                        }
                    }
                }

                function C(Q, S, T, P, O, R) {
                    if (!Q) {
                        return
                    }
                    g._scrollTo(z, Q.toString(), {
                        dur: S,
                        scrollEasing: T,
                        dir: P,
                        overwrite: O,
                        drag: R
                    })
                }
            }, _mousewheel: function () {
                var t = h(this),
                    v = t.data(a),
                    u = v.opt,
                    r = a + "_" + v.idx,
                    q = h("#mCSB_" + v.idx),
                    s = [h("#mCSB_" + v.idx + "_dragger_vertical"), h("#mCSB_" + v.idx + "_dragger_horizontal")];
                q.bind("mousewheel." + r, function (A, E) {
                    g._stop(t);
                    if (g._disableMousewheel(t, A.target)) {
                        return
                    }
                    var C = u.mouseWheel.deltaFactor !== "auto" ? parseInt(u.mouseWheel.deltaFactor) : (j && A.deltaFactor < 100) ? 100 : A.deltaFactor < 40 ? 40 : A.deltaFactor || 100;
                    if (u.axis === "x" || u.mouseWheel.axis === "x") {
                        var x = "x",
                            D = [Math.round(C * v.scrollRatio.x), parseInt(u.mouseWheel.scrollAmount)],
                            z = u.mouseWheel.scrollAmount !== "auto" ? D[1] : D[0] >= q.width() ? q.width() * 0.9 : D[0],
                            F = Math.abs(h("#mCSB_" + v.idx + "_container")[0].offsetLeft),
                            B = s[1][0].offsetLeft,
                            y = s[1].parent().width() - s[1].width(),
                            w = A.deltaX || A.deltaY || E
                    } else {
                        var x = "y",
                            D = [Math.round(C * v.scrollRatio.y), parseInt(u.mouseWheel.scrollAmount)],
                            z = u.mouseWheel.scrollAmount !== "auto" ? D[1] : D[0] >= q.height() ? q.height() * 0.9 : D[0],
                            F = Math.abs(h("#mCSB_" + v.idx + "_container")[0].offsetTop),
                            B = s[0][0].offsetTop,
                            y = s[0].parent().height() - s[0].height(),
                            w = A.deltaY || E
                    } if ((x === "y" && !v.overflowed[0]) || (x === "x" && !v.overflowed[1])) {
                        return
                    }
                    if (u.mouseWheel.invert) {
                        w = -w
                    }
                    if (u.mouseWheel.normalizeDelta) {
                        w = w < 0 ? -1 : 1
                    }
                    if ((w > 0 && B !== 0) || (w < 0 && B !== y) || u.mouseWheel.preventDefault) {
                        A.stopImmediatePropagation();
                        A.preventDefault()
                    }
                    g._scrollTo(t, (F - (w * z)).toString(), {
                        dir: x
                    })
                })
            }, _disableMousewheel: function (s, u) {
                var q = u.nodeName.toLowerCase(),
                    r = s.data(a).opt.mouseWheel.disableOver,
                    t = ["select", "textarea"];
                return h.inArray(q, r) > -1 && !(h.inArray(q, t) > -1 && !h(u).is(":focus"))
            }, _draggerRail: function () {
                var t = h(this),
                    u = t.data(a),
                    r = a + "_" + u.idx,
                    s = h("#mCSB_" + u.idx + "_container"),
                    v = s.parent(),
                    q = h(".mCSB_" + u.idx + "_scrollbar .mCSB_draggerContainer");
                q.bind("touchstart." + r + " pointerdown." + r + " MSPointerDown." + r, function (w) {
                    o = true
                }).bind("touchend." + r + " pointerup." + r + " MSPointerUp." + r, function (w) {
                    o = false
                }).bind("click." + r, function (A) {
                    if (h(A.target).hasClass("mCSB_draggerContainer") || h(A.target).hasClass("mCSB_draggerRail")) {
                        g._stop(t);
                        var x = h(this),
                            z = x.find(".mCSB_dragger");
                        if (x.parent(".mCSB_scrollTools_horizontal").length > 0) {
                            if (!u.overflowed[1]) {
                                return
                            }
                            var w = "x",
                                y = A.pageX > z.offset().left ? -1 : 1,
                                B = Math.abs(s[0].offsetLeft) - (y * (v.width() * 0.9))
                        } else {
                            if (!u.overflowed[0]) {
                                return
                            }
                            var w = "y",
                                y = A.pageY > z.offset().top ? -1 : 1,
                                B = Math.abs(s[0].offsetTop) - (y * (v.height() * 0.9))
                        }
                        g._scrollTo(t, B.toString(), {
                            dir: w,
                            scrollEasing: "mcsEaseInOut"
                        })
                    }
                })
            }, _focus: function () {
                var s = h(this),
                    u = s.data(a),
                    t = u.opt,
                    q = a + "_" + u.idx,
                    r = h("#mCSB_" + u.idx + "_container"),
                    v = r.parent();
                r.bind("focusin." + q, function (y) {
                    var x = h(n.activeElement),
                        z = r.find(".mCustomScrollBox").length,
                        w = 0;
                    if (!x.is(t.advanced.autoScrollOnFocus)) {
                        return
                    }
                    g._stop(s);
                    clearTimeout(s[0]._focusTimeout);
                    s[0]._focusTimer = z ? (w + 17) * z : 0;
                    s[0]._focusTimeout = setTimeout(function () {
                        var D = [x.offset().top - r.offset().top, x.offset().left - r.offset().left],
                            C = [r[0].offsetTop, r[0].offsetLeft],
                            A = [(C[0] + D[0] >= 0 && C[0] + D[0] < v.height() - x.outerHeight(false)), (C[1] + D[1] >= 0 && C[0] + D[1] < v.width() - x.outerWidth(false))],
                            B = (t.axis === "yx" && !A[0] && !A[1]) ? "none" : "all";
                        if (t.axis !== "x" && !A[0]) {
                            g._scrollTo(s, D[0].toString(), {
                                dir: "y",
                                scrollEasing: "mcsEaseInOut",
                                overwrite: B,
                                dur: w
                            })
                        }
                        if (t.axis !== "y" && !A[1]) {
                            g._scrollTo(s, D[1].toString(), {
                                dir: "x",
                                scrollEasing: "mcsEaseInOut",
                                overwrite: B,
                                dur: w
                            })
                        }
                    }, s[0]._focusTimer)
                })
            }, _wrapperScroll: function () {
                var r = h(this),
                    s = r.data(a),
                    q = a + "_" + s.idx,
                    t = h("#mCSB_" + s.idx + "_container").parent();
                t.bind("scroll." + q, function (u) {
                    t.scrollTop(0).scrollLeft(0)
                })
            }, _buttons: function () {
                var v = h(this),
                    x = v.data(a),
                    w = x.opt,
                    q = x.sequential,
                    s = a + "_" + x.idx,
                    u = h("#mCSB_" + x.idx + "_container"),
                    t = ".mCSB_" + x.idx + "_scrollbar",
                    r = h(t + ">a");
                r.bind("mousedown." + s + " touchstart." + s + " pointerdown." + s + " MSPointerDown." + s + " mouseup." + s + " touchend." + s + " pointerup." + s + " MSPointerUp." + s + " mouseout." + s + " pointerout." + s + " MSPointerOut." + s + " click." + s, function (A) {
                    A.preventDefault();
                    if (!g._mouseBtnLeft(A)) {
                        return
                    }
                    var z = h(this).attr("class");
                    q.type = w.scrollButtons.scrollType;
                    switch (A.type) {
                        case "mousedown":
                        case "touchstart":
                        case "pointerdown":
                        case "MSPointerDown":
                            if (q.type === "stepped") {
                                return
                            }
                            o = true;
                            x.tweenRunning = false;
                            y("on", z);
                            break;
                        case "mouseup":
                        case "touchend":
                        case "pointerup":
                        case "MSPointerUp":
                        case "mouseout":
                        case "pointerout":
                        case "MSPointerOut":
                            if (q.type === "stepped") {
                                return
                            }
                            o = false;
                            if (q.dir) {
                                y("off", z)
                            }
                            break;
                        case "click":
                            if (q.type !== "stepped" || x.tweenRunning) {
                                return
                            }
                            y("on", z);
                            break
                    }

                    function y(B, C) {
                        q.scrollAmount = w.snapAmount || w.scrollButtons.scrollAmount;
                        g._sequentialScroll.call(this, v, B, C)
                    }
                })
            }, _keyboard: function () {
                var v = h(this),
                    u = v.data(a),
                    r = u.opt,
                    y = u.sequential,
                    t = a + "_" + u.idx,
                    s = h("#mCSB_" + u.idx),
                    x = h("#mCSB_" + u.idx + "_container"),
                    q = x.parent(),
                    w = "input,textarea,select,datalist,keygen,[contenteditable='true']";
                s.attr("tabindex", "0").bind("blur." + t + " keydown." + t + " keyup." + t, function (E) {
                    switch (E.type) {
                        case "blur":
                            if (u.tweenRunning && y.dir) {
                                z("off", null)
                            }
                            break;
                        case "keydown":
                        case "keyup":
                            var B = E.keyCode ? E.keyCode : E.which,
                                C = "on";
                            if ((r.axis !== "x" && (B === 38 || B === 40)) || (r.axis !== "y" && (B === 37 || B === 39))) {
                                if (((B === 38 || B === 40) && !u.overflowed[0]) || ((B === 37 || B === 39) && !u.overflowed[1])) {
                                    return
                                }
                                if (E.type === "keyup") {
                                    C = "off"
                                }
                                if (!h(n.activeElement).is(w)) {
                                    E.preventDefault();
                                    E.stopImmediatePropagation();
                                    z(C, B)
                                }
                            } else {
                                if (B === 33 || B === 34) {
                                    if (u.overflowed[0] || u.overflowed[1]) {
                                        E.preventDefault();
                                        E.stopImmediatePropagation()
                                    }
                                    if (E.type === "keyup") {
                                        g._stop(v);
                                        var D = B === 34 ? -1 : 1;
                                        if (r.axis === "x" || (r.axis === "yx" && u.overflowed[1] && !u.overflowed[0])) {
                                            var A = "x",
                                                F = Math.abs(x[0].offsetLeft) - (D * (q.width() * 0.9))
                                        } else {
                                            var A = "y",
                                                F = Math.abs(x[0].offsetTop) - (D * (q.height() * 0.9))
                                        }
                                        g._scrollTo(v, F.toString(), {
                                            dir: A,
                                            scrollEasing: "mcsEaseInOut"
                                        })
                                    }
                                } else {
                                    if (B === 35 || B === 36) {
                                        if (!h(n.activeElement).is(w)) {
                                            if (u.overflowed[0] || u.overflowed[1]) {
                                                E.preventDefault();
                                                E.stopImmediatePropagation()
                                            }
                                            if (E.type === "keyup") {
                                                if (r.axis === "x" || (r.axis === "yx" && u.overflowed[1] && !u.overflowed[0])) {
                                                    var A = "x",
                                                        F = B === 35 ? Math.abs(q.width() - x.outerWidth(false)) : 0
                                                } else {
                                                    var A = "y",
                                                        F = B === 35 ? Math.abs(q.height() - x.outerHeight(false)) : 0
                                                }
                                                g._scrollTo(v, F.toString(), {
                                                    dir: A,
                                                    scrollEasing: "mcsEaseInOut"
                                                })
                                            }
                                        }
                                    }
                                }
                            }
                            break
                    }

                    function z(G, H) {
                        y.type = r.keyboard.scrollType;
                        y.scrollAmount = r.snapAmount || r.keyboard.scrollAmount;
                        if (y.type === "stepped" && u.tweenRunning) {
                            return
                        }
                        g._sequentialScroll.call(this, v, G, H)
                    }
                })
            }, _sequentialScroll: function (s, v, t) {
                var x = s.data(a),
                    r = x.opt,
                    z = x.sequential,
                    y = h("#mCSB_" + x.idx + "_container"),
                    q = z.type === "stepped" ? true : false;
                switch (v) {
                    case "on":
                        z.dir = [(t === "mCSB_buttonRight" || t === "mCSB_buttonLeft" || t === 39 || t === 37 ? "x" : "y"), (t === "mCSB_buttonUp" || t === "mCSB_buttonLeft" || t === 38 || t === 37 ? -1 : 1)];
                        g._stop(s);
                        if (g._isNumeric(t) && z.type === "stepped") {
                            return
                        }
                        u(q);
                        break;
                    case "off":
                        w();
                        if (q || (x.tweenRunning && z.dir)) {
                            u(true)
                        }
                        break
                }

                function u(A) {
                    var G = z.type !== "stepped",
                        K = !A ? 1000 / 60 : G ? r.scrollInertia / 1.5 : r.scrollInertia,
                        C = !A ? 2.5 : G ? 7.5 : 40,
                        J = [Math.abs(y[0].offsetTop), Math.abs(y[0].offsetLeft)],
                        F = [x.scrollRatio.y > 10 ? 10 : x.scrollRatio.y, x.scrollRatio.x > 10 ? 10 : x.scrollRatio.x],
                        D = z.dir[0] === "x" ? J[1] + (z.dir[1] * (F[1] * C)) : J[0] + (z.dir[1] * (F[0] * C)),
                        I = z.dir[0] === "x" ? J[1] + (z.dir[1] * parseInt(z.scrollAmount)) : J[0] + (z.dir[1] * parseInt(z.scrollAmount)),
                        H = z.scrollAmount !== "auto" ? I : D,
                        E = !A ? "mcsLinear" : G ? "mcsLinearOut" : "mcsEaseInOut",
                        B = !A ? false : true;
                    if (A && K < 17) {
                        H = z.dir[0] === "x" ? J[1] : J[0]
                    }
                    g._scrollTo(s, H.toString(), {
                        dir: z.dir[0],
                        scrollEasing: E,
                        dur: K,
                        onComplete: B
                    });
                    if (A) {
                        z.dir = false;
                        return
                    }
                    clearTimeout(z.step);
                    z.step = setTimeout(function () {
                        u()
                    }, K)
                }

                function w() {
                    clearTimeout(z.step);
                    g._stop(s)
                }
            }, _arr: function (s) {
                var r = h(this).data(a).opt,
                    q = [];
                if (typeof s === "function") {
                    s = s()
                }
                if (!(s instanceof Array)) {
                    q[0] = s.y ? s.y : s.x || r.axis === "x" ? null : s;
                    q[1] = s.x ? s.x : s.y || r.axis === "y" ? null : s
                } else {
                    q = s.length > 1 ? [s[0], s[1]] : r.axis === "x" ? [null, s[0]] : [s[0], null]
                } if (typeof q[0] === "function") {
                    q[0] = q[0]()
                }
                if (typeof q[1] === "function") {
                    q[1] = q[1]()
                }
                return q
            }, _to: function (v, w) {
                if (v == null || typeof v == "undefined") {
                    return
                }
                var C = h(this),
                    B = C.data(a),
                    u = B.opt,
                    D = h("#mCSB_" + B.idx + "_container"),
                    r = D.parent(),
                    F = typeof v;
                if (!w) {
                    w = u.axis === "x" ? "x" : "y"
                }
                var q = w === "x" ? D.outerWidth(false) : D.outerHeight(false),
                    x = w === "x" ? D.offset().left : D.offset().top,
                    E = w === "x" ? D[0].offsetLeft : D[0].offsetTop,
                    z = w === "x" ? "left" : "top";
                switch (F) {
                    case "function":
                        return v();
                        break;
                    case "object":
                        if (v.nodeType) {
                            var A = w === "x" ? h(v).offset().left : h(v).offset().top
                        } else {
                            if (v.jquery) {
                                if (!v.length) {
                                    return
                                }
                                var A = w === "x" ? v.offset().left : v.offset().top
                            }
                        }
                        return A - x;
                        break;
                    case "string":
                    case "number":
                        if (g._isNumeric.call(null, v)) {
                            return Math.abs(v)
                        } else {
                            if (v.indexOf("%") !== -1) {
                                return Math.abs(q * parseInt(v) / 100)
                            } else {
                                if (v.indexOf("-=") !== -1) {
                                    return Math.abs(E - parseInt(v.split("-=")[1]))
                                } else {
                                    if (v.indexOf("+=") !== -1) {
                                        var s = (E + parseInt(v.split("+=")[1]));
                                        return s >= 0 ? 0 : Math.abs(s)
                                    } else {
                                        if (v.indexOf("px") !== -1 && g._isNumeric.call(null, v.split("px")[0])) {
                                            return Math.abs(v.split("px")[0])
                                        } else {
                                            if (v === "top" || v === "left") {
                                                return 0
                                            } else {
                                                if (v === "bottom") {
                                                    return Math.abs(r.height() - D.outerHeight(false))
                                                } else {
                                                    if (v === "right") {
                                                        return Math.abs(r.width() - D.outerWidth(false))
                                                    } else {
                                                        if (v === "first" || v === "last") {
                                                            var y = D.find(":" + v),
                                                                A = w === "x" ? h(y).offset().left : h(y).offset().top;
                                                            return A - x
                                                        } else {
                                                            if (h(v).length) {
                                                                var A = w === "x" ? h(v).offset().left : h(v).offset().top;
                                                                return A - x
                                                            } else {
                                                                D.css(z, v);
                                                                b.update.call(null, C[0]);
                                                                return
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        break
                }
            }, _autoUpdate: function (r) {
                var u = h(this),
                    G = u.data(a),
                    A = G.opt,
                    w = h("#mCSB_" + G.idx + "_container");
                if (r) {
                    clearTimeout(w[0].autoUpdate);
                    g._delete.call(null, w[0].autoUpdate);
                    return
                }
                var t = w.parent(),
                    q = [h("#mCSB_" + G.idx + "_scrollbar_vertical"), h("#mCSB_" + G.idx + "_scrollbar_horizontal")],
                    E = function () {
                        return [q[0].is(":visible") ? q[0].outerHeight(true) : 0, q[1].is(":visible") ? q[1].outerWidth(true) : 0]
                    },
                    F = z(),
                    y, v = [w.outerHeight(false), w.outerWidth(false), t.height(), t.width(), E()[0], E()[1]],
                    I, C = H(),
                    x;
                D();

                function D() {
                    clearTimeout(w[0].autoUpdate);
                    w[0].autoUpdate = setTimeout(function () {
                        if (A.advanced.updateOnSelectorChange) {
                            y = z();
                            if (y !== F) {
                                s();
                                F = y;
                                return
                            }
                        }
                        if (A.advanced.updateOnContentResize) {
                            I = [w.outerHeight(false), w.outerWidth(false), t.height(), t.width(), E()[0], E()[1]];
                            if (I[0] !== v[0] || I[1] !== v[1] || I[2] !== v[2] || I[3] !== v[3] || I[4] !== v[4] || I[5] !== v[5]) {
                                s();
                                v = I
                            }
                        }
                        if (A.advanced.updateOnImageLoad) {
                            x = H();
                            if (x !== C) {
                                w.find("img").each(function () {
                                    B(this.src)
                                });
                                C = x
                            }
                        }
                        if (A.advanced.updateOnSelectorChange || A.advanced.updateOnContentResize || A.advanced.updateOnImageLoad) {
                            D()
                        }
                    }, 60)
                }

                function H() {
                    var J = 0;
                    if (A.advanced.updateOnImageLoad) {
                        J = w.find("img").length
                    }
                    return J
                }

                function B(M) {
                    var J = new Image();

                    function L(N, O) {
                        return function () {
                            return O.apply(N, arguments)
                        }
                    }

                    function K() {
                        this.onload = null;
                        s()
                    }
                    J.onload = L(J, K);
                    J.src = M
                }

                function z() {
                    if (A.advanced.updateOnSelectorChange === true) {
                        A.advanced.updateOnSelectorChange = "*"
                    }
                    var J = 0,
                        K = w.find(A.advanced.updateOnSelectorChange);
                    if (A.advanced.updateOnSelectorChange && K.length > 0) {
                        K.each(function () {
                            J += h(this).height() + h(this).width()
                        })
                    }
                    return J
                }

                function s() {
                    clearTimeout(w[0].autoUpdate);
                    b.update.call(null, u[0])
                }
            }, _snapAmount: function (s, q, r) {
                return (Math.round(s / q) * q - r)
            }, _stop: function (q) {
                var s = q.data(a),
                    r = h("#mCSB_" + s.idx + "_container,#mCSB_" + s.idx + "_container_wrapper,#mCSB_" + s.idx + "_dragger_vertical,#mCSB_" + s.idx + "_dragger_horizontal");
                r.each(function () {
                    g._stopTween.call(this)
                })
            }, _scrollTo: function (r, t, v) {
                var J = r.data(a),
                    F = J.opt,
                    E = {
                        trigger: "internal",
                        dir: "y",
                        scrollEasing: "mcsEaseOut",
                        drag: false,
                        dur: F.scrollInertia,
                        overwrite: "all",
                        callbacks: true,
                        onStart: true,
                        onUpdate: true,
                        onComplete: true
                    },
                    v = h.extend(E, v),
                    H = [v.dur, (v.drag ? 0 : v.dur)],
                    w = h("#mCSB_" + J.idx),
                    C = h("#mCSB_" + J.idx + "_container"),
                    L = F.callbacks.onTotalScrollOffset ? g._arr.call(r, F.callbacks.onTotalScrollOffset) : [0, 0],
                    q = F.callbacks.onTotalScrollBackOffset ? g._arr.call(r, F.callbacks.onTotalScrollBackOffset) : [0, 0];
                J.trigger = v.trigger;
                if (F.snapAmount) {
                    t = g._snapAmount(t, F.snapAmount, F.snapOffset)
                }
                switch (v.dir) {
                    case "x":
                        var y = h("#mCSB_" + J.idx + "_dragger_horizontal"),
                            A = "left",
                            D = C[0].offsetLeft,
                            I = [w.width() - C.outerWidth(false), y.parent().width() - y.width()],
                            s = [t, (t / J.scrollRatio.x)],
                            M = L[1],
                            K = q[1],
                            B = M > 0 ? M / J.scrollRatio.x : 0,
                            x = K > 0 ? K / J.scrollRatio.x : 0;
                        break;
                    case "y":
                        var y = h("#mCSB_" + J.idx + "_dragger_vertical"),
                            A = "top",
                            D = C[0].offsetTop,
                            I = [w.height() - C.outerHeight(false), y.parent().height() - y.height()],
                            s = [t, (t / J.scrollRatio.y)],
                            M = L[0],
                            K = q[0],
                            B = M > 0 ? M / J.scrollRatio.y : 0,
                            x = K > 0 ? K / J.scrollRatio.y : 0;
                        break
                }
                if (s[1] < 0) {
                    s = [0, 0]
                } else {
                    if (s[1] >= I[1]) {
                        s = [I[0], I[1]]
                    } else {
                        s[0] = -s[0]
                    }
                }
                clearTimeout(C[0].onCompleteTimeout);
                if (!J.tweenRunning && ((D === 0 && s[0] >= 0) || (D === I[0] && s[0] <= I[0]))) {
                    return
                }
                g._tweenTo.call(null, y[0], A, Math.round(s[1]), H[1], v.scrollEasing);
                g._tweenTo.call(null, C[0], A, Math.round(s[0]), H[0], v.scrollEasing, v.overwrite, {
                    onStart: function () {
                        if (v.callbacks && v.onStart && !J.tweenRunning) {
                            if (u("onScrollStart")) {
                                G();
                                F.callbacks.onScrollStart.call(r[0])
                            }
                            J.tweenRunning = true;
                            g._onDragClasses(y);
                            J.cbOffsets = z()
                        }
                    }, onUpdate: function () {
                        if (v.callbacks && v.onUpdate) {
                            if (u("whileScrolling")) {
                                G();
                                F.callbacks.whileScrolling.call(r[0])
                            }
                        }
                    }, onComplete: function () {
                        if (v.callbacks && v.onComplete) {
                            if (F.axis === "yx") {
                                clearTimeout(C[0].onCompleteTimeout)
                            }
                            var N = C[0].idleTimer || 0;
                            C[0].onCompleteTimeout = setTimeout(function () {
                                if (u("onScroll")) {
                                    G();
                                    F.callbacks.onScroll.call(r[0])
                                }
                                if (u("onTotalScroll") && s[1] >= I[1] - B && J.cbOffsets[0]) {
                                    G();
                                    F.callbacks.onTotalScroll.call(r[0])
                                }
                                if (u("onTotalScrollBack") && s[1] <= x && J.cbOffsets[1]) {
                                    G();
                                    F.callbacks.onTotalScrollBack.call(r[0])
                                }
                                J.tweenRunning = false;
                                C[0].idleTimer = 0;
                                g._onDragClasses(y, "hide")
                            }, N)
                        }
                    }
                });

                function u(N) {
                    return J && F.callbacks[N] && typeof F.callbacks[N] === "function"
                }

                function z() {
                    return [F.callbacks.alwaysTriggerOffsets || D >= I[0] + M, F.callbacks.alwaysTriggerOffsets || D <= -K]
                }

                function G() {
                    var P = [C[0].offsetTop, C[0].offsetLeft],
                        Q = [y[0].offsetTop, y[0].offsetLeft],
                        N = [C.outerHeight(false), C.outerWidth(false)],
                        O = [w.height(), w.width()];
                    r[0].mcs = {
                        content: C,
                        top: P[0],
                        left: P[1],
                        draggerTop: Q[0],
                        draggerLeft: Q[1],
                        topPct: Math.round((100 * Math.abs(P[0])) / (Math.abs(N[0]) - O[0])),
                        leftPct: Math.round((100 * Math.abs(P[1])) / (Math.abs(N[1]) - O[1])),
                        direction: v.dir
                    }
                }
            }, _tweenTo: function (s, v, t, r, B, u, K) {
                var K = K || {},
                    H = K.onStart || function () {},
                    C = K.onUpdate || function () {},
                    I = K.onComplete || function () {},
                    A = g._getTime(),
                    y, w = 0,
                    E = s.offsetTop,
                    F = s.style;
                if (v === "left") {
                    E = s.offsetLeft
                }
                var z = t - E;
                s._mcsstop = 0;
                if (u !== "none") {
                    D()
                }
                q();

                function J() {
                    if (s._mcsstop) {
                        return
                    }
                    if (!w) {
                        H.call()
                    }
                    w = g._getTime() - A;
                    G();
                    if (w >= s._mcstime) {
                        s._mcstime = (w > s._mcstime) ? w + y - (w - s._mcstime) : w + y - 1;
                        if (s._mcstime < w + 1) {
                            s._mcstime = w + 1
                        }
                    }
                    if (s._mcstime < r) {
                        s._mcsid = _request(J)
                    } else {
                        I.call()
                    }
                }

                function G() {
                    if (r > 0) {
                        s._mcscurrVal = x(s._mcstime, E, z, r, B);
                        F[v] = Math.round(s._mcscurrVal) + "px"
                    } else {
                        F[v] = t + "px"
                    }
                    C.call()
                }

                function q() {
                    y = 1000 / 60;
                    s._mcstime = w + y;
                    _request = (!m.requestAnimationFrame) ? function (L) {
                        G();
                        return setTimeout(L, 0.01)
                    } : m.requestAnimationFrame;
                    s._mcsid = _request(J)
                }

                function D() {
                    if (s._mcsid == null) {
                        return
                    }
                    if (!m.requestAnimationFrame) {
                        clearTimeout(s._mcsid)
                    } else {
                        m.cancelAnimationFrame(s._mcsid)
                    }
                    s._mcsid = null
                }

                function x(N, M, R, Q, O) {
                    switch (O) {
                        case "linear":
                        case "mcsLinear":
                            return R * N / Q + M;
                            break;
                        case "mcsLinearOut":
                            N /= Q;
                            N--;
                            return R * Math.sqrt(1 - N * N) + M;
                            break;
                        case "easeInOutSmooth":
                            N /= Q / 2;
                            if (N < 1) {
                                return R / 2 * N * N + M
                            }
                            N--;
                            return -R / 2 * (N * (N - 2) - 1) + M;
                            break;
                        case "easeInOutStrong":
                            N /= Q / 2;
                            if (N < 1) {
                                return R / 2 * Math.pow(2, 10 * (N - 1)) + M
                            }
                            N--;
                            return R / 2 * (-Math.pow(2, -10 * N) + 2) + M;
                            break;
                        case "easeInOut":
                        case "mcsEaseInOut":
                            N /= Q / 2;
                            if (N < 1) {
                                return R / 2 * N * N * N + M
                            }
                            N -= 2;
                            return R / 2 * (N * N * N + 2) + M;
                            break;
                        case "easeOutSmooth":
                            N /= Q;
                            N--;
                            return -R * (N * N * N * N - 1) + M;
                            break;
                        case "easeOutStrong":
                            return R * (-Math.pow(2, -10 * N / Q) + 1) + M;
                            break;
                        case "easeOut":
                        case "mcsEaseOut":
                        default:
                            var P = (N /= Q) * N,
                                L = P * N;
                            return M + R * (0.499999999999997 * L * P + -2.5 * P * P + 5.5 * L + -6.5 * P + 4 * N)
                    }
                }
            }, _getTime: function () {
                if (m.performance && m.performance.now) {
                    return m.performance.now()
                } else {
                    if (m.performance && m.performance.webkitNow) {
                        return m.performance.webkitNow()
                    } else {
                        if (Date.now) {
                            return Date.now()
                        } else {
                            return new Date().getTime()
                        }
                    }
                }
            }, _stopTween: function () {
                var q = this;
                if (q._mcsid == null) {
                    return
                }
                if (!m.requestAnimationFrame) {
                    clearTimeout(q._mcsid)
                } else {
                    m.cancelAnimationFrame(q._mcsid)
                }
                q._mcsid = null;
                q._mcsstop = 1
            }, _delete: function (r) {
                try {
                    delete r
                } catch (q) {
                    r = null
                }
            }, _mouseBtnLeft: function (q) {
                return !(q.which && q.which !== 1)
            }, _pointerTouch: function (r) {
                var q = r.originalEvent.pointerType;
                return !(q && q !== "touch" && q !== 2)
            }, _isNumeric: function (q) {
                return !isNaN(parseFloat(q)) && isFinite(q)
            }
        };
    var i = ("https:" == n.location.protocol) ? "https:" : "http:";
    h.fn[e] = function (q) {
        if (b[q]) {
            return b[q].apply(this, Array.prototype.slice.call(arguments, 1))
        } else {
            if (typeof q === "object" || !q) {
                return b.init.apply(this, arguments)
            } else {
                h.error("Method " + q + " does not exist")
            }
        }
    };
    h[e] = function (q) {
        if (b[q]) {
            return b[q].apply(this, Array.prototype.slice.call(arguments, 1))
        } else {
            if (typeof q === "object" || !q) {
                return b.init.apply(this, arguments)
            } else {
                h.error("Method " + q + " does not exist")
            }
        }
    };
    h[e].defaults = f;
    m[e] = true;
    h(m).load(function () {
        h(l)[e]()
    })
})(jQuery, window, document)